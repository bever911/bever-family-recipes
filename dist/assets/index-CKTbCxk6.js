(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function B0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var og={exports:{}},_l={},ag={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var To=Symbol.for("react.element"),z0=Symbol.for("react.portal"),$0=Symbol.for("react.fragment"),W0=Symbol.for("react.strict_mode"),q0=Symbol.for("react.profiler"),H0=Symbol.for("react.provider"),G0=Symbol.for("react.context"),Q0=Symbol.for("react.forward_ref"),K0=Symbol.for("react.suspense"),Y0=Symbol.for("react.memo"),X0=Symbol.for("react.lazy"),zf=Symbol.iterator;function J0(t){return t===null||typeof t!="object"?null:(t=zf&&t[zf]||t["@@iterator"],typeof t=="function"?t:null)}var lg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ug=Object.assign,cg={};function Gi(t,e,n){this.props=t,this.context=e,this.refs=cg,this.updater=n||lg}Gi.prototype.isReactComponent={};Gi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Gi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function hg(){}hg.prototype=Gi.prototype;function hh(t,e,n){this.props=t,this.context=e,this.refs=cg,this.updater=n||lg}var dh=hh.prototype=new hg;dh.constructor=hh;ug(dh,Gi.prototype);dh.isPureReactComponent=!0;var $f=Array.isArray,dg=Object.prototype.hasOwnProperty,fh={current:null},fg={key:!0,ref:!0,__self:!0,__source:!0};function pg(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)dg.call(e,r)&&!fg.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:To,type:t,key:s,ref:a,props:i,_owner:fh.current}}function Z0(t,e){return{$$typeof:To,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ph(t){return typeof t=="object"&&t!==null&&t.$$typeof===To}function ew(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Wf=/\/+/g;function uu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ew(""+t.key):e.toString(36)}function wa(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case To:case z0:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+uu(a,0):r,$f(i)?(n="",t!=null&&(n=t.replace(Wf,"$&/")+"/"),wa(i,e,n,"",function(h){return h})):i!=null&&(ph(i)&&(i=Z0(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Wf,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",$f(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+uu(s,l);a+=wa(s,e,n,u,i)}else if(u=J0(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+uu(s,l++),a+=wa(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Yo(t,e,n){if(t==null)return t;var r=[],i=0;return wa(t,r,"","",function(s){return e.call(n,s,i++)}),r}function tw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var xt={current:null},Ea={transition:null},nw={ReactCurrentDispatcher:xt,ReactCurrentBatchConfig:Ea,ReactCurrentOwner:fh};function mg(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:Yo,forEach:function(t,e,n){Yo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Yo(t,function(){e++}),e},toArray:function(t){return Yo(t,function(e){return e})||[]},only:function(t){if(!ph(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};le.Component=Gi;le.Fragment=$0;le.Profiler=q0;le.PureComponent=hh;le.StrictMode=W0;le.Suspense=K0;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nw;le.act=mg;le.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ug({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=fh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)dg.call(e,u)&&!fg.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:To,type:t.type,key:i,ref:s,props:r,_owner:a}};le.createContext=function(t){return t={$$typeof:G0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:H0,_context:t},t.Consumer=t};le.createElement=pg;le.createFactory=function(t){var e=pg.bind(null,t);return e.type=t,e};le.createRef=function(){return{current:null}};le.forwardRef=function(t){return{$$typeof:Q0,render:t}};le.isValidElement=ph;le.lazy=function(t){return{$$typeof:X0,_payload:{_status:-1,_result:t},_init:tw}};le.memo=function(t,e){return{$$typeof:Y0,type:t,compare:e===void 0?null:e}};le.startTransition=function(t){var e=Ea.transition;Ea.transition={};try{t()}finally{Ea.transition=e}};le.unstable_act=mg;le.useCallback=function(t,e){return xt.current.useCallback(t,e)};le.useContext=function(t){return xt.current.useContext(t)};le.useDebugValue=function(){};le.useDeferredValue=function(t){return xt.current.useDeferredValue(t)};le.useEffect=function(t,e){return xt.current.useEffect(t,e)};le.useId=function(){return xt.current.useId()};le.useImperativeHandle=function(t,e,n){return xt.current.useImperativeHandle(t,e,n)};le.useInsertionEffect=function(t,e){return xt.current.useInsertionEffect(t,e)};le.useLayoutEffect=function(t,e){return xt.current.useLayoutEffect(t,e)};le.useMemo=function(t,e){return xt.current.useMemo(t,e)};le.useReducer=function(t,e,n){return xt.current.useReducer(t,e,n)};le.useRef=function(t){return xt.current.useRef(t)};le.useState=function(t){return xt.current.useState(t)};le.useSyncExternalStore=function(t,e,n){return xt.current.useSyncExternalStore(t,e,n)};le.useTransition=function(){return xt.current.useTransition()};le.version="18.3.1";ag.exports=le;var ee=ag.exports;const rw=B0(ee);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iw=ee,sw=Symbol.for("react.element"),ow=Symbol.for("react.fragment"),aw=Object.prototype.hasOwnProperty,lw=iw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,uw={key:!0,ref:!0,__self:!0,__source:!0};function gg(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)aw.call(e,r)&&!uw.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:sw,type:t,key:s,ref:a,props:i,_owner:lw.current}}_l.Fragment=ow;_l.jsx=gg;_l.jsxs=gg;og.exports=_l;var p=og.exports,Hu={},yg={exports:{}},$t={},_g={exports:{}},vg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,Q){var ne=G.length;G.push(Q);e:for(;0<ne;){var ge=ne-1>>>1,oe=G[ge];if(0<i(oe,Q))G[ge]=Q,G[ne]=oe,ne=ge;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var Q=G[0],ne=G.pop();if(ne!==Q){G[0]=ne;e:for(var ge=0,oe=G.length,$=oe>>>1;ge<$;){var ae=2*(ge+1)-1,ye=G[ae],me=ae+1,Pe=G[me];if(0>i(ye,ne))me<oe&&0>i(Pe,ye)?(G[ge]=Pe,G[me]=ne,ge=me):(G[ge]=ye,G[ae]=ne,ge=ae);else if(me<oe&&0>i(Pe,ne))G[ge]=Pe,G[me]=ne,ge=me;else break e}}return Q}function i(G,Q){var ne=G.sortIndex-Q.sortIndex;return ne!==0?ne:G.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],h=[],f=1,y=null,_=3,C=!1,N=!1,V=!1,O=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(G){for(var Q=n(h);Q!==null;){if(Q.callback===null)r(h);else if(Q.startTime<=G)r(h),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=n(h)}}function M(G){if(V=!1,A(G),!N)if(n(u)!==null)N=!0,_t(W);else{var Q=n(h);Q!==null&&ke(M,Q.startTime-G)}}function W(G,Q){N=!1,V&&(V=!1,x(g),g=-1),C=!0;var ne=_;try{for(A(Q),y=n(u);y!==null&&(!(y.expirationTime>Q)||G&&!k());){var ge=y.callback;if(typeof ge=="function"){y.callback=null,_=y.priorityLevel;var oe=ge(y.expirationTime<=Q);Q=t.unstable_now(),typeof oe=="function"?y.callback=oe:y===n(u)&&r(u),A(Q)}else r(u);y=n(u)}if(y!==null)var $=!0;else{var ae=n(h);ae!==null&&ke(M,ae.startTime-Q),$=!1}return $}finally{y=null,_=ne,C=!1}}var q=!1,E=null,g=-1,T=5,S=-1;function k(){return!(t.unstable_now()-S<T)}function D(){if(E!==null){var G=t.unstable_now();S=G;var Q=!0;try{Q=E(!0,G)}finally{Q?I():(q=!1,E=null)}}else q=!1}var I;if(typeof w=="function")I=function(){w(D)};else if(typeof MessageChannel<"u"){var $e=new MessageChannel,We=$e.port2;$e.port1.onmessage=D,I=function(){We.postMessage(null)}}else I=function(){O(D,0)};function _t(G){E=G,q||(q=!0,I())}function ke(G,Q){g=O(function(){G(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){N||C||(N=!0,_t(W))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(G){switch(_){case 1:case 2:case 3:var Q=3;break;default:Q=_}var ne=_;_=Q;try{return G()}finally{_=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,Q){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ne=_;_=G;try{return Q()}finally{_=ne}},t.unstable_scheduleCallback=function(G,Q,ne){var ge=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?ge+ne:ge):ne=ge,G){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=ne+oe,G={id:f++,callback:Q,priorityLevel:G,startTime:ne,expirationTime:oe,sortIndex:-1},ne>ge?(G.sortIndex=ne,e(h,G),n(u)===null&&G===n(h)&&(V?(x(g),g=-1):V=!0,ke(M,ne-ge))):(G.sortIndex=oe,e(u,G),N||C||(N=!0,_t(W))),G},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(G){var Q=_;return function(){var ne=_;_=Q;try{return G.apply(this,arguments)}finally{_=ne}}}})(vg);_g.exports=vg;var cw=_g.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hw=ee,zt=cw;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wg=new Set,Qs={};function Qr(t,e){Di(t,e),Di(t+"Capture",e)}function Di(t,e){for(Qs[t]=e,t=0;t<e.length;t++)wg.add(e[t])}var Dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gu=Object.prototype.hasOwnProperty,dw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qf={},Hf={};function fw(t){return Gu.call(Hf,t)?!0:Gu.call(qf,t)?!1:dw.test(t)?Hf[t]=!0:(qf[t]=!0,!1)}function pw(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function mw(t,e,n,r){if(e===null||typeof e>"u"||pw(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function At(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ot[t]=new At(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ot[e]=new At(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ot[t]=new At(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ot[t]=new At(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ot[t]=new At(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ot[t]=new At(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ot[t]=new At(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ot[t]=new At(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ot[t]=new At(t,5,!1,t.toLowerCase(),null,!1,!1)});var mh=/[\-:]([a-z])/g;function gh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(mh,gh);ot[e]=new At(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(mh,gh);ot[e]=new At(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(mh,gh);ot[e]=new At(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ot[t]=new At(t,1,!1,t.toLowerCase(),null,!1,!1)});ot.xlinkHref=new At("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ot[t]=new At(t,1,!1,t.toLowerCase(),null,!0,!0)});function yh(t,e,n,r){var i=ot.hasOwnProperty(e)?ot[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(mw(e,n,i,r)&&(n=null),r||i===null?fw(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Fn=hw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xo=Symbol.for("react.element"),hi=Symbol.for("react.portal"),di=Symbol.for("react.fragment"),_h=Symbol.for("react.strict_mode"),Qu=Symbol.for("react.profiler"),Eg=Symbol.for("react.provider"),Tg=Symbol.for("react.context"),vh=Symbol.for("react.forward_ref"),Ku=Symbol.for("react.suspense"),Yu=Symbol.for("react.suspense_list"),wh=Symbol.for("react.memo"),Hn=Symbol.for("react.lazy"),Ig=Symbol.for("react.offscreen"),Gf=Symbol.iterator;function gs(t){return t===null||typeof t!="object"?null:(t=Gf&&t[Gf]||t["@@iterator"],typeof t=="function"?t:null)}var Ve=Object.assign,cu;function As(t){if(cu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);cu=e&&e[1]||""}return`
`+cu+t}var hu=!1;function du(t,e){if(!t||hu)return"";hu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,l=s.length-1;1<=a&&0<=l&&i[a]!==s[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==s[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==s[l]){var u=`
`+i[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=l);break}}}finally{hu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?As(t):""}function gw(t){switch(t.tag){case 5:return As(t.type);case 16:return As("Lazy");case 13:return As("Suspense");case 19:return As("SuspenseList");case 0:case 2:case 15:return t=du(t.type,!1),t;case 11:return t=du(t.type.render,!1),t;case 1:return t=du(t.type,!0),t;default:return""}}function Xu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case di:return"Fragment";case hi:return"Portal";case Qu:return"Profiler";case _h:return"StrictMode";case Ku:return"Suspense";case Yu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Tg:return(t.displayName||"Context")+".Consumer";case Eg:return(t._context.displayName||"Context")+".Provider";case vh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case wh:return e=t.displayName||null,e!==null?e:Xu(t.type)||"Memo";case Hn:e=t._payload,t=t._init;try{return Xu(t(e))}catch{}}return null}function yw(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xu(e);case 8:return e===_h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Sg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function _w(t){var e=Sg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Jo(t){t._valueTracker||(t._valueTracker=_w(t))}function xg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Sg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Oa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ju(t,e){var n=e.checked;return Ve({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Qf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=fr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ag(t,e){e=e.checked,e!=null&&yh(t,"checked",e,!1)}function Zu(t,e){Ag(t,e);var n=fr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ec(t,e.type,n):e.hasOwnProperty("defaultValue")&&ec(t,e.type,fr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Kf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ec(t,e,n){(e!=="number"||Oa(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Cs=Array.isArray;function Si(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+fr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function tc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Ve({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Yf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(Cs(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:fr(n)}}function Cg(t,e){var n=fr(e.value),r=fr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Xf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Rg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Rg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Zo,kg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Zo=Zo||document.createElement("div"),Zo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Zo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ks(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Vs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vw=["Webkit","ms","Moz","O"];Object.keys(Vs).forEach(function(t){vw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Vs[e]=Vs[t]})});function Pg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Vs.hasOwnProperty(t)&&Vs[t]?(""+e).trim():e+"px"}function Dg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Pg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var ww=Ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rc(t,e){if(e){if(ww[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function ic(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sc=null;function Eh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var oc=null,xi=null,Ai=null;function Jf(t){if(t=xo(t)){if(typeof oc!="function")throw Error(z(280));var e=t.stateNode;e&&(e=Il(e),oc(t.stateNode,t.type,e))}}function Ng(t){xi?Ai?Ai.push(t):Ai=[t]:xi=t}function bg(){if(xi){var t=xi,e=Ai;if(Ai=xi=null,Jf(t),e)for(t=0;t<e.length;t++)Jf(e[t])}}function Vg(t,e){return t(e)}function Mg(){}var fu=!1;function Lg(t,e,n){if(fu)return t(e,n);fu=!0;try{return Vg(t,e,n)}finally{fu=!1,(xi!==null||Ai!==null)&&(Mg(),bg())}}function Ys(t,e){var n=t.stateNode;if(n===null)return null;var r=Il(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var ac=!1;if(Dn)try{var ys={};Object.defineProperty(ys,"passive",{get:function(){ac=!0}}),window.addEventListener("test",ys,ys),window.removeEventListener("test",ys,ys)}catch{ac=!1}function Ew(t,e,n,r,i,s,a,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(f){this.onError(f)}}var Ms=!1,Fa=null,ja=!1,lc=null,Tw={onError:function(t){Ms=!0,Fa=t}};function Iw(t,e,n,r,i,s,a,l,u){Ms=!1,Fa=null,Ew.apply(Tw,arguments)}function Sw(t,e,n,r,i,s,a,l,u){if(Iw.apply(this,arguments),Ms){if(Ms){var h=Fa;Ms=!1,Fa=null}else throw Error(z(198));ja||(ja=!0,lc=h)}}function Kr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Og(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Zf(t){if(Kr(t)!==t)throw Error(z(188))}function xw(t){var e=t.alternate;if(!e){if(e=Kr(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Zf(i),t;if(s===r)return Zf(i),e;s=s.sibling}throw Error(z(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function Fg(t){return t=xw(t),t!==null?jg(t):null}function jg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=jg(t);if(e!==null)return e;t=t.sibling}return null}var Ug=zt.unstable_scheduleCallback,ep=zt.unstable_cancelCallback,Aw=zt.unstable_shouldYield,Cw=zt.unstable_requestPaint,ze=zt.unstable_now,Rw=zt.unstable_getCurrentPriorityLevel,Th=zt.unstable_ImmediatePriority,Bg=zt.unstable_UserBlockingPriority,Ua=zt.unstable_NormalPriority,kw=zt.unstable_LowPriority,zg=zt.unstable_IdlePriority,vl=null,yn=null;function Pw(t){if(yn&&typeof yn.onCommitFiberRoot=="function")try{yn.onCommitFiberRoot(vl,t,void 0,(t.current.flags&128)===128)}catch{}}var an=Math.clz32?Math.clz32:bw,Dw=Math.log,Nw=Math.LN2;function bw(t){return t>>>=0,t===0?32:31-(Dw(t)/Nw|0)|0}var ea=64,ta=4194304;function Rs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ba(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~i;l!==0?r=Rs(l):(s&=a,s!==0&&(r=Rs(s)))}else a=n&~i,a!==0?r=Rs(a):s!==0&&(r=Rs(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-an(e),i=1<<n,r|=t[n],e&=~i;return r}function Vw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-an(s),l=1<<a,u=i[a];u===-1?(!(l&n)||l&r)&&(i[a]=Vw(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function uc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $g(){var t=ea;return ea<<=1,!(ea&4194240)&&(ea=64),t}function pu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Io(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-an(e),t[e]=n}function Lw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-an(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Ih(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-an(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ve=0;function Wg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var qg,Sh,Hg,Gg,Qg,cc=!1,na=[],er=null,tr=null,nr=null,Xs=new Map,Js=new Map,Qn=[],Ow="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tp(t,e){switch(t){case"focusin":case"focusout":er=null;break;case"dragenter":case"dragleave":tr=null;break;case"mouseover":case"mouseout":nr=null;break;case"pointerover":case"pointerout":Xs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Js.delete(e.pointerId)}}function _s(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=xo(e),e!==null&&Sh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Fw(t,e,n,r,i){switch(e){case"focusin":return er=_s(er,t,e,n,r,i),!0;case"dragenter":return tr=_s(tr,t,e,n,r,i),!0;case"mouseover":return nr=_s(nr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Xs.set(s,_s(Xs.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Js.set(s,_s(Js.get(s)||null,t,e,n,r,i)),!0}return!1}function Kg(t){var e=Pr(t.target);if(e!==null){var n=Kr(e);if(n!==null){if(e=n.tag,e===13){if(e=Og(n),e!==null){t.blockedOn=e,Qg(t.priority,function(){Hg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ta(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=hc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);sc=r,n.target.dispatchEvent(r),sc=null}else return e=xo(n),e!==null&&Sh(e),t.blockedOn=n,!1;e.shift()}return!0}function np(t,e,n){Ta(t)&&n.delete(e)}function jw(){cc=!1,er!==null&&Ta(er)&&(er=null),tr!==null&&Ta(tr)&&(tr=null),nr!==null&&Ta(nr)&&(nr=null),Xs.forEach(np),Js.forEach(np)}function vs(t,e){t.blockedOn===e&&(t.blockedOn=null,cc||(cc=!0,zt.unstable_scheduleCallback(zt.unstable_NormalPriority,jw)))}function Zs(t){function e(i){return vs(i,t)}if(0<na.length){vs(na[0],t);for(var n=1;n<na.length;n++){var r=na[n];r.blockedOn===t&&(r.blockedOn=null)}}for(er!==null&&vs(er,t),tr!==null&&vs(tr,t),nr!==null&&vs(nr,t),Xs.forEach(e),Js.forEach(e),n=0;n<Qn.length;n++)r=Qn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Qn.length&&(n=Qn[0],n.blockedOn===null);)Kg(n),n.blockedOn===null&&Qn.shift()}var Ci=Fn.ReactCurrentBatchConfig,za=!0;function Uw(t,e,n,r){var i=ve,s=Ci.transition;Ci.transition=null;try{ve=1,xh(t,e,n,r)}finally{ve=i,Ci.transition=s}}function Bw(t,e,n,r){var i=ve,s=Ci.transition;Ci.transition=null;try{ve=4,xh(t,e,n,r)}finally{ve=i,Ci.transition=s}}function xh(t,e,n,r){if(za){var i=hc(t,e,n,r);if(i===null)Su(t,e,r,$a,n),tp(t,r);else if(Fw(i,t,e,n,r))r.stopPropagation();else if(tp(t,r),e&4&&-1<Ow.indexOf(t)){for(;i!==null;){var s=xo(i);if(s!==null&&qg(s),s=hc(t,e,n,r),s===null&&Su(t,e,r,$a,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Su(t,e,r,null,n)}}var $a=null;function hc(t,e,n,r){if($a=null,t=Eh(r),t=Pr(t),t!==null)if(e=Kr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Og(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return $a=t,null}function Yg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Rw()){case Th:return 1;case Bg:return 4;case Ua:case kw:return 16;case zg:return 536870912;default:return 16}default:return 16}}var Xn=null,Ah=null,Ia=null;function Xg(){if(Ia)return Ia;var t,e=Ah,n=e.length,r,i="value"in Xn?Xn.value:Xn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return Ia=i.slice(t,1<r?1-r:void 0)}function Sa(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ra(){return!0}function rp(){return!1}function Wt(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ra:rp,this.isPropagationStopped=rp,this}return Ve(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ra)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ra)},persist:function(){},isPersistent:ra}),e}var Qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ch=Wt(Qi),So=Ve({},Qi,{view:0,detail:0}),zw=Wt(So),mu,gu,ws,wl=Ve({},So,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ws&&(ws&&t.type==="mousemove"?(mu=t.screenX-ws.screenX,gu=t.screenY-ws.screenY):gu=mu=0,ws=t),mu)},movementY:function(t){return"movementY"in t?t.movementY:gu}}),ip=Wt(wl),$w=Ve({},wl,{dataTransfer:0}),Ww=Wt($w),qw=Ve({},So,{relatedTarget:0}),yu=Wt(qw),Hw=Ve({},Qi,{animationName:0,elapsedTime:0,pseudoElement:0}),Gw=Wt(Hw),Qw=Ve({},Qi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Kw=Wt(Qw),Yw=Ve({},Qi,{data:0}),sp=Wt(Yw),Xw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Zw[t])?!!e[t]:!1}function Rh(){return eE}var tE=Ve({},So,{key:function(t){if(t.key){var e=Xw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Sa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Jw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rh,charCode:function(t){return t.type==="keypress"?Sa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Sa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),nE=Wt(tE),rE=Ve({},wl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),op=Wt(rE),iE=Ve({},So,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rh}),sE=Wt(iE),oE=Ve({},Qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),aE=Wt(oE),lE=Ve({},wl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),uE=Wt(lE),cE=[9,13,27,32],kh=Dn&&"CompositionEvent"in window,Ls=null;Dn&&"documentMode"in document&&(Ls=document.documentMode);var hE=Dn&&"TextEvent"in window&&!Ls,Jg=Dn&&(!kh||Ls&&8<Ls&&11>=Ls),ap=" ",lp=!1;function Zg(t,e){switch(t){case"keyup":return cE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ey(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var fi=!1;function dE(t,e){switch(t){case"compositionend":return ey(e);case"keypress":return e.which!==32?null:(lp=!0,ap);case"textInput":return t=e.data,t===ap&&lp?null:t;default:return null}}function fE(t,e){if(fi)return t==="compositionend"||!kh&&Zg(t,e)?(t=Xg(),Ia=Ah=Xn=null,fi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Jg&&e.locale!=="ko"?null:e.data;default:return null}}var pE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function up(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!pE[t.type]:e==="textarea"}function ty(t,e,n,r){Ng(r),e=Wa(e,"onChange"),0<e.length&&(n=new Ch("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Os=null,eo=null;function mE(t){dy(t,0)}function El(t){var e=gi(t);if(xg(e))return t}function gE(t,e){if(t==="change")return e}var ny=!1;if(Dn){var _u;if(Dn){var vu="oninput"in document;if(!vu){var cp=document.createElement("div");cp.setAttribute("oninput","return;"),vu=typeof cp.oninput=="function"}_u=vu}else _u=!1;ny=_u&&(!document.documentMode||9<document.documentMode)}function hp(){Os&&(Os.detachEvent("onpropertychange",ry),eo=Os=null)}function ry(t){if(t.propertyName==="value"&&El(eo)){var e=[];ty(e,eo,t,Eh(t)),Lg(mE,e)}}function yE(t,e,n){t==="focusin"?(hp(),Os=e,eo=n,Os.attachEvent("onpropertychange",ry)):t==="focusout"&&hp()}function _E(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return El(eo)}function vE(t,e){if(t==="click")return El(e)}function wE(t,e){if(t==="input"||t==="change")return El(e)}function EE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var cn=typeof Object.is=="function"?Object.is:EE;function to(t,e){if(cn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Gu.call(e,i)||!cn(t[i],e[i]))return!1}return!0}function dp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fp(t,e){var n=dp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=dp(n)}}function iy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?iy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function sy(){for(var t=window,e=Oa();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Oa(t.document)}return e}function Ph(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function TE(t){var e=sy(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&iy(n.ownerDocument.documentElement,n)){if(r!==null&&Ph(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=fp(n,s);var a=fp(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var IE=Dn&&"documentMode"in document&&11>=document.documentMode,pi=null,dc=null,Fs=null,fc=!1;function pp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;fc||pi==null||pi!==Oa(r)||(r=pi,"selectionStart"in r&&Ph(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Fs&&to(Fs,r)||(Fs=r,r=Wa(dc,"onSelect"),0<r.length&&(e=new Ch("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=pi)))}function ia(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var mi={animationend:ia("Animation","AnimationEnd"),animationiteration:ia("Animation","AnimationIteration"),animationstart:ia("Animation","AnimationStart"),transitionend:ia("Transition","TransitionEnd")},wu={},oy={};Dn&&(oy=document.createElement("div").style,"AnimationEvent"in window||(delete mi.animationend.animation,delete mi.animationiteration.animation,delete mi.animationstart.animation),"TransitionEvent"in window||delete mi.transitionend.transition);function Tl(t){if(wu[t])return wu[t];if(!mi[t])return t;var e=mi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in oy)return wu[t]=e[n];return t}var ay=Tl("animationend"),ly=Tl("animationiteration"),uy=Tl("animationstart"),cy=Tl("transitionend"),hy=new Map,mp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _r(t,e){hy.set(t,e),Qr(e,[t])}for(var Eu=0;Eu<mp.length;Eu++){var Tu=mp[Eu],SE=Tu.toLowerCase(),xE=Tu[0].toUpperCase()+Tu.slice(1);_r(SE,"on"+xE)}_r(ay,"onAnimationEnd");_r(ly,"onAnimationIteration");_r(uy,"onAnimationStart");_r("dblclick","onDoubleClick");_r("focusin","onFocus");_r("focusout","onBlur");_r(cy,"onTransitionEnd");Di("onMouseEnter",["mouseout","mouseover"]);Di("onMouseLeave",["mouseout","mouseover"]);Di("onPointerEnter",["pointerout","pointerover"]);Di("onPointerLeave",["pointerout","pointerover"]);Qr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ks="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AE=new Set("cancel close invalid load scroll toggle".split(" ").concat(ks));function gp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Sw(r,e,void 0,t),t.currentTarget=null}function dy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;gp(i,l,h),s=u}else for(a=0;a<r.length;a++){if(l=r[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;gp(i,l,h),s=u}}}if(ja)throw t=lc,ja=!1,lc=null,t}function xe(t,e){var n=e[_c];n===void 0&&(n=e[_c]=new Set);var r=t+"__bubble";n.has(r)||(fy(e,t,2,!1),n.add(r))}function Iu(t,e,n){var r=0;e&&(r|=4),fy(n,t,r,e)}var sa="_reactListening"+Math.random().toString(36).slice(2);function no(t){if(!t[sa]){t[sa]=!0,wg.forEach(function(n){n!=="selectionchange"&&(AE.has(n)||Iu(n,!1,t),Iu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[sa]||(e[sa]=!0,Iu("selectionchange",!1,e))}}function fy(t,e,n,r){switch(Yg(e)){case 1:var i=Uw;break;case 4:i=Bw;break;default:i=xh}n=i.bind(null,e,n,t),i=void 0,!ac||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Su(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;a=a.return}for(;l!==null;){if(a=Pr(l),a===null)return;if(u=a.tag,u===5||u===6){r=s=a;continue e}l=l.parentNode}}r=r.return}Lg(function(){var h=s,f=Eh(n),y=[];e:{var _=hy.get(t);if(_!==void 0){var C=Ch,N=t;switch(t){case"keypress":if(Sa(n)===0)break e;case"keydown":case"keyup":C=nE;break;case"focusin":N="focus",C=yu;break;case"focusout":N="blur",C=yu;break;case"beforeblur":case"afterblur":C=yu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=ip;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=Ww;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=sE;break;case ay:case ly:case uy:C=Gw;break;case cy:C=aE;break;case"scroll":C=zw;break;case"wheel":C=uE;break;case"copy":case"cut":case"paste":C=Kw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=op}var V=(e&4)!==0,O=!V&&t==="scroll",x=V?_!==null?_+"Capture":null:_;V=[];for(var w=h,A;w!==null;){A=w;var M=A.stateNode;if(A.tag===5&&M!==null&&(A=M,x!==null&&(M=Ys(w,x),M!=null&&V.push(ro(w,M,A)))),O)break;w=w.return}0<V.length&&(_=new C(_,N,null,n,f),y.push({event:_,listeners:V}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",C=t==="mouseout"||t==="pointerout",_&&n!==sc&&(N=n.relatedTarget||n.fromElement)&&(Pr(N)||N[Nn]))break e;if((C||_)&&(_=f.window===f?f:(_=f.ownerDocument)?_.defaultView||_.parentWindow:window,C?(N=n.relatedTarget||n.toElement,C=h,N=N?Pr(N):null,N!==null&&(O=Kr(N),N!==O||N.tag!==5&&N.tag!==6)&&(N=null)):(C=null,N=h),C!==N)){if(V=ip,M="onMouseLeave",x="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(V=op,M="onPointerLeave",x="onPointerEnter",w="pointer"),O=C==null?_:gi(C),A=N==null?_:gi(N),_=new V(M,w+"leave",C,n,f),_.target=O,_.relatedTarget=A,M=null,Pr(f)===h&&(V=new V(x,w+"enter",N,n,f),V.target=A,V.relatedTarget=O,M=V),O=M,C&&N)t:{for(V=C,x=N,w=0,A=V;A;A=ai(A))w++;for(A=0,M=x;M;M=ai(M))A++;for(;0<w-A;)V=ai(V),w--;for(;0<A-w;)x=ai(x),A--;for(;w--;){if(V===x||x!==null&&V===x.alternate)break t;V=ai(V),x=ai(x)}V=null}else V=null;C!==null&&yp(y,_,C,V,!1),N!==null&&O!==null&&yp(y,O,N,V,!0)}}e:{if(_=h?gi(h):window,C=_.nodeName&&_.nodeName.toLowerCase(),C==="select"||C==="input"&&_.type==="file")var W=gE;else if(up(_))if(ny)W=wE;else{W=_E;var q=yE}else(C=_.nodeName)&&C.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(W=vE);if(W&&(W=W(t,h))){ty(y,W,n,f);break e}q&&q(t,_,h),t==="focusout"&&(q=_._wrapperState)&&q.controlled&&_.type==="number"&&ec(_,"number",_.value)}switch(q=h?gi(h):window,t){case"focusin":(up(q)||q.contentEditable==="true")&&(pi=q,dc=h,Fs=null);break;case"focusout":Fs=dc=pi=null;break;case"mousedown":fc=!0;break;case"contextmenu":case"mouseup":case"dragend":fc=!1,pp(y,n,f);break;case"selectionchange":if(IE)break;case"keydown":case"keyup":pp(y,n,f)}var E;if(kh)e:{switch(t){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else fi?Zg(t,n)&&(g="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(g="onCompositionStart");g&&(Jg&&n.locale!=="ko"&&(fi||g!=="onCompositionStart"?g==="onCompositionEnd"&&fi&&(E=Xg()):(Xn=f,Ah="value"in Xn?Xn.value:Xn.textContent,fi=!0)),q=Wa(h,g),0<q.length&&(g=new sp(g,t,null,n,f),y.push({event:g,listeners:q}),E?g.data=E:(E=ey(n),E!==null&&(g.data=E)))),(E=hE?dE(t,n):fE(t,n))&&(h=Wa(h,"onBeforeInput"),0<h.length&&(f=new sp("onBeforeInput","beforeinput",null,n,f),y.push({event:f,listeners:h}),f.data=E))}dy(y,e)})}function ro(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Wa(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ys(t,n),s!=null&&r.unshift(ro(t,s,i)),s=Ys(t,e),s!=null&&r.push(ro(t,s,i))),t=t.return}return r}function ai(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function yp(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,i?(u=Ys(n,s),u!=null&&a.unshift(ro(n,u,l))):i||(u=Ys(n,s),u!=null&&a.push(ro(n,u,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var CE=/\r\n?/g,RE=/\u0000|\uFFFD/g;function _p(t){return(typeof t=="string"?t:""+t).replace(CE,`
`).replace(RE,"")}function oa(t,e,n){if(e=_p(e),_p(t)!==e&&n)throw Error(z(425))}function qa(){}var pc=null,mc=null;function gc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var yc=typeof setTimeout=="function"?setTimeout:void 0,kE=typeof clearTimeout=="function"?clearTimeout:void 0,vp=typeof Promise=="function"?Promise:void 0,PE=typeof queueMicrotask=="function"?queueMicrotask:typeof vp<"u"?function(t){return vp.resolve(null).then(t).catch(DE)}:yc;function DE(t){setTimeout(function(){throw t})}function xu(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Zs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Zs(e)}function rr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function wp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ki=Math.random().toString(36).slice(2),mn="__reactFiber$"+Ki,io="__reactProps$"+Ki,Nn="__reactContainer$"+Ki,_c="__reactEvents$"+Ki,NE="__reactListeners$"+Ki,bE="__reactHandles$"+Ki;function Pr(t){var e=t[mn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Nn]||n[mn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=wp(t);t!==null;){if(n=t[mn])return n;t=wp(t)}return e}t=n,n=t.parentNode}return null}function xo(t){return t=t[mn]||t[Nn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function gi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function Il(t){return t[io]||null}var vc=[],yi=-1;function vr(t){return{current:t}}function Ce(t){0>yi||(t.current=vc[yi],vc[yi]=null,yi--)}function Ie(t,e){yi++,vc[yi]=t.current,t.current=e}var pr={},yt=vr(pr),Pt=vr(!1),jr=pr;function Ni(t,e){var n=t.type.contextTypes;if(!n)return pr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Dt(t){return t=t.childContextTypes,t!=null}function Ha(){Ce(Pt),Ce(yt)}function Ep(t,e,n){if(yt.current!==pr)throw Error(z(168));Ie(yt,e),Ie(Pt,n)}function py(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(z(108,yw(t)||"Unknown",i));return Ve({},n,r)}function Ga(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||pr,jr=yt.current,Ie(yt,t),Ie(Pt,Pt.current),!0}function Tp(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=py(t,e,jr),r.__reactInternalMemoizedMergedChildContext=t,Ce(Pt),Ce(yt),Ie(yt,t)):Ce(Pt),Ie(Pt,n)}var Cn=null,Sl=!1,Au=!1;function my(t){Cn===null?Cn=[t]:Cn.push(t)}function VE(t){Sl=!0,my(t)}function wr(){if(!Au&&Cn!==null){Au=!0;var t=0,e=ve;try{var n=Cn;for(ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Cn=null,Sl=!1}catch(i){throw Cn!==null&&(Cn=Cn.slice(t+1)),Ug(Th,wr),i}finally{ve=e,Au=!1}}return null}var _i=[],vi=0,Qa=null,Ka=0,Qt=[],Kt=0,Ur=null,Rn=1,kn="";function Cr(t,e){_i[vi++]=Ka,_i[vi++]=Qa,Qa=t,Ka=e}function gy(t,e,n){Qt[Kt++]=Rn,Qt[Kt++]=kn,Qt[Kt++]=Ur,Ur=t;var r=Rn;t=kn;var i=32-an(r)-1;r&=~(1<<i),n+=1;var s=32-an(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Rn=1<<32-an(e)+i|n<<i|r,kn=s+t}else Rn=1<<s|n<<i|r,kn=t}function Dh(t){t.return!==null&&(Cr(t,1),gy(t,1,0))}function Nh(t){for(;t===Qa;)Qa=_i[--vi],_i[vi]=null,Ka=_i[--vi],_i[vi]=null;for(;t===Ur;)Ur=Qt[--Kt],Qt[Kt]=null,kn=Qt[--Kt],Qt[Kt]=null,Rn=Qt[--Kt],Qt[Kt]=null}var Bt=null,Ft=null,Re=!1,on=null;function yy(t,e){var n=Yt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ip(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Bt=t,Ft=rr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Bt=t,Ft=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ur!==null?{id:Rn,overflow:kn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Yt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Bt=t,Ft=null,!0):!1;default:return!1}}function wc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ec(t){if(Re){var e=Ft;if(e){var n=e;if(!Ip(t,e)){if(wc(t))throw Error(z(418));e=rr(n.nextSibling);var r=Bt;e&&Ip(t,e)?yy(r,n):(t.flags=t.flags&-4097|2,Re=!1,Bt=t)}}else{if(wc(t))throw Error(z(418));t.flags=t.flags&-4097|2,Re=!1,Bt=t}}}function Sp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Bt=t}function aa(t){if(t!==Bt)return!1;if(!Re)return Sp(t),Re=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!gc(t.type,t.memoizedProps)),e&&(e=Ft)){if(wc(t))throw _y(),Error(z(418));for(;e;)yy(t,e),e=rr(e.nextSibling)}if(Sp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ft=rr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ft=null}}else Ft=Bt?rr(t.stateNode.nextSibling):null;return!0}function _y(){for(var t=Ft;t;)t=rr(t.nextSibling)}function bi(){Ft=Bt=null,Re=!1}function bh(t){on===null?on=[t]:on.push(t)}var ME=Fn.ReactCurrentBatchConfig;function Es(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var l=i.refs;a===null?delete l[s]:l[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function la(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function xp(t){var e=t._init;return e(t._payload)}function vy(t){function e(x,w){if(t){var A=x.deletions;A===null?(x.deletions=[w],x.flags|=16):A.push(w)}}function n(x,w){if(!t)return null;for(;w!==null;)e(x,w),w=w.sibling;return null}function r(x,w){for(x=new Map;w!==null;)w.key!==null?x.set(w.key,w):x.set(w.index,w),w=w.sibling;return x}function i(x,w){return x=ar(x,w),x.index=0,x.sibling=null,x}function s(x,w,A){return x.index=A,t?(A=x.alternate,A!==null?(A=A.index,A<w?(x.flags|=2,w):A):(x.flags|=2,w)):(x.flags|=1048576,w)}function a(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,w,A,M){return w===null||w.tag!==6?(w=bu(A,x.mode,M),w.return=x,w):(w=i(w,A),w.return=x,w)}function u(x,w,A,M){var W=A.type;return W===di?f(x,w,A.props.children,M,A.key):w!==null&&(w.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Hn&&xp(W)===w.type)?(M=i(w,A.props),M.ref=Es(x,w,A),M.return=x,M):(M=Da(A.type,A.key,A.props,null,x.mode,M),M.ref=Es(x,w,A),M.return=x,M)}function h(x,w,A,M){return w===null||w.tag!==4||w.stateNode.containerInfo!==A.containerInfo||w.stateNode.implementation!==A.implementation?(w=Vu(A,x.mode,M),w.return=x,w):(w=i(w,A.children||[]),w.return=x,w)}function f(x,w,A,M,W){return w===null||w.tag!==7?(w=Mr(A,x.mode,M,W),w.return=x,w):(w=i(w,A),w.return=x,w)}function y(x,w,A){if(typeof w=="string"&&w!==""||typeof w=="number")return w=bu(""+w,x.mode,A),w.return=x,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Xo:return A=Da(w.type,w.key,w.props,null,x.mode,A),A.ref=Es(x,null,w),A.return=x,A;case hi:return w=Vu(w,x.mode,A),w.return=x,w;case Hn:var M=w._init;return y(x,M(w._payload),A)}if(Cs(w)||gs(w))return w=Mr(w,x.mode,A,null),w.return=x,w;la(x,w)}return null}function _(x,w,A,M){var W=w!==null?w.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return W!==null?null:l(x,w,""+A,M);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Xo:return A.key===W?u(x,w,A,M):null;case hi:return A.key===W?h(x,w,A,M):null;case Hn:return W=A._init,_(x,w,W(A._payload),M)}if(Cs(A)||gs(A))return W!==null?null:f(x,w,A,M,null);la(x,A)}return null}function C(x,w,A,M,W){if(typeof M=="string"&&M!==""||typeof M=="number")return x=x.get(A)||null,l(w,x,""+M,W);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Xo:return x=x.get(M.key===null?A:M.key)||null,u(w,x,M,W);case hi:return x=x.get(M.key===null?A:M.key)||null,h(w,x,M,W);case Hn:var q=M._init;return C(x,w,A,q(M._payload),W)}if(Cs(M)||gs(M))return x=x.get(A)||null,f(w,x,M,W,null);la(w,M)}return null}function N(x,w,A,M){for(var W=null,q=null,E=w,g=w=0,T=null;E!==null&&g<A.length;g++){E.index>g?(T=E,E=null):T=E.sibling;var S=_(x,E,A[g],M);if(S===null){E===null&&(E=T);break}t&&E&&S.alternate===null&&e(x,E),w=s(S,w,g),q===null?W=S:q.sibling=S,q=S,E=T}if(g===A.length)return n(x,E),Re&&Cr(x,g),W;if(E===null){for(;g<A.length;g++)E=y(x,A[g],M),E!==null&&(w=s(E,w,g),q===null?W=E:q.sibling=E,q=E);return Re&&Cr(x,g),W}for(E=r(x,E);g<A.length;g++)T=C(E,x,g,A[g],M),T!==null&&(t&&T.alternate!==null&&E.delete(T.key===null?g:T.key),w=s(T,w,g),q===null?W=T:q.sibling=T,q=T);return t&&E.forEach(function(k){return e(x,k)}),Re&&Cr(x,g),W}function V(x,w,A,M){var W=gs(A);if(typeof W!="function")throw Error(z(150));if(A=W.call(A),A==null)throw Error(z(151));for(var q=W=null,E=w,g=w=0,T=null,S=A.next();E!==null&&!S.done;g++,S=A.next()){E.index>g?(T=E,E=null):T=E.sibling;var k=_(x,E,S.value,M);if(k===null){E===null&&(E=T);break}t&&E&&k.alternate===null&&e(x,E),w=s(k,w,g),q===null?W=k:q.sibling=k,q=k,E=T}if(S.done)return n(x,E),Re&&Cr(x,g),W;if(E===null){for(;!S.done;g++,S=A.next())S=y(x,S.value,M),S!==null&&(w=s(S,w,g),q===null?W=S:q.sibling=S,q=S);return Re&&Cr(x,g),W}for(E=r(x,E);!S.done;g++,S=A.next())S=C(E,x,g,S.value,M),S!==null&&(t&&S.alternate!==null&&E.delete(S.key===null?g:S.key),w=s(S,w,g),q===null?W=S:q.sibling=S,q=S);return t&&E.forEach(function(D){return e(x,D)}),Re&&Cr(x,g),W}function O(x,w,A,M){if(typeof A=="object"&&A!==null&&A.type===di&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case Xo:e:{for(var W=A.key,q=w;q!==null;){if(q.key===W){if(W=A.type,W===di){if(q.tag===7){n(x,q.sibling),w=i(q,A.props.children),w.return=x,x=w;break e}}else if(q.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Hn&&xp(W)===q.type){n(x,q.sibling),w=i(q,A.props),w.ref=Es(x,q,A),w.return=x,x=w;break e}n(x,q);break}else e(x,q);q=q.sibling}A.type===di?(w=Mr(A.props.children,x.mode,M,A.key),w.return=x,x=w):(M=Da(A.type,A.key,A.props,null,x.mode,M),M.ref=Es(x,w,A),M.return=x,x=M)}return a(x);case hi:e:{for(q=A.key;w!==null;){if(w.key===q)if(w.tag===4&&w.stateNode.containerInfo===A.containerInfo&&w.stateNode.implementation===A.implementation){n(x,w.sibling),w=i(w,A.children||[]),w.return=x,x=w;break e}else{n(x,w);break}else e(x,w);w=w.sibling}w=Vu(A,x.mode,M),w.return=x,x=w}return a(x);case Hn:return q=A._init,O(x,w,q(A._payload),M)}if(Cs(A))return N(x,w,A,M);if(gs(A))return V(x,w,A,M);la(x,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,w!==null&&w.tag===6?(n(x,w.sibling),w=i(w,A),w.return=x,x=w):(n(x,w),w=bu(A,x.mode,M),w.return=x,x=w),a(x)):n(x,w)}return O}var Vi=vy(!0),wy=vy(!1),Ya=vr(null),Xa=null,wi=null,Vh=null;function Mh(){Vh=wi=Xa=null}function Lh(t){var e=Ya.current;Ce(Ya),t._currentValue=e}function Tc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ri(t,e){Xa=t,Vh=wi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(kt=!0),t.firstContext=null)}function Jt(t){var e=t._currentValue;if(Vh!==t)if(t={context:t,memoizedValue:e,next:null},wi===null){if(Xa===null)throw Error(z(308));wi=t,Xa.dependencies={lanes:0,firstContext:t}}else wi=wi.next=t;return e}var Dr=null;function Oh(t){Dr===null?Dr=[t]:Dr.push(t)}function Ey(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Oh(e)):(n.next=i.next,i.next=n),e.interleaved=n,bn(t,r)}function bn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Gn=!1;function Fh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ty(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Pn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ir(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,de&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,bn(t,n)}return i=r.interleaved,i===null?(e.next=e,Oh(r)):(e.next=i.next,i.next=e),r.interleaved=e,bn(t,n)}function xa(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ih(t,n)}}function Ap(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ja(t,e,n,r){var i=t.updateQueue;Gn=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?s=h:a.next=h,a=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==a&&(l===null?f.firstBaseUpdate=h:l.next=h,f.lastBaseUpdate=u))}if(s!==null){var y=i.baseState;a=0,f=h=u=null,l=s;do{var _=l.lane,C=l.eventTime;if((r&_)===_){f!==null&&(f=f.next={eventTime:C,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var N=t,V=l;switch(_=e,C=n,V.tag){case 1:if(N=V.payload,typeof N=="function"){y=N.call(C,y,_);break e}y=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=V.payload,_=typeof N=="function"?N.call(C,y,_):N,_==null)break e;y=Ve({},y,_);break e;case 2:Gn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,_=i.effects,_===null?i.effects=[l]:_.push(l))}else C={eventTime:C,lane:_,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(h=f=C,u=y):f=f.next=C,a|=_;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;_=l,l=_.next,_.next=null,i.lastBaseUpdate=_,i.shared.pending=null}}while(!0);if(f===null&&(u=y),i.baseState=u,i.firstBaseUpdate=h,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);zr|=a,t.lanes=a,t.memoizedState=y}}function Cp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(z(191,i));i.call(r)}}}var Ao={},_n=vr(Ao),so=vr(Ao),oo=vr(Ao);function Nr(t){if(t===Ao)throw Error(z(174));return t}function jh(t,e){switch(Ie(oo,e),Ie(so,t),Ie(_n,Ao),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:nc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=nc(e,t)}Ce(_n),Ie(_n,e)}function Mi(){Ce(_n),Ce(so),Ce(oo)}function Iy(t){Nr(oo.current);var e=Nr(_n.current),n=nc(e,t.type);e!==n&&(Ie(so,t),Ie(_n,n))}function Uh(t){so.current===t&&(Ce(_n),Ce(so))}var Ne=vr(0);function Za(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Cu=[];function Bh(){for(var t=0;t<Cu.length;t++)Cu[t]._workInProgressVersionPrimary=null;Cu.length=0}var Aa=Fn.ReactCurrentDispatcher,Ru=Fn.ReactCurrentBatchConfig,Br=0,be=null,Qe=null,Je=null,el=!1,js=!1,ao=0,LE=0;function ht(){throw Error(z(321))}function zh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!cn(t[n],e[n]))return!1;return!0}function $h(t,e,n,r,i,s){if(Br=s,be=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Aa.current=t===null||t.memoizedState===null?UE:BE,t=n(r,i),js){s=0;do{if(js=!1,ao=0,25<=s)throw Error(z(301));s+=1,Je=Qe=null,e.updateQueue=null,Aa.current=zE,t=n(r,i)}while(js)}if(Aa.current=tl,e=Qe!==null&&Qe.next!==null,Br=0,Je=Qe=be=null,el=!1,e)throw Error(z(300));return t}function Wh(){var t=ao!==0;return ao=0,t}function pn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?be.memoizedState=Je=t:Je=Je.next=t,Je}function Zt(){if(Qe===null){var t=be.alternate;t=t!==null?t.memoizedState:null}else t=Qe.next;var e=Je===null?be.memoizedState:Je.next;if(e!==null)Je=e,Qe=t;else{if(t===null)throw Error(z(310));Qe=t,t={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},Je===null?be.memoizedState=Je=t:Je=Je.next=t}return Je}function lo(t,e){return typeof e=="function"?e(t):e}function ku(t){var e=Zt(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=Qe,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=a=null,u=null,h=s;do{var f=h.lane;if((Br&f)===f)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var y={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=y,a=r):u=u.next=y,be.lanes|=f,zr|=f}h=h.next}while(h!==null&&h!==s);u===null?a=r:u.next=l,cn(r,e.memoizedState)||(kt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,be.lanes|=s,zr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Pu(t){var e=Zt(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);cn(s,e.memoizedState)||(kt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Sy(){}function xy(t,e){var n=be,r=Zt(),i=e(),s=!cn(r.memoizedState,i);if(s&&(r.memoizedState=i,kt=!0),r=r.queue,qh(Ry.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Je!==null&&Je.memoizedState.tag&1){if(n.flags|=2048,uo(9,Cy.bind(null,n,r,i,e),void 0,null),Ze===null)throw Error(z(349));Br&30||Ay(n,e,i)}return i}function Ay(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Cy(t,e,n,r){e.value=n,e.getSnapshot=r,ky(e)&&Py(t)}function Ry(t,e,n){return n(function(){ky(e)&&Py(t)})}function ky(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!cn(t,n)}catch{return!0}}function Py(t){var e=bn(t,1);e!==null&&ln(e,t,1,-1)}function Rp(t){var e=pn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:lo,lastRenderedState:t},e.queue=t,t=t.dispatch=jE.bind(null,be,t),[e.memoizedState,t]}function uo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Dy(){return Zt().memoizedState}function Ca(t,e,n,r){var i=pn();be.flags|=t,i.memoizedState=uo(1|e,n,void 0,r===void 0?null:r)}function xl(t,e,n,r){var i=Zt();r=r===void 0?null:r;var s=void 0;if(Qe!==null){var a=Qe.memoizedState;if(s=a.destroy,r!==null&&zh(r,a.deps)){i.memoizedState=uo(e,n,s,r);return}}be.flags|=t,i.memoizedState=uo(1|e,n,s,r)}function kp(t,e){return Ca(8390656,8,t,e)}function qh(t,e){return xl(2048,8,t,e)}function Ny(t,e){return xl(4,2,t,e)}function by(t,e){return xl(4,4,t,e)}function Vy(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function My(t,e,n){return n=n!=null?n.concat([t]):null,xl(4,4,Vy.bind(null,e,t),n)}function Hh(){}function Ly(t,e){var n=Zt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&zh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Oy(t,e){var n=Zt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&zh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Fy(t,e,n){return Br&21?(cn(n,e)||(n=$g(),be.lanes|=n,zr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,kt=!0),t.memoizedState=n)}function OE(t,e){var n=ve;ve=n!==0&&4>n?n:4,t(!0);var r=Ru.transition;Ru.transition={};try{t(!1),e()}finally{ve=n,Ru.transition=r}}function jy(){return Zt().memoizedState}function FE(t,e,n){var r=or(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Uy(t))By(e,n);else if(n=Ey(t,e,n,r),n!==null){var i=It();ln(n,t,r,i),zy(n,e,r)}}function jE(t,e,n){var r=or(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Uy(t))By(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,l=s(a,n);if(i.hasEagerState=!0,i.eagerState=l,cn(l,a)){var u=e.interleaved;u===null?(i.next=i,Oh(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=Ey(t,e,i,r),n!==null&&(i=It(),ln(n,t,r,i),zy(n,e,r))}}function Uy(t){var e=t.alternate;return t===be||e!==null&&e===be}function By(t,e){js=el=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function zy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ih(t,n)}}var tl={readContext:Jt,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useInsertionEffect:ht,useLayoutEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useMutableSource:ht,useSyncExternalStore:ht,useId:ht,unstable_isNewReconciler:!1},UE={readContext:Jt,useCallback:function(t,e){return pn().memoizedState=[t,e===void 0?null:e],t},useContext:Jt,useEffect:kp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ca(4194308,4,Vy.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ca(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ca(4,2,t,e)},useMemo:function(t,e){var n=pn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=pn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=FE.bind(null,be,t),[r.memoizedState,t]},useRef:function(t){var e=pn();return t={current:t},e.memoizedState=t},useState:Rp,useDebugValue:Hh,useDeferredValue:function(t){return pn().memoizedState=t},useTransition:function(){var t=Rp(!1),e=t[0];return t=OE.bind(null,t[1]),pn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=be,i=pn();if(Re){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),Ze===null)throw Error(z(349));Br&30||Ay(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,kp(Ry.bind(null,r,s,t),[t]),r.flags|=2048,uo(9,Cy.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=pn(),e=Ze.identifierPrefix;if(Re){var n=kn,r=Rn;n=(r&~(1<<32-an(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ao++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=LE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},BE={readContext:Jt,useCallback:Ly,useContext:Jt,useEffect:qh,useImperativeHandle:My,useInsertionEffect:Ny,useLayoutEffect:by,useMemo:Oy,useReducer:ku,useRef:Dy,useState:function(){return ku(lo)},useDebugValue:Hh,useDeferredValue:function(t){var e=Zt();return Fy(e,Qe.memoizedState,t)},useTransition:function(){var t=ku(lo)[0],e=Zt().memoizedState;return[t,e]},useMutableSource:Sy,useSyncExternalStore:xy,useId:jy,unstable_isNewReconciler:!1},zE={readContext:Jt,useCallback:Ly,useContext:Jt,useEffect:qh,useImperativeHandle:My,useInsertionEffect:Ny,useLayoutEffect:by,useMemo:Oy,useReducer:Pu,useRef:Dy,useState:function(){return Pu(lo)},useDebugValue:Hh,useDeferredValue:function(t){var e=Zt();return Qe===null?e.memoizedState=t:Fy(e,Qe.memoizedState,t)},useTransition:function(){var t=Pu(lo)[0],e=Zt().memoizedState;return[t,e]},useMutableSource:Sy,useSyncExternalStore:xy,useId:jy,unstable_isNewReconciler:!1};function rn(t,e){if(t&&t.defaultProps){e=Ve({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ic(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ve({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Al={isMounted:function(t){return(t=t._reactInternals)?Kr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=It(),i=or(t),s=Pn(r,i);s.payload=e,n!=null&&(s.callback=n),e=ir(t,s,i),e!==null&&(ln(e,t,i,r),xa(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=It(),i=or(t),s=Pn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ir(t,s,i),e!==null&&(ln(e,t,i,r),xa(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=It(),r=or(t),i=Pn(n,r);i.tag=2,e!=null&&(i.callback=e),e=ir(t,i,r),e!==null&&(ln(e,t,r,n),xa(e,t,r))}};function Pp(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!to(n,r)||!to(i,s):!0}function $y(t,e,n){var r=!1,i=pr,s=e.contextType;return typeof s=="object"&&s!==null?s=Jt(s):(i=Dt(e)?jr:yt.current,r=e.contextTypes,s=(r=r!=null)?Ni(t,i):pr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Al,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Dp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Al.enqueueReplaceState(e,e.state,null)}function Sc(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Fh(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Jt(s):(s=Dt(e)?jr:yt.current,i.context=Ni(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Ic(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Al.enqueueReplaceState(i,i.state,null),Ja(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Li(t,e){try{var n="",r=e;do n+=gw(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Du(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function xc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var $E=typeof WeakMap=="function"?WeakMap:Map;function Wy(t,e,n){n=Pn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){rl||(rl=!0,Mc=r),xc(t,e)},n}function qy(t,e,n){n=Pn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){xc(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){xc(t,e),typeof r!="function"&&(sr===null?sr=new Set([this]):sr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Np(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new $E;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=rT.bind(null,t,e,n),e.then(t,t))}function bp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Vp(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Pn(-1,1),e.tag=2,ir(n,e,1))),n.lanes|=1),t)}var WE=Fn.ReactCurrentOwner,kt=!1;function Tt(t,e,n,r){e.child=t===null?wy(e,null,n,r):Vi(e,t.child,n,r)}function Mp(t,e,n,r,i){n=n.render;var s=e.ref;return Ri(e,i),r=$h(t,e,n,r,s,i),n=Wh(),t!==null&&!kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Vn(t,e,i)):(Re&&n&&Dh(e),e.flags|=1,Tt(t,e,r,i),e.child)}function Lp(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!ed(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Hy(t,e,s,r,i)):(t=Da(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:to,n(a,r)&&t.ref===e.ref)return Vn(t,e,i)}return e.flags|=1,t=ar(s,r),t.ref=e.ref,t.return=e,e.child=t}function Hy(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(to(s,r)&&t.ref===e.ref)if(kt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(kt=!0);else return e.lanes=t.lanes,Vn(t,e,i)}return Ac(t,e,n,r,i)}function Gy(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(Ti,Ot),Ot|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ie(Ti,Ot),Ot|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ie(Ti,Ot),Ot|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ie(Ti,Ot),Ot|=r;return Tt(t,e,i,n),e.child}function Qy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ac(t,e,n,r,i){var s=Dt(n)?jr:yt.current;return s=Ni(e,s),Ri(e,i),n=$h(t,e,n,r,s,i),r=Wh(),t!==null&&!kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Vn(t,e,i)):(Re&&r&&Dh(e),e.flags|=1,Tt(t,e,n,i),e.child)}function Op(t,e,n,r,i){if(Dt(n)){var s=!0;Ga(e)}else s=!1;if(Ri(e,i),e.stateNode===null)Ra(t,e),$y(e,n,r),Sc(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var u=a.context,h=n.contextType;typeof h=="object"&&h!==null?h=Jt(h):(h=Dt(n)?jr:yt.current,h=Ni(e,h));var f=n.getDerivedStateFromProps,y=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";y||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||u!==h)&&Dp(e,a,r,h),Gn=!1;var _=e.memoizedState;a.state=_,Ja(e,r,a,i),u=e.memoizedState,l!==r||_!==u||Pt.current||Gn?(typeof f=="function"&&(Ic(e,n,f,r),u=e.memoizedState),(l=Gn||Pp(e,n,l,r,_,u,h))?(y||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=h,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Ty(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:rn(e.type,l),a.props=h,y=e.pendingProps,_=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Jt(u):(u=Dt(n)?jr:yt.current,u=Ni(e,u));var C=n.getDerivedStateFromProps;(f=typeof C=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==y||_!==u)&&Dp(e,a,r,u),Gn=!1,_=e.memoizedState,a.state=_,Ja(e,r,a,i);var N=e.memoizedState;l!==y||_!==N||Pt.current||Gn?(typeof C=="function"&&(Ic(e,n,C,r),N=e.memoizedState),(h=Gn||Pp(e,n,h,r,_,N,u)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,N,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,N,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),a.props=r,a.state=N,a.context=u,r=h):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),r=!1)}return Cc(t,e,n,r,s,i)}function Cc(t,e,n,r,i,s){Qy(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&Tp(e,n,!1),Vn(t,e,s);r=e.stateNode,WE.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Vi(e,t.child,null,s),e.child=Vi(e,null,l,s)):Tt(t,e,l,s),e.memoizedState=r.state,i&&Tp(e,n,!0),e.child}function Ky(t){var e=t.stateNode;e.pendingContext?Ep(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ep(t,e.context,!1),jh(t,e.containerInfo)}function Fp(t,e,n,r,i){return bi(),bh(i),e.flags|=256,Tt(t,e,n,r),e.child}var Rc={dehydrated:null,treeContext:null,retryLane:0};function kc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Yy(t,e,n){var r=e.pendingProps,i=Ne.current,s=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ie(Ne,i&1),t===null)return Ec(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=kl(a,r,0,null),t=Mr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=kc(n),e.memoizedState=Rc,t):Gh(e,a));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return qE(t,e,a,r,l,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=ar(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=ar(l,s):(s=Mr(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?kc(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=Rc,r}return s=t.child,t=s.sibling,r=ar(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Gh(t,e){return e=kl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ua(t,e,n,r){return r!==null&&bh(r),Vi(e,t.child,null,n),t=Gh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function qE(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=Du(Error(z(422))),ua(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=kl({mode:"visible",children:r.children},i,0,null),s=Mr(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Vi(e,t.child,null,a),e.child.memoizedState=kc(a),e.memoizedState=Rc,s);if(!(e.mode&1))return ua(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(z(419)),r=Du(s,r,void 0),ua(t,e,a,r)}if(l=(a&t.childLanes)!==0,kt||l){if(r=Ze,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,bn(t,i),ln(r,t,i,-1))}return Zh(),r=Du(Error(z(421))),ua(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=iT.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Ft=rr(i.nextSibling),Bt=e,Re=!0,on=null,t!==null&&(Qt[Kt++]=Rn,Qt[Kt++]=kn,Qt[Kt++]=Ur,Rn=t.id,kn=t.overflow,Ur=e),e=Gh(e,r.children),e.flags|=4096,e)}function jp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Tc(t.return,e,n)}function Nu(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Xy(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Tt(t,e,r.children,n),r=Ne.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&jp(t,n,e);else if(t.tag===19)jp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ie(Ne,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Za(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Nu(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Za(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Nu(e,!0,n,null,s);break;case"together":Nu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ra(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Vn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),zr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=ar(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ar(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function HE(t,e,n){switch(e.tag){case 3:Ky(e),bi();break;case 5:Iy(e);break;case 1:Dt(e.type)&&Ga(e);break;case 4:jh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ie(Ya,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ie(Ne,Ne.current&1),e.flags|=128,null):n&e.child.childLanes?Yy(t,e,n):(Ie(Ne,Ne.current&1),t=Vn(t,e,n),t!==null?t.sibling:null);Ie(Ne,Ne.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Xy(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ie(Ne,Ne.current),r)break;return null;case 22:case 23:return e.lanes=0,Gy(t,e,n)}return Vn(t,e,n)}var Jy,Pc,Zy,e_;Jy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Pc=function(){};Zy=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Nr(_n.current);var s=null;switch(n){case"input":i=Ju(t,i),r=Ju(t,r),s=[];break;case"select":i=Ve({},i,{value:void 0}),r=Ve({},r,{value:void 0}),s=[];break;case"textarea":i=tc(t,i),r=tc(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=qa)}rc(n,r);var a;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var l=i[h];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Qs.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var u=r[h];if(l=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(s||(s=[]),s.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Qs.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&xe("scroll",t),s||l===u||(s=[])):(s=s||[]).push(h,u))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};e_=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ts(t,e){if(!Re)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function dt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function GE(t,e,n){var r=e.pendingProps;switch(Nh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(e),null;case 1:return Dt(e.type)&&Ha(),dt(e),null;case 3:return r=e.stateNode,Mi(),Ce(Pt),Ce(yt),Bh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(aa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,on!==null&&(Fc(on),on=null))),Pc(t,e),dt(e),null;case 5:Uh(e);var i=Nr(oo.current);if(n=e.type,t!==null&&e.stateNode!=null)Zy(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return dt(e),null}if(t=Nr(_n.current),aa(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[mn]=e,r[io]=s,t=(e.mode&1)!==0,n){case"dialog":xe("cancel",r),xe("close",r);break;case"iframe":case"object":case"embed":xe("load",r);break;case"video":case"audio":for(i=0;i<ks.length;i++)xe(ks[i],r);break;case"source":xe("error",r);break;case"img":case"image":case"link":xe("error",r),xe("load",r);break;case"details":xe("toggle",r);break;case"input":Qf(r,s),xe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},xe("invalid",r);break;case"textarea":Yf(r,s),xe("invalid",r)}rc(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&oa(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&oa(r.textContent,l,t),i=["children",""+l]):Qs.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&xe("scroll",r)}switch(n){case"input":Jo(r),Kf(r,s,!0);break;case"textarea":Jo(r),Xf(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=qa)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Rg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[mn]=e,t[io]=r,Jy(t,e,!1,!1),e.stateNode=t;e:{switch(a=ic(n,r),n){case"dialog":xe("cancel",t),xe("close",t),i=r;break;case"iframe":case"object":case"embed":xe("load",t),i=r;break;case"video":case"audio":for(i=0;i<ks.length;i++)xe(ks[i],t);i=r;break;case"source":xe("error",t),i=r;break;case"img":case"image":case"link":xe("error",t),xe("load",t),i=r;break;case"details":xe("toggle",t),i=r;break;case"input":Qf(t,r),i=Ju(t,r),xe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ve({},r,{value:void 0}),xe("invalid",t);break;case"textarea":Yf(t,r),i=tc(t,r),xe("invalid",t);break;default:i=r}rc(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?Dg(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&kg(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ks(t,u):typeof u=="number"&&Ks(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Qs.hasOwnProperty(s)?u!=null&&s==="onScroll"&&xe("scroll",t):u!=null&&yh(t,s,u,a))}switch(n){case"input":Jo(t),Kf(t,r,!1);break;case"textarea":Jo(t),Xf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+fr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Si(t,!!r.multiple,s,!1):r.defaultValue!=null&&Si(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=qa)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return dt(e),null;case 6:if(t&&e.stateNode!=null)e_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=Nr(oo.current),Nr(_n.current),aa(e)){if(r=e.stateNode,n=e.memoizedProps,r[mn]=e,(s=r.nodeValue!==n)&&(t=Bt,t!==null))switch(t.tag){case 3:oa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&oa(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[mn]=e,e.stateNode=r}return dt(e),null;case 13:if(Ce(Ne),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Re&&Ft!==null&&e.mode&1&&!(e.flags&128))_y(),bi(),e.flags|=98560,s=!1;else if(s=aa(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(z(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(z(317));s[mn]=e}else bi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;dt(e),s=!1}else on!==null&&(Fc(on),on=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ne.current&1?Ke===0&&(Ke=3):Zh())),e.updateQueue!==null&&(e.flags|=4),dt(e),null);case 4:return Mi(),Pc(t,e),t===null&&no(e.stateNode.containerInfo),dt(e),null;case 10:return Lh(e.type._context),dt(e),null;case 17:return Dt(e.type)&&Ha(),dt(e),null;case 19:if(Ce(Ne),s=e.memoizedState,s===null)return dt(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)Ts(s,!1);else{if(Ke!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Za(t),a!==null){for(e.flags|=128,Ts(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ie(Ne,Ne.current&1|2),e.child}t=t.sibling}s.tail!==null&&ze()>Oi&&(e.flags|=128,r=!0,Ts(s,!1),e.lanes=4194304)}else{if(!r)if(t=Za(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ts(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Re)return dt(e),null}else 2*ze()-s.renderingStartTime>Oi&&n!==1073741824&&(e.flags|=128,r=!0,Ts(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ze(),e.sibling=null,n=Ne.current,Ie(Ne,r?n&1|2:n&1),e):(dt(e),null);case 22:case 23:return Jh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ot&1073741824&&(dt(e),e.subtreeFlags&6&&(e.flags|=8192)):dt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function QE(t,e){switch(Nh(e),e.tag){case 1:return Dt(e.type)&&Ha(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Mi(),Ce(Pt),Ce(yt),Bh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Uh(e),null;case 13:if(Ce(Ne),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));bi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ce(Ne),null;case 4:return Mi(),null;case 10:return Lh(e.type._context),null;case 22:case 23:return Jh(),null;case 24:return null;default:return null}}var ca=!1,mt=!1,KE=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Ei(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fe(t,e,r)}else n.current=null}function Dc(t,e,n){try{n()}catch(r){Fe(t,e,r)}}var Up=!1;function YE(t,e){if(pc=za,t=sy(),Ph(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,h=0,f=0,y=t,_=null;t:for(;;){for(var C;y!==n||i!==0&&y.nodeType!==3||(l=a+i),y!==s||r!==0&&y.nodeType!==3||(u=a+r),y.nodeType===3&&(a+=y.nodeValue.length),(C=y.firstChild)!==null;)_=y,y=C;for(;;){if(y===t)break t;if(_===n&&++h===i&&(l=a),_===s&&++f===r&&(u=a),(C=y.nextSibling)!==null)break;y=_,_=y.parentNode}y=C}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(mc={focusedElem:t,selectionRange:n},za=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var V=N.memoizedProps,O=N.memoizedState,x=e.stateNode,w=x.getSnapshotBeforeUpdate(e.elementType===e.type?V:rn(e.type,V),O);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(M){Fe(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return N=Up,Up=!1,N}function Us(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Dc(e,n,s)}i=i.next}while(i!==r)}}function Cl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Nc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function t_(t){var e=t.alternate;e!==null&&(t.alternate=null,t_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[mn],delete e[io],delete e[_c],delete e[NE],delete e[bE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function n_(t){return t.tag===5||t.tag===3||t.tag===4}function Bp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||n_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function bc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=qa));else if(r!==4&&(t=t.child,t!==null))for(bc(t,e,n),t=t.sibling;t!==null;)bc(t,e,n),t=t.sibling}function Vc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Vc(t,e,n),t=t.sibling;t!==null;)Vc(t,e,n),t=t.sibling}var tt=null,sn=!1;function qn(t,e,n){for(n=n.child;n!==null;)r_(t,e,n),n=n.sibling}function r_(t,e,n){if(yn&&typeof yn.onCommitFiberUnmount=="function")try{yn.onCommitFiberUnmount(vl,n)}catch{}switch(n.tag){case 5:mt||Ei(n,e);case 6:var r=tt,i=sn;tt=null,qn(t,e,n),tt=r,sn=i,tt!==null&&(sn?(t=tt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):tt.removeChild(n.stateNode));break;case 18:tt!==null&&(sn?(t=tt,n=n.stateNode,t.nodeType===8?xu(t.parentNode,n):t.nodeType===1&&xu(t,n),Zs(t)):xu(tt,n.stateNode));break;case 4:r=tt,i=sn,tt=n.stateNode.containerInfo,sn=!0,qn(t,e,n),tt=r,sn=i;break;case 0:case 11:case 14:case 15:if(!mt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&Dc(n,e,a),i=i.next}while(i!==r)}qn(t,e,n);break;case 1:if(!mt&&(Ei(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Fe(n,e,l)}qn(t,e,n);break;case 21:qn(t,e,n);break;case 22:n.mode&1?(mt=(r=mt)||n.memoizedState!==null,qn(t,e,n),mt=r):qn(t,e,n);break;default:qn(t,e,n)}}function zp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new KE),e.forEach(function(r){var i=sT.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function nn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:tt=l.stateNode,sn=!1;break e;case 3:tt=l.stateNode.containerInfo,sn=!0;break e;case 4:tt=l.stateNode.containerInfo,sn=!0;break e}l=l.return}if(tt===null)throw Error(z(160));r_(s,a,i),tt=null,sn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(h){Fe(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)i_(e,t),e=e.sibling}function i_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(nn(e,t),dn(t),r&4){try{Us(3,t,t.return),Cl(3,t)}catch(V){Fe(t,t.return,V)}try{Us(5,t,t.return)}catch(V){Fe(t,t.return,V)}}break;case 1:nn(e,t),dn(t),r&512&&n!==null&&Ei(n,n.return);break;case 5:if(nn(e,t),dn(t),r&512&&n!==null&&Ei(n,n.return),t.flags&32){var i=t.stateNode;try{Ks(i,"")}catch(V){Fe(t,t.return,V)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Ag(i,s),ic(l,a);var h=ic(l,s);for(a=0;a<u.length;a+=2){var f=u[a],y=u[a+1];f==="style"?Dg(i,y):f==="dangerouslySetInnerHTML"?kg(i,y):f==="children"?Ks(i,y):yh(i,f,y,h)}switch(l){case"input":Zu(i,s);break;case"textarea":Cg(i,s);break;case"select":var _=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var C=s.value;C!=null?Si(i,!!s.multiple,C,!1):_!==!!s.multiple&&(s.defaultValue!=null?Si(i,!!s.multiple,s.defaultValue,!0):Si(i,!!s.multiple,s.multiple?[]:"",!1))}i[io]=s}catch(V){Fe(t,t.return,V)}}break;case 6:if(nn(e,t),dn(t),r&4){if(t.stateNode===null)throw Error(z(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(V){Fe(t,t.return,V)}}break;case 3:if(nn(e,t),dn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Zs(e.containerInfo)}catch(V){Fe(t,t.return,V)}break;case 4:nn(e,t),dn(t);break;case 13:nn(e,t),dn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Yh=ze())),r&4&&zp(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(mt=(h=mt)||f,nn(e,t),mt=h):nn(e,t),dn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!f&&t.mode&1)for(Y=t,f=t.child;f!==null;){for(y=Y=f;Y!==null;){switch(_=Y,C=_.child,_.tag){case 0:case 11:case 14:case 15:Us(4,_,_.return);break;case 1:Ei(_,_.return);var N=_.stateNode;if(typeof N.componentWillUnmount=="function"){r=_,n=_.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(V){Fe(r,n,V)}}break;case 5:Ei(_,_.return);break;case 22:if(_.memoizedState!==null){Wp(y);continue}}C!==null?(C.return=_,Y=C):Wp(y)}f=f.sibling}e:for(f=null,y=t;;){if(y.tag===5){if(f===null){f=y;try{i=y.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=y.stateNode,u=y.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Pg("display",a))}catch(V){Fe(t,t.return,V)}}}else if(y.tag===6){if(f===null)try{y.stateNode.nodeValue=h?"":y.memoizedProps}catch(V){Fe(t,t.return,V)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;f===y&&(f=null),y=y.return}f===y&&(f=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:nn(e,t),dn(t),r&4&&zp(t);break;case 21:break;default:nn(e,t),dn(t)}}function dn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(n_(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ks(i,""),r.flags&=-33);var s=Bp(t);Vc(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Bp(t);bc(t,l,a);break;default:throw Error(z(161))}}catch(u){Fe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function XE(t,e,n){Y=t,s_(t)}function s_(t,e,n){for(var r=(t.mode&1)!==0;Y!==null;){var i=Y,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||ca;if(!a){var l=i.alternate,u=l!==null&&l.memoizedState!==null||mt;l=ca;var h=mt;if(ca=a,(mt=u)&&!h)for(Y=i;Y!==null;)a=Y,u=a.child,a.tag===22&&a.memoizedState!==null?qp(i):u!==null?(u.return=a,Y=u):qp(i);for(;s!==null;)Y=s,s_(s),s=s.sibling;Y=i,ca=l,mt=h}$p(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Y=s):$p(t)}}function $p(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:mt||Cl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!mt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:rn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Cp(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Cp(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var y=f.dehydrated;y!==null&&Zs(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}mt||e.flags&512&&Nc(e)}catch(_){Fe(e,e.return,_)}}if(e===t){Y=null;break}if(n=e.sibling,n!==null){n.return=e.return,Y=n;break}Y=e.return}}function Wp(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Y=n;break}Y=e.return}}function qp(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Cl(4,e)}catch(u){Fe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Fe(e,i,u)}}var s=e.return;try{Nc(e)}catch(u){Fe(e,s,u)}break;case 5:var a=e.return;try{Nc(e)}catch(u){Fe(e,a,u)}}}catch(u){Fe(e,e.return,u)}if(e===t){Y=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Y=l;break}Y=e.return}}var JE=Math.ceil,nl=Fn.ReactCurrentDispatcher,Qh=Fn.ReactCurrentOwner,Xt=Fn.ReactCurrentBatchConfig,de=0,Ze=null,He=null,it=0,Ot=0,Ti=vr(0),Ke=0,co=null,zr=0,Rl=0,Kh=0,Bs=null,Ct=null,Yh=0,Oi=1/0,An=null,rl=!1,Mc=null,sr=null,ha=!1,Jn=null,il=0,zs=0,Lc=null,ka=-1,Pa=0;function It(){return de&6?ze():ka!==-1?ka:ka=ze()}function or(t){return t.mode&1?de&2&&it!==0?it&-it:ME.transition!==null?(Pa===0&&(Pa=$g()),Pa):(t=ve,t!==0||(t=window.event,t=t===void 0?16:Yg(t.type)),t):1}function ln(t,e,n,r){if(50<zs)throw zs=0,Lc=null,Error(z(185));Io(t,n,r),(!(de&2)||t!==Ze)&&(t===Ze&&(!(de&2)&&(Rl|=n),Ke===4&&Kn(t,it)),Nt(t,r),n===1&&de===0&&!(e.mode&1)&&(Oi=ze()+500,Sl&&wr()))}function Nt(t,e){var n=t.callbackNode;Mw(t,e);var r=Ba(t,t===Ze?it:0);if(r===0)n!==null&&ep(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ep(n),e===1)t.tag===0?VE(Hp.bind(null,t)):my(Hp.bind(null,t)),PE(function(){!(de&6)&&wr()}),n=null;else{switch(Wg(r)){case 1:n=Th;break;case 4:n=Bg;break;case 16:n=Ua;break;case 536870912:n=zg;break;default:n=Ua}n=f_(n,o_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function o_(t,e){if(ka=-1,Pa=0,de&6)throw Error(z(327));var n=t.callbackNode;if(ki()&&t.callbackNode!==n)return null;var r=Ba(t,t===Ze?it:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=sl(t,r);else{e=r;var i=de;de|=2;var s=l_();(Ze!==t||it!==e)&&(An=null,Oi=ze()+500,Vr(t,e));do try{tT();break}catch(l){a_(t,l)}while(!0);Mh(),nl.current=s,de=i,He!==null?e=0:(Ze=null,it=0,e=Ke)}if(e!==0){if(e===2&&(i=uc(t),i!==0&&(r=i,e=Oc(t,i))),e===1)throw n=co,Vr(t,0),Kn(t,r),Nt(t,ze()),n;if(e===6)Kn(t,r);else{if(i=t.current.alternate,!(r&30)&&!ZE(i)&&(e=sl(t,r),e===2&&(s=uc(t),s!==0&&(r=s,e=Oc(t,s))),e===1))throw n=co,Vr(t,0),Kn(t,r),Nt(t,ze()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:Rr(t,Ct,An);break;case 3:if(Kn(t,r),(r&130023424)===r&&(e=Yh+500-ze(),10<e)){if(Ba(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){It(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=yc(Rr.bind(null,t,Ct,An),e);break}Rr(t,Ct,An);break;case 4:if(Kn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-an(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=ze()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*JE(r/1960))-r,10<r){t.timeoutHandle=yc(Rr.bind(null,t,Ct,An),r);break}Rr(t,Ct,An);break;case 5:Rr(t,Ct,An);break;default:throw Error(z(329))}}}return Nt(t,ze()),t.callbackNode===n?o_.bind(null,t):null}function Oc(t,e){var n=Bs;return t.current.memoizedState.isDehydrated&&(Vr(t,e).flags|=256),t=sl(t,e),t!==2&&(e=Ct,Ct=n,e!==null&&Fc(e)),t}function Fc(t){Ct===null?Ct=t:Ct.push.apply(Ct,t)}function ZE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!cn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Kn(t,e){for(e&=~Kh,e&=~Rl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-an(e),r=1<<n;t[n]=-1,e&=~r}}function Hp(t){if(de&6)throw Error(z(327));ki();var e=Ba(t,0);if(!(e&1))return Nt(t,ze()),null;var n=sl(t,e);if(t.tag!==0&&n===2){var r=uc(t);r!==0&&(e=r,n=Oc(t,r))}if(n===1)throw n=co,Vr(t,0),Kn(t,e),Nt(t,ze()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Rr(t,Ct,An),Nt(t,ze()),null}function Xh(t,e){var n=de;de|=1;try{return t(e)}finally{de=n,de===0&&(Oi=ze()+500,Sl&&wr())}}function $r(t){Jn!==null&&Jn.tag===0&&!(de&6)&&ki();var e=de;de|=1;var n=Xt.transition,r=ve;try{if(Xt.transition=null,ve=1,t)return t()}finally{ve=r,Xt.transition=n,de=e,!(de&6)&&wr()}}function Jh(){Ot=Ti.current,Ce(Ti)}function Vr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,kE(n)),He!==null)for(n=He.return;n!==null;){var r=n;switch(Nh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ha();break;case 3:Mi(),Ce(Pt),Ce(yt),Bh();break;case 5:Uh(r);break;case 4:Mi();break;case 13:Ce(Ne);break;case 19:Ce(Ne);break;case 10:Lh(r.type._context);break;case 22:case 23:Jh()}n=n.return}if(Ze=t,He=t=ar(t.current,null),it=Ot=e,Ke=0,co=null,Kh=Rl=zr=0,Ct=Bs=null,Dr!==null){for(e=0;e<Dr.length;e++)if(n=Dr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Dr=null}return t}function a_(t,e){do{var n=He;try{if(Mh(),Aa.current=tl,el){for(var r=be.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}el=!1}if(Br=0,Je=Qe=be=null,js=!1,ao=0,Qh.current=null,n===null||n.return===null){Ke=1,co=e,He=null;break}e:{var s=t,a=n.return,l=n,u=e;if(e=it,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,f=l,y=f.tag;if(!(f.mode&1)&&(y===0||y===11||y===15)){var _=f.alternate;_?(f.updateQueue=_.updateQueue,f.memoizedState=_.memoizedState,f.lanes=_.lanes):(f.updateQueue=null,f.memoizedState=null)}var C=bp(a);if(C!==null){C.flags&=-257,Vp(C,a,l,s,e),C.mode&1&&Np(s,h,e),e=C,u=h;var N=e.updateQueue;if(N===null){var V=new Set;V.add(u),e.updateQueue=V}else N.add(u);break e}else{if(!(e&1)){Np(s,h,e),Zh();break e}u=Error(z(426))}}else if(Re&&l.mode&1){var O=bp(a);if(O!==null){!(O.flags&65536)&&(O.flags|=256),Vp(O,a,l,s,e),bh(Li(u,l));break e}}s=u=Li(u,l),Ke!==4&&(Ke=2),Bs===null?Bs=[s]:Bs.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=Wy(s,u,e);Ap(s,x);break e;case 1:l=u;var w=s.type,A=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(sr===null||!sr.has(A)))){s.flags|=65536,e&=-e,s.lanes|=e;var M=qy(s,l,e);Ap(s,M);break e}}s=s.return}while(s!==null)}c_(n)}catch(W){e=W,He===n&&n!==null&&(He=n=n.return);continue}break}while(!0)}function l_(){var t=nl.current;return nl.current=tl,t===null?tl:t}function Zh(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),Ze===null||!(zr&268435455)&&!(Rl&268435455)||Kn(Ze,it)}function sl(t,e){var n=de;de|=2;var r=l_();(Ze!==t||it!==e)&&(An=null,Vr(t,e));do try{eT();break}catch(i){a_(t,i)}while(!0);if(Mh(),de=n,nl.current=r,He!==null)throw Error(z(261));return Ze=null,it=0,Ke}function eT(){for(;He!==null;)u_(He)}function tT(){for(;He!==null&&!Aw();)u_(He)}function u_(t){var e=d_(t.alternate,t,Ot);t.memoizedProps=t.pendingProps,e===null?c_(t):He=e,Qh.current=null}function c_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=QE(n,e),n!==null){n.flags&=32767,He=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ke=6,He=null;return}}else if(n=GE(n,e,Ot),n!==null){He=n;return}if(e=e.sibling,e!==null){He=e;return}He=e=t}while(e!==null);Ke===0&&(Ke=5)}function Rr(t,e,n){var r=ve,i=Xt.transition;try{Xt.transition=null,ve=1,nT(t,e,n,r)}finally{Xt.transition=i,ve=r}return null}function nT(t,e,n,r){do ki();while(Jn!==null);if(de&6)throw Error(z(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Lw(t,s),t===Ze&&(He=Ze=null,it=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ha||(ha=!0,f_(Ua,function(){return ki(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Xt.transition,Xt.transition=null;var a=ve;ve=1;var l=de;de|=4,Qh.current=null,YE(t,n),i_(n,t),TE(mc),za=!!pc,mc=pc=null,t.current=n,XE(n),Cw(),de=l,ve=a,Xt.transition=s}else t.current=n;if(ha&&(ha=!1,Jn=t,il=i),s=t.pendingLanes,s===0&&(sr=null),Pw(n.stateNode),Nt(t,ze()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(rl)throw rl=!1,t=Mc,Mc=null,t;return il&1&&t.tag!==0&&ki(),s=t.pendingLanes,s&1?t===Lc?zs++:(zs=0,Lc=t):zs=0,wr(),null}function ki(){if(Jn!==null){var t=Wg(il),e=Xt.transition,n=ve;try{if(Xt.transition=null,ve=16>t?16:t,Jn===null)var r=!1;else{if(t=Jn,Jn=null,il=0,de&6)throw Error(z(331));var i=de;for(de|=4,Y=t.current;Y!==null;){var s=Y,a=s.child;if(Y.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(Y=h;Y!==null;){var f=Y;switch(f.tag){case 0:case 11:case 15:Us(8,f,s)}var y=f.child;if(y!==null)y.return=f,Y=y;else for(;Y!==null;){f=Y;var _=f.sibling,C=f.return;if(t_(f),f===h){Y=null;break}if(_!==null){_.return=C,Y=_;break}Y=C}}}var N=s.alternate;if(N!==null){var V=N.child;if(V!==null){N.child=null;do{var O=V.sibling;V.sibling=null,V=O}while(V!==null)}}Y=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Y=a;else e:for(;Y!==null;){if(s=Y,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Us(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,Y=x;break e}Y=s.return}}var w=t.current;for(Y=w;Y!==null;){a=Y;var A=a.child;if(a.subtreeFlags&2064&&A!==null)A.return=a,Y=A;else e:for(a=w;Y!==null;){if(l=Y,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Cl(9,l)}}catch(W){Fe(l,l.return,W)}if(l===a){Y=null;break e}var M=l.sibling;if(M!==null){M.return=l.return,Y=M;break e}Y=l.return}}if(de=i,wr(),yn&&typeof yn.onPostCommitFiberRoot=="function")try{yn.onPostCommitFiberRoot(vl,t)}catch{}r=!0}return r}finally{ve=n,Xt.transition=e}}return!1}function Gp(t,e,n){e=Li(n,e),e=Wy(t,e,1),t=ir(t,e,1),e=It(),t!==null&&(Io(t,1,e),Nt(t,e))}function Fe(t,e,n){if(t.tag===3)Gp(t,t,n);else for(;e!==null;){if(e.tag===3){Gp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(sr===null||!sr.has(r))){t=Li(n,t),t=qy(e,t,1),e=ir(e,t,1),t=It(),e!==null&&(Io(e,1,t),Nt(e,t));break}}e=e.return}}function rT(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=It(),t.pingedLanes|=t.suspendedLanes&n,Ze===t&&(it&n)===n&&(Ke===4||Ke===3&&(it&130023424)===it&&500>ze()-Yh?Vr(t,0):Kh|=n),Nt(t,e)}function h_(t,e){e===0&&(t.mode&1?(e=ta,ta<<=1,!(ta&130023424)&&(ta=4194304)):e=1);var n=It();t=bn(t,e),t!==null&&(Io(t,e,n),Nt(t,n))}function iT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),h_(t,n)}function sT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),h_(t,n)}var d_;d_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Pt.current)kt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return kt=!1,HE(t,e,n);kt=!!(t.flags&131072)}else kt=!1,Re&&e.flags&1048576&&gy(e,Ka,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ra(t,e),t=e.pendingProps;var i=Ni(e,yt.current);Ri(e,n),i=$h(null,e,r,t,i,n);var s=Wh();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Dt(r)?(s=!0,Ga(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Fh(e),i.updater=Al,e.stateNode=i,i._reactInternals=e,Sc(e,r,t,n),e=Cc(null,e,r,!0,s,n)):(e.tag=0,Re&&s&&Dh(e),Tt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ra(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=aT(r),t=rn(r,t),i){case 0:e=Ac(null,e,r,t,n);break e;case 1:e=Op(null,e,r,t,n);break e;case 11:e=Mp(null,e,r,t,n);break e;case 14:e=Lp(null,e,r,rn(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rn(r,i),Ac(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rn(r,i),Op(t,e,r,i,n);case 3:e:{if(Ky(e),t===null)throw Error(z(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Ty(t,e),Ja(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Li(Error(z(423)),e),e=Fp(t,e,r,n,i);break e}else if(r!==i){i=Li(Error(z(424)),e),e=Fp(t,e,r,n,i);break e}else for(Ft=rr(e.stateNode.containerInfo.firstChild),Bt=e,Re=!0,on=null,n=wy(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(bi(),r===i){e=Vn(t,e,n);break e}Tt(t,e,r,n)}e=e.child}return e;case 5:return Iy(e),t===null&&Ec(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,gc(r,i)?a=null:s!==null&&gc(r,s)&&(e.flags|=32),Qy(t,e),Tt(t,e,a,n),e.child;case 6:return t===null&&Ec(e),null;case 13:return Yy(t,e,n);case 4:return jh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Vi(e,null,r,n):Tt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rn(r,i),Mp(t,e,r,i,n);case 7:return Tt(t,e,e.pendingProps,n),e.child;case 8:return Tt(t,e,e.pendingProps.children,n),e.child;case 12:return Tt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Ie(Ya,r._currentValue),r._currentValue=a,s!==null)if(cn(s.value,a)){if(s.children===i.children&&!Pt.current){e=Vn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){a=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Pn(-1,n&-n),u.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?u.next=u:(u.next=f.next,f.next=u),h.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Tc(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(z(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Tc(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Tt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ri(e,n),i=Jt(i),r=r(i),e.flags|=1,Tt(t,e,r,n),e.child;case 14:return r=e.type,i=rn(r,e.pendingProps),i=rn(r.type,i),Lp(t,e,r,i,n);case 15:return Hy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rn(r,i),Ra(t,e),e.tag=1,Dt(r)?(t=!0,Ga(e)):t=!1,Ri(e,n),$y(e,r,i),Sc(e,r,i,n),Cc(null,e,r,!0,t,n);case 19:return Xy(t,e,n);case 22:return Gy(t,e,n)}throw Error(z(156,e.tag))};function f_(t,e){return Ug(t,e)}function oT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(t,e,n,r){return new oT(t,e,n,r)}function ed(t){return t=t.prototype,!(!t||!t.isReactComponent)}function aT(t){if(typeof t=="function")return ed(t)?1:0;if(t!=null){if(t=t.$$typeof,t===vh)return 11;if(t===wh)return 14}return 2}function ar(t,e){var n=t.alternate;return n===null?(n=Yt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Da(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")ed(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case di:return Mr(n.children,i,s,e);case _h:a=8,i|=8;break;case Qu:return t=Yt(12,n,e,i|2),t.elementType=Qu,t.lanes=s,t;case Ku:return t=Yt(13,n,e,i),t.elementType=Ku,t.lanes=s,t;case Yu:return t=Yt(19,n,e,i),t.elementType=Yu,t.lanes=s,t;case Ig:return kl(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Eg:a=10;break e;case Tg:a=9;break e;case vh:a=11;break e;case wh:a=14;break e;case Hn:a=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=Yt(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Mr(t,e,n,r){return t=Yt(7,t,r,e),t.lanes=n,t}function kl(t,e,n,r){return t=Yt(22,t,r,e),t.elementType=Ig,t.lanes=n,t.stateNode={isHidden:!1},t}function bu(t,e,n){return t=Yt(6,t,null,e),t.lanes=n,t}function Vu(t,e,n){return e=Yt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function lT(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pu(0),this.expirationTimes=pu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function td(t,e,n,r,i,s,a,l,u){return t=new lT(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Yt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fh(s),t}function uT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function p_(t){if(!t)return pr;t=t._reactInternals;e:{if(Kr(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Dt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(Dt(n))return py(t,n,e)}return e}function m_(t,e,n,r,i,s,a,l,u){return t=td(n,r,!0,t,i,s,a,l,u),t.context=p_(null),n=t.current,r=It(),i=or(n),s=Pn(r,i),s.callback=e??null,ir(n,s,i),t.current.lanes=i,Io(t,i,r),Nt(t,r),t}function Pl(t,e,n,r){var i=e.current,s=It(),a=or(i);return n=p_(n),e.context===null?e.context=n:e.pendingContext=n,e=Pn(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ir(i,e,a),t!==null&&(ln(t,i,a,s),xa(t,i,a)),a}function ol(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Qp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function nd(t,e){Qp(t,e),(t=t.alternate)&&Qp(t,e)}function cT(){return null}var g_=typeof reportError=="function"?reportError:function(t){console.error(t)};function rd(t){this._internalRoot=t}Dl.prototype.render=rd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Pl(t,e,null,null)};Dl.prototype.unmount=rd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;$r(function(){Pl(null,t,null,null)}),e[Nn]=null}};function Dl(t){this._internalRoot=t}Dl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Gg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Qn.length&&e!==0&&e<Qn[n].priority;n++);Qn.splice(n,0,t),n===0&&Kg(t)}};function id(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Nl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Kp(){}function hT(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=ol(a);s.call(h)}}var a=m_(e,r,t,0,null,!1,!1,"",Kp);return t._reactRootContainer=a,t[Nn]=a.current,no(t.nodeType===8?t.parentNode:t),$r(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var h=ol(u);l.call(h)}}var u=td(t,0,!1,null,null,!1,!1,"",Kp);return t._reactRootContainer=u,t[Nn]=u.current,no(t.nodeType===8?t.parentNode:t),$r(function(){Pl(e,u,n,r)}),u}function bl(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var l=i;i=function(){var u=ol(a);l.call(u)}}Pl(e,a,t,i)}else a=hT(n,e,t,i,r);return ol(a)}qg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Rs(e.pendingLanes);n!==0&&(Ih(e,n|1),Nt(e,ze()),!(de&6)&&(Oi=ze()+500,wr()))}break;case 13:$r(function(){var r=bn(t,1);if(r!==null){var i=It();ln(r,t,1,i)}}),nd(t,1)}};Sh=function(t){if(t.tag===13){var e=bn(t,134217728);if(e!==null){var n=It();ln(e,t,134217728,n)}nd(t,134217728)}};Hg=function(t){if(t.tag===13){var e=or(t),n=bn(t,e);if(n!==null){var r=It();ln(n,t,e,r)}nd(t,e)}};Gg=function(){return ve};Qg=function(t,e){var n=ve;try{return ve=t,e()}finally{ve=n}};oc=function(t,e,n){switch(e){case"input":if(Zu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Il(r);if(!i)throw Error(z(90));xg(r),Zu(r,i)}}}break;case"textarea":Cg(t,n);break;case"select":e=n.value,e!=null&&Si(t,!!n.multiple,e,!1)}};Vg=Xh;Mg=$r;var dT={usingClientEntryPoint:!1,Events:[xo,gi,Il,Ng,bg,Xh]},Is={findFiberByHostInstance:Pr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fT={bundleType:Is.bundleType,version:Is.version,rendererPackageName:Is.rendererPackageName,rendererConfig:Is.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Fg(t),t===null?null:t.stateNode},findFiberByHostInstance:Is.findFiberByHostInstance||cT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var da=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!da.isDisabled&&da.supportsFiber)try{vl=da.inject(fT),yn=da}catch{}}$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dT;$t.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!id(e))throw Error(z(200));return uT(t,e,null,n)};$t.createRoot=function(t,e){if(!id(t))throw Error(z(299));var n=!1,r="",i=g_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=td(t,1,!1,null,null,n,!1,r,i),t[Nn]=e.current,no(t.nodeType===8?t.parentNode:t),new rd(e)};$t.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=Fg(e),t=t===null?null:t.stateNode,t};$t.flushSync=function(t){return $r(t)};$t.hydrate=function(t,e,n){if(!Nl(e))throw Error(z(200));return bl(null,t,e,!0,n)};$t.hydrateRoot=function(t,e,n){if(!id(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=g_;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=m_(e,null,t,1,n??null,i,!1,s,a),t[Nn]=e.current,no(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Dl(e)};$t.render=function(t,e,n){if(!Nl(e))throw Error(z(200));return bl(null,t,e,!1,n)};$t.unmountComponentAtNode=function(t){if(!Nl(t))throw Error(z(40));return t._reactRootContainer?($r(function(){bl(null,null,t,!1,function(){t._reactRootContainer=null,t[Nn]=null})}),!0):!1};$t.unstable_batchedUpdates=Xh;$t.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Nl(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return bl(t,e,n,!1,r)};$t.version="18.3.1-next-f1338f8080-20240426";function y_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(y_)}catch(t){console.error(t)}}y_(),yg.exports=$t;var pT=yg.exports,Yp=pT;Hu.createRoot=Yp.createRoot,Hu.hydrateRoot=Yp.hydrateRoot;var Xp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},mT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},v_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,l=a?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,f=s>>2,y=(s&3)<<4|l>>4;let _=(l&15)<<2|h>>6,C=h&63;u||(C=64,a||(_=64)),r.push(n[f],n[y],n[_],n[C])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(__(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):mT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const y=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||h==null||y==null)throw new gT;const _=s<<2|l>>4;if(r.push(_),h!==64){const C=l<<4&240|h>>2;if(r.push(C),y!==64){const N=h<<6&192|y;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class gT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yT=function(t){const e=__(t);return v_.encodeByteArray(e,!0)},al=function(t){return yT(t).replace(/\./g,"")},_T=function(t){try{return v_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT=()=>vT().__FIREBASE_DEFAULTS__,ET=()=>{if(typeof process>"u"||typeof Xp>"u")return;const t=Xp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},TT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&_T(t[1]);return e&&JSON.parse(e)},sd=()=>{try{return wT()||ET()||TT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},IT=t=>{var e,n;return(n=(e=sd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},w_=t=>{const e=IT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},E_=()=>{var t;return(t=sd())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[al(JSON.stringify(n)),al(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AT(){var t;const e=(t=sd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function CT(){return!AT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function RT(){try{return typeof indexedDB=="object"}catch{return!1}}function kT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT="FirebaseError";class Yr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=PT,Object.setPrototypeOf(this,Yr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,I_.prototype.create)}}class I_{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?DT(s,r):"Error",l=`${this.serviceName}: ${a} (${i}).`;return new Yr(i,l,r)}}function DT(t,e){return t.replace(NT,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const NT=/\{\$([^}]+)}/g;function jc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(Jp(s)&&Jp(a)){if(!jc(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Jp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(t){return t&&t._delegate?t._delegate:t}class Fi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ST;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(MT(e))try{this.getOrInitializeService({instanceIdentifier:kr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=kr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=kr){return this.instances.has(e)}getOptions(e=kr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&a.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:VT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=kr){return this.component?this.component.multipleInstances?e:kr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function VT(t){return t===kr?void 0:t}function MT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new bT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var he;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(he||(he={}));const OT={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},FT=he.INFO,jT={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},UT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=jT[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class S_{constructor(e){this.name=e,this._logLevel=FT,this._logHandler=UT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?OT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...e),this._logHandler(this,he.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...e),this._logHandler(this,he.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,he.INFO,...e),this._logHandler(this,he.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,he.WARN,...e),this._logHandler(this,he.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...e),this._logHandler(this,he.ERROR,...e)}}const BT=(t,e)=>e.some(n=>t instanceof n);let Zp,em;function zT(){return Zp||(Zp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $T(){return em||(em=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const x_=new WeakMap,Uc=new WeakMap,A_=new WeakMap,Mu=new WeakMap,od=new WeakMap;function WT(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(lr(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&x_.set(n,t)}).catch(()=>{}),od.set(e,t),e}function qT(t){if(Uc.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});Uc.set(t,e)}let Bc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Uc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||A_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return lr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function HT(t){Bc=t(Bc)}function GT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Lu(this),e,...n);return A_.set(r,e.sort?e.sort():[e]),lr(r)}:$T().includes(t)?function(...e){return t.apply(Lu(this),e),lr(x_.get(this))}:function(...e){return lr(t.apply(Lu(this),e))}}function QT(t){return typeof t=="function"?GT(t):(t instanceof IDBTransaction&&qT(t),BT(t,zT())?new Proxy(t,Bc):t)}function lr(t){if(t instanceof IDBRequest)return WT(t);if(Mu.has(t))return Mu.get(t);const e=QT(t);return e!==t&&(Mu.set(t,e),od.set(e,t)),e}const Lu=t=>od.get(t);function KT(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),l=lr(a);return r&&a.addEventListener("upgradeneeded",u=>{r(lr(a.result),u.oldVersion,u.newVersion,lr(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const YT=["get","getKey","getAll","getAllKeys","count"],XT=["put","add","delete","clear"],Ou=new Map;function tm(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ou.get(e))return Ou.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=XT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||YT.includes(n)))return;const s=async function(a,...l){const u=this.transaction(a,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),i&&u.done]))[0]};return Ou.set(e,s),s}HT(t=>({...t,get:(e,n,r)=>tm(e,n)||t.get(e,n,r),has:(e,n)=>!!tm(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ZT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function ZT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const zc="@firebase/app",nm="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mn=new S_("@firebase/app"),e1="@firebase/app-compat",t1="@firebase/analytics-compat",n1="@firebase/analytics",r1="@firebase/app-check-compat",i1="@firebase/app-check",s1="@firebase/auth",o1="@firebase/auth-compat",a1="@firebase/database",l1="@firebase/data-connect",u1="@firebase/database-compat",c1="@firebase/functions",h1="@firebase/functions-compat",d1="@firebase/installations",f1="@firebase/installations-compat",p1="@firebase/messaging",m1="@firebase/messaging-compat",g1="@firebase/performance",y1="@firebase/performance-compat",_1="@firebase/remote-config",v1="@firebase/remote-config-compat",w1="@firebase/storage",E1="@firebase/storage-compat",T1="@firebase/firestore",I1="@firebase/vertexai-preview",S1="@firebase/firestore-compat",x1="firebase",A1="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $c="[DEFAULT]",C1={[zc]:"fire-core",[e1]:"fire-core-compat",[n1]:"fire-analytics",[t1]:"fire-analytics-compat",[i1]:"fire-app-check",[r1]:"fire-app-check-compat",[s1]:"fire-auth",[o1]:"fire-auth-compat",[a1]:"fire-rtdb",[l1]:"fire-data-connect",[u1]:"fire-rtdb-compat",[c1]:"fire-fn",[h1]:"fire-fn-compat",[d1]:"fire-iid",[f1]:"fire-iid-compat",[p1]:"fire-fcm",[m1]:"fire-fcm-compat",[g1]:"fire-perf",[y1]:"fire-perf-compat",[_1]:"fire-rc",[v1]:"fire-rc-compat",[w1]:"fire-gcs",[E1]:"fire-gcs-compat",[T1]:"fire-fst",[S1]:"fire-fst-compat",[I1]:"fire-vertex","fire-js":"fire-js",[x1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll=new Map,R1=new Map,Wc=new Map;function rm(t,e){try{t.container.addComponent(e)}catch(n){Mn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ho(t){const e=t.name;if(Wc.has(e))return Mn.debug(`There were multiple attempts to register component ${e}.`),!1;Wc.set(e,t);for(const n of ll.values())rm(n,t);for(const n of R1.values())rm(n,t);return!0}function C_(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ur=new I_("app","Firebase",k1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Fi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ur.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_=A1;function k_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:$c,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ur.create("bad-app-name",{appName:String(i)});if(n||(n=E_()),!n)throw ur.create("no-options");const s=ll.get(i);if(s){if(jc(n,s.options)&&jc(r,s.config))return s;throw ur.create("duplicate-app",{appName:i})}const a=new LT(i);for(const u of Wc.values())a.addComponent(u);const l=new P1(n,r,a);return ll.set(i,l),l}function P_(t=$c){const e=ll.get(t);if(!e&&t===$c&&E_())return k_();if(!e)throw ur.create("no-app",{appName:t});return e}function cr(t,e,n){var r;let i=(r=C1[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mn.warn(l.join(" "));return}ho(new Fi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1="firebase-heartbeat-database",N1=1,fo="firebase-heartbeat-store";let Fu=null;function D_(){return Fu||(Fu=KT(D1,N1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(fo)}catch(n){console.warn(n)}}}}).catch(t=>{throw ur.create("idb-open",{originalErrorMessage:t.message})})),Fu}async function b1(t){try{const n=(await D_()).transaction(fo),r=await n.objectStore(fo).get(N_(t));return await n.done,r}catch(e){if(e instanceof Yr)Mn.warn(e.message);else{const n=ur.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Mn.warn(n.message)}}}async function im(t,e){try{const r=(await D_()).transaction(fo,"readwrite");await r.objectStore(fo).put(e,N_(t)),await r.done}catch(n){if(n instanceof Yr)Mn.warn(n.message);else{const r=ur.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Mn.warn(r.message)}}}function N_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1=1024,M1=30*24*60*60*1e3;class L1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new F1(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=sm();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=M1}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Mn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=sm(),{heartbeatsToSend:r,unsentEntries:i}=O1(this._heartbeatsCache.heartbeats),s=al(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Mn.warn(n),""}}}function sm(){return new Date().toISOString().substring(0,10)}function O1(t,e=V1){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),om(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),om(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class F1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return RT()?kT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await b1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return im(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return im(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function om(t){return al(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1(t){ho(new Fi("platform-logger",e=>new JT(e),"PRIVATE")),ho(new Fi("heartbeat",e=>new L1(e),"PRIVATE")),cr(zc,nm,t),cr(zc,nm,"esm2017"),cr("fire-js","")}j1("");var am=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Lr,b_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,g){function T(){}T.prototype=g.prototype,E.D=g.prototype,E.prototype=new T,E.prototype.constructor=E,E.C=function(S,k,D){for(var I=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)I[$e-2]=arguments[$e];return g.prototype[k].apply(S,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,g,T){T||(T=0);var S=Array(16);if(typeof g=="string")for(var k=0;16>k;++k)S[k]=g.charCodeAt(T++)|g.charCodeAt(T++)<<8|g.charCodeAt(T++)<<16|g.charCodeAt(T++)<<24;else for(k=0;16>k;++k)S[k]=g[T++]|g[T++]<<8|g[T++]<<16|g[T++]<<24;g=E.g[0],T=E.g[1],k=E.g[2];var D=E.g[3],I=g+(D^T&(k^D))+S[0]+3614090360&4294967295;g=T+(I<<7&4294967295|I>>>25),I=D+(k^g&(T^k))+S[1]+3905402710&4294967295,D=g+(I<<12&4294967295|I>>>20),I=k+(T^D&(g^T))+S[2]+606105819&4294967295,k=D+(I<<17&4294967295|I>>>15),I=T+(g^k&(D^g))+S[3]+3250441966&4294967295,T=k+(I<<22&4294967295|I>>>10),I=g+(D^T&(k^D))+S[4]+4118548399&4294967295,g=T+(I<<7&4294967295|I>>>25),I=D+(k^g&(T^k))+S[5]+1200080426&4294967295,D=g+(I<<12&4294967295|I>>>20),I=k+(T^D&(g^T))+S[6]+2821735955&4294967295,k=D+(I<<17&4294967295|I>>>15),I=T+(g^k&(D^g))+S[7]+4249261313&4294967295,T=k+(I<<22&4294967295|I>>>10),I=g+(D^T&(k^D))+S[8]+1770035416&4294967295,g=T+(I<<7&4294967295|I>>>25),I=D+(k^g&(T^k))+S[9]+2336552879&4294967295,D=g+(I<<12&4294967295|I>>>20),I=k+(T^D&(g^T))+S[10]+4294925233&4294967295,k=D+(I<<17&4294967295|I>>>15),I=T+(g^k&(D^g))+S[11]+2304563134&4294967295,T=k+(I<<22&4294967295|I>>>10),I=g+(D^T&(k^D))+S[12]+1804603682&4294967295,g=T+(I<<7&4294967295|I>>>25),I=D+(k^g&(T^k))+S[13]+4254626195&4294967295,D=g+(I<<12&4294967295|I>>>20),I=k+(T^D&(g^T))+S[14]+2792965006&4294967295,k=D+(I<<17&4294967295|I>>>15),I=T+(g^k&(D^g))+S[15]+1236535329&4294967295,T=k+(I<<22&4294967295|I>>>10),I=g+(k^D&(T^k))+S[1]+4129170786&4294967295,g=T+(I<<5&4294967295|I>>>27),I=D+(T^k&(g^T))+S[6]+3225465664&4294967295,D=g+(I<<9&4294967295|I>>>23),I=k+(g^T&(D^g))+S[11]+643717713&4294967295,k=D+(I<<14&4294967295|I>>>18),I=T+(D^g&(k^D))+S[0]+3921069994&4294967295,T=k+(I<<20&4294967295|I>>>12),I=g+(k^D&(T^k))+S[5]+3593408605&4294967295,g=T+(I<<5&4294967295|I>>>27),I=D+(T^k&(g^T))+S[10]+38016083&4294967295,D=g+(I<<9&4294967295|I>>>23),I=k+(g^T&(D^g))+S[15]+3634488961&4294967295,k=D+(I<<14&4294967295|I>>>18),I=T+(D^g&(k^D))+S[4]+3889429448&4294967295,T=k+(I<<20&4294967295|I>>>12),I=g+(k^D&(T^k))+S[9]+568446438&4294967295,g=T+(I<<5&4294967295|I>>>27),I=D+(T^k&(g^T))+S[14]+3275163606&4294967295,D=g+(I<<9&4294967295|I>>>23),I=k+(g^T&(D^g))+S[3]+4107603335&4294967295,k=D+(I<<14&4294967295|I>>>18),I=T+(D^g&(k^D))+S[8]+1163531501&4294967295,T=k+(I<<20&4294967295|I>>>12),I=g+(k^D&(T^k))+S[13]+2850285829&4294967295,g=T+(I<<5&4294967295|I>>>27),I=D+(T^k&(g^T))+S[2]+4243563512&4294967295,D=g+(I<<9&4294967295|I>>>23),I=k+(g^T&(D^g))+S[7]+1735328473&4294967295,k=D+(I<<14&4294967295|I>>>18),I=T+(D^g&(k^D))+S[12]+2368359562&4294967295,T=k+(I<<20&4294967295|I>>>12),I=g+(T^k^D)+S[5]+4294588738&4294967295,g=T+(I<<4&4294967295|I>>>28),I=D+(g^T^k)+S[8]+2272392833&4294967295,D=g+(I<<11&4294967295|I>>>21),I=k+(D^g^T)+S[11]+1839030562&4294967295,k=D+(I<<16&4294967295|I>>>16),I=T+(k^D^g)+S[14]+4259657740&4294967295,T=k+(I<<23&4294967295|I>>>9),I=g+(T^k^D)+S[1]+2763975236&4294967295,g=T+(I<<4&4294967295|I>>>28),I=D+(g^T^k)+S[4]+1272893353&4294967295,D=g+(I<<11&4294967295|I>>>21),I=k+(D^g^T)+S[7]+4139469664&4294967295,k=D+(I<<16&4294967295|I>>>16),I=T+(k^D^g)+S[10]+3200236656&4294967295,T=k+(I<<23&4294967295|I>>>9),I=g+(T^k^D)+S[13]+681279174&4294967295,g=T+(I<<4&4294967295|I>>>28),I=D+(g^T^k)+S[0]+3936430074&4294967295,D=g+(I<<11&4294967295|I>>>21),I=k+(D^g^T)+S[3]+3572445317&4294967295,k=D+(I<<16&4294967295|I>>>16),I=T+(k^D^g)+S[6]+76029189&4294967295,T=k+(I<<23&4294967295|I>>>9),I=g+(T^k^D)+S[9]+3654602809&4294967295,g=T+(I<<4&4294967295|I>>>28),I=D+(g^T^k)+S[12]+3873151461&4294967295,D=g+(I<<11&4294967295|I>>>21),I=k+(D^g^T)+S[15]+530742520&4294967295,k=D+(I<<16&4294967295|I>>>16),I=T+(k^D^g)+S[2]+3299628645&4294967295,T=k+(I<<23&4294967295|I>>>9),I=g+(k^(T|~D))+S[0]+4096336452&4294967295,g=T+(I<<6&4294967295|I>>>26),I=D+(T^(g|~k))+S[7]+1126891415&4294967295,D=g+(I<<10&4294967295|I>>>22),I=k+(g^(D|~T))+S[14]+2878612391&4294967295,k=D+(I<<15&4294967295|I>>>17),I=T+(D^(k|~g))+S[5]+4237533241&4294967295,T=k+(I<<21&4294967295|I>>>11),I=g+(k^(T|~D))+S[12]+1700485571&4294967295,g=T+(I<<6&4294967295|I>>>26),I=D+(T^(g|~k))+S[3]+2399980690&4294967295,D=g+(I<<10&4294967295|I>>>22),I=k+(g^(D|~T))+S[10]+4293915773&4294967295,k=D+(I<<15&4294967295|I>>>17),I=T+(D^(k|~g))+S[1]+2240044497&4294967295,T=k+(I<<21&4294967295|I>>>11),I=g+(k^(T|~D))+S[8]+1873313359&4294967295,g=T+(I<<6&4294967295|I>>>26),I=D+(T^(g|~k))+S[15]+4264355552&4294967295,D=g+(I<<10&4294967295|I>>>22),I=k+(g^(D|~T))+S[6]+2734768916&4294967295,k=D+(I<<15&4294967295|I>>>17),I=T+(D^(k|~g))+S[13]+1309151649&4294967295,T=k+(I<<21&4294967295|I>>>11),I=g+(k^(T|~D))+S[4]+4149444226&4294967295,g=T+(I<<6&4294967295|I>>>26),I=D+(T^(g|~k))+S[11]+3174756917&4294967295,D=g+(I<<10&4294967295|I>>>22),I=k+(g^(D|~T))+S[2]+718787259&4294967295,k=D+(I<<15&4294967295|I>>>17),I=T+(D^(k|~g))+S[9]+3951481745&4294967295,E.g[0]=E.g[0]+g&4294967295,E.g[1]=E.g[1]+(k+(I<<21&4294967295|I>>>11))&4294967295,E.g[2]=E.g[2]+k&4294967295,E.g[3]=E.g[3]+D&4294967295}r.prototype.u=function(E,g){g===void 0&&(g=E.length);for(var T=g-this.blockSize,S=this.B,k=this.h,D=0;D<g;){if(k==0)for(;D<=T;)i(this,E,D),D+=this.blockSize;if(typeof E=="string"){for(;D<g;)if(S[k++]=E.charCodeAt(D++),k==this.blockSize){i(this,S),k=0;break}}else for(;D<g;)if(S[k++]=E[D++],k==this.blockSize){i(this,S),k=0;break}}this.h=k,this.o+=g},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var g=1;g<E.length-8;++g)E[g]=0;var T=8*this.o;for(g=E.length-8;g<E.length;++g)E[g]=T&255,T/=256;for(this.u(E),E=Array(16),g=T=0;4>g;++g)for(var S=0;32>S;S+=8)E[T++]=this.g[g]>>>S&255;return E};function s(E,g){var T=l;return Object.prototype.hasOwnProperty.call(T,E)?T[E]:T[E]=g(E)}function a(E,g){this.h=g;for(var T=[],S=!0,k=E.length-1;0<=k;k--){var D=E[k]|0;S&&D==g||(T[k]=D,S=!1)}this.g=T}var l={};function u(E){return-128<=E&&128>E?s(E,function(g){return new a([g|0],0>g?-1:0)}):new a([E|0],0>E?-1:0)}function h(E){if(isNaN(E)||!isFinite(E))return y;if(0>E)return O(h(-E));for(var g=[],T=1,S=0;E>=T;S++)g[S]=E/T|0,T*=4294967296;return new a(g,0)}function f(E,g){if(E.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(E.charAt(0)=="-")return O(f(E.substring(1),g));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=h(Math.pow(g,8)),S=y,k=0;k<E.length;k+=8){var D=Math.min(8,E.length-k),I=parseInt(E.substring(k,k+D),g);8>D?(D=h(Math.pow(g,D)),S=S.j(D).add(h(I))):(S=S.j(T),S=S.add(h(I)))}return S}var y=u(0),_=u(1),C=u(16777216);t=a.prototype,t.m=function(){if(V(this))return-O(this).m();for(var E=0,g=1,T=0;T<this.g.length;T++){var S=this.i(T);E+=(0<=S?S:4294967296+S)*g,g*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(N(this))return"0";if(V(this))return"-"+O(this).toString(E);for(var g=h(Math.pow(E,6)),T=this,S="";;){var k=M(T,g).g;T=x(T,k.j(g));var D=((0<T.g.length?T.g[0]:T.h)>>>0).toString(E);if(T=k,N(T))return D+S;for(;6>D.length;)D="0"+D;S=D+S}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function N(E){if(E.h!=0)return!1;for(var g=0;g<E.g.length;g++)if(E.g[g]!=0)return!1;return!0}function V(E){return E.h==-1}t.l=function(E){return E=x(this,E),V(E)?-1:N(E)?0:1};function O(E){for(var g=E.g.length,T=[],S=0;S<g;S++)T[S]=~E.g[S];return new a(T,~E.h).add(_)}t.abs=function(){return V(this)?O(this):this},t.add=function(E){for(var g=Math.max(this.g.length,E.g.length),T=[],S=0,k=0;k<=g;k++){var D=S+(this.i(k)&65535)+(E.i(k)&65535),I=(D>>>16)+(this.i(k)>>>16)+(E.i(k)>>>16);S=I>>>16,D&=65535,I&=65535,T[k]=I<<16|D}return new a(T,T[T.length-1]&-2147483648?-1:0)};function x(E,g){return E.add(O(g))}t.j=function(E){if(N(this)||N(E))return y;if(V(this))return V(E)?O(this).j(O(E)):O(O(this).j(E));if(V(E))return O(this.j(O(E)));if(0>this.l(C)&&0>E.l(C))return h(this.m()*E.m());for(var g=this.g.length+E.g.length,T=[],S=0;S<2*g;S++)T[S]=0;for(S=0;S<this.g.length;S++)for(var k=0;k<E.g.length;k++){var D=this.i(S)>>>16,I=this.i(S)&65535,$e=E.i(k)>>>16,We=E.i(k)&65535;T[2*S+2*k]+=I*We,w(T,2*S+2*k),T[2*S+2*k+1]+=D*We,w(T,2*S+2*k+1),T[2*S+2*k+1]+=I*$e,w(T,2*S+2*k+1),T[2*S+2*k+2]+=D*$e,w(T,2*S+2*k+2)}for(S=0;S<g;S++)T[S]=T[2*S+1]<<16|T[2*S];for(S=g;S<2*g;S++)T[S]=0;return new a(T,0)};function w(E,g){for(;(E[g]&65535)!=E[g];)E[g+1]+=E[g]>>>16,E[g]&=65535,g++}function A(E,g){this.g=E,this.h=g}function M(E,g){if(N(g))throw Error("division by zero");if(N(E))return new A(y,y);if(V(E))return g=M(O(E),g),new A(O(g.g),O(g.h));if(V(g))return g=M(E,O(g)),new A(O(g.g),g.h);if(30<E.g.length){if(V(E)||V(g))throw Error("slowDivide_ only works with positive integers.");for(var T=_,S=g;0>=S.l(E);)T=W(T),S=W(S);var k=q(T,1),D=q(S,1);for(S=q(S,2),T=q(T,2);!N(S);){var I=D.add(S);0>=I.l(E)&&(k=k.add(T),D=I),S=q(S,1),T=q(T,1)}return g=x(E,k.j(g)),new A(k,g)}for(k=y;0<=E.l(g);){for(T=Math.max(1,Math.floor(E.m()/g.m())),S=Math.ceil(Math.log(T)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),D=h(T),I=D.j(g);V(I)||0<I.l(E);)T-=S,D=h(T),I=D.j(g);N(D)&&(D=_),k=k.add(D),E=x(E,I)}return new A(k,E)}t.A=function(E){return M(this,E).h},t.and=function(E){for(var g=Math.max(this.g.length,E.g.length),T=[],S=0;S<g;S++)T[S]=this.i(S)&E.i(S);return new a(T,this.h&E.h)},t.or=function(E){for(var g=Math.max(this.g.length,E.g.length),T=[],S=0;S<g;S++)T[S]=this.i(S)|E.i(S);return new a(T,this.h|E.h)},t.xor=function(E){for(var g=Math.max(this.g.length,E.g.length),T=[],S=0;S<g;S++)T[S]=this.i(S)^E.i(S);return new a(T,this.h^E.h)};function W(E){for(var g=E.g.length+1,T=[],S=0;S<g;S++)T[S]=E.i(S)<<1|E.i(S-1)>>>31;return new a(T,E.h)}function q(E,g){var T=g>>5;g%=32;for(var S=E.g.length-T,k=[],D=0;D<S;D++)k[D]=0<g?E.i(D+T)>>>g|E.i(D+T+1)<<32-g:E.i(D+T);return new a(k,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,b_=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=f,Lr=a}).apply(typeof am<"u"?am:typeof self<"u"?self:typeof window<"u"?window:{});var fa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var V_,Ps,M_,Na,qc,L_,O_,F_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,d){return o==Array.prototype||o==Object.prototype||(o[c]=d.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof fa=="object"&&fa];for(var c=0;c<o.length;++c){var d=o[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function i(o,c){if(c)e:{var d=r;o=o.split(".");for(var m=0;m<o.length-1;m++){var b=o[m];if(!(b in d))break e;d=d[b]}o=o[o.length-1],m=d[o],c=c(m),c!=m&&c!=null&&e(d,o,{configurable:!0,writable:!0,value:c})}}function s(o,c){o instanceof String&&(o+="");var d=0,m=!1,b={next:function(){if(!m&&d<o.length){var L=d++;return{value:c(L,o[L]),done:!1}}return m=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(o){return o||function(){return s(this,function(c,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function h(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function f(o,c,d){return o.call.apply(o.bind,arguments)}function y(o,c,d){if(!o)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,m),o.apply(c,b)}}return function(){return o.apply(c,arguments)}}function _(o,c,d){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:y,_.apply(null,arguments)}function C(o,c){var d=Array.prototype.slice.call(arguments,1);return function(){var m=d.slice();return m.push.apply(m,arguments),o.apply(this,m)}}function N(o,c){function d(){}d.prototype=c.prototype,o.aa=c.prototype,o.prototype=new d,o.prototype.constructor=o,o.Qb=function(m,b,L){for(var H=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)H[Te-2]=arguments[Te];return c.prototype[b].apply(m,H)}}function V(o){const c=o.length;if(0<c){const d=Array(c);for(let m=0;m<c;m++)d[m]=o[m];return d}return[]}function O(o,c){for(let d=1;d<arguments.length;d++){const m=arguments[d];if(u(m)){const b=o.length||0,L=m.length||0;o.length=b+L;for(let H=0;H<L;H++)o[b+H]=m[H]}else o.push(m)}}class x{constructor(c,d){this.i=c,this.j=d,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function w(o){return/^[\s\xa0]*$/.test(o)}function A(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function M(o){return M[" "](o),o}M[" "]=function(){};var W=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function q(o,c,d){for(const m in o)c.call(d,o[m],m,o)}function E(o,c){for(const d in o)c.call(void 0,o[d],d,o)}function g(o){const c={};for(const d in o)c[d]=o[d];return c}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(o,c){let d,m;for(let b=1;b<arguments.length;b++){m=arguments[b];for(d in m)o[d]=m[d];for(let L=0;L<T.length;L++)d=T[L],Object.prototype.hasOwnProperty.call(m,d)&&(o[d]=m[d])}}function k(o){var c=1;o=o.split(":");const d=[];for(;0<c&&o.length;)d.push(o.shift()),c--;return o.length&&d.push(o.join(":")),d}function D(o){l.setTimeout(()=>{throw o},0)}function I(){var o=Q;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class $e{constructor(){this.h=this.g=null}add(c,d){const m=We.get();m.set(c,d),this.h?this.h.next=m:this.g=m,this.h=m}}var We=new x(()=>new _t,o=>o.reset());class _t{constructor(){this.next=this.g=this.h=null}set(c,d){this.h=c,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let ke,G=!1,Q=new $e,ne=()=>{const o=l.Promise.resolve(void 0);ke=()=>{o.then(ge)}};var ge=()=>{for(var o;o=I();){try{o.h.call(o.g)}catch(d){D(d)}var c=We;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}G=!1};function oe(){this.s=this.s,this.C=this.C}oe.prototype.s=!1,oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}$.prototype.h=function(){this.defaultPrevented=!0};var ae=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const d=()=>{};l.addEventListener("test",d,c),l.removeEventListener("test",d,c)}catch{}return o}();function ye(o,c){if($.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var d=this.type=o.type,m=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(W){e:{try{M(c.nodeName);var b=!0;break e}catch{}b=!1}b||(c=null)}}else d=="mouseover"?c=o.fromElement:d=="mouseout"&&(c=o.toElement);this.relatedTarget=c,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:me[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&ye.aa.h.call(this)}}N(ye,$);var me={2:"touch",3:"pen",4:"mouse"};ye.prototype.h=function(){ye.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Pe="closure_listenable_"+(1e6*Math.random()|0),De=0;function Vt(o,c,d,m,b){this.listener=o,this.proxy=null,this.src=c,this.type=d,this.capture=!!m,this.ha=b,this.key=++De,this.da=this.fa=!1}function lt(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function vt(o){this.src=o,this.g={},this.h=0}vt.prototype.add=function(o,c,d,m,b){var L=o.toString();o=this.g[L],o||(o=this.g[L]=[],this.h++);var H=Tn(o,c,m,b);return-1<H?(c=o[H],d||(c.fa=!1)):(c=new Vt(c,this.src,L,!!m,b),c.fa=d,o.push(c)),c};function Mt(o,c){var d=c.type;if(d in o.g){var m=o.g[d],b=Array.prototype.indexOf.call(m,c,void 0),L;(L=0<=b)&&Array.prototype.splice.call(m,b,1),L&&(lt(c),o.g[d].length==0&&(delete o.g[d],o.h--))}}function Tn(o,c,d,m){for(var b=0;b<o.length;++b){var L=o[b];if(!L.da&&L.listener==c&&L.capture==!!d&&L.ha==m)return b}return-1}var qt="closure_lm_"+(1e6*Math.random()|0),Ht={};function jn(o,c,d,m,b){if(Array.isArray(c)){for(var L=0;L<c.length;L++)jn(o,c[L],d,m,b);return null}return d=en(d),o&&o[Pe]?o.K(c,d,h(m)?!!m.capture:!1,b):ei(o,c,d,!1,m,b)}function ei(o,c,d,m,b,L){if(!c)throw Error("Invalid event type");var H=h(b)?!!b.capture:!!b,Te=Z(o);if(Te||(o[qt]=Te=new vt(o)),d=Te.add(c,d,m,H,L),d.proxy)return d;if(m=ti(),d.proxy=m,m.src=o,m.listener=d,o.addEventListener)ae||(b=H),b===void 0&&(b=!1),o.addEventListener(c.toString(),m,b);else if(o.attachEvent)o.attachEvent(U(c.toString()),m);else if(o.addListener&&o.removeListener)o.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return d}function ti(){function o(d){return c.call(o.src,o.listener,d)}const c=K;return o}function F(o,c,d,m,b){if(Array.isArray(c))for(var L=0;L<c.length;L++)F(o,c[L],d,m,b);else m=h(m)?!!m.capture:!!m,d=en(d),o&&o[Pe]?(o=o.i,c=String(c).toString(),c in o.g&&(L=o.g[c],d=Tn(L,d,m,b),-1<d&&(lt(L[d]),Array.prototype.splice.call(L,d,1),L.length==0&&(delete o.g[c],o.h--)))):o&&(o=Z(o))&&(c=o.g[c.toString()],o=-1,c&&(o=Tn(c,d,m,b)),(d=-1<o?c[o]:null)&&P(d))}function P(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[Pe])Mt(c.i,o);else{var d=o.type,m=o.proxy;c.removeEventListener?c.removeEventListener(d,m,o.capture):c.detachEvent?c.detachEvent(U(d),m):c.addListener&&c.removeListener&&c.removeListener(m),(d=Z(c))?(Mt(d,o),d.h==0&&(d.src=null,c[qt]=null)):lt(o)}}}function U(o){return o in Ht?Ht[o]:Ht[o]="on"+o}function K(o,c){if(o.da)o=!0;else{c=new ye(c,this);var d=o.listener,m=o.ha||o.src;o.fa&&P(o),o=d.call(m,c)}return o}function Z(o){return o=o[qt],o instanceof vt?o:null}var Ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function en(o){return typeof o=="function"?o:(o[Ee]||(o[Ee]=function(c){return o.handleEvent(c)}),o[Ee])}function _e(){oe.call(this),this.i=new vt(this),this.M=this,this.F=null}N(_e,oe),_e.prototype[Pe]=!0,_e.prototype.removeEventListener=function(o,c,d,m){F(this,o,c,d,m)};function Le(o,c){var d,m=o.F;if(m)for(d=[];m;m=m.F)d.push(m);if(o=o.M,m=c.type||c,typeof c=="string")c=new $(c,o);else if(c instanceof $)c.target=c.target||o;else{var b=c;c=new $(m,o),S(c,b)}if(b=!0,d)for(var L=d.length-1;0<=L;L--){var H=c.g=d[L];b=Gt(H,m,!0,c)&&b}if(H=c.g=o,b=Gt(H,m,!0,c)&&b,b=Gt(H,m,!1,c)&&b,d)for(L=0;L<d.length;L++)H=c.g=d[L],b=Gt(H,m,!1,c)&&b}_e.prototype.N=function(){if(_e.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var d=o.g[c],m=0;m<d.length;m++)lt(d[m]);delete o.g[c],o.h--}}this.F=null},_e.prototype.K=function(o,c,d,m){return this.i.add(String(o),c,!1,d,m)},_e.prototype.L=function(o,c,d,m){return this.i.add(String(o),c,!0,d,m)};function Gt(o,c,d,m){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var b=!0,L=0;L<c.length;++L){var H=c[L];if(H&&!H.da&&H.capture==d){var Te=H.listener,et=H.ha||H.src;H.fa&&Mt(o.i,H),b=Te.call(et,m)!==!1&&b}}return b&&!m.defaultPrevented}function es(o,c,d){if(typeof o=="function")d&&(o=_(o,d));else if(o&&typeof o.handleEvent=="function")o=_(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function ts(o){o.g=es(()=>{o.g=null,o.i&&(o.i=!1,ts(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class ni extends oe{constructor(c,d){super(),this.m=c,this.l=d,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:ts(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Un(o){oe.call(this),this.h=o,this.g={}}N(Un,oe);var ns=[];function rs(o){q(o.g,function(c,d){this.g.hasOwnProperty(d)&&P(c)},o),o.g={}}Un.prototype.N=function(){Un.aa.N.call(this),rs(this)},Un.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bn=l.JSON.stringify,Vo=l.JSON.parse,y0=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function Ql(){}Ql.prototype.h=null;function Yd(o){return o.h||(o.h=o.i())}function Xd(){}var is={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Kl(){$.call(this,"d")}N(Kl,$);function Yl(){$.call(this,"c")}N(Yl,$);var Tr={},Jd=null;function Mo(){return Jd=Jd||new _e}Tr.La="serverreachability";function Zd(o){$.call(this,Tr.La,o)}N(Zd,$);function ss(o){const c=Mo();Le(c,new Zd(c))}Tr.STAT_EVENT="statevent";function ef(o,c){$.call(this,Tr.STAT_EVENT,o),this.stat=c}N(ef,$);function wt(o){const c=Mo();Le(c,new ef(c,o))}Tr.Ma="timingevent";function tf(o,c){$.call(this,Tr.Ma,o),this.size=c}N(tf,$);function os(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function as(){this.g=!0}as.prototype.xa=function(){this.g=!1};function _0(o,c,d,m,b,L){o.info(function(){if(o.g)if(L)for(var H="",Te=L.split("&"),et=0;et<Te.length;et++){var fe=Te[et].split("=");if(1<fe.length){var ut=fe[0];fe=fe[1];var ct=ut.split("_");H=2<=ct.length&&ct[1]=="type"?H+(ut+"="+fe+"&"):H+(ut+"=redacted&")}}else H=null;else H=L;return"XMLHTTP REQ ("+m+") [attempt "+b+"]: "+c+`
`+d+`
`+H})}function v0(o,c,d,m,b,L,H){o.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+b+"]: "+c+`
`+d+`
`+L+" "+H})}function ri(o,c,d,m){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+E0(o,d)+(m?" "+m:"")})}function w0(o,c){o.info(function(){return"TIMEOUT: "+c})}as.prototype.info=function(){};function E0(o,c){if(!o.g)return c;if(!c)return null;try{var d=JSON.parse(c);if(d){for(o=0;o<d.length;o++)if(Array.isArray(d[o])){var m=d[o];if(!(2>m.length)){var b=m[1];if(Array.isArray(b)&&!(1>b.length)){var L=b[0];if(L!="noop"&&L!="stop"&&L!="close")for(var H=1;H<b.length;H++)b[H]=""}}}}return Bn(d)}catch{return c}}var Lo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},nf={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Xl;function Oo(){}N(Oo,Ql),Oo.prototype.g=function(){return new XMLHttpRequest},Oo.prototype.i=function(){return{}},Xl=new Oo;function zn(o,c,d,m){this.j=o,this.i=c,this.l=d,this.R=m||1,this.U=new Un(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new rf}function rf(){this.i=null,this.g="",this.h=!1}var sf={},Jl={};function Zl(o,c,d){o.L=1,o.v=Bo(In(c)),o.m=d,o.P=!0,of(o,null)}function of(o,c){o.F=Date.now(),Fo(o),o.A=In(o.v);var d=o.A,m=o.R;Array.isArray(m)||(m=[String(m)]),wf(d.i,"t",m),o.C=0,d=o.j.J,o.h=new rf,o.g=Ff(o.j,d?c:null,!o.m),0<o.O&&(o.M=new ni(_(o.Y,o,o.g),o.O)),c=o.U,d=o.g,m=o.ca;var b="readystatechange";Array.isArray(b)||(b&&(ns[0]=b.toString()),b=ns);for(var L=0;L<b.length;L++){var H=jn(d,b[L],m||c.handleEvent,!1,c.h||c);if(!H)break;c.g[H.key]=H}c=o.H?g(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),ss(),_0(o.i,o.u,o.A,o.l,o.R,o.m)}zn.prototype.ca=function(o){o=o.target;const c=this.M;c&&Sn(o)==3?c.j():this.Y(o)},zn.prototype.Y=function(o){try{if(o==this.g)e:{const ct=Sn(this.g);var c=this.g.Ba();const oi=this.g.Z();if(!(3>ct)&&(ct!=3||this.g&&(this.h.h||this.g.oa()||Cf(this.g)))){this.J||ct!=4||c==7||(c==8||0>=oi?ss(3):ss(2)),eu(this);var d=this.g.Z();this.X=d;t:if(af(this)){var m=Cf(this.g);o="";var b=m.length,L=Sn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ir(this),ls(this);var H="";break t}this.h.i=new l.TextDecoder}for(c=0;c<b;c++)this.h.h=!0,o+=this.h.i.decode(m[c],{stream:!(L&&c==b-1)});m.length=0,this.h.g+=o,this.C=0,H=this.h.g}else H=this.g.oa();if(this.o=d==200,v0(this.i,this.u,this.A,this.l,this.R,ct,d),this.o){if(this.T&&!this.K){t:{if(this.g){var Te,et=this.g;if((Te=et.g?et.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Te)){var fe=Te;break t}}fe=null}if(d=fe)ri(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,tu(this,d);else{this.o=!1,this.s=3,wt(12),Ir(this),ls(this);break e}}if(this.P){d=!0;let tn;for(;!this.J&&this.C<H.length;)if(tn=T0(this,H),tn==Jl){ct==4&&(this.s=4,wt(14),d=!1),ri(this.i,this.l,null,"[Incomplete Response]");break}else if(tn==sf){this.s=4,wt(15),ri(this.i,this.l,H,"[Invalid Chunk]"),d=!1;break}else ri(this.i,this.l,tn,null),tu(this,tn);if(af(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||H.length!=0||this.h.h||(this.s=1,wt(16),d=!1),this.o=this.o&&d,!d)ri(this.i,this.l,H,"[Invalid Chunked Response]"),Ir(this),ls(this);else if(0<H.length&&!this.W){this.W=!0;var ut=this.j;ut.g==this&&ut.ba&&!ut.M&&(ut.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),au(ut),ut.M=!0,wt(11))}}else ri(this.i,this.l,H,null),tu(this,H);ct==4&&Ir(this),this.o&&!this.J&&(ct==4?Vf(this.j,this):(this.o=!1,Fo(this)))}else j0(this.g),d==400&&0<H.indexOf("Unknown SID")?(this.s=3,wt(12)):(this.s=0,wt(13)),Ir(this),ls(this)}}}catch{}finally{}};function af(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function T0(o,c){var d=o.C,m=c.indexOf(`
`,d);return m==-1?Jl:(d=Number(c.substring(d,m)),isNaN(d)?sf:(m+=1,m+d>c.length?Jl:(c=c.slice(m,m+d),o.C=m+d,c)))}zn.prototype.cancel=function(){this.J=!0,Ir(this)};function Fo(o){o.S=Date.now()+o.I,lf(o,o.I)}function lf(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=os(_(o.ba,o),c)}function eu(o){o.B&&(l.clearTimeout(o.B),o.B=null)}zn.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(w0(this.i,this.A),this.L!=2&&(ss(),wt(17)),Ir(this),this.s=2,ls(this)):lf(this,this.S-o)};function ls(o){o.j.G==0||o.J||Vf(o.j,o)}function Ir(o){eu(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,rs(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function tu(o,c){try{var d=o.j;if(d.G!=0&&(d.g==o||nu(d.h,o))){if(!o.K&&nu(d.h,o)&&d.G==3){try{var m=d.Da.g.parse(c)}catch{m=null}if(Array.isArray(m)&&m.length==3){var b=m;if(b[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<o.F)Go(d),qo(d);else break e;ou(d),wt(18)}}else d.za=b[1],0<d.za-d.T&&37500>b[2]&&d.F&&d.v==0&&!d.C&&(d.C=os(_(d.Za,d),6e3));if(1>=hf(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else xr(d,11)}else if((o.K||d.g==o)&&Go(d),!w(c))for(b=d.Da.g.parse(c),c=0;c<b.length;c++){let fe=b[c];if(d.T=fe[0],fe=fe[1],d.G==2)if(fe[0]=="c"){d.K=fe[1],d.ia=fe[2];const ut=fe[3];ut!=null&&(d.la=ut,d.j.info("VER="+d.la));const ct=fe[4];ct!=null&&(d.Aa=ct,d.j.info("SVER="+d.Aa));const oi=fe[5];oi!=null&&typeof oi=="number"&&0<oi&&(m=1.5*oi,d.L=m,d.j.info("backChannelRequestTimeoutMs_="+m)),m=d;const tn=o.g;if(tn){const Ko=tn.g?tn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ko){var L=m.h;L.g||Ko.indexOf("spdy")==-1&&Ko.indexOf("quic")==-1&&Ko.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(ru(L,L.h),L.h=null))}if(m.D){const lu=tn.g?tn.g.getResponseHeader("X-HTTP-Session-Id"):null;lu&&(m.ya=lu,Se(m.I,m.D,lu))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-o.F,d.j.info("Handshake RTT: "+d.R+"ms")),m=d;var H=o;if(m.qa=Of(m,m.J?m.ia:null,m.W),H.K){df(m.h,H);var Te=H,et=m.L;et&&(Te.I=et),Te.B&&(eu(Te),Fo(Te)),m.g=H}else Nf(m);0<d.i.length&&Ho(d)}else fe[0]!="stop"&&fe[0]!="close"||xr(d,7);else d.G==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?xr(d,7):su(d):fe[0]!="noop"&&d.l&&d.l.ta(fe),d.v=0)}}ss(4)}catch{}}var I0=class{constructor(o,c){this.g=o,this.map=c}};function uf(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function cf(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function hf(o){return o.h?1:o.g?o.g.size:0}function nu(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function ru(o,c){o.g?o.g.add(c):o.h=c}function df(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}uf.prototype.cancel=function(){if(this.i=ff(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function ff(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const d of o.g.values())c=c.concat(d.D);return c}return V(o.i)}function S0(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],d=o.length,m=0;m<d;m++)c.push(o[m]);return c}c=[],d=0;for(m in o)c[d++]=o[m];return c}function x0(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var d=0;d<o;d++)c.push(d);return c}c=[],d=0;for(const m in o)c[d++]=m;return c}}}function pf(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var d=x0(o),m=S0(o),b=m.length,L=0;L<b;L++)c.call(void 0,m[L],d&&d[L],o)}var mf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function A0(o,c){if(o){o=o.split("&");for(var d=0;d<o.length;d++){var m=o[d].indexOf("="),b=null;if(0<=m){var L=o[d].substring(0,m);b=o[d].substring(m+1)}else L=o[d];c(L,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Sr(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Sr){this.h=o.h,jo(this,o.j),this.o=o.o,this.g=o.g,Uo(this,o.s),this.l=o.l;var c=o.i,d=new hs;d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),gf(this,d),this.m=o.m}else o&&(c=String(o).match(mf))?(this.h=!1,jo(this,c[1]||"",!0),this.o=us(c[2]||""),this.g=us(c[3]||"",!0),Uo(this,c[4]),this.l=us(c[5]||"",!0),gf(this,c[6]||"",!0),this.m=us(c[7]||"")):(this.h=!1,this.i=new hs(null,this.h))}Sr.prototype.toString=function(){var o=[],c=this.j;c&&o.push(cs(c,yf,!0),":");var d=this.g;return(d||c=="file")&&(o.push("//"),(c=this.o)&&o.push(cs(c,yf,!0),"@"),o.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&o.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&o.push("/"),o.push(cs(d,d.charAt(0)=="/"?k0:R0,!0))),(d=this.i.toString())&&o.push("?",d),(d=this.m)&&o.push("#",cs(d,D0)),o.join("")};function In(o){return new Sr(o)}function jo(o,c,d){o.j=d?us(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function Uo(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function gf(o,c,d){c instanceof hs?(o.i=c,N0(o.i,o.h)):(d||(c=cs(c,P0)),o.i=new hs(c,o.h))}function Se(o,c,d){o.i.set(c,d)}function Bo(o){return Se(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function us(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function cs(o,c,d){return typeof o=="string"?(o=encodeURI(o).replace(c,C0),d&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function C0(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var yf=/[#\/\?@]/g,R0=/[#\?:]/g,k0=/[#\?]/g,P0=/[#\?@]/g,D0=/#/g;function hs(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function $n(o){o.g||(o.g=new Map,o.h=0,o.i&&A0(o.i,function(c,d){o.add(decodeURIComponent(c.replace(/\+/g," ")),d)}))}t=hs.prototype,t.add=function(o,c){$n(this),this.i=null,o=ii(this,o);var d=this.g.get(o);return d||this.g.set(o,d=[]),d.push(c),this.h+=1,this};function _f(o,c){$n(o),c=ii(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function vf(o,c){return $n(o),c=ii(o,c),o.g.has(c)}t.forEach=function(o,c){$n(this),this.g.forEach(function(d,m){d.forEach(function(b){o.call(c,b,m,this)},this)},this)},t.na=function(){$n(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),d=[];for(let m=0;m<c.length;m++){const b=o[m];for(let L=0;L<b.length;L++)d.push(c[m])}return d},t.V=function(o){$n(this);let c=[];if(typeof o=="string")vf(this,o)&&(c=c.concat(this.g.get(ii(this,o))));else{o=Array.from(this.g.values());for(let d=0;d<o.length;d++)c=c.concat(o[d])}return c},t.set=function(o,c){return $n(this),this.i=null,o=ii(this,o),vf(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},t.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function wf(o,c,d){_f(o,c),0<d.length&&(o.i=null,o.g.set(ii(o,c),V(d)),o.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var d=0;d<c.length;d++){var m=c[d];const L=encodeURIComponent(String(m)),H=this.V(m);for(m=0;m<H.length;m++){var b=L;H[m]!==""&&(b+="="+encodeURIComponent(String(H[m]))),o.push(b)}}return this.i=o.join("&")};function ii(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function N0(o,c){c&&!o.j&&($n(o),o.i=null,o.g.forEach(function(d,m){var b=m.toLowerCase();m!=b&&(_f(this,m),wf(this,b,d))},o)),o.j=c}function b0(o,c){const d=new as;if(l.Image){const m=new Image;m.onload=C(Wn,d,"TestLoadImage: loaded",!0,c,m),m.onerror=C(Wn,d,"TestLoadImage: error",!1,c,m),m.onabort=C(Wn,d,"TestLoadImage: abort",!1,c,m),m.ontimeout=C(Wn,d,"TestLoadImage: timeout",!1,c,m),l.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=o}else c(!1)}function V0(o,c){const d=new as,m=new AbortController,b=setTimeout(()=>{m.abort(),Wn(d,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:m.signal}).then(L=>{clearTimeout(b),L.ok?Wn(d,"TestPingServer: ok",!0,c):Wn(d,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(b),Wn(d,"TestPingServer: error",!1,c)})}function Wn(o,c,d,m,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),m(d)}catch{}}function M0(){this.g=new y0}function L0(o,c,d){const m=d||"";try{pf(o,function(b,L){let H=b;h(b)&&(H=Bn(b)),c.push(m+L+"="+encodeURIComponent(H))})}catch(b){throw c.push(m+"type="+encodeURIComponent("_badmap")),b}}function zo(o){this.l=o.Ub||null,this.j=o.eb||!1}N(zo,Ql),zo.prototype.g=function(){return new $o(this.l,this.j)},zo.prototype.i=function(o){return function(){return o}}({});function $o(o,c){_e.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N($o,_e),t=$o.prototype,t.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,fs(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ds(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,fs(this)),this.g&&(this.readyState=3,fs(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ef(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ef(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?ds(this):fs(this),this.readyState==3&&Ef(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,ds(this))},t.Qa=function(o){this.g&&(this.response=o,ds(this))},t.ga=function(){this.g&&ds(this)};function ds(o){o.readyState=4,o.l=null,o.j=null,o.v=null,fs(o)}t.setRequestHeader=function(o,c){this.u.append(o,c)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var d=c.next();!d.done;)d=d.value,o.push(d[0]+": "+d[1]),d=c.next();return o.join(`\r
`)};function fs(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty($o.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Tf(o){let c="";return q(o,function(d,m){c+=m,c+=":",c+=d,c+=`\r
`}),c}function iu(o,c,d){e:{for(m in d){var m=!1;break e}m=!0}m||(d=Tf(d),typeof o=="string"?d!=null&&encodeURIComponent(String(d)):Se(o,c,d))}function Oe(o){_e.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(Oe,_e);var O0=/^https?$/i,F0=["POST","PUT"];t=Oe.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,c,d,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Xl.g(),this.v=this.o?Yd(this.o):Yd(Xl),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(L){If(this,L);return}if(o=d||"",d=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var b in m)d.set(b,m[b]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(const L of m.keys())d.set(L,m.get(L));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(d.keys()).find(L=>L.toLowerCase()=="content-type"),b=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(F0,c,void 0))||m||b||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,H]of d)this.g.setRequestHeader(L,H);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Af(this),this.u=!0,this.g.send(o),this.u=!1}catch(L){If(this,L)}};function If(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,Sf(o),Wo(o)}function Sf(o){o.A||(o.A=!0,Le(o,"complete"),Le(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,Le(this,"complete"),Le(this,"abort"),Wo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wo(this,!0)),Oe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?xf(this):this.bb())},t.bb=function(){xf(this)};function xf(o){if(o.h&&typeof a<"u"&&(!o.v[1]||Sn(o)!=4||o.Z()!=2)){if(o.u&&Sn(o)==4)es(o.Ea,0,o);else if(Le(o,"readystatechange"),Sn(o)==4){o.h=!1;try{const H=o.Z();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var d;if(!(d=c)){var m;if(m=H===0){var b=String(o.D).match(mf)[1]||null;!b&&l.self&&l.self.location&&(b=l.self.location.protocol.slice(0,-1)),m=!O0.test(b?b.toLowerCase():"")}d=m}if(d)Le(o,"complete"),Le(o,"success");else{o.m=6;try{var L=2<Sn(o)?o.g.statusText:""}catch{L=""}o.l=L+" ["+o.Z()+"]",Sf(o)}}finally{Wo(o)}}}}function Wo(o,c){if(o.g){Af(o);const d=o.g,m=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||Le(o,"ready");try{d.onreadystatechange=m}catch{}}}function Af(o){o.I&&(l.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function Sn(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<Sn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),Vo(c)}};function Cf(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function j0(o){const c={};o=(o.g&&2<=Sn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<o.length;m++){if(w(o[m]))continue;var d=k(o[m]);const b=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const L=c[b]||[];c[b]=L,L.push(d)}E(c,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ps(o,c,d){return d&&d.internalChannelParams&&d.internalChannelParams[o]||c}function Rf(o){this.Aa=0,this.i=[],this.j=new as,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ps("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ps("baseRetryDelayMs",5e3,o),this.cb=ps("retryDelaySeedMs",1e4,o),this.Wa=ps("forwardChannelMaxRetries",2,o),this.wa=ps("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new uf(o&&o.concurrentRequestLimit),this.Da=new M0,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Rf.prototype,t.la=8,t.G=1,t.connect=function(o,c,d,m){wt(0),this.W=o,this.H=c||{},d&&m!==void 0&&(this.H.OSID=d,this.H.OAID=m),this.F=this.X,this.I=Of(this,null,this.W),Ho(this)};function su(o){if(kf(o),o.G==3){var c=o.U++,d=In(o.I);if(Se(d,"SID",o.K),Se(d,"RID",c),Se(d,"TYPE","terminate"),ms(o,d),c=new zn(o,o.j,c),c.L=2,c.v=Bo(In(d)),d=!1,l.navigator&&l.navigator.sendBeacon)try{d=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!d&&l.Image&&(new Image().src=c.v,d=!0),d||(c.g=Ff(c.j,null),c.g.ea(c.v)),c.F=Date.now(),Fo(c)}Lf(o)}function qo(o){o.g&&(au(o),o.g.cancel(),o.g=null)}function kf(o){qo(o),o.u&&(l.clearTimeout(o.u),o.u=null),Go(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function Ho(o){if(!cf(o.h)&&!o.s){o.s=!0;var c=o.Ga;ke||ne(),G||(ke(),G=!0),Q.add(c,o),o.B=0}}function U0(o,c){return hf(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=os(_(o.Ga,o,c),Mf(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const b=new zn(this,this.j,o);let L=this.o;if(this.S&&(L?(L=g(L),S(L,this.S)):L=this.S),this.m!==null||this.O||(b.H=L,L=null),this.P)e:{for(var c=0,d=0;d<this.i.length;d++){t:{var m=this.i[d];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(c+=m,4096<c){c=d;break e}if(c===4096||d===this.i.length-1){c=d+1;break e}}c=1e3}else c=1e3;c=Df(this,b,c),d=In(this.I),Se(d,"RID",o),Se(d,"CVER",22),this.D&&Se(d,"X-HTTP-Session-Id",this.D),ms(this,d),L&&(this.O?c="headers="+encodeURIComponent(String(Tf(L)))+"&"+c:this.m&&iu(d,this.m,L)),ru(this.h,b),this.Ua&&Se(d,"TYPE","init"),this.P?(Se(d,"$req",c),Se(d,"SID","null"),b.T=!0,Zl(b,d,null)):Zl(b,d,c),this.G=2}}else this.G==3&&(o?Pf(this,o):this.i.length==0||cf(this.h)||Pf(this))};function Pf(o,c){var d;c?d=c.l:d=o.U++;const m=In(o.I);Se(m,"SID",o.K),Se(m,"RID",d),Se(m,"AID",o.T),ms(o,m),o.m&&o.o&&iu(m,o.m,o.o),d=new zn(o,o.j,d,o.B+1),o.m===null&&(d.H=o.o),c&&(o.i=c.D.concat(o.i)),c=Df(o,d,1e3),d.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),ru(o.h,d),Zl(d,m,c)}function ms(o,c){o.H&&q(o.H,function(d,m){Se(c,m,d)}),o.l&&pf({},function(d,m){Se(c,m,d)})}function Df(o,c,d){d=Math.min(o.i.length,d);var m=o.l?_(o.l.Na,o.l,o):null;e:{var b=o.i;let L=-1;for(;;){const H=["count="+d];L==-1?0<d?(L=b[0].g,H.push("ofs="+L)):L=0:H.push("ofs="+L);let Te=!0;for(let et=0;et<d;et++){let fe=b[et].g;const ut=b[et].map;if(fe-=L,0>fe)L=Math.max(0,b[et].g-100),Te=!1;else try{L0(ut,H,"req"+fe+"_")}catch{m&&m(ut)}}if(Te){m=H.join("&");break e}}}return o=o.i.splice(0,d),c.D=o,m}function Nf(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;ke||ne(),G||(ke(),G=!0),Q.add(c,o),o.v=0}}function ou(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=os(_(o.Fa,o),Mf(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,bf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=os(_(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wt(10),qo(this),bf(this))};function au(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function bf(o){o.g=new zn(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=In(o.qa);Se(c,"RID","rpc"),Se(c,"SID",o.K),Se(c,"AID",o.T),Se(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&Se(c,"TO",o.ja),Se(c,"TYPE","xmlhttp"),ms(o,c),o.m&&o.o&&iu(c,o.m,o.o),o.L&&(o.g.I=o.L);var d=o.g;o=o.ia,d.L=1,d.v=Bo(In(c)),d.m=null,d.P=!0,of(d,o)}t.Za=function(){this.C!=null&&(this.C=null,qo(this),ou(this),wt(19))};function Go(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function Vf(o,c){var d=null;if(o.g==c){Go(o),au(o),o.g=null;var m=2}else if(nu(o.h,c))d=c.D,df(o.h,c),m=1;else return;if(o.G!=0){if(c.o)if(m==1){d=c.m?c.m.length:0,c=Date.now()-c.F;var b=o.B;m=Mo(),Le(m,new tf(m,d)),Ho(o)}else Nf(o);else if(b=c.s,b==3||b==0&&0<c.X||!(m==1&&U0(o,c)||m==2&&ou(o)))switch(d&&0<d.length&&(c=o.h,c.i=c.i.concat(d)),b){case 1:xr(o,5);break;case 4:xr(o,10);break;case 3:xr(o,6);break;default:xr(o,2)}}}function Mf(o,c){let d=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(d*=2),d*c}function xr(o,c){if(o.j.info("Error code "+c),c==2){var d=_(o.fb,o),m=o.Xa;const b=!m;m=new Sr(m||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||jo(m,"https"),Bo(m),b?b0(m.toString(),d):V0(m.toString(),d)}else wt(2);o.G=0,o.l&&o.l.sa(c),Lf(o),kf(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function Lf(o){if(o.G=0,o.ka=[],o.l){const c=ff(o.h);(c.length!=0||o.i.length!=0)&&(O(o.ka,c),O(o.ka,o.i),o.h.i.length=0,V(o.i),o.i.length=0),o.l.ra()}}function Of(o,c,d){var m=d instanceof Sr?In(d):new Sr(d);if(m.g!="")c&&(m.g=c+"."+m.g),Uo(m,m.s);else{var b=l.location;m=b.protocol,c=c?c+"."+b.hostname:b.hostname,b=+b.port;var L=new Sr(null);m&&jo(L,m),c&&(L.g=c),b&&Uo(L,b),d&&(L.l=d),m=L}return d=o.D,c=o.ya,d&&c&&Se(m,d,c),Se(m,"VER",o.la),ms(o,m),m}function Ff(o,c,d){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new Oe(new zo({eb:d})):new Oe(o.pa),c.Ha(o.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function jf(){}t=jf.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Qo(){}Qo.prototype.g=function(o,c){return new Lt(o,c)};function Lt(o,c){_e.call(this),this.g=new Rf(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!w(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!w(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new si(this)}N(Lt,_e),Lt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Lt.prototype.close=function(){su(this.g)},Lt.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var d={};d.__data__=o,o=d}else this.u&&(d={},d.__data__=Bn(o),o=d);c.i.push(new I0(c.Ya++,o)),c.G==3&&Ho(c)},Lt.prototype.N=function(){this.g.l=null,delete this.j,su(this.g),delete this.g,Lt.aa.N.call(this)};function Uf(o){Kl.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){e:{for(const d in c){o=d;break e}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}N(Uf,Kl);function Bf(){Yl.call(this),this.status=1}N(Bf,Yl);function si(o){this.g=o}N(si,jf),si.prototype.ua=function(){Le(this.g,"a")},si.prototype.ta=function(o){Le(this.g,new Uf(o))},si.prototype.sa=function(o){Le(this.g,new Bf)},si.prototype.ra=function(){Le(this.g,"b")},Qo.prototype.createWebChannel=Qo.prototype.g,Lt.prototype.send=Lt.prototype.o,Lt.prototype.open=Lt.prototype.m,Lt.prototype.close=Lt.prototype.close,F_=function(){return new Qo},O_=function(){return Mo()},L_=Tr,qc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Lo.NO_ERROR=0,Lo.TIMEOUT=8,Lo.HTTP_ERROR=6,Na=Lo,nf.COMPLETE="complete",M_=nf,Xd.EventType=is,is.OPEN="a",is.CLOSE="b",is.ERROR="c",is.MESSAGE="d",_e.prototype.listen=_e.prototype.K,Ps=Xd,Oe.prototype.listenOnce=Oe.prototype.L,Oe.prototype.getLastError=Oe.prototype.Ka,Oe.prototype.getLastErrorCode=Oe.prototype.Ba,Oe.prototype.getStatus=Oe.prototype.Z,Oe.prototype.getResponseJson=Oe.prototype.Oa,Oe.prototype.getResponseText=Oe.prototype.oa,Oe.prototype.send=Oe.prototype.ea,Oe.prototype.setWithCredentials=Oe.prototype.Ha,V_=Oe}).apply(typeof fa<"u"?fa:typeof self<"u"?self:typeof window<"u"?window:{});const lm="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pt.UNAUTHENTICATED=new pt(null),pt.GOOGLE_CREDENTIALS=new pt("google-credentials-uid"),pt.FIRST_PARTY=new pt("first-party-uid"),pt.MOCK_USER=new pt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yi="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr=new S_("@firebase/firestore");function Ss(){return Wr.logLevel}function J(t,...e){if(Wr.logLevel<=he.DEBUG){const n=e.map(ad);Wr.debug(`Firestore (${Yi}): ${t}`,...n)}}function Ln(t,...e){if(Wr.logLevel<=he.ERROR){const n=e.map(ad);Wr.error(`Firestore (${Yi}): ${t}`,...n)}}function ji(t,...e){if(Wr.logLevel<=he.WARN){const n=e.map(ad);Wr.warn(`Firestore (${Yi}): ${t}`,...n)}}function ad(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(t="Unexpected state"){const e=`FIRESTORE (${Yi}) INTERNAL ASSERTION FAILED: `+t;throw Ln(e),new Error(e)}function we(t,e){t||re()}function se(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends Yr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class U1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(pt.UNAUTHENTICATED))}shutdown(){}}class B1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class z1{constructor(e){this.t=e,this.currentUser=pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){we(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Or,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Or)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(we(typeof r.accessToken=="string"),new j_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string"),new pt(e)}}class $1{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=pt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class W1{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new $1(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class q1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class H1{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){we(this.o===void 0);const r=s=>{s.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,J("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(we(typeof n.token=="string"),this.R=n.token,new q1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=G1(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function pe(t,e){return t<e?-1:t>e?1:0}function Ui(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new X(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new X(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ye.fromMillis(Date.now())}static fromDate(e){return Ye.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ye(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ie(e)}static min(){return new ie(new Ye(0,0))}static max(){return new ie(new Ye(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,n,r){n===void 0?n=0:n>e.length&&re(),r===void 0?r=e.length-n:r>e.length-n&&re(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return po.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof po?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),a=n.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ae extends po{construct(e,n,r){return new Ae(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new X(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ae(n)}static emptyPath(){return new Ae([])}}const Q1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rt extends po{construct(e,n,r){return new rt(e,n,r)}static isValidIdentifier(e){return Q1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new rt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new X(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new X(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new X(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(a=!a,i++):l!=="."||a?(r+=l,i++):(s(),i++)}if(s(),a)throw new X(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rt(n)}static emptyPath(){return new rt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(Ae.fromString(e))}static fromName(e){return new te(Ae.fromString(e).popFirst(5))}static empty(){return new te(Ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ae.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ae.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new Ae(e.slice()))}}function K1(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ie.fromTimestamp(r===1e9?new Ye(n+1,0):new Ye(n,r));return new mr(i,te.empty(),e)}function Y1(t){return new mr(t.readTime,t.key,-1)}class mr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new mr(ie.min(),te.empty(),-1)}static max(){return new mr(ie.max(),te.empty(),-1)}}function X1(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:pe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Z1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Co(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==J1)throw t;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let i=0,s=0,a=!1;e.forEach(l=>{++i,l.next(()=>{++s,a&&s===i&&n()},u=>r(u))}),a=!0,s===i&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(i=>i?B.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new B((r,i)=>{const s=e.length,a=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(e[h]).next(f=>{a[h]=f,++l,l===s&&r(a)},f=>i(f))}})}static doWhile(e,n){return new B((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function eI(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ro(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ld.oe=-1;function Vl(t){return t==null}function ul(t){return t===0&&1/t==-1/0}function tI(t){return typeof t=="number"&&Number.isInteger(t)&&!ul(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function um(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Xr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function B_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e,n){this.comparator=e,this.root=n||nt.EMPTY}insert(e,n){return new Me(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,nt.BLACK,null,null))}remove(e){return new Me(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pa(this.root,e,this.comparator,!1)}getReverseIterator(){return new pa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pa(this.root,e,this.comparator,!0)}}class pa{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??nt.RED,this.left=i??nt.EMPTY,this.right=s??nt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new nt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return nt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return nt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw re();const e=this.left.check();if(e!==this.right.check())throw re();return e+(this.isRed()?0:1)}}nt.EMPTY=null,nt.RED=!0,nt.BLACK=!1;nt.EMPTY=new class{constructor(){this.size=0}get key(){throw re()}get value(){throw re()}get color(){throw re()}get left(){throw re()}get right(){throw re()}copy(e,n,r,i,s){return this}insert(e,n,r){return new nt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.comparator=e,this.data=new Me(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new cm(this.data.getIterator())}getIteratorFrom(e){return new cm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof st)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new st(this.comparator);return n.data=e,n}}class cm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.fields=e,e.sort(rt.comparator)}static empty(){return new jt([])}unionWith(e){let n=new st(rt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new jt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ui(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new z_("Invalid base64 string: "+s):s}}(e);return new at(n)}static fromUint8Array(e){const n=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new at(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}at.EMPTY_BYTE_STRING=new at("");const nI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gr(t){if(we(!!t),typeof t=="string"){let e=0;const n=nI.exec(t);if(we(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Be(t.seconds),nanos:Be(t.nanos)}}function Be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function qr(t){return typeof t=="string"?at.fromBase64String(t):at.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ud(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function cd(t){const e=t.mapValue.fields.__previous_value__;return ud(e)?cd(e):e}function mo(t){const e=gr(t.mapValue.fields.__local_write_time__.timestampValue);return new Ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e,n,r,i,s,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h}}class go{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new go("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof go&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma={mapValue:{}};function Hr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ud(t)?4:sI(t)?9007199254740991:iI(t)?10:11:re()}function En(t,e){if(t===e)return!0;const n=Hr(t);if(n!==Hr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return mo(t).isEqual(mo(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=gr(i.timestampValue),l=gr(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return qr(i.bytesValue).isEqual(qr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Be(i.geoPointValue.latitude)===Be(s.geoPointValue.latitude)&&Be(i.geoPointValue.longitude)===Be(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Be(i.integerValue)===Be(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=Be(i.doubleValue),l=Be(s.doubleValue);return a===l?ul(a)===ul(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Ui(t.arrayValue.values||[],e.arrayValue.values||[],En);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},l=s.mapValue.fields||{};if(um(a)!==um(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!En(a[u],l[u])))return!1;return!0}(t,e);default:return re()}}function yo(t,e){return(t.values||[]).find(n=>En(n,e))!==void 0}function Bi(t,e){if(t===e)return 0;const n=Hr(t),r=Hr(e);if(n!==r)return pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pe(t.booleanValue,e.booleanValue);case 2:return function(s,a){const l=Be(s.integerValue||s.doubleValue),u=Be(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return hm(t.timestampValue,e.timestampValue);case 4:return hm(mo(t),mo(e));case 5:return pe(t.stringValue,e.stringValue);case 6:return function(s,a){const l=qr(s),u=qr(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const l=s.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const f=pe(l[h],u[h]);if(f!==0)return f}return pe(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const l=pe(Be(s.latitude),Be(a.latitude));return l!==0?l:pe(Be(s.longitude),Be(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return dm(t.arrayValue,e.arrayValue);case 10:return function(s,a){var l,u,h,f;const y=s.fields||{},_=a.fields||{},C=(l=y.value)===null||l===void 0?void 0:l.arrayValue,N=(u=_.value)===null||u===void 0?void 0:u.arrayValue,V=pe(((h=C==null?void 0:C.values)===null||h===void 0?void 0:h.length)||0,((f=N==null?void 0:N.values)===null||f===void 0?void 0:f.length)||0);return V!==0?V:dm(C,N)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===ma.mapValue&&a===ma.mapValue)return 0;if(s===ma.mapValue)return 1;if(a===ma.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=a.fields||{},f=Object.keys(h);u.sort(),f.sort();for(let y=0;y<u.length&&y<f.length;++y){const _=pe(u[y],f[y]);if(_!==0)return _;const C=Bi(l[u[y]],h[f[y]]);if(C!==0)return C}return pe(u.length,f.length)}(t.mapValue,e.mapValue);default:throw re()}}function hm(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return pe(t,e);const n=gr(t),r=gr(e),i=pe(n.seconds,r.seconds);return i!==0?i:pe(n.nanos,r.nanos)}function dm(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Bi(n[i],r[i]);if(s)return s}return pe(n.length,r.length)}function zi(t){return Hc(t)}function Hc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=gr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return qr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Hc(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${Hc(n.fields[a])}`;return i+"}"}(t.mapValue):re()}function fm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Gc(t){return!!t&&"integerValue"in t}function hd(t){return!!t&&"arrayValue"in t}function pm(t){return!!t&&"nullValue"in t}function mm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ba(t){return!!t&&"mapValue"in t}function iI(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function $s(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Xr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=$s(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$s(t.arrayValue.values[n]);return e}return Object.assign({},t)}function sI(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.value=e}static empty(){return new Rt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ba(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$s(n)}setAll(e){let n=rt.emptyPath(),r={},i=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}a?r[l.lastSegment()]=$s(a):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());ba(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return En(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ba(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Xr(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Rt($s(this.value))}}function $_(t){const e=[];return Xr(t.fields,(n,r)=>{const i=new rt([n]);if(ba(r)){const s=$_(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new jt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,n,r,i,s,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new gt(e,0,ie.min(),ie.min(),ie.min(),Rt.empty(),0)}static newFoundDocument(e,n,r,i){return new gt(e,1,n,ie.min(),r,i,0)}static newNoDocument(e,n){return new gt(e,2,n,ie.min(),ie.min(),Rt.empty(),0)}static newUnknownDocument(e,n){return new gt(e,3,n,ie.min(),ie.min(),Rt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,n){this.position=e,this.inclusive=n}}function gm(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=te.comparator(te.fromName(a.referenceValue),n.key):r=Bi(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function ym(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!En(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,n="asc"){this.field=e,this.dir=n}}function oI(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{}class Ge extends W_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new lI(e,n,r):n==="array-contains"?new hI(e,r):n==="in"?new dI(e,r):n==="not-in"?new fI(e,r):n==="array-contains-any"?new pI(e,r):new Ge(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new uI(e,r):new cI(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Bi(n,this.value)):n!==null&&Hr(this.value)===Hr(n)&&this.matchesComparison(Bi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hn extends W_{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new hn(e,n)}matches(e){return q_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function q_(t){return t.op==="and"}function H_(t){return aI(t)&&q_(t)}function aI(t){for(const e of t.filters)if(e instanceof hn)return!1;return!0}function Qc(t){if(t instanceof Ge)return t.field.canonicalString()+t.op.toString()+zi(t.value);if(H_(t))return t.filters.map(e=>Qc(e)).join(",");{const e=t.filters.map(n=>Qc(n)).join(",");return`${t.op}(${e})`}}function G_(t,e){return t instanceof Ge?function(r,i){return i instanceof Ge&&r.op===i.op&&r.field.isEqual(i.field)&&En(r.value,i.value)}(t,e):t instanceof hn?function(r,i){return i instanceof hn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,l)=>s&&G_(a,i.filters[l]),!0):!1}(t,e):void re()}function Q_(t){return t instanceof Ge?function(n){return`${n.field.canonicalString()} ${n.op} ${zi(n.value)}`}(t):t instanceof hn?function(n){return n.op.toString()+" {"+n.getFilters().map(Q_).join(" ,")+"}"}(t):"Filter"}class lI extends Ge{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class uI extends Ge{constructor(e,n){super(e,"in",n),this.keys=K_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class cI extends Ge{constructor(e,n){super(e,"not-in",n),this.keys=K_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function K_(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class hI extends Ge{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return hd(n)&&yo(n.arrayValue,this.value)}}class dI extends Ge{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&yo(this.value.arrayValue,n)}}class fI extends Ge{constructor(e,n){super(e,"not-in",n)}matches(e){if(yo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!yo(this.value.arrayValue,n)}}class pI extends Ge{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!hd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>yo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,n=null,r=[],i=[],s=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=l,this.ue=null}}function _m(t,e=null,n=[],r=[],i=null,s=null,a=null){return new mI(t,e,n,r,i,s,a)}function dd(t){const e=se(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Qc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Vl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>zi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>zi(r)).join(",")),e.ue=n}return e.ue}function fd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!oI(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!G_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ym(t.startAt,e.startAt)&&ym(t.endAt,e.endAt)}function Kc(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,n=null,r=[],i=[],s=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function gI(t,e,n,r,i,s,a,l){return new Xi(t,e,n,r,i,s,a,l)}function pd(t){return new Xi(t)}function vm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Y_(t){return t.collectionGroup!==null}function Ws(t){const e=se(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new st(rt.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new _o(s,r))}),n.has(rt.keyField().canonicalString())||e.ce.push(new _o(rt.keyField(),r))}return e.ce}function vn(t){const e=se(t);return e.le||(e.le=yI(e,Ws(t))),e.le}function yI(t,e){if(t.limitType==="F")return _m(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new _o(i.field,s)});const n=t.endAt?new cl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new cl(t.startAt.position,t.startAt.inclusive):null;return _m(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Yc(t,e){const n=t.filters.concat([e]);return new Xi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Xc(t,e,n){return new Xi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ml(t,e){return fd(vn(t),vn(e))&&t.limitType===e.limitType}function X_(t){return`${dd(vn(t))}|lt:${t.limitType}`}function li(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Q_(i)).join(", ")}]`),Vl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>zi(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>zi(i)).join(",")),`Target(${r})`}(vn(t))}; limitType=${t.limitType})`}function Ll(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):te.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Ws(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,l,u){const h=gm(a,l,u);return a.inclusive?h<=0:h<0}(r.startAt,Ws(r),i)||r.endAt&&!function(a,l,u){const h=gm(a,l,u);return a.inclusive?h>=0:h>0}(r.endAt,Ws(r),i))}(t,e)}function _I(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function J_(t){return(e,n)=>{let r=!1;for(const i of Ws(t)){const s=vI(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function vI(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(s,a,l){const u=a.data.field(s),h=l.data.field(s);return u!==null&&h!==null?Bi(u,h):re()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return re()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Xr(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return B_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI=new Me(te.comparator);function On(){return wI}const Z_=new Me(te.comparator);function Ds(...t){let e=Z_;for(const n of t)e=e.insert(n.key,n);return e}function ev(t){let e=Z_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function br(){return qs()}function tv(){return qs()}function qs(){return new Ji(t=>t.toString(),(t,e)=>t.isEqual(e))}const EI=new Me(te.comparator),TI=new st(te.comparator);function ue(...t){let e=TI;for(const n of t)e=e.add(n);return e}const II=new st(pe);function SI(){return II}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function md(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ul(e)?"-0":e}}function nv(t){return{integerValue:""+t}}function xI(t,e){return tI(e)?nv(e):md(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(){this._=void 0}}function AI(t,e,n){return t instanceof hl?function(i,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&ud(s)&&(s=cd(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(n,e):t instanceof vo?iv(t,e):t instanceof wo?sv(t,e):function(i,s){const a=rv(i,s),l=wm(a)+wm(i.Pe);return Gc(a)&&Gc(i.Pe)?nv(l):md(i.serializer,l)}(t,e)}function CI(t,e,n){return t instanceof vo?iv(t,e):t instanceof wo?sv(t,e):n}function rv(t,e){return t instanceof dl?function(r){return Gc(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class hl extends Ol{}class vo extends Ol{constructor(e){super(),this.elements=e}}function iv(t,e){const n=ov(e);for(const r of t.elements)n.some(i=>En(i,r))||n.push(r);return{arrayValue:{values:n}}}class wo extends Ol{constructor(e){super(),this.elements=e}}function sv(t,e){let n=ov(e);for(const r of t.elements)n=n.filter(i=>!En(i,r));return{arrayValue:{values:n}}}class dl extends Ol{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function wm(t){return Be(t.integerValue||t.doubleValue)}function ov(t){return hd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function RI(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof vo&&i instanceof vo||r instanceof wo&&i instanceof wo?Ui(r.elements,i.elements,En):r instanceof dl&&i instanceof dl?En(r.Pe,i.Pe):r instanceof hl&&i instanceof hl}(t.transform,e.transform)}class kI{constructor(e,n){this.version=e,this.transformResults=n}}class un{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new un}static exists(e){return new un(void 0,e)}static updateTime(e){return new un(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Va(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Fl{}function av(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new gd(t.key,un.none()):new ko(t.key,t.data,un.none());{const n=t.data,r=Rt.empty();let i=new st(rt.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Er(t.key,r,new jt(i.toArray()),un.none())}}function PI(t,e,n){t instanceof ko?function(i,s,a){const l=i.value.clone(),u=Tm(i.fieldTransforms,s,a.transformResults);l.setAll(u),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Er?function(i,s,a){if(!Va(i.precondition,s))return void s.convertToUnknownDocument(a.version);const l=Tm(i.fieldTransforms,s,a.transformResults),u=s.data;u.setAll(lv(i)),u.setAll(l),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Hs(t,e,n,r){return t instanceof ko?function(s,a,l,u){if(!Va(s.precondition,a))return l;const h=s.value.clone(),f=Im(s.fieldTransforms,u,a);return h.setAll(f),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Er?function(s,a,l,u){if(!Va(s.precondition,a))return l;const h=Im(s.fieldTransforms,u,a),f=a.data;return f.setAll(lv(s)),f.setAll(h),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(y=>y.field))}(t,e,n,r):function(s,a,l){return Va(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function DI(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=rv(r.transform,i||null);s!=null&&(n===null&&(n=Rt.empty()),n.set(r.field,s))}return n||null}function Em(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ui(r,i,(s,a)=>RI(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ko extends Fl{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Er extends Fl{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function lv(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Tm(t,e,n){const r=new Map;we(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,l=e.data.field(s.field);r.set(s.field,CI(a,l,n[i]))}return r}function Im(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,AI(s,a,e))}return r}class gd extends Fl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class NI extends Fl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&PI(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Hs(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Hs(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=tv();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(i.key)?null:l;const u=av(a,l);u!==null&&r.set(i.key,u),a.isValidDocument()||a.convertToNoDocument(ie.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ue())}isEqual(e){return this.batchId===e.batchId&&Ui(this.mutations,e.mutations,(n,r)=>Em(n,r))&&Ui(this.baseMutations,e.baseMutations,(n,r)=>Em(n,r))}}class yd{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){we(e.mutations.length===r.length);let i=function(){return EI}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new yd(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe,ce;function LI(t){switch(t){default:return re();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function uv(t){if(t===void 0)return Ln("GRPC error has no .code"),j.UNKNOWN;switch(t){case qe.OK:return j.OK;case qe.CANCELLED:return j.CANCELLED;case qe.UNKNOWN:return j.UNKNOWN;case qe.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case qe.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case qe.INTERNAL:return j.INTERNAL;case qe.UNAVAILABLE:return j.UNAVAILABLE;case qe.UNAUTHENTICATED:return j.UNAUTHENTICATED;case qe.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case qe.NOT_FOUND:return j.NOT_FOUND;case qe.ALREADY_EXISTS:return j.ALREADY_EXISTS;case qe.PERMISSION_DENIED:return j.PERMISSION_DENIED;case qe.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case qe.ABORTED:return j.ABORTED;case qe.OUT_OF_RANGE:return j.OUT_OF_RANGE;case qe.UNIMPLEMENTED:return j.UNIMPLEMENTED;case qe.DATA_LOSS:return j.DATA_LOSS;default:return re()}}(ce=qe||(qe={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI=new Lr([4294967295,4294967295],0);function Sm(t){const e=OI().encode(t),n=new b_;return n.update(e),new Uint8Array(n.digest())}function xm(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Lr([n,r],0),new Lr([i,s],0)]}class _d{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ns(`Invalid padding: ${n}`);if(r<0)throw new Ns(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ns(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ns(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Lr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Lr.fromNumber(r)));return i.compare(FI)===1&&(i=new Lr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Sm(e),[r,i]=xm(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);if(!this.de(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new _d(s,i,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.Ie===0)return;const n=Sm(e),[r,i]=xm(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ns extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Po.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new jl(ie.min(),i,new Me(pe),On(),ue())}}class Po{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Po(r,n,ue(),ue(),ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class cv{constructor(e,n){this.targetId=e,this.me=n}}class hv{constructor(e,n,r=at.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Am{constructor(){this.fe=0,this.ge=Rm(),this.pe=at.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ue(),n=ue(),r=ue();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:re()}}),new Po(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Rm()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,we(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class jI{constructor(e){this.Le=e,this.Be=new Map,this.ke=On(),this.qe=Cm(),this.Qe=new Me(pe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:re()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Kc(s))if(r===0){const a=new te(s.path);this.Ue(n,a,gt.newNoDocument(a,ie.min()))}else we(r===1);else{const a=this.Ye(n);if(a!==r){const l=this.Ze(e),u=l?this.Xe(l,e,a):1;if(u!==0){this.je(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,l;try{a=qr(r).toUint8Array()}catch(u){if(u instanceof z_)return ji("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new _d(a,i,s)}catch(u){return ji(u instanceof Ns?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const a=this.Le.tt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,a)=>{const l=this.Je(a);if(l){if(s.current&&Kc(l.target)){const u=new te(l.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,gt.newNoDocument(u,e))}s.be&&(n.set(a,s.ve()),s.Ce())}});let r=ue();this.qe.forEach((s,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));const i=new jl(e,n,this.Qe,this.ke,r);return this.ke=On(),this.qe=Cm(),this.Qe=new Me(pe),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Am,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new st(pe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Am),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Cm(){return new Me(te.comparator)}function Rm(){return new Me(te.comparator)}const UI={asc:"ASCENDING",desc:"DESCENDING"},BI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zI={and:"AND",or:"OR"};class $I{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Jc(t,e){return t.useProto3Json||Vl(e)?e:{value:e}}function fl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dv(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function WI(t,e){return fl(t,e.toTimestamp())}function wn(t){return we(!!t),ie.fromTimestamp(function(n){const r=gr(n);return new Ye(r.seconds,r.nanos)}(t))}function vd(t,e){return Zc(t,e).canonicalString()}function Zc(t,e){const n=function(i){return new Ae(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function fv(t){const e=Ae.fromString(t);return we(_v(e)),e}function eh(t,e){return vd(t.databaseId,e.path)}function ju(t,e){const n=fv(e);if(n.get(1)!==t.databaseId.projectId)throw new X(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new X(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(mv(n))}function pv(t,e){return vd(t.databaseId,e)}function qI(t){const e=fv(t);return e.length===4?Ae.emptyPath():mv(e)}function th(t){return new Ae(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function mv(t){return we(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function km(t,e,n){return{name:eh(t,e),fields:n.value.mapValue.fields}}function HI(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:re()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,f){return h.useProto3Json?(we(f===void 0||typeof f=="string"),at.fromBase64String(f||"")):(we(f===void 0||f instanceof Buffer||f instanceof Uint8Array),at.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(h){const f=h.code===void 0?j.UNKNOWN:uv(h.code);return new X(f,h.message||"")}(a);n=new hv(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ju(t,r.document.name),s=wn(r.document.updateTime),a=r.document.createTime?wn(r.document.createTime):ie.min(),l=new Rt({mapValue:{fields:r.document.fields}}),u=gt.newFoundDocument(i,s,a,l),h=r.targetIds||[],f=r.removedTargetIds||[];n=new Ma(h,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ju(t,r.document),s=r.readTime?wn(r.readTime):ie.min(),a=gt.newNoDocument(i,s),l=r.removedTargetIds||[];n=new Ma([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ju(t,r.document),s=r.removedTargetIds||[];n=new Ma([],s,i,null)}else{if(!("filter"in e))return re();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new MI(i,s),l=r.targetId;n=new cv(l,a)}}return n}function GI(t,e){let n;if(e instanceof ko)n={update:km(t,e.key,e.value)};else if(e instanceof gd)n={delete:eh(t,e.key)};else if(e instanceof Er)n={update:km(t,e.key,e.data),updateMask:nS(e.fieldMask)};else{if(!(e instanceof NI))return re();n={verify:eh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const l=a.transform;if(l instanceof hl)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof vo)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof wo)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof dl)return{fieldPath:a.field.canonicalString(),increment:l.Pe};throw re()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:WI(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:re()}(t,e.precondition)),n}function QI(t,e){return t&&t.length>0?(we(e!==void 0),t.map(n=>function(i,s){let a=i.updateTime?wn(i.updateTime):wn(s);return a.isEqual(ie.min())&&(a=wn(s)),new kI(a,i.transformResults||[])}(n,e))):[]}function KI(t,e){return{documents:[pv(t,e.path)]}}function YI(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=pv(t,i);const s=function(h){if(h.length!==0)return yv(hn.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(h){if(h.length!==0)return h.map(f=>function(_){return{field:ui(_.field),direction:ZI(_.dir)}}(f))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Jc(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:i}}function XI(t){let e=qI(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){we(r===1);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(y){const _=gv(y);return _ instanceof hn&&H_(_)?_.getFilters():[_]}(n.where));let a=[];n.orderBy&&(a=function(y){return y.map(_=>function(N){return new _o(ci(N.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(_))}(n.orderBy));let l=null;n.limit&&(l=function(y){let _;return _=typeof y=="object"?y.value:y,Vl(_)?null:_}(n.limit));let u=null;n.startAt&&(u=function(y){const _=!!y.before,C=y.values||[];return new cl(C,_)}(n.startAt));let h=null;return n.endAt&&(h=function(y){const _=!y.before,C=y.values||[];return new cl(C,_)}(n.endAt)),gI(e,i,a,s,l,"F",u,h)}function JI(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function gv(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ci(n.unaryFilter.field);return Ge.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ci(n.unaryFilter.field);return Ge.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ci(n.unaryFilter.field);return Ge.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ci(n.unaryFilter.field);return Ge.create(a,"!=",{nullValue:"NULL_VALUE"});default:return re()}}(t):t.fieldFilter!==void 0?function(n){return Ge.create(ci(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return re()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return hn.create(n.compositeFilter.filters.map(r=>gv(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return re()}}(n.compositeFilter.op))}(t):re()}function ZI(t){return UI[t]}function eS(t){return BI[t]}function tS(t){return zI[t]}function ui(t){return{fieldPath:t.canonicalString()}}function ci(t){return rt.fromServerFormat(t.fieldPath)}function yv(t){return t instanceof Ge?function(n){if(n.op==="=="){if(mm(n.value))return{unaryFilter:{field:ui(n.field),op:"IS_NAN"}};if(pm(n.value))return{unaryFilter:{field:ui(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(mm(n.value))return{unaryFilter:{field:ui(n.field),op:"IS_NOT_NAN"}};if(pm(n.value))return{unaryFilter:{field:ui(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ui(n.field),op:eS(n.op),value:n.value}}}(t):t instanceof hn?function(n){const r=n.getFilters().map(i=>yv(i));return r.length===1?r[0]:{compositeFilter:{op:tS(n.op),filters:r}}}(t):re()}function nS(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function _v(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,n,r,i,s=ie.min(),a=ie.min(),l=at.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Zn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Zn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Zn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Zn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e){this.ct=e}}function iS(t){const e=XI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Xc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(){this.un=new oS}addToCollectionParentIndex(e,n){return this.un.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(mr.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(mr.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class oS{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new st(Ae.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new st(Ae.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new $i(0)}static kn(){return new $i(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(){this.changes=new Ji(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,gt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Hs(r.mutation,i,jt.empty(),Ye.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ue()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ue()){const i=br();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let a=Ds();return s.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=br();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ue()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,i){let s=On();const a=qs(),l=function(){return qs()}();return n.forEach((u,h)=>{const f=r.get(h.key);i.has(h.key)&&(f===void 0||f.mutation instanceof Er)?s=s.insert(h.key,h):f!==void 0?(a.set(h.key,f.mutation.getFieldMask()),Hs(f.mutation,h,f.mutation.getFieldMask(),Ye.now())):a.set(h.key,jt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,f)=>a.set(h,f)),n.forEach((h,f)=>{var y;return l.set(h,new lS(f,(y=a.get(h))!==null&&y!==void 0?y:null))}),l))}recalculateAndSaveOverlays(e,n){const r=qs();let i=new Me((a,l)=>a-l),s=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let f=r.get(u)||jt.empty();f=l.applyToLocalView(h,f),r.set(u,f);const y=(i.get(l.batchId)||ue()).add(u);i=i.insert(l.batchId,y)})}).next(()=>{const a=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,f=u.value,y=tv();f.forEach(_=>{if(!s.has(_)){const C=av(n.get(_),r.get(_));C!==null&&y.set(_,C),s=s.add(_)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,y))}return B.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(a){return te.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Y_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):B.resolve(br());let l=-1,u=s;return a.next(h=>B.forEach(h,(f,y)=>(l<y.largestBatchId&&(l=y.largestBatchId),s.get(f)?B.resolve():this.remoteDocumentCache.getEntry(e,f).next(_=>{u=u.insert(f,_)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,ue())).next(f=>({batchId:l,changes:ev(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let i=Ds();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let a=Ds();return this.indexManager.getCollectionParents(e,s).next(l=>B.forEach(l,u=>{const h=function(y,_){return new Xi(_,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(f=>{f.forEach((y,_)=>{a=a.insert(y,_)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(a=>{s.forEach((u,h)=>{const f=h.getKey();a.get(f)===null&&(a=a.insert(f,gt.newInvalidDocument(f)))});let l=Ds();return a.forEach((u,h)=>{const f=s.get(u);f!==void 0&&Hs(f.mutation,h,jt.empty(),Ye.now()),Ll(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return B.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:wn(i.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:iS(i.bundledQuery),readTime:wn(i.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(){this.overlays=new Me(te.comparator),this.Ir=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=br();return B.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const i=br(),s=n.length+1,a=new te(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return B.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Me((h,f)=>h-f);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let f=s.get(h.largestBatchId);f===null&&(f=br(),s=s.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const l=br(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,f)=>l.set(h,f)),!(l.size()>=i)););return B.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new VI(n,r));let s=this.Ir.get(n);s===void 0&&(s=ue(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(){this.sessionToken=at.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(){this.Tr=new st(Xe.Er),this.dr=new st(Xe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Xe(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Xe(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new te(new Ae([])),r=new Xe(n,e),i=new Xe(n,e+1),s=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),s.push(a.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new te(new Ae([])),r=new Xe(n,e),i=new Xe(n,e+1);let s=ue();return this.dr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new Xe(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Xe{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return te.comparator(e.key,n.key)||pe(e.wr,n.wr)}static Ar(e,n){return pe(e.wr,n.wr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new st(Xe.Er)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new bI(s,n,r,i);this.mutationQueue.push(a);for(const l of i)this.br=this.br.add(new Xe(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return B.resolve(a)}lookupMutationBatch(e,n){return B.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return B.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Xe(n,0),i=new Xe(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],a=>{const l=this.Dr(a.wr);s.push(l)}),B.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new st(pe);return n.forEach(i=>{const s=new Xe(i,0),a=new Xe(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],l=>{r=r.add(l.wr)})}),B.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;te.isDocumentKey(s)||(s=s.child(""));const a=new Xe(new te(s),0);let l=new st(pe);return this.br.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(u.wr)),!0)},a),B.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){we(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return B.forEach(n.mutations,i=>{const s=new Xe(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Xe(n,0),i=this.br.firstAfterOrEqual(r);return B.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e){this.Mr=e,this.docs=function(){return new Me(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():gt.newInvalidDocument(n))}getEntries(e,n){let r=On();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():gt.newInvalidDocument(i))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=On();const a=n.path,l=new te(a.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:f}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||X1(Y1(f),r)<=0||(i.has(f.key)||Ll(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return B.resolve(s)}getAllFromCollectionGroup(e,n,r,i){re()}Or(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new mS(this)}getSize(e){return B.resolve(this.size)}}class mS extends aS{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e){this.persistence=e,this.Nr=new Ji(n=>dd(n),fd),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.Lr=0,this.Br=new wd,this.targetCount=0,this.kr=$i.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),B.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new $i(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Kn(n),B.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),B.waitFor(s).next(()=>i)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),B.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e,n){this.qr={},this.overlays={},this.Qr=new ld(0),this.Kr=!1,this.Kr=!0,this.$r=new dS,this.referenceDelegate=e(this),this.Ur=new gS(this),this.indexManager=new sS,this.remoteDocumentCache=function(i){return new pS(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new rS(n),this.Gr=new cS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new hS,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new fS(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){J("MemoryPersistence","Starting transaction:",e);const i=new _S(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return B.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class _S extends Z1{constructor(e){super(),this.currentSequenceNumber=e}}class Ed{constructor(e){this.persistence=e,this.Jr=new wd,this.Yr=null}static Zr(e){return new Ed(e)}get Xr(){if(this.Yr)return this.Yr;throw re()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),B.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.Xr,r=>{const i=te.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ie.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return B.or([()=>B.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ue(),i=ue();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Td(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return CT()?8:eI(xT())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new vS;return this.Xi(e,n,a).next(l=>{if(s.result=l,this.zi)return this.es(e,n,a,l.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Ss()<=he.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",li(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),B.resolve()):(Ss()<=he.DEBUG&&J("QueryEngine","Query:",li(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ss()<=he.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",li(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vn(n))):B.resolve())}Yi(e,n){if(vm(n))return B.resolve(null);let r=vn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Xc(n,null,"F"),r=vn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=ue(...s);return this.Ji.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.ts(n,l);return this.ns(n,h,a,u.readTime)?this.Yi(e,Xc(n,null,"F")):this.rs(e,h,n,u)}))})))}Zi(e,n,r,i){return vm(n)||i.isEqual(ie.min())?B.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const a=this.ts(n,s);return this.ns(n,a,r,i)?B.resolve(null):(Ss()<=he.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),li(n)),this.rs(e,a,n,K1(i,-1)).next(l=>l))})}ts(e,n){let r=new st(J_(e));return n.forEach((i,s)=>{Ll(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Ss()<=he.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",li(n)),this.Ji.getDocumentsMatchingQuery(e,n,mr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Me(pe),this._s=new Ji(s=>dd(s),fd),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uS(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function TS(t,e,n,r){return new ES(t,e,n,r)}async function vv(t,e){const n=se(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],l=[];let u=ue();for(const h of i){a.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}for(const h of s){l.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(h=>({hs:h,removedBatchIds:a,addedBatchIds:l}))})})}function IS(t,e){const n=se(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,f){const y=h.batch,_=y.keys();let C=B.resolve();return _.forEach(N=>{C=C.next(()=>f.getEntry(u,N)).next(V=>{const O=h.docVersions.get(N);we(O!==null),V.version.compareTo(O)<0&&(y.applyToRemoteDocument(V,h),V.isValidDocument()&&(V.setReadTime(h.commitVersion),f.addEntry(V)))})}),C.next(()=>l.mutationQueue.removeMutationBatch(u,y))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ue();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function wv(t){const e=se(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function SS(t,e){const n=se(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const l=[];e.targetChanges.forEach((f,y)=>{const _=i.get(y);if(!_)return;l.push(n.Ur.removeMatchingKeys(s,f.removedDocuments,y).next(()=>n.Ur.addMatchingKeys(s,f.addedDocuments,y)));let C=_.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(y)!==null?C=C.withResumeToken(at.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):f.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(f.resumeToken,r)),i=i.insert(y,C),function(V,O,x){return V.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(_,C,f)&&l.push(n.Ur.updateTargetData(s,C))});let u=On(),h=ue();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),l.push(xS(s,a,e.documentUpdates).next(f=>{u=f.Ps,h=f.Is})),!r.isEqual(ie.min())){const f=n.Ur.getLastRemoteSnapshotVersion(s).next(y=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(f)}return B.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.os=i,s))}function xS(t,e,n){let r=ue(),i=ue();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let a=On();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(ie.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):J("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Ps:a,Is:i}})}function AS(t,e){const n=se(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function CS(t,e){const n=se(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,B.resolve(i)):n.Ur.allocateTargetId(r).next(a=>(i=new Zn(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function nh(t,e,n){const r=se(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Ro(a))throw a;J("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Pm(t,e,n){const r=se(t);let i=ie.min(),s=ue();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,f){const y=se(u),_=y._s.get(f);return _!==void 0?B.resolve(y.os.get(_)):y.Ur.getTargetData(h,f)}(r,a,vn(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,l.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?i:ie.min(),n?s:ue())).next(l=>(RS(r,_I(e),l),{documents:l,Ts:s})))}function RS(t,e,n){let r=t.us.get(e)||ie.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class Dm{constructor(){this.activeTargetIds=SI()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kS{constructor(){this.so=new Dm,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Dm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){J("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){J("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ga=null;function Uu(){return ga===null?ga=function(){return 268435456+Math.round(2147483648*Math.random())}():ga++,"0x"+ga.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ft="WebChannelConnection";class bS extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,a){const l=Uu(),u=this.xo(n,r.toUriEncodedString());J("RestConnection",`Sending RPC '${n}' ${l}:`,u,i);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,s,a),this.No(n,u,h,i).then(f=>(J("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw ji("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",u,"request:",i),f})}Lo(n,r,i,s,a,l){return this.Mo(n,r,i,s,a)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Yi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>n[a]=s),i&&i.headers.forEach((s,a)=>n[a]=s)}xo(n,r){const i=DS[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Uu();return new Promise((a,l)=>{const u=new V_;u.setWithCredentials(!0),u.listenOnce(M_.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Na.NO_ERROR:const f=u.getResponseJson();J(ft,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),a(f);break;case Na.TIMEOUT:J(ft,`RPC '${e}' ${s} timed out`),l(new X(j.DEADLINE_EXCEEDED,"Request time out"));break;case Na.HTTP_ERROR:const y=u.getStatus();if(J(ft,`RPC '${e}' ${s} failed with status:`,y,"response text:",u.getResponseText()),y>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);const C=_==null?void 0:_.error;if(C&&C.status&&C.message){const N=function(O){const x=O.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(x)>=0?x:j.UNKNOWN}(C.status);l(new X(N,C.message))}else l(new X(j.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new X(j.UNAVAILABLE,"Connection failed."));break;default:re()}}finally{J(ft,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);J(ft,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",h,r,15)})}Bo(e,n,r){const i=Uu(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=F_(),l=O_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=s.join("");J(ft,`Creating RPC '${e}' stream ${i}: ${f}`,u);const y=a.createWebChannel(f,u);let _=!1,C=!1;const N=new NS({Io:O=>{C?J(ft,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(_||(J(ft,`Opening RPC '${e}' stream ${i} transport.`),y.open(),_=!0),J(ft,`RPC '${e}' stream ${i} sending:`,O),y.send(O))},To:()=>y.close()}),V=(O,x,w)=>{O.listen(x,A=>{try{w(A)}catch(M){setTimeout(()=>{throw M},0)}})};return V(y,Ps.EventType.OPEN,()=>{C||(J(ft,`RPC '${e}' stream ${i} transport opened.`),N.yo())}),V(y,Ps.EventType.CLOSE,()=>{C||(C=!0,J(ft,`RPC '${e}' stream ${i} transport closed`),N.So())}),V(y,Ps.EventType.ERROR,O=>{C||(C=!0,ji(ft,`RPC '${e}' stream ${i} transport errored:`,O),N.So(new X(j.UNAVAILABLE,"The operation could not be completed")))}),V(y,Ps.EventType.MESSAGE,O=>{var x;if(!C){const w=O.data[0];we(!!w);const A=w,M=A.error||((x=A[0])===null||x===void 0?void 0:x.error);if(M){J(ft,`RPC '${e}' stream ${i} received error:`,M);const W=M.status;let q=function(T){const S=qe[T];if(S!==void 0)return uv(S)}(W),E=M.message;q===void 0&&(q=j.INTERNAL,E="Unknown error status: "+W+" with message "+M.message),C=!0,N.So(new X(q,E)),y.close()}else J(ft,`RPC '${e}' stream ${i} received:`,w),N.bo(w)}}),V(l,L_.STAT_EVENT,O=>{O.stat===qc.PROXY?J(ft,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===qc.NOPROXY&&J(ft,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{N.wo()},0),N}}function Bu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ul(t){return new $I(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&J("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e,n,r,i,s,a,l,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Ev(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(Ln(n.toString()),Ln("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new X(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return J("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(J("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class VS extends Tv{constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=HI(this.serializer,e),r=function(s){if(!("targetChange"in s))return ie.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?ie.min():a.readTime?wn(a.readTime):ie.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=th(this.serializer),n.addTarget=function(s,a){let l;const u=a.target;if(l=Kc(u)?{documents:KI(s,u)}:{query:YI(s,u)._t},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=dv(s,a.resumeToken);const h=Jc(s,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(ie.min())>0){l.readTime=fl(s,a.snapshotVersion.toTimestamp());const h=Jc(s,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=JI(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=th(this.serializer),n.removeTarget=e,this.a_(n)}}class MS extends Tv{constructor(e,n,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return we(!!e.streamToken),this.lastStreamToken=e.streamToken,we(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){we(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=QI(e.writeResults,e.commitTime),r=wn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=th(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>GI(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new X(j.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,Zc(n,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new X(j.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Lo(e,Zc(n,r),i,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new X(j.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class OS{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ln(n),this.D_=!1):J("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget(async()=>{Jr(this)&&(J("RemoteStore","Restarting streams for network reachability change."),await async function(u){const h=se(u);h.L_.add(4),await Do(h),h.q_.set("Unknown"),h.L_.delete(4),await Bl(h)}(this))})}),this.q_=new OS(r,i)}}async function Bl(t){if(Jr(t))for(const e of t.B_)await e(!0)}async function Do(t){for(const e of t.B_)await e(!1)}function Iv(t,e){const n=se(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Ad(n)?xd(n):Zi(n).r_()&&Sd(n,e))}function Id(t,e){const n=se(t),r=Zi(n);n.N_.delete(e),r.r_()&&Sv(n,e),n.N_.size===0&&(r.r_()?r.o_():Jr(n)&&n.q_.set("Unknown"))}function Sd(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Zi(t).A_(e)}function Sv(t,e){t.Q_.xe(e),Zi(t).R_(e)}function xd(t){t.Q_=new jI({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Zi(t).start(),t.q_.v_()}function Ad(t){return Jr(t)&&!Zi(t).n_()&&t.N_.size>0}function Jr(t){return se(t).L_.size===0}function xv(t){t.Q_=void 0}async function jS(t){t.q_.set("Online")}async function US(t){t.N_.forEach((e,n)=>{Sd(t,e)})}async function BS(t,e){xv(t),Ad(t)?(t.q_.M_(e),xd(t)):t.q_.set("Unknown")}async function zS(t,e,n){if(t.q_.set("Online"),e instanceof hv&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const l of s.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,a),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(r){J("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await pl(t,r)}else if(e instanceof Ma?t.Q_.Ke(e):e instanceof cv?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ie.min()))try{const r=await wv(t.localStore);n.compareTo(r)>=0&&await function(s,a){const l=s.Q_.rt(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.N_.get(h);f&&s.N_.set(h,f.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const f=s.N_.get(u);if(!f)return;s.N_.set(u,f.withResumeToken(at.EMPTY_BYTE_STRING,f.snapshotVersion)),Sv(s,u);const y=new Zn(f.target,u,h,f.sequenceNumber);Sd(s,y)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){J("RemoteStore","Failed to raise snapshot:",r),await pl(t,r)}}async function pl(t,e,n){if(!Ro(e))throw e;t.L_.add(1),await Do(t),t.q_.set("Offline"),n||(n=()=>wv(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Bl(t)})}function Av(t,e){return e().catch(n=>pl(t,n,e))}async function zl(t){const e=se(t),n=yr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;$S(e);)try{const i=await AS(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,WS(e,i)}catch(i){await pl(e,i)}Cv(e)&&Rv(e)}function $S(t){return Jr(t)&&t.O_.length<10}function WS(t,e){t.O_.push(e);const n=yr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Cv(t){return Jr(t)&&!yr(t).n_()&&t.O_.length>0}function Rv(t){yr(t).start()}async function qS(t){yr(t).p_()}async function HS(t){const e=yr(t);for(const n of t.O_)e.m_(n.mutations)}async function GS(t,e,n){const r=t.O_.shift(),i=yd.from(r,e,n);await Av(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await zl(t)}async function QS(t,e){e&&yr(t).V_&&await async function(r,i){if(function(a){return LI(a)&&a!==j.ABORTED}(i.code)){const s=r.O_.shift();yr(r).s_(),await Av(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await zl(r)}}(t,e),Cv(t)&&Rv(t)}async function bm(t,e){const n=se(t);n.asyncQueue.verifyOperationInProgress(),J("RemoteStore","RemoteStore received new credentials");const r=Jr(n);n.L_.add(3),await Do(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Bl(n)}async function KS(t,e){const n=se(t);e?(n.L_.delete(2),await Bl(n)):e||(n.L_.add(2),await Do(n),n.q_.set("Unknown"))}function Zi(t){return t.K_||(t.K_=function(n,r,i){const s=se(n);return s.w_(),new VS(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:jS.bind(null,t),Ro:US.bind(null,t),mo:BS.bind(null,t),d_:zS.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Ad(t)?xd(t):t.q_.set("Unknown")):(await t.K_.stop(),xv(t))})),t.K_}function yr(t){return t.U_||(t.U_=function(n,r,i){const s=se(n);return s.w_(),new MS(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:qS.bind(null,t),mo:QS.bind(null,t),f_:HS.bind(null,t),g_:GS.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await zl(t)):(await t.U_.stop(),t.O_.length>0&&(J("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,l=new Cd(e,n,a,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rd(t,e){if(Ln("AsyncQueue",`${e}: ${t}`),Ro(t))return new X(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=Ds(),this.sortedSet=new Me(this.comparator)}static emptySet(e){return new Pi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Pi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Pi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(){this.W_=new Me(te.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):re():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Wi{constructor(e,n,r,i,s,a,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Wi(e,n,Pi.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ml(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class XS{constructor(){this.queries=Mm(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=se(n),s=i.queries;i.queries=Mm(),s.forEach((a,l)=>{for(const u of l.j_)u.onError(r)})})(this,new X(j.ABORTED,"Firestore shutting down"))}}function Mm(){return new Ji(t=>X_(t),Ml)}async function JS(t,e){const n=se(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new YS,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const l=Rd(a,`Initialization of query '${li(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&kd(n)}async function ZS(t,e){const n=se(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ex(t,e){const n=se(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const l of a.j_)l.X_(i)&&(r=!0);a.z_=i}}r&&kd(n)}function tx(t,e,n){const r=se(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function kd(t){t.Y_.forEach(e=>{e.next()})}var rh,Lm;(Lm=rh||(rh={})).ea="default",Lm.Cache="cache";class nx{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Wi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Wi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==rh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e){this.key=e}}class Pv{constructor(e){this.key=e}}class rx{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ue(),this.mutatedKeys=ue(),this.Aa=J_(e),this.Ra=new Pi(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Vm,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,y)=>{const _=i.get(f),C=Ll(this.query,y)?y:null,N=!!_&&this.mutatedKeys.has(_.key),V=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let O=!1;_&&C?_.data.isEqual(C.data)?N!==V&&(r.track({type:3,doc:C}),O=!0):this.ga(_,C)||(r.track({type:2,doc:C}),O=!0,(u&&this.Aa(C,u)>0||h&&this.Aa(C,h)<0)&&(l=!0)):!_&&C?(r.track({type:0,doc:C}),O=!0):_&&!C&&(r.track({type:1,doc:_}),O=!0,(u||h)&&(l=!0)),O&&(C?(a=a.add(C),s=V?s.add(f):s.delete(f)):(a=a.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ra:a,fa:r,ns:l,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((f,y)=>function(C,N){const V=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re()}};return V(C)-V(N)}(f.type,y.type)||this.Aa(f.doc,y.doc)),this.pa(r),i=i!=null&&i;const l=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,h=u!==this.Ea;return this.Ea=u,a.length!==0||h?{snapshot:new Wi(this.query,e.Ra,s,a,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Vm,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ue(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Pv(r))}),this.da.forEach(r=>{e.has(r)||n.push(new kv(r))}),n}ba(e){this.Ta=e.Ts,this.da=ue();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Wi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class ix{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class sx{constructor(e){this.key=e,this.va=!1}}class ox{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Ji(l=>X_(l),Ml),this.Ma=new Map,this.xa=new Set,this.Oa=new Me(te.comparator),this.Na=new Map,this.La=new wd,this.Ba={},this.ka=new Map,this.qa=$i.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function ax(t,e,n=!0){const r=Lv(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await Dv(r,e,n,!0),i}async function lx(t,e){const n=Lv(t);await Dv(n,e,!0,!1)}async function Dv(t,e,n,r){const i=await CS(t.localStore,vn(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await ux(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&Iv(t.remoteStore,i),l}async function ux(t,e,n,r,i){t.Ka=(y,_,C)=>async function(V,O,x,w){let A=O.view.ma(x);A.ns&&(A=await Pm(V.localStore,O.query,!1).then(({documents:E})=>O.view.ma(E,A)));const M=w&&w.targetChanges.get(O.targetId),W=w&&w.targetMismatches.get(O.targetId)!=null,q=O.view.applyChanges(A,V.isPrimaryClient,M,W);return Fm(V,O.targetId,q.wa),q.snapshot}(t,y,_,C);const s=await Pm(t.localStore,e,!0),a=new rx(e,s.Ts),l=a.ma(s.documents),u=Po.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=a.applyChanges(l,t.isPrimaryClient,u);Fm(t,n,h.wa);const f=new ix(e,n,a);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function cx(t,e,n){const r=se(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(a=>!Ml(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await nh(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Id(r.remoteStore,i.targetId),ih(r,i.targetId)}).catch(Co)):(ih(r,i.targetId),await nh(r.localStore,i.targetId,!0))}async function hx(t,e){const n=se(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Id(n.remoteStore,r.targetId))}async function dx(t,e,n){const r=vx(t);try{const i=await function(a,l){const u=se(a),h=Ye.now(),f=l.reduce((C,N)=>C.add(N.key),ue());let y,_;return u.persistence.runTransaction("Locally write mutations","readwrite",C=>{let N=On(),V=ue();return u.cs.getEntries(C,f).next(O=>{N=O,N.forEach((x,w)=>{w.isValidDocument()||(V=V.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(C,N)).next(O=>{y=O;const x=[];for(const w of l){const A=DI(w,y.get(w.key).overlayedDocument);A!=null&&x.push(new Er(w.key,A,$_(A.value.mapValue),un.exists(!0)))}return u.mutationQueue.addMutationBatch(C,h,x,l)}).next(O=>{_=O;const x=O.applyToLocalDocumentSet(y,V);return u.documentOverlayCache.saveOverlays(C,O.batchId,x)})}).then(()=>({batchId:_.batchId,changes:ev(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,u){let h=a.Ba[a.currentUser.toKey()];h||(h=new Me(pe)),h=h.insert(l,u),a.Ba[a.currentUser.toKey()]=h}(r,i.batchId,n),await No(r,i.changes),await zl(r.remoteStore)}catch(i){const s=Rd(i,"Failed to persist write");n.reject(s)}}async function Nv(t,e){const n=se(t);try{const r=await SS(n.localStore,e);e.targetChanges.forEach((i,s)=>{const a=n.Na.get(s);a&&(we(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?we(a.va):i.removedDocuments.size>0&&(we(a.va),a.va=!1))}),await No(n,r,e)}catch(r){await Co(r)}}function Om(t,e,n){const r=se(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,a)=>{const l=a.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(a,l){const u=se(a);u.onlineState=l;let h=!1;u.queries.forEach((f,y)=>{for(const _ of y.j_)_.Z_(l)&&(h=!0)}),h&&kd(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function fx(t,e,n){const r=se(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let a=new Me(te.comparator);a=a.insert(s,gt.newNoDocument(s,ie.min()));const l=ue().add(s),u=new jl(ie.min(),new Map,new Me(pe),a,l);await Nv(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),Pd(r)}else await nh(r.localStore,e,!1).then(()=>ih(r,e,n)).catch(Co)}async function px(t,e){const n=se(t),r=e.batch.batchId;try{const i=await IS(n.localStore,e);Vv(n,r,null),bv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await No(n,i)}catch(i){await Co(i)}}async function mx(t,e,n){const r=se(t);try{const i=await function(a,l){const u=se(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return u.mutationQueue.lookupMutationBatch(h,l).next(y=>(we(y!==null),f=y.keys(),u.mutationQueue.removeMutationBatch(h,y))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>u.localDocuments.getDocuments(h,f))})}(r.localStore,e);Vv(r,e,n),bv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await No(r,i)}catch(i){await Co(i)}}function bv(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Vv(t,e,n){const r=se(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function ih(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||Mv(t,r)})}function Mv(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Id(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Pd(t))}function Fm(t,e,n){for(const r of n)r instanceof kv?(t.La.addReference(r.key,e),gx(t,r)):r instanceof Pv?(J("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Mv(t,r.key)):re()}function gx(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(J("SyncEngine","New document in limbo: "+n),t.xa.add(r),Pd(t))}function Pd(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new te(Ae.fromString(e)),r=t.qa.next();t.Na.set(r,new sx(n)),t.Oa=t.Oa.insert(n,r),Iv(t.remoteStore,new Zn(vn(pd(n.path)),r,"TargetPurposeLimboResolution",ld.oe))}}async function No(t,e,n){const r=se(t),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{a.push(r.Ka(u,e,n).then(h=>{var f;if((h||n)&&r.isPrimaryClient){const y=h?!h.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,y?"current":"not-current")}if(h){i.push(h);const y=Td.Wi(u.targetId,h);s.push(y)}}))}),await Promise.all(a),r.Ca.d_(i),await async function(u,h){const f=se(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>B.forEach(h,_=>B.forEach(_.$i,C=>f.persistence.referenceDelegate.addReference(y,_.targetId,C)).next(()=>B.forEach(_.Ui,C=>f.persistence.referenceDelegate.removeReference(y,_.targetId,C)))))}catch(y){if(!Ro(y))throw y;J("LocalStore","Failed to update sequence numbers: "+y)}for(const y of h){const _=y.targetId;if(!y.fromCache){const C=f.os.get(_),N=C.snapshotVersion,V=C.withLastLimboFreeSnapshotVersion(N);f.os=f.os.insert(_,V)}}}(r.localStore,s))}async function yx(t,e){const n=se(t);if(!n.currentUser.isEqual(e)){J("SyncEngine","User change. New user:",e.toKey());const r=await vv(n.localStore,e);n.currentUser=e,function(s,a){s.ka.forEach(l=>{l.forEach(u=>{u.reject(new X(j.CANCELLED,a))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await No(n,r.hs)}}function _x(t,e){const n=se(t),r=n.Na.get(e);if(r&&r.va)return ue().add(r.key);{let i=ue();const s=n.Ma.get(e);if(!s)return i;for(const a of s){const l=n.Fa.get(a);i=i.unionWith(l.view.Va)}return i}}function Lv(t){const e=se(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Nv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_x.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fx.bind(null,e),e.Ca.d_=ex.bind(null,e.eventManager),e.Ca.$a=tx.bind(null,e.eventManager),e}function vx(t){const e=se(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=px.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mx.bind(null,e),e}class ml{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ul(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return TS(this.persistence,new wS,e.initialUser,this.serializer)}Ga(e){return new yS(Ed.Zr,this.serializer)}Wa(e){return new kS}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ml.provider={build:()=>new ml};class sh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Om(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=yx.bind(null,this.syncEngine),await KS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new XS}()}createDatastore(e){const n=Ul(e.databaseInfo.databaseId),r=function(s){return new bS(s)}(e.databaseInfo);return function(s,a,l,u){return new LS(s,a,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,a,l){return new FS(r,i,s,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Om(this.syncEngine,n,0),function(){return Nm.D()?new Nm:new PS}())}createSyncEngine(e,n){return function(i,s,a,l,u,h,f){const y=new ox(i,s,a,l,u,h);return f&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=se(i);J("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Do(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}sh.provider={build:()=>new sh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ln("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=pt.UNAUTHENTICATED,this.clientId=U_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{J("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(J("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Rd(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function zu(t,e){t.asyncQueue.verifyOperationInProgress(),J("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await vv(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function jm(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Tx(t);J("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>bm(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>bm(e.remoteStore,i)),t._onlineComponents=e}async function Tx(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J("FirestoreClient","Using user provided OfflineComponentProvider");try{await zu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===j.FAILED_PRECONDITION||i.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ji("Error using user provided cache. Falling back to memory cache: "+n),await zu(t,new ml)}}else J("FirestoreClient","Using default OfflineComponentProvider"),await zu(t,new ml);return t._offlineComponents}async function Ov(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J("FirestoreClient","Using user provided OnlineComponentProvider"),await jm(t,t._uninitializedComponentsProvider._online)):(J("FirestoreClient","Using default OnlineComponentProvider"),await jm(t,new sh))),t._onlineComponents}function Ix(t){return Ov(t).then(e=>e.syncEngine)}async function Um(t){const e=await Ov(t),n=e.eventManager;return n.onListen=ax.bind(null,e.syncEngine),n.onUnlisten=cx.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=lx.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=hx.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fv(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(t,e,n){if(!n)throw new X(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Sx(t,e,n,r){if(e===!0&&r===!0)throw new X(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function zm(t){if(!te.isDocumentKey(t))throw new X(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function $m(t){if(te.isDocumentKey(t))throw new X(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function $l(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":re()}function hr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$l(t);throw new X(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new X(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new X(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Sx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Fv((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new X(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new X(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new X(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wl{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Wm({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new X(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new X(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Wm(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new U1;switch(r.type){case"firstParty":return new W1(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new X(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Bm.get(n);r&&(J("ComponentProvider","Removing Datastore"),Bm.delete(n),r.terminate())}(this),Promise.resolve()}}function xx(t,e,n,r={}){var i;const s=(t=hr(t,Wl))._getSettings(),a=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&ji("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=pt.MOCK_USER;else{l=T_(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new X(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new pt(h)}t._authCredentials=new B1(new j_(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Zr(this.firestore,e,this._query)}}class bt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bt(this.firestore,e,this._key)}}class dr extends Zr{constructor(e,n,r){super(e,n,pd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bt(this.firestore,null,new te(e))}withConverter(e){return new dr(this.firestore,e,this._path)}}function qm(t,e,...n){if(t=St(t),jv("collection","path",e),t instanceof Wl){const r=Ae.fromString(e,...n);return $m(r),new dr(t,null,r)}{if(!(t instanceof bt||t instanceof dr))throw new X(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ae.fromString(e,...n));return $m(r),new dr(t.firestore,null,r)}}function xn(t,e,...n){if(t=St(t),arguments.length===1&&(e=U_.newId()),jv("doc","path",e),t instanceof Wl){const r=Ae.fromString(e,...n);return zm(r),new bt(t,null,new te(r))}{if(!(t instanceof bt||t instanceof dr))throw new X(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ae.fromString(e,...n));return zm(r),new bt(t.firestore,t instanceof dr?t.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Ev(this,"async_queue_retry"),this.Vu=()=>{const r=Bu();r&&J("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Bu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Bu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Or;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ro(e))throw e;J("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(r);throw Ln("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Cd.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&re()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Gm(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class qi extends Wl{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Hm,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Hm(e),this._firestoreClient=void 0,await e}}}function Ax(t,e){const n=typeof t=="object"?t:P_(),r=typeof t=="string"?t:"(default)",i=C_(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=w_("firestore");s&&xx(i,...s)}return i}function Uv(t){if(t._terminated)throw new X(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Cx(t),t._firestoreClient}function Cx(t){var e,n,r;const i=t._freezeSettings(),s=function(l,u,h,f){return new rI(l,u,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Fv(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Ex(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hi(at.fromBase64String(e))}catch(n){throw new X(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Hi(at.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new X(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new X(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new X(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx=/^__.*__$/;class kx{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Er(e,this.data,this.fieldMask,n,this.fieldTransforms):new ko(e,this.data,n,this.fieldTransforms)}}class Bv{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Er(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function zv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re()}}class Vd{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Vd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return gl(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(zv(this.Cu)&&Rx.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Px{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ul(e)}Qu(e,n,r,i=!1){return new Vd({Cu:e,methodName:n,qu:r,path:rt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Md(t){const e=t._freezeSettings(),n=Ul(t._databaseId);return new Px(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Dx(t,e,n,r,i,s={}){const a=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Ld("Data must be an object, but it was:",a,r);const l=$v(r,a);let u,h;if(s.merge)u=new jt(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const f=[];for(const y of s.mergeFields){const _=oh(e,y,n);if(!a.contains(_))throw new X(j.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);qv(f,_)||f.push(_)}u=new jt(f),h=a.fieldTransforms.filter(y=>u.covers(y.field))}else u=null,h=a.fieldTransforms;return new kx(new Rt(l),u,h)}class Hl extends Dd{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hl}}function Nx(t,e,n,r){const i=t.Qu(1,e,n);Ld("Data must be an object, but it was:",i,r);const s=[],a=Rt.empty();Xr(r,(u,h)=>{const f=Od(e,u,n);h=St(h);const y=i.Nu(f);if(h instanceof Hl)s.push(f);else{const _=bo(h,y);_!=null&&(s.push(f),a.set(f,_))}});const l=new jt(s);return new Bv(a,l,i.fieldTransforms)}function bx(t,e,n,r,i,s){const a=t.Qu(1,e,n),l=[oh(e,r,n)],u=[i];if(s.length%2!=0)throw new X(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)l.push(oh(e,s[_])),u.push(s[_+1]);const h=[],f=Rt.empty();for(let _=l.length-1;_>=0;--_)if(!qv(h,l[_])){const C=l[_];let N=u[_];N=St(N);const V=a.Nu(C);if(N instanceof Hl)h.push(C);else{const O=bo(N,V);O!=null&&(h.push(C),f.set(C,O))}}const y=new jt(h);return new Bv(f,y,a.fieldTransforms)}function Vx(t,e,n,r=!1){return bo(n,t.Qu(r?4:3,e))}function bo(t,e){if(Wv(t=St(t)))return Ld("Unsupported field value:",e,t),$v(t,e);if(t instanceof Dd)return function(r,i){if(!zv(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const l of r){let u=bo(l,i.Lu(a));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),a++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=St(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return xI(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ye.fromDate(r);return{timestampValue:fl(i.serializer,s)}}if(r instanceof Ye){const s=new Ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:fl(i.serializer,s)}}if(r instanceof Nd)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Hi)return{bytesValue:dv(i.serializer,r._byteString)};if(r instanceof bt){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:vd(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof bd)return function(a,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return md(l.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${$l(r)}`)}(t,e)}function $v(t,e){const n={};return B_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xr(t,(r,i)=>{const s=bo(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Wv(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ye||t instanceof Nd||t instanceof Hi||t instanceof bt||t instanceof Dd||t instanceof bd)}function Ld(t,e,n){if(!Wv(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=$l(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function oh(t,e,n){if((e=St(e))instanceof ql)return e._internalPath;if(typeof e=="string")return Od(t,e);throw gl("Field path arguments must be of type string or ",t,!1,void 0,n)}const Mx=new RegExp("[~\\*/\\[\\]]");function Od(t,e,n){if(e.search(Mx)>=0)throw gl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ql(...e.split("."))._internalPath}catch{throw gl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function gl(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${r}`),a&&(u+=` in document ${i}`),u+=")"),new X(j.INVALID_ARGUMENT,l+t+u)}function qv(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Lx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Fd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Lx extends Hv{data(){return super.data()}}function Fd(t,e){return typeof e=="string"?Od(t,e):e instanceof ql?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new X(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jd{}class Gv extends jd{}function Fx(t,e,...n){let r=[];e instanceof jd&&r.push(e),r=r.concat(n),function(s){const a=s.filter(u=>u instanceof Bd).length,l=s.filter(u=>u instanceof Ud).length;if(a>1||a>0&&l>0)throw new X(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Ud extends Gv{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ud(e,n,r)}_apply(e){const n=this._parse(e);return Qv(e._query,n),new Zr(e.firestore,e.converter,Yc(e._query,n))}_parse(e){const n=Md(e.firestore);return function(s,a,l,u,h,f,y){let _;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new X(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Km(y,f);const C=[];for(const N of y)C.push(Qm(u,s,N));_={arrayValue:{values:C}}}else _=Qm(u,s,y)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Km(y,f),_=Vx(l,a,y,f==="in"||f==="not-in");return Ge.create(h,f,_)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Bd extends jd{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Bd(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:hn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let a=i;const l=s.getFlattenedFilters();for(const u of l)Qv(a,u),a=Yc(a,u)}(e._query,n),new Zr(e.firestore,e.converter,Yc(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class zd extends Gv{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new zd(e,n)}_apply(e){const n=function(i,s,a){if(i.startAt!==null)throw new X(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new X(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _o(s,a)}(e._query,this._field,this._direction);return new Zr(e.firestore,e.converter,function(i,s){const a=i.explicitOrderBy.concat([s]);return new Xi(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function jx(t,e="asc"){const n=e,r=Fd("orderBy",t);return zd._create(r,n)}function Qm(t,e,n){if(typeof(n=St(n))=="string"){if(n==="")throw new X(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Y_(e)&&n.indexOf("/")!==-1)throw new X(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ae.fromString(n));if(!te.isDocumentKey(r))throw new X(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return fm(t,new te(r))}if(n instanceof bt)return fm(t,n._key);throw new X(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$l(n)}.`)}function Km(t,e){if(!Array.isArray(t)||t.length===0)throw new X(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Qv(t,e){const n=function(i,s){for(const a of i)for(const l of a.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new X(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new X(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Ux{convertValue(e,n="none"){switch(Hr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(qr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw re()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Xr(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>Be(a.doubleValue));return new bd(s)}convertGeoPoint(e){return new Nd(Be(e.latitude),Be(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=cd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(mo(e));default:return null}}convertTimestamp(e){const n=gr(e);return new Ye(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ae.fromString(e);we(_v(r));const i=new go(r.get(1),r.get(3)),s=new te(r.popFirst(5));return i.isEqual(n)||Ln(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Kv extends Hv{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new La(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Fd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class La extends Kv{data(e={}){return super.data(e)}}class zx{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new bs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new La(this._firestore,this._userDataWriter,r.key,r,new bs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new X(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(l=>{const u=new La(i._firestore,i._userDataWriter,l.doc.key,l.doc,new bs(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new La(i._firestore,i._userDataWriter,l.doc.key,l.doc,new bs(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,f=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),f=a.indexOf(l.doc.key)),{type:$x(l.type),doc:u,oldIndex:h,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function $x(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re()}}class Yv extends Ux{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,n)}}function Ar(t,e,n,...r){t=hr(t,bt);const i=hr(t.firestore,qi),s=Md(i);let a;return a=typeof(e=St(e))=="string"||e instanceof ql?bx(s,"updateDoc",t._key,e,n,r):Nx(s,"updateDoc",t._key,e),$d(i,[a.toMutation(t._key,un.exists(!0))])}function Wx(t){return $d(hr(t.firestore,qi),[new gd(t._key,un.none())])}function qx(t,e){const n=hr(t.firestore,qi),r=xn(t),i=Bx(t.converter,e);return $d(n,[Dx(Md(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,un.exists(!1))]).then(()=>r)}function Hx(t,...e){var n,r,i;t=St(t);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||Gm(e[a])||(s=e[a],a++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Gm(e[a])){const y=e[a];e[a]=(n=y.next)===null||n===void 0?void 0:n.bind(y),e[a+1]=(r=y.error)===null||r===void 0?void 0:r.bind(y),e[a+2]=(i=y.complete)===null||i===void 0?void 0:i.bind(y)}let u,h,f;if(t instanceof bt)h=hr(t.firestore,qi),f=pd(t._key.path),u={next:y=>{e[a]&&e[a](Gx(h,t,y))},error:e[a+1],complete:e[a+2]};else{const y=hr(t,Zr);h=hr(y.firestore,qi),f=y._query;const _=new Yv(h);u={next:C=>{e[a]&&e[a](new zx(h,_,y,C))},error:e[a+1],complete:e[a+2]},Ox(t._query)}return function(_,C,N,V){const O=new wx(V),x=new nx(C,O,N);return _.asyncQueue.enqueueAndForget(async()=>JS(await Um(_),x)),()=>{O.Za(),_.asyncQueue.enqueueAndForget(async()=>ZS(await Um(_),x))}}(Uv(h),f,l,u)}function $d(t,e){return function(r,i){const s=new Or;return r.asyncQueue.enqueueAndForget(async()=>dx(await Ix(r),i,s)),s.promise}(Uv(t),e)}function Gx(t,e,n){const r=n.docs.get(e._key),i=new Yv(t);return new Kv(t,i,e._key,r,new bs(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Yi=i})(R_),ho(new Fi("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),l=new qi(new z1(r.getProvider("auth-internal")),new H1(r.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new X(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new go(h.options.projectId,f)}(a,i),a);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),cr(lm,"4.7.3",e),cr(lm,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="firebasestorage.googleapis.com",Jv="storageBucket",Qx=2*60*1e3,Kx=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue extends Yr{constructor(e,n,r=0){super($u(e),`Firebase Storage: ${n} (${$u(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ue.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return $u(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var je;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(je||(je={}));function $u(t){return"storage/"+t}function Wd(){const t="An unknown error occurred, please check the error payload for server response.";return new Ue(je.UNKNOWN,t)}function Yx(t){return new Ue(je.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Xx(t){return new Ue(je.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Jx(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ue(je.UNAUTHENTICATED,t)}function Zx(){return new Ue(je.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function eA(t){return new Ue(je.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function tA(){return new Ue(je.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function nA(){return new Ue(je.CANCELED,"User canceled the upload/download.")}function rA(t){return new Ue(je.INVALID_URL,"Invalid URL '"+t+"'.")}function iA(t){return new Ue(je.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function sA(){return new Ue(je.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Jv+"' property when initializing the app?")}function oA(){return new Ue(je.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function aA(){return new Ue(je.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function lA(t){return new Ue(je.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function ah(t){return new Ue(je.INVALID_ARGUMENT,t)}function Zv(){return new Ue(je.APP_DELETED,"The Firebase app was deleted.")}function uA(t){return new Ue(je.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Gs(t,e){return new Ue(je.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function xs(t){throw new Ue(je.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Ut.makeFromUrl(e,n)}catch{return new Ut(e,"")}if(r.path==="")return r;throw iA(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(M){M.path.charAt(M.path.length-1)==="/"&&(M.path_=M.path_.slice(0,-1))}const a="(/(.*))?$",l=new RegExp("^gs://"+i+a,"i"),u={bucket:1,path:3};function h(M){M.path_=decodeURIComponent(M.path)}const f="v[A-Za-z0-9_]+",y=n.replace(/[.]/g,"\\."),_="(/([^?#]*).*)?$",C=new RegExp(`^https?://${y}/${f}/b/${i}/o${_}`,"i"),N={bucket:1,path:3},V=n===Xv?"(?:storage.googleapis.com|storage.cloud.google.com)":n,O="([^?#]*)",x=new RegExp(`^https?://${V}/${i}/${O}`,"i"),A=[{regex:l,indices:u,postModify:s},{regex:C,indices:N,postModify:h},{regex:x,indices:{bucket:1,path:2},postModify:h}];for(let M=0;M<A.length;M++){const W=A[M],q=W.regex.exec(e);if(q){const E=q[W.indices.bucket];let g=q[W.indices.path];g||(g=""),r=new Ut(E,g),W.postModify(r);break}}if(r==null)throw rA(e);return r}}class cA{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(t,e,n){let r=1,i=null,s=null,a=!1,l=0;function u(){return l===2}let h=!1;function f(...O){h||(h=!0,e.apply(null,O))}function y(O){i=setTimeout(()=>{i=null,t(C,u())},O)}function _(){s&&clearTimeout(s)}function C(O,...x){if(h){_();return}if(O){_(),f.call(null,O,...x);return}if(u()||a){_(),f.call(null,O,...x);return}r<64&&(r*=2);let A;l===1?(l=2,A=0):A=(r+Math.random())*1e3,y(A)}let N=!1;function V(O){N||(N=!0,_(),!h&&(i!==null?(O||(l=2),clearTimeout(i),y(0)):O||(l=1)))}return y(0),s=setTimeout(()=>{a=!0,V(!0)},n),V}function dA(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(t){return t!==void 0}function pA(t){return typeof t=="object"&&!Array.isArray(t)}function qd(t){return typeof t=="string"||t instanceof String}function Ym(t){return Hd()&&t instanceof Blob}function Hd(){return typeof Blob<"u"}function Xm(t,e,n,r){if(r<e)throw ah(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw ah(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gl(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function e0(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Fr;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Fr||(Fr={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e,n,r,i,s,a,l,u,h,f,y,_=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=l,this.errorCallback_=u,this.timeout_=h,this.progressCallback_=f,this.connectionFactory_=y,this.retry=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,N)=>{this.resolve_=C,this.reject_=N,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new ya(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=l=>{const u=l.loaded,h=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,h)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const l=s.getErrorCode()===Fr.NO_ERROR,u=s.getStatus();if(!l||mA(u,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===Fr.ABORT;r(!1,new ya(!1,null,f));return}const h=this.successCodes_.indexOf(u)!==-1;r(!0,new ya(h,s))})},n=(r,i)=>{const s=this.resolve_,a=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());fA(u)?s(u):s()}catch(u){a(u)}else if(l!==null){const u=Wd();u.serverResponse=l.getErrorText(),this.errorCallback_?a(this.errorCallback_(l,u)):a(u)}else if(i.canceled){const u=this.appDelete_?Zv():nA();a(u)}else{const u=tA();a(u)}};this.canceled_?n(!1,new ya(!1,null,!0)):this.backoffId_=hA(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&dA(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ya{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function yA(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function _A(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function vA(t,e){e&&(t["X-Firebase-GMPID"]=e)}function wA(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function EA(t,e,n,r,i,s,a=!0){const l=e0(t.urlParams),u=t.url+l,h=Object.assign({},t.headers);return vA(h,e),yA(h,n),_A(h,s),wA(h,r),new gA(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function IA(...t){const e=TA();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Hd())return new Blob(t);throw new Ue(je.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function SA(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(t){if(typeof atob>"u")throw lA("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Wu{constructor(e,n){this.data=e,this.contentType=n||null}}function AA(t,e){switch(t){case gn.RAW:return new Wu(t0(e));case gn.BASE64:case gn.BASE64URL:return new Wu(n0(t,e));case gn.DATA_URL:return new Wu(RA(e),kA(e))}throw Wd()}function t0(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,a=t.charCodeAt(++n);r=65536|(s&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function CA(t){let e;try{e=decodeURIComponent(t)}catch{throw Gs(gn.DATA_URL,"Malformed data URL.")}return t0(e)}function n0(t,e){switch(t){case gn.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Gs(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case gn.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Gs(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=xA(e)}catch(i){throw i.message.includes("polyfill")?i:Gs(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class r0{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Gs(gn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=PA(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function RA(t){const e=new r0(t);return e.base64?n0(gn.BASE64,e.rest):CA(e.rest)}function kA(t){return new r0(t).contentType}function PA(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,n){let r=0,i="";Ym(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(Ym(this.data_)){const r=this.data_,i=SA(r,e,n);return i===null?null:new Yn(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Yn(r,!0)}}static getBlob(...e){if(Hd()){const n=e.map(r=>r instanceof Yn?r.data_:r);return new Yn(IA.apply(null,n))}else{const n=e.map(a=>qd(a)?AA(gn.RAW,a).data:a.data_);let r=0;n.forEach(a=>{r+=a.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(a=>{for(let l=0;l<a.length;l++)i[s++]=a[l]}),new Yn(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(t){let e;try{e=JSON.parse(t)}catch{return null}return pA(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DA(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function NA(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function s0(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(t,e){return e}class Et{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||bA}}let _a=null;function VA(t){return!qd(t)||t.length<2?t:s0(t)}function o0(){if(_a)return _a;const t=[];t.push(new Et("bucket")),t.push(new Et("generation")),t.push(new Et("metageneration")),t.push(new Et("name","fullPath",!0));function e(s,a){return VA(a)}const n=new Et("name");n.xform=e,t.push(n);function r(s,a){return a!==void 0?Number(a):a}const i=new Et("size");return i.xform=r,t.push(i),t.push(new Et("timeCreated")),t.push(new Et("updated")),t.push(new Et("md5Hash",null,!0)),t.push(new Et("cacheControl",null,!0)),t.push(new Et("contentDisposition",null,!0)),t.push(new Et("contentEncoding",null,!0)),t.push(new Et("contentLanguage",null,!0)),t.push(new Et("contentType",null,!0)),t.push(new Et("metadata","customMetadata",!0)),_a=t,_a}function MA(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Ut(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function LA(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const a=n[s];r[a.local]=a.xform(r,e[a.server])}return MA(r,t),r}function a0(t,e,n){const r=i0(e);return r===null?null:LA(t,r,n)}function OA(t,e,n,r){const i=i0(e);if(i===null||!qd(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const a=encodeURIComponent;return s.split(",").map(h=>{const f=t.bucket,y=t.fullPath,_="/b/"+a(f)+"/o/"+a(y),C=Gl(_,n,r),N=e0({alt:"media",token:h});return C+N})[0]}function FA(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class Gd{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(t){if(!t)throw Wd()}function jA(t,e){function n(r,i){const s=a0(t,i,e);return l0(s!==null),s}return n}function UA(t,e){function n(r,i){const s=a0(t,i,e);return l0(s!==null),OA(s,i,t.host,t._protocol)}return n}function u0(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=Zx():i=Jx():n.getStatus()===402?i=Xx(t.bucket):n.getStatus()===403?i=eA(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function c0(t){const e=u0(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=Yx(t.path)),s.serverResponse=i.serverResponse,s}return n}function BA(t,e,n){const r=e.fullServerUrl(),i=Gl(r,t.host,t._protocol),s="GET",a=t.maxOperationRetryTime,l=new Gd(i,s,UA(t,n),a);return l.errorHandler=c0(e),l}function zA(t,e){const n=e.fullServerUrl(),r=Gl(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function a(u,h){}const l=new Gd(r,i,a,s);return l.successCodes=[200,204],l.errorHandler=c0(e),l}function $A(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function WA(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=$A(null,e)),r}function qA(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function l(){let A="";for(let M=0;M<2;M++)A=A+Math.random().toString().slice(2);return A}const u=l();a["Content-Type"]="multipart/related; boundary="+u;const h=WA(e,r,i),f=FA(h,n),y="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+u+`\r
Content-Type: `+h.contentType+`\r
\r
`,_=`\r
--`+u+"--",C=Yn.getBlob(y,r,_);if(C===null)throw oA();const N={name:h.fullPath},V=Gl(s,t.host,t._protocol),O="POST",x=t.maxUploadRetryTime,w=new Gd(V,O,jA(t,n),x);return w.urlParams=N,w.headers=a,w.body=C.uploadData(),w.errorHandler=u0(e),w}class HA{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Fr.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Fr.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Fr.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw xs("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw xs("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw xs("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw xs("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw xs("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class GA extends HA{initXhr(){this.xhr_.responseType="text"}}function Qd(){return new GA}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,n){this._service=e,n instanceof Ut?this._location=n:this._location=Ut.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Gr(e,n)}get root(){const e=new Ut(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return s0(this._location.path)}get storage(){return this._service}get parent(){const e=DA(this._location.path);if(e===null)return null;const n=new Ut(this._location.bucket,e);return new Gr(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw uA(e)}}function QA(t,e,n){t._throwIfRoot("uploadBytes");const r=qA(t.storage,t._location,o0(),new Yn(e,!0),n);return t.storage.makeRequestWithTokens(r,Qd).then(i=>({metadata:i,ref:t}))}function KA(t){t._throwIfRoot("getDownloadURL");const e=BA(t.storage,t._location,o0());return t.storage.makeRequestWithTokens(e,Qd).then(n=>{if(n===null)throw aA();return n})}function YA(t){t._throwIfRoot("deleteObject");const e=zA(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Qd)}function XA(t,e){const n=NA(t._location.path,e),r=new Ut(t._location.bucket,n);return new Gr(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(t){return/^[A-Za-z]+:\/\//.test(t)}function ZA(t,e){return new Gr(t,e)}function h0(t,e){if(t instanceof Kd){const n=t;if(n._bucket==null)throw sA();const r=new Gr(n,n._bucket);return e!=null?h0(r,e):r}else return e!==void 0?XA(t,e):t}function eC(t,e){if(e&&JA(e)){if(t instanceof Kd)return ZA(t,e);throw ah("To use ref(service, url), the first argument must be a Storage instance.")}else return h0(t,e)}function Jm(t,e){const n=e==null?void 0:e[Jv];return n==null?null:Ut.makeFromBucketSpec(n,t)}function tC(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:T_(i,t.app.options.projectId))}class Kd{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Xv,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Qx,this._maxUploadRetryTime=Kx,this._requests=new Set,i!=null?this._bucket=Ut.makeFromBucketSpec(i,this._host):this._bucket=Jm(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ut.makeFromBucketSpec(this._url,e):this._bucket=Jm(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Xm("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Xm("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Gr(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new cA(Zv());{const a=EA(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const Zm="@firebase/storage",eg="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0="storage";function nC(t,e,n){return t=St(t),QA(t,e,n)}function rC(t){return t=St(t),KA(t)}function tg(t){return t=St(t),YA(t)}function lh(t,e){return t=St(t),eC(t,e)}function iC(t=P_(),e){t=St(t);const r=C_(t,d0).getImmediate({identifier:e}),i=w_("storage");return i&&sC(r,...i),r}function sC(t,e,n,r={}){tC(t,e,n,r)}function oC(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Kd(n,r,i,e,R_)}function aC(){ho(new Fi(d0,oC,"PUBLIC").setMultipleInstances(!0)),cr(Zm,eg,""),cr(Zm,eg,"esm2017")}aC();var lC="firebase",uC="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cr(lC,uC,"app");const cC={apiKey:"AIzaSyA0ZCgyjVAqKBDbR9-iiUb8bVyH7UijiDo",authDomain:"bever-family-recipes.firebaseapp.com",projectId:"bever-family-recipes",storageBucket:"bever-family-recipes.firebasestorage.app",messagingSenderId:"609429863508",appId:"1:609429863508:web:aee0811bd4c8757d2501c1"},f0=k_(cC),fn=Ax(f0),uh=iC(f0),R={cream:"#f7f5f0",warmWhite:"#fffefa",linen:"#f3f0e8",brass:"#b8956b",brassLight:"#c9a86c",brassDark:"#a07d50",sage:"#5c6d5e",textDark:"#3d3d3d",textMedium:"#5a5a5a",textLight:"#7a7a7a",textMuted:"#9a9a8a",borderLight:"#e5e0d5",borderMedium:"#d5d0c5",borderDark:"#c9c4b5",favorite:"#c75050",error:"#9b6b5b"},v={app:{minHeight:"100vh",background:R.cream,fontFamily:"'Montserrat', -apple-system, BlinkMacSystemFont, sans-serif",color:R.textDark,lineHeight:1.6},header:{background:R.cream,borderBottom:`1px solid ${R.borderLight}`,position:"sticky",top:0,zIndex:100},headerInner:{maxWidth:1200,margin:"0 auto",padding:"20px 40px",display:"flex",justifyContent:"space-between",alignItems:"center"},logo:{display:"flex",alignItems:"center",gap:16,cursor:"pointer",background:"none",border:"none",padding:0},logoMark:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:28,fontWeight:500,color:R.sage,width:52,height:52,border:`2px solid ${R.sage}`,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",letterSpacing:2},logoTextWrap:{display:"flex",flexDirection:"column"},logoTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:22,fontWeight:500,color:R.textDark,letterSpacing:1},logoSubtitle:{fontSize:10,letterSpacing:4,color:R.textMuted,textTransform:"uppercase",fontWeight:400},nav:{display:"flex",gap:8,alignItems:"center"},navLink:{padding:"10px 20px",background:"none",border:"none",fontSize:12,letterSpacing:1.5,textTransform:"uppercase",color:R.textMedium,cursor:"pointer",fontFamily:"'Montserrat', sans-serif",transition:"color 0.2s"},navLinkActive:{color:R.sage,borderBottom:`1px solid ${R.sage}`},familyBtn:{padding:"10px 24px",background:R.sage,border:"none",color:"white",fontSize:11,letterSpacing:1.5,textTransform:"uppercase",cursor:"pointer",fontFamily:"'Montserrat', sans-serif",transition:"background 0.2s"},mobileMenuBtn:{display:"none",background:"none",border:"none",fontSize:24,cursor:"pointer",color:R.textMedium,padding:8},hero:{background:`linear-gradient(to bottom, ${R.cream}, ${R.linen})`,padding:"80px 40px",textAlign:"center",borderBottom:`1px solid ${R.borderLight}`},heroWelcome:{fontSize:13,letterSpacing:4,textTransform:"uppercase",color:R.textMuted,marginBottom:16,fontWeight:400},heroTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:56,fontWeight:400,color:R.textDark,marginBottom:24,letterSpacing:2,lineHeight:1.1},divider:{display:"flex",alignItems:"center",justifyContent:"center",gap:20,margin:"28px 0"},dividerLine:{width:60,height:1,background:R.borderDark},dividerIcon:{color:R.brass,fontSize:14},heroSubtitle:{fontSize:15,color:R.textLight,lineHeight:1.9,maxWidth:500,margin:"0 auto 40px",fontWeight:300},searchContainer:{maxWidth:480,margin:"0 auto",position:"relative"},searchInput:{width:"100%",padding:"16px 24px",fontSize:16,border:`1px solid ${R.borderMedium}`,background:R.warmWhite,fontFamily:"'Montserrat', sans-serif",outline:"none",transition:"border-color 0.2s, box-shadow 0.2s",letterSpacing:.5,boxSizing:"border-box"},categorySection:{background:R.cream,padding:"24px 40px",borderBottom:`1px solid ${R.borderLight}`},categoryPills:{display:"flex",justifyContent:"center",flexWrap:"wrap",gap:8,maxWidth:900,margin:"0 auto"},categoryPill:{padding:"12px 20px",background:"transparent",border:`1px solid ${R.borderMedium}`,fontSize:11,letterSpacing:1.5,textTransform:"uppercase",color:R.textLight,cursor:"pointer",fontFamily:"'Montserrat', sans-serif",transition:"all 0.2s"},categoryPillActive:{background:R.sage,borderColor:R.sage,color:"white"},recipeSection:{maxWidth:1200,margin:"0 auto",padding:"60px 40px"},sectionHeader:{display:"flex",justifyContent:"space-between",alignItems:"baseline",marginBottom:40,borderBottom:`1px solid ${R.borderLight}`,paddingBottom:16},sectionTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:28,fontWeight:400,color:R.textDark,letterSpacing:1},recipeCount:{fontSize:12,color:R.textMuted,letterSpacing:1},recipeGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:32},recipeCard:{background:R.warmWhite,border:`1px solid ${R.borderLight}`,cursor:"pointer",transition:"transform 0.2s, box-shadow 0.2s",overflow:"hidden"},cardImageContainer:{height:220,overflow:"hidden",position:"relative",background:R.linen,display:"flex",alignItems:"center",justifyContent:"center"},cardImage:{width:"100%",height:"100%",objectFit:"contain",transition:"transform 0.3s"},cardPlaceholder:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:`linear-gradient(135deg, ${R.linen} 0%, #ebe8e0 100%)`},placeholderIcon:{fontSize:32,color:R.borderDark},favoriteBtn:{position:"absolute",top:12,right:12,width:40,height:40,background:"rgba(255, 255, 250, 0.9)",border:"none",borderRadius:"50%",fontSize:20,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:R.brass,transition:"transform 0.2s"},cardContent:{padding:24},cardCategory:{fontSize:10,letterSpacing:2,textTransform:"uppercase",color:R.brass,marginBottom:8,display:"block",fontWeight:500},cardTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:22,fontWeight:500,color:R.textDark,marginBottom:8,lineHeight:1.3},cardAuthor:{fontSize:13,color:R.textLight,fontStyle:"italic",marginBottom:12},cardMeta:{fontSize:12,color:R.textMuted,display:"flex",gap:8,alignItems:"center"},detailPage:{maxWidth:900,margin:"0 auto",padding:40},detailNav:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24,flexWrap:"wrap",gap:16},backBtn:{padding:"12px 24px",background:R.warmWhite,border:`1px solid ${R.borderMedium}`,fontSize:12,letterSpacing:1,color:R.textMedium,cursor:"pointer",fontFamily:"'Montserrat', sans-serif"},detailActions:{display:"flex",gap:8,flexWrap:"wrap"},actionBtn:{padding:"12px 20px",background:R.warmWhite,border:`1px solid ${R.borderMedium}`,fontSize:12,color:R.textMedium,cursor:"pointer",letterSpacing:.5,fontFamily:"'Montserrat', sans-serif"},printBtn:{padding:"12px 28px",background:`linear-gradient(135deg, ${R.brassLight} 0%, ${R.brass} 50%, ${R.brassDark} 100%)`,border:"none",color:"white",fontSize:11,letterSpacing:2,textTransform:"uppercase",cursor:"pointer",fontFamily:"'Montserrat', sans-serif",boxShadow:"0 2px 8px rgba(184, 149, 107, 0.3)"},deleteBtn:{padding:"12px 20px",background:R.warmWhite,border:`1px solid ${R.error}`,color:R.error,fontSize:12,cursor:"pointer",letterSpacing:.5,fontFamily:"'Montserrat', sans-serif"},recipeDetail:{background:R.warmWhite,border:`1px solid ${R.borderLight}`,overflow:"hidden"},detailImageWrap:{height:400,overflow:"hidden",position:"relative",background:R.linen,display:"flex",alignItems:"center",justifyContent:"center"},detailImage:{width:"100%",height:"100%",objectFit:"contain",background:R.linen},imageCaption:{position:"absolute",bottom:0,left:0,right:0,padding:"12px 24px",background:"linear-gradient(to top, rgba(0,0,0,0.6), transparent)",color:"white",fontSize:13,fontStyle:"italic",textAlign:"center"},detailContent:{padding:48},detailHeader:{textAlign:"center",marginBottom:40},detailCategory:{fontSize:11,letterSpacing:3,textTransform:"uppercase",color:R.brass,marginBottom:12,display:"block",fontWeight:500},detailTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:42,fontWeight:400,color:R.textDark,marginBottom:12,lineHeight:1.2,letterSpacing:1},detailAuthor:{fontSize:15,color:R.textLight,fontStyle:"italic",marginBottom:24},detailMeta:{display:"flex",justifyContent:"center",gap:32,fontSize:13,color:R.textMedium,flexWrap:"wrap"},sectionSeparator:{display:"flex",alignItems:"center",justifyContent:"center",gap:16,margin:"40px 0"},separatorLine:{flex:1,height:1,background:R.borderLight,maxWidth:100},separatorIcon:{color:R.brass,fontSize:12},detailBody:{display:"grid",gridTemplateColumns:"1fr 1.5fr",gap:48},colTitle:{fontSize:11,letterSpacing:3,textTransform:"uppercase",color:R.sage,marginBottom:20,paddingBottom:12,borderBottom:`1px solid ${R.borderLight}`,fontWeight:600},ingredientsList:{listStyle:"none",padding:0,margin:0},ingredientItem:{padding:"10px 0",borderBottom:`1px solid ${R.linen}`,fontSize:14,color:R.textMedium},instructionsList:{listStyle:"none",padding:0,margin:0,counterReset:"step"},instructionItem:{padding:"16px 0",borderBottom:`1px solid ${R.linen}`,fontSize:14,color:R.textMedium,lineHeight:1.7,display:"flex",gap:16},instructionNumber:{width:28,height:28,background:R.linen,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:12,fontWeight:600,color:R.sage,flexShrink:0},storyBox:{marginTop:40,padding:32,background:`linear-gradient(135deg, #faf8f3 0%, ${R.linen} 100%)`,borderLeft:`3px solid ${R.brass}`},storyTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:18,fontWeight:500,color:R.sage,marginBottom:12,letterSpacing:1},storyContent:{fontSize:15,color:R.textMedium,lineHeight:1.8,fontStyle:"italic"},notesBox:{marginTop:24,padding:24,background:R.linen,borderRadius:4},notesTitle:{fontSize:12,letterSpacing:2,textTransform:"uppercase",color:R.sage,marginBottom:12,fontWeight:600},notesContent:{fontSize:14,color:R.textMedium,lineHeight:1.7},handwrittenSection:{marginTop:40,padding:32,background:R.linen,textAlign:"center"},handwrittenTitle:{fontSize:12,letterSpacing:2,textTransform:"uppercase",color:R.brass,marginBottom:16,fontWeight:500},handwrittenThumb:{maxWidth:300,maxHeight:200,objectFit:"cover",borderRadius:4,border:`1px solid ${R.borderLight}`,cursor:"pointer",transition:"transform 0.2s"},handwrittenCaption:{fontSize:13,color:R.textMedium,fontStyle:"italic",marginTop:8,textAlign:"center"},handwrittenHint:{fontSize:11,color:R.textMuted,marginTop:8},addPage:{maxWidth:800,margin:"0 auto",padding:"40px 20px"},addPageHeader:{textAlign:"center",marginBottom:40},addPageTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:36,fontWeight:400,color:R.textDark,marginBottom:8},addPageSubtitle:{fontSize:14,color:R.textLight,fontStyle:"italic"},tabs:{display:"flex",justifyContent:"center",gap:8,marginBottom:32},tab:{padding:"14px 28px",background:R.warmWhite,border:`1px solid ${R.borderMedium}`,fontSize:12,letterSpacing:1,color:R.textMedium,cursor:"pointer",fontFamily:"'Montserrat', sans-serif"},tabActive:{padding:"14px 28px",background:R.sage,border:`1px solid ${R.sage}`,fontSize:12,letterSpacing:1,color:"white",cursor:"pointer",fontFamily:"'Montserrat', sans-serif"},form:{background:R.warmWhite,border:`1px solid ${R.borderLight}`,padding:40},formSection:{marginBottom:32},formSectionTitle:{fontSize:11,letterSpacing:2,textTransform:"uppercase",color:R.sage,marginBottom:16,paddingBottom:8,borderBottom:`1px solid ${R.borderLight}`,fontWeight:600},fieldGroup:{marginBottom:20},fieldLabel:{display:"block",fontSize:13,fontWeight:500,color:R.textMedium,marginBottom:8},fieldHint:{fontSize:12,color:R.textMuted,marginBottom:8,fontStyle:"italic"},input:{width:"100%",padding:"14px 16px",fontSize:16,border:`1px solid ${R.borderMedium}`,background:R.warmWhite,fontFamily:"'Montserrat', sans-serif",boxSizing:"border-box",outline:"none"},textarea:{width:"100%",padding:"14px 16px",fontSize:16,border:`1px solid ${R.borderMedium}`,background:R.warmWhite,fontFamily:"'Montserrat', sans-serif",boxSizing:"border-box",outline:"none",resize:"vertical",minHeight:120},select:{width:"100%",padding:"14px 16px",fontSize:16,border:`1px solid ${R.borderMedium}`,background:R.warmWhite,fontFamily:"'Montserrat', sans-serif",boxSizing:"border-box",outline:"none",cursor:"pointer"},gridRow:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:16},ingredientRow:{display:"flex",gap:8,marginBottom:8,alignItems:"center"},dragHandle:{cursor:"grab",padding:8,color:R.textMuted,fontSize:16,userSelect:"none"},qtyInput:{width:70,padding:"12px 10px",fontSize:16,border:`1px solid ${R.borderMedium}`,background:R.warmWhite,fontFamily:"'Montserrat', sans-serif",boxSizing:"border-box",textAlign:"center"},unitInput:{width:90,padding:"12px 10px",fontSize:16,border:`1px solid ${R.borderMedium}`,background:R.warmWhite,fontFamily:"'Montserrat', sans-serif",boxSizing:"border-box"},ingredientInput:{flex:1,padding:"12px 10px",fontSize:16,border:`1px solid ${R.borderMedium}`,background:R.warmWhite,fontFamily:"'Montserrat', sans-serif",boxSizing:"border-box"},removeBtn:{width:36,height:36,background:"none",border:`1px solid ${R.borderMedium}`,color:R.textMuted,cursor:"pointer",fontSize:18,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},addRowBtn:{padding:"12px 20px",background:"none",border:`1px dashed ${R.borderMedium}`,color:R.textMuted,cursor:"pointer",fontSize:13,fontFamily:"'Montserrat', sans-serif",width:"100%",marginTop:8},instructionRow:{display:"flex",gap:8,marginBottom:8,alignItems:"flex-start"},stepNumber:{width:32,height:32,background:R.linen,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:12,fontWeight:600,color:R.sage,flexShrink:0,marginTop:8},instructionTextarea:{flex:1,padding:"12px 14px",fontSize:16,border:`1px solid ${R.borderMedium}`,background:R.warmWhite,fontFamily:"'Montserrat', sans-serif",boxSizing:"border-box",resize:"vertical",minHeight:60},imageUploadArea:{border:`2px dashed ${R.borderMedium}`,borderRadius:4,padding:32,textAlign:"center",cursor:"pointer",transition:"border-color 0.2s",background:R.linen},imagePreview:{maxWidth:"100%",maxHeight:200,objectFit:"contain",borderRadius:4,marginBottom:12},uploadIcon:{fontSize:32,color:R.textMuted,marginBottom:8},uploadText:{fontSize:14,color:R.textMedium},uploadHint:{fontSize:12,color:R.textMuted,marginTop:4},formActions:{display:"flex",gap:16,justifyContent:"center",marginTop:40,paddingTop:32,borderTop:`1px solid ${R.borderLight}`},saveBtn:{padding:"16px 48px",background:R.sage,border:"none",color:"white",fontSize:13,letterSpacing:2,textTransform:"uppercase",cursor:"pointer",fontFamily:"'Montserrat', sans-serif"},cancelBtn:{padding:"16px 32px",background:R.warmWhite,border:`1px solid ${R.borderMedium}`,color:R.textMedium,fontSize:13,letterSpacing:1,cursor:"pointer",fontFamily:"'Montserrat', sans-serif"},trashPage:{maxWidth:800,margin:"0 auto",padding:"40px 20px"},trashHeader:{textAlign:"center",marginBottom:40},trashTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:36,fontWeight:400,color:R.textDark,marginBottom:8},trashSubtitle:{fontSize:14,color:R.textLight},trashWarning:{fontSize:13,color:R.error,marginBottom:24,padding:16,background:"#fdf8f6",border:`1px solid ${R.error}`,textAlign:"center"},trashItem:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:20,background:R.warmWhite,border:`1px solid ${R.borderLight}`,marginBottom:12},trashItemTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:20,color:R.textDark},trashItemMeta:{fontSize:12,color:R.textMuted},trashItemActions:{display:"flex",gap:8},restoreBtn:{padding:"10px 16px",background:R.sage,border:"none",color:"white",fontSize:12,cursor:"pointer",fontFamily:"'Montserrat', sans-serif"},emptyTrashBtn:{padding:"14px 28px",background:R.error,border:"none",color:"white",fontSize:12,letterSpacing:1,textTransform:"uppercase",cursor:"pointer",fontFamily:"'Montserrat', sans-serif"},notification:{position:"fixed",bottom:24,left:"50%",transform:"translateX(-50%)",padding:"16px 32px",background:R.textDark,color:"white",fontSize:14,borderRadius:4,zIndex:1e3,boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},notificationError:{background:R.error},loadingScreen:{position:"fixed",top:0,left:0,right:0,bottom:0,background:R.cream,display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},loadingContent:{textAlign:"center"},loadingLogo:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:48,color:R.sage,width:100,height:100,border:`3px solid ${R.sage}`,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px",letterSpacing:4},loadingText:{fontSize:14,color:R.textMuted,letterSpacing:2},spinner:{width:24,height:24,border:`2px solid ${R.borderLight}`,borderTopColor:R.sage,borderRadius:"50%",animation:"spin 1s linear infinite"},modal:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:20},modalContent:{position:"relative",maxWidth:"90vw",maxHeight:"90vh"},modalClose:{position:"absolute",top:-40,right:0,background:"none",border:"none",color:"white",fontSize:32,cursor:"pointer"},modalImage:{maxWidth:"100%",maxHeight:"85vh",objectFit:"contain"},loginModal:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},loginBox:{background:R.warmWhite,padding:40,maxWidth:400,width:"90%",textAlign:"center"},loginTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:28,color:R.textDark,marginBottom:8},loginSubtitle:{fontSize:14,color:R.textLight,marginBottom:24},loginInput:{width:"100%",padding:"14px 16px",fontSize:16,border:`1px solid ${R.borderMedium}`,marginBottom:16,textAlign:"center",fontFamily:"'Montserrat', sans-serif",boxSizing:"border-box"},loginBtn:{width:"100%",padding:"14px 24px",background:R.sage,border:"none",color:"white",fontSize:13,letterSpacing:1,cursor:"pointer",fontFamily:"'Montserrat', sans-serif",marginBottom:12},loginCancel:{background:"none",border:"none",color:R.textMuted,fontSize:13,cursor:"pointer"},filterRow:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:16,marginBottom:24,flexWrap:"wrap"},filterGroup:{display:"flex",gap:8,alignItems:"center"},filterSelect:{padding:"10px 16px",fontSize:13,border:`1px solid ${R.borderMedium}`,background:R.warmWhite,fontFamily:"'Montserrat', sans-serif",cursor:"pointer"},favoritesToggle:{padding:"10px 16px",background:"none",border:`1px solid ${R.borderMedium}`,fontSize:13,color:R.textMedium,cursor:"pointer",fontFamily:"'Montserrat', sans-serif"},favoritesToggleActive:{background:R.favorite,borderColor:R.favorite,color:"white"},adminToolBtn:{padding:"10px 20px",background:R.sage,border:"none",color:"white",fontSize:12,cursor:"pointer",fontFamily:"'Montserrat', sans-serif"},footer:{background:R.textDark,padding:"48px 40px",textAlign:"center",marginTop:80},footerLogo:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:24,color:R.brass,letterSpacing:3,marginBottom:12},footerText:{fontSize:13,color:"#a0a0a0",letterSpacing:2,marginBottom:8},footerTagline:{fontSize:12,color:"#707070",fontStyle:"italic"},madeItSection:{marginTop:24,paddingTop:20,borderTop:`1px solid ${R.borderLight}`},madeItList:{fontSize:13,color:R.sage,marginBottom:12,fontWeight:500},madeItBtn:{padding:"12px 20px",background:R.linen,border:`1px solid ${R.borderMedium}`,fontSize:13,color:R.sage,cursor:"pointer",fontWeight:500,fontFamily:"'Montserrat', sans-serif"},madeItForm:{display:"flex",gap:8,alignItems:"center",justifyContent:"center"},madeItInput:{padding:"10px 14px",fontSize:14,border:`1px solid ${R.borderMedium}`,width:150,fontFamily:"'Montserrat', sans-serif"},madeItSubmit:{padding:"10px 16px",background:R.sage,border:"none",color:"white",fontSize:13,cursor:"pointer",fontFamily:"'Montserrat', sans-serif"},madeItCancel:{padding:"10px 12px",background:"none",border:`1px solid ${R.borderMedium}`,color:R.textMuted,fontSize:14,cursor:"pointer"},scalerContainer:{display:"flex",alignItems:"center",justifyContent:"center",gap:12,margin:"24px 0",padding:"16px 0",borderTop:`1px solid ${R.borderLight}`,borderBottom:`1px solid ${R.borderLight}`},scalerLabel:{fontSize:12,color:R.textMuted,letterSpacing:1,textTransform:"uppercase"},scalerButtons:{display:"flex",gap:4},scalerBtn:{padding:"8px 14px",background:R.warmWhite,border:`1px solid ${R.borderMedium}`,fontSize:13,color:R.textMedium,cursor:"pointer",fontFamily:"'Montserrat', sans-serif"},scalerBtnActive:{background:R.sage,borderColor:R.sage,color:"white"},commentsSection:{marginTop:40,padding:24,background:R.linen},commentsTitle:{fontSize:12,letterSpacing:2,textTransform:"uppercase",color:R.sage,marginBottom:16,fontWeight:600},commentItem:{padding:"16px 0",borderBottom:`1px solid ${R.borderLight}`},commentAuthor:{fontSize:13,fontWeight:600,color:R.textDark,marginBottom:4},commentDate:{fontSize:11,color:R.textMuted,marginBottom:8},commentText:{fontSize:14,color:R.textMedium,lineHeight:1.6},commentForm:{marginTop:16,display:"flex",flexDirection:"column",gap:12},commentTextarea:{padding:"12px 14px",fontSize:14,border:`1px solid ${R.borderMedium}`,fontFamily:"'Montserrat', sans-serif",resize:"vertical",minHeight:80},commentSubmitRow:{display:"flex",gap:8,alignItems:"center"},commentNameInput:{padding:"10px 14px",fontSize:14,border:`1px solid ${R.borderMedium}`,width:150,fontFamily:"'Montserrat', sans-serif"},commentSubmitBtn:{padding:"10px 20px",background:R.sage,border:"none",color:"white",fontSize:13,cursor:"pointer",fontFamily:"'Montserrat', sans-serif"},mobileNav:{display:"none",flexDirection:"column",background:R.cream,borderTop:`1px solid ${R.borderLight}`,padding:16},mobileNavLink:{padding:"16px 20px",background:"none",border:"none",fontSize:14,color:R.textMedium,cursor:"pointer",textAlign:"left",borderBottom:`1px solid ${R.borderLight}`,fontFamily:"'Montserrat', sans-serif"},emptyState:{textAlign:"center",padding:"80px 20px"},emptyIcon:{fontSize:48,color:R.borderDark,marginBottom:16},emptyTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:24,color:R.textMedium,marginBottom:8},emptyText:{fontSize:14,color:R.textMuted},scanUploadArea:{border:`2px dashed ${R.borderMedium}`,borderRadius:4,padding:48,textAlign:"center",cursor:"pointer",background:R.linen,marginBottom:24},websiteImportArea:{marginBottom:24},importBtn:{padding:"14px 32px",background:R.sage,border:"none",color:"white",fontSize:13,letterSpacing:1,cursor:"pointer",fontFamily:"'Montserrat', sans-serif"},unitAutocomplete:{position:"absolute",top:"100%",left:0,right:0,background:R.warmWhite,border:`1px solid ${R.borderMedium}`,borderTop:"none",zIndex:10,boxShadow:"0 4px 8px rgba(0,0,0,0.1)",maxHeight:200,overflowY:"auto"},unitSuggestion:{display:"block",width:"100%",padding:"10px 12px",background:"none",border:"none",textAlign:"left",fontSize:14,cursor:"pointer",color:R.textMedium,fontFamily:"'Montserrat', sans-serif"}},hC="bluestar",Eo=[{id:"all",name:"All Recipes",icon:""},{id:"breakfast",name:"Breakfast",icon:""},{id:"main-course",name:"Main Course",icon:""},{id:"side-dish",name:"Sides",icon:""},{id:"dessert",name:"Desserts",icon:""},{id:"pasta",name:"Pasta",icon:""},{id:"soup",name:"Soups",icon:""},{id:"salad",name:"Salads",icon:""},{id:"appetizer",name:"Appetizers",icon:""},{id:"bread",name:"Breads",icon:""},{id:"beverage",name:"Beverages",icon:""},{id:"other",name:"Other",icon:""}],dC=[{id:"newest",name:"Newest First"},{id:"oldest",name:"Oldest First"},{id:"a-z",name:"A  Z"},{id:"z-a",name:"Z  A"},{id:"category",name:"By Category"}],fC=["cup","cups","Tbsp","tsp","oz","lb","g","kg","ml","liter","pint","quart","gallon","piece","slice","clove","can","package","stick","pinch","dash","sprig","large","medium","small","whole","bunch","head"],p0={id:"",title:"",category:"",author:"",authorIsFamily:!0,showInAuthorFilter:!0,servings:"",prepTime:"",cookTime:"",ingredients:[{qty:"",unit:"",ingredient:""}],instructions:[""],notes:"",story:"",imageUrl:"",imageCaption:"",handwrittenImageUrl:"",handwrittenImageCaption:"",sourceUrl:"",dateAdded:"",trashedAt:null,comments:[],madeIt:[]},pC=10*1024*1024,ng={tablespoons:"Tbsp",tablespoon:"Tbsp",tbsps:"Tbsp",tbs:"Tbsp",T:"Tbsp",tbsp:"Tbsp",teaspoons:"tsp",teaspoon:"tsp",tsps:"tsp",t:"tsp","t.":"tsp",cups:"cup",c:"cup",C:"cup","c.":"cup",ounces:"oz",ounce:"oz",ozs:"oz","fluid ounces":"fl oz","fluid ounce":"fl oz","fl. oz.":"fl oz","fl. oz":"fl oz",pints:"pint",pt:"pint",pts:"pint",quarts:"quart",qt:"quart",qts:"quart",gallons:"gallon",gal:"gallon",gals:"gallon",milliliters:"ml",milliliter:"ml",mls:"ml",mL:"ml",liters:"liter",litre:"liter",litres:"liter",l:"liter",L:"liter",pounds:"lb",pound:"lb",lbs:"lb","lb.":"lb",grams:"g",gram:"g",gr:"g",kilograms:"kg",kilogram:"kg",kgs:"kg",pieces:"piece",pcs:"piece",pc:"piece",slices:"slice",cloves:"clove",heads:"head",bunches:"bunch",cans:"can",packages:"package",pkgs:"package",pkg:"package",sticks:"stick",pinches:"pinch",dashes:"dash",sprigs:"sprig",stalks:"stalk",leaves:"leaf",large:"large",lg:"large",medium:"medium",med:"medium",small:"small",sm:"small"},Ii={"":.5,"":.333,"":.667,"":.25,"":.75,"":.2,"":.4,"":.6,"":.8,"":.167,"":.833,"":.125,"":.375,"":.625,"":.875,"1/2":.5,"1/3":.333,"2/3":.667,"1/4":.25,"3/4":.75,"1/8":.125,"3/8":.375,"5/8":.625,"7/8":.875},mC=["tablespoons?","tbsps?","tbs","T","teaspoons?","tsps?","t","cups?","c","ounces?","ozs?","oz","fluid ounces?","fl\\.? ?oz\\.?","pints?","pts?","quarts?","qts?","gallons?","gals?","milliliters?","mls?","mL","liters?","litres?","L","l","pounds?","lbs?\\.?","grams?","g","gr","kilograms?","kgs?","kg","pieces?","pcs?","pc","slices?","cloves?","heads?","bunches?","bunch","cans?","packages?","pkgs?","pkg","sticks?","pinch(?:es)?","dash(?:es)?","sprigs?","stalks?","leaves?","leaf","large","lg","medium","med","small","sm"].join("|"),rg=(t,e)=>{try{const n=localStorage.getItem(t);return n?JSON.parse(n):e}catch{return e}},qu=(t,e)=>{try{localStorage.setItem(t,JSON.stringify(e))}catch{}},yl=t=>{if(!t)return"";const e=t.toLowerCase().trim();return ng[e]||ng[t]||t},m0=t=>{if(!t||typeof t!="string")return{quantity:"",unit:"",item:t||""};let n=t.trim(),r="",i="",s="";const a=n.match(/^(\d+)\s+([1-9]\/[1-9])\s*/),l=n.match(/^(\d+)([\u00BC-\u00BE\u2150-\u215E])\s*/),u=n.match(/^([1-9]\/[1-9])\s*/),h=n.match(/^([\u00BC-\u00BE\u2150-\u215E])\s*/),f=n.match(/^(\d+(?:\.\d+)?)\s*/);if(a){const C=parseFloat(a[1]),N=Ii[a[2]]||0;r=C+N,n=n.slice(a[0].length).trim()}else if(l){const C=parseFloat(l[1]),N=Ii[l[2]]||0;r=C+N,n=n.slice(l[0].length).trim()}else u?(r=Ii[u[1]]||u[1],n=n.slice(u[0].length).trim()):h?(r=Ii[h[1]]||h[1],n=n.slice(h[0].length).trim()):f&&(r=parseFloat(f[1]),n=n.slice(f[0].length).trim());const y=new RegExp(`^(${mC})\\.?\\s*`,"i"),_=n.match(y);return _&&(i=yl(_[1]),n=n.slice(_[0].length).trim()),s=n,{quantity:r.toString(),unit:i,item:s}},va=t=>{if(!t&&t!==0)return"";const e={.25:"",.33:"",.333:"",.5:"",.67:"",.667:"",.75:"",.125:"",.375:"",.625:"",.875:""},n=Math.floor(t),r=Math.round((t-n)*1e3)/1e3;if(r===0)return n.toString();let i="",s=1;for(const[a,l]of Object.entries(e)){const u=Math.abs(r-parseFloat(a));u<s&&u<.05&&(s=u,i=l)}return i?n>0?`${n}${i}`:i:t.toFixed(2).replace(/\.?0+$/,"")},ch=t=>{if(!t)return"";try{return new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}catch{return""}},g0=(t,e=!0)=>t?e?`From ${t}'s Kitchen`:`Source: ${t}`:"",ig=(t,e)=>{if(t.size>pC){const n=(t.size/1048576).toFixed(1);return e(`File too large (${n}MB). Maximum size is 10MB.`,"error"),!1}return!0},sg=async(t,e)=>{const n=await fetch("/.netlify/functions/recipe-ai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:t,...e})});if(!n.ok)throw new Error("AI processing failed");return n.json()};function gC(t,e=300){const[n,r]=ee.useState(t);return ee.useEffect(()=>{const i=setTimeout(()=>{r(t)},e);return()=>{clearTimeout(i)}},[t,e]),n}function yC({isFamily:t,currentView:e,onNavigate:n,onFamilyLogin:r,onLogout:i,trashedCount:s}){const[a,l]=ee.useState(!1),u=[{id:"home",label:"Recipes"},...t?[{id:"add",label:"Add New"}]:[],...t?[{id:"trash",label:`Trash${s>0?` (${s})`:""}`}]:[],...t?[{id:"export",label:"Export"}]:[]],h=f=>{n(f),l(!1)};return p.jsxs("header",{style:v.header,children:[p.jsxs("div",{style:v.headerInner,children:[p.jsxs("button",{style:v.logo,onClick:()=>h("home"),children:[p.jsx("span",{style:v.logoMark,children:"BF"}),p.jsxs("div",{style:v.logoTextWrap,children:[p.jsx("span",{style:v.logoTitle,children:"Bever Family"}),p.jsx("span",{style:v.logoSubtitle,children:"R E C I P E S"})]})]}),p.jsxs("nav",{style:v.nav,className:"desktop-nav",children:[u.map(f=>p.jsx("button",{style:{...v.navLink,...e===f.id?v.navLinkActive:{}},onClick:()=>f.id==="export"?n("export"):h(f.id),children:f.label},f.id)),t?p.jsx("button",{style:v.familyBtn,onClick:i,children:"Logout"}):p.jsx("button",{style:v.familyBtn,onClick:r,children:"Family Login"})]}),p.jsx("button",{style:v.mobileMenuBtn,className:"mobile-menu-btn",onClick:()=>l(!a),"aria-label":"Toggle menu",children:a?"":""})]}),a&&p.jsxs("nav",{style:v.mobileNav,className:"mobile-nav open",children:[u.map(f=>p.jsx("button",{style:v.mobileNavLink,onClick:()=>f.id==="export"?n("export"):h(f.id),children:f.label},f.id)),t?p.jsx("button",{style:{...v.mobileNavLink,color:"#9b6b5b"},onClick:()=>{i(),l(!1)},children:"Logout"}):p.jsx("button",{style:{...v.mobileNavLink,color:"#5c6d5e",fontWeight:500},onClick:()=>{r(),l(!1)},children:"Family Login"})]})]})}function _C({recipe:t,isFavorite:e,onToggleFavorite:n,onClick:r}){const[i,s]=ee.useState(!1),a=Eo.find(h=>h.id===t.category),l=h=>{h.stopPropagation(),n(t.id)},u=()=>{const h=[];return t.prepTime&&h.push(t.prepTime),t.cookTime&&h.push(t.cookTime),h.join(" + ")||null};return p.jsxs("article",{style:v.recipeCard,className:"recipe-card",onClick:r,role:"button",tabIndex:0,onKeyDown:h=>h.key==="Enter"&&r(),"aria-label":`View recipe: ${t.title}`,children:[p.jsxs("div",{style:v.cardImageContainer,children:[t.imageUrl&&!i?p.jsx("img",{src:t.imageUrl,alt:t.title,style:v.cardImage,className:"card-image",loading:"lazy",onError:()=>s(!0)}):t.handwrittenImageUrl&&!i?p.jsx("img",{src:t.handwrittenImageUrl,alt:`${t.title} - handwritten recipe`,style:v.cardImage,className:"card-image",loading:"lazy",onError:()=>s(!0)}):p.jsx("div",{style:v.cardPlaceholder,children:p.jsx("span",{style:v.placeholderIcon,children:""})}),p.jsx("button",{style:{...v.favoriteBtn,color:e?"#c75050":"#b8956b"},onClick:l,"aria-label":e?"Remove from favorites":"Add to favorites",children:e?"":""})]}),p.jsxs("div",{style:v.cardContent,children:[a&&p.jsx("span",{style:v.cardCategory,children:a.name}),p.jsx("h3",{style:v.cardTitle,children:t.title}),t.author&&p.jsx("p",{style:v.cardAuthor,children:g0(t.author,t.authorIsFamily)}),p.jsxs("div",{style:v.cardMeta,children:[u()&&p.jsx("span",{children:u()}),u()&&t.servings&&p.jsx("span",{style:{color:"#d5d0c5"},children:""}),t.servings&&p.jsxs("span",{children:["Serves ",t.servings]}),t.madeIt&&t.madeIt.length>0&&p.jsxs(p.Fragment,{children:[p.jsx("span",{style:{color:"#d5d0c5"},children:""}),p.jsxs("span",{style:{color:"#5c6d5e"},children:[" ",t.madeIt.length," made"]})]})]})]})]})}function vC({recipe:t,isFamily:e,isFavorite:n,onBack:r,onEdit:i,onDelete:s,onToggleFavorite:a,onAddComment:l,onDeleteComment:u,onMadeIt:h,showNotification:f}){var Q,ne,ge,oe;const[y,_]=ee.useState(!1),[C,N]=ee.useState(!1),[V,O]=ee.useState(!1),[x,w]=ee.useState(1),[A,M]=ee.useState(!1),[W,q]=ee.useState(""),[E,g]=ee.useState(""),[T,S]=ee.useState(""),k=Eo.find($=>$.id===t.category);ee.useEffect(()=>{window.scrollTo(0,0)},[t.id]);const D=($,ae=1)=>{if(!$||ae===1)return $;const ye=$.match(/^([\d.\/\s]+)\s*(.*)$/);if(!ye)return $;let me=ye[1].trim();const Pe=ye[2];let De=0;for(const[lt,vt]of Object.entries(Ii))if(me.includes(lt)){const Mt=me.split(lt);De=(Mt[0]&&parseFloat(Mt[0])||0)+vt;break}if(De===0)if(me.includes("/")){const[lt,vt]=me.split("/").map(Mt=>parseFloat(Mt.trim()));De=lt/vt}else De=parseFloat(me)||0;const Vt=De*ae;return`${va(Vt)} ${Pe}`.trim()},I=$=>{if(!$)return 0;for(const[me,Pe]of Object.entries(Ii))if($.includes(me)){const De=$.split(me);return(De[0]&&parseFloat(De[0])||0)+Pe}const ae=$.match(/^(\d+)\s+(\d+)\/(\d+)$/);if(ae){const me=parseFloat(ae[1]),Pe=parseFloat(ae[2]),De=parseFloat(ae[3]);return me+Pe/De}const ye=$.match(/^(\d+)\/(\d+)$/);return ye?parseFloat(ye[1])/parseFloat(ye[2]):parseFloat($)||0},$e=($,ae=1)=>{if($.qty!==void 0){let ye="";const me=String($.qty||"").trim(),Pe=/^\d+\s*(-|to)\s*\d+$/.test(me);if(Pe&&ae===1)ye=me;else if(Pe&&ae!==1){const De=me.match(/^(\d+)\s*(-|to)\s*(\d+)$/);if(De){const Vt=parseFloat(De[1])*ae,lt=De[2],vt=parseFloat(De[3])*ae;ye=`${va(Vt)}${lt}${va(vt)}`}}else if(me){const Vt=I(me)*ae;ye=Vt>0?va(Vt):me}return{amount:`${ye} ${$.unit||""}`.trim(),ingredient:$.ingredient||""}}return{amount:D($.amount,ae),ingredient:$.ingredient||""}},We=()=>{w(1),setTimeout(()=>window.print(),100)},_t=async()=>{const $=window.location.href;if(navigator.share)try{await navigator.share({title:t.title,url:$})}catch{}else await navigator.clipboard.writeText($),f("Link copied to clipboard!")},ke=()=>{W.trim()&&(h(t.id,W.trim()),q(""),M(!1))},G=()=>{E.trim()&&(l(t.id,{text:E.trim(),author:T.trim()||"Anonymous"}),g(""),S(""))};return p.jsxs("div",{style:v.detailPage,className:"detail-page",children:[p.jsxs("div",{style:v.detailNav,className:"no-print",children:[p.jsx("button",{onClick:r,style:v.backBtn,children:" Back"}),p.jsxs("div",{style:v.detailActions,className:"detail-actions",children:[p.jsx("button",{onClick:()=>a(t.id),style:{...v.actionBtn,color:n?"#c75050":"#5a5a5a"},children:n?"":""}),p.jsx("button",{onClick:_t,style:v.actionBtn,children:"Share"}),p.jsx("button",{onClick:We,style:v.printBtn,children:"Print"}),e&&p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:i,style:v.actionBtn,children:"Edit"}),p.jsx("button",{onClick:()=>s(t),style:v.deleteBtn,children:"Delete"})]})]})]}),p.jsxs("article",{style:v.recipeDetail,className:"print-recipe",children:[t.imageUrl&&!y&&p.jsxs("div",{style:v.detailImageWrap,className:"print-image",children:[p.jsx("img",{src:t.imageUrl,alt:t.title,style:v.detailImage,onError:()=>_(!0)}),t.imageCaption&&p.jsx("p",{style:v.imageCaption,className:"image-caption",children:t.imageCaption})]}),p.jsxs("div",{style:v.detailContent,className:"detail-content",children:[p.jsxs("header",{style:v.detailHeader,children:[k&&p.jsx("span",{style:v.detailCategory,children:k.name}),p.jsx("h1",{style:v.detailTitle,className:"detail-title",children:t.title}),t.author&&p.jsx("p",{style:v.detailAuthor,children:g0(t.author,t.authorIsFamily)}),p.jsxs("div",{style:v.detailMeta,className:"detail-meta",children:[t.prepTime&&p.jsxs("span",{children:["Prep: ",t.prepTime]}),t.cookTime&&p.jsxs("span",{children:["Cook: ",t.cookTime]}),t.servings&&p.jsxs("span",{children:["Serves ",t.servings]}),t.dateAdded&&p.jsxs("span",{children:["Added: ",ch(t.dateAdded)]})]}),t.sourceUrl&&p.jsxs("p",{style:{fontSize:12,color:"#9a9a8a",marginTop:12},children:["Source: ",p.jsx("a",{href:t.sourceUrl,target:"_blank",rel:"noopener noreferrer",style:{color:"#b8956b"},children:t.sourceUrl})]}),e&&p.jsxs("div",{style:v.madeItSection,className:"no-print",children:[t.madeIt&&t.madeIt.length>0&&p.jsxs("p",{style:v.madeItList,children:[" Made by: ",t.madeIt.map($=>$.name).join(", ")]}),A?p.jsxs("div",{style:v.madeItForm,children:[p.jsx("input",{type:"text",value:W,onChange:$=>q($.target.value),placeholder:"Your name",style:v.madeItInput,autoFocus:!0,onKeyDown:$=>$.key==="Enter"&&ke()}),p.jsx("button",{onClick:ke,style:v.madeItSubmit,children:"Add"}),p.jsx("button",{onClick:()=>M(!1),style:v.madeItCancel,children:""})]}):p.jsx("button",{onClick:()=>M(!0),style:v.madeItBtn,children:" I Made This!"})]}),!e&&t.madeIt&&t.madeIt.length>0&&p.jsx("div",{style:v.madeItSection,className:"no-print",children:p.jsxs("p",{style:v.madeItList,children:[" Made by: ",t.madeIt.map($=>$.name).join(", ")]})})]}),t.servings&&p.jsxs("div",{style:v.scalerContainer,className:"no-print",children:[p.jsx("span",{style:v.scalerLabel,children:"Adjust:"}),p.jsx("div",{style:v.scalerButtons,children:[.5,1,2,3].map($=>p.jsxs("button",{style:{...v.scalerBtn,...x===$?v.scalerBtnActive:{}},onClick:()=>w($),children:[$===.5?"":$,""]},$))})]}),p.jsxs("div",{style:v.sectionSeparator,children:[p.jsx("span",{style:v.separatorLine}),p.jsx("span",{style:v.separatorIcon,children:""}),p.jsx("span",{style:v.separatorLine})]}),p.jsxs("div",{style:v.detailBody,className:"detail-body",children:[p.jsxs("section",{className:"ingredients-col",children:[p.jsx("h2",{style:v.colTitle,className:"col-title",children:"Ingredients"}),p.jsx("ul",{style:v.ingredientsList,children:(Q=t.ingredients)==null?void 0:Q.map(($,ae)=>{const ye=$e($,x);return p.jsxs("li",{style:v.ingredientItem,className:"ingredient-item",children:[p.jsx("strong",{style:{color:"#3d3d3d",fontWeight:600},children:ye.amount})," ",ye.ingredient]},ae)})})]}),p.jsxs("section",{className:"instructions-col",children:[p.jsx("h2",{style:v.colTitle,className:"col-title",children:"Instructions"}),p.jsx("ol",{style:v.instructionsList,children:(ne=t.instructions)==null?void 0:ne.map(($,ae)=>p.jsxs("li",{style:v.instructionItem,className:"instruction-item",children:[p.jsx("span",{style:v.instructionNumber,children:ae+1}),p.jsx("span",{children:$})]},ae))})]})]}),t.notes&&p.jsxs("section",{style:v.notesBox,className:"notes-box",children:[p.jsx("h3",{style:v.notesTitle,children:"Tips & Notes"}),p.jsx("p",{style:v.notesContent,children:t.notes})]}),t.story&&p.jsxs("section",{style:v.storyBox,className:"story-box",children:[p.jsx("h3",{style:v.storyTitle,children:"The Story"}),p.jsx("p",{style:v.storyContent,children:t.story})]}),t.handwrittenImageUrl&&!C&&p.jsxs("section",{style:v.handwrittenSection,className:"handwritten-section",children:[p.jsx("h3",{style:v.handwrittenTitle,children:"Original Recipe Card"}),p.jsx("img",{src:t.handwrittenImageUrl,alt:"Original handwritten recipe",style:v.handwrittenThumb,onClick:()=>O(!0),onError:()=>N(!0)}),t.handwrittenImageCaption&&p.jsx("p",{style:v.handwrittenCaption,children:t.handwrittenImageCaption}),p.jsx("p",{style:v.handwrittenHint,className:"no-print",children:"Click to enlarge"})]}),e&&p.jsxs("section",{style:v.commentsSection,className:"no-print",children:[p.jsxs("h3",{style:v.commentsTitle,children:["Family Notes (",((ge=t.comments)==null?void 0:ge.length)||0,")"]}),(oe=t.comments)==null?void 0:oe.map($=>p.jsxs("div",{style:v.commentItem,children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[p.jsxs("div",{children:[p.jsx("p",{style:v.commentAuthor,children:$.author}),p.jsx("p",{style:v.commentDate,children:ch($.date)})]}),p.jsx("button",{onClick:()=>{confirm("Remove this note?")&&u(t.id,$.id)},style:{background:"none",border:"none",color:"#9a9a8a",cursor:"pointer"},children:""})]}),p.jsx("p",{style:v.commentText,children:$.text})]},$.id)),p.jsxs("div",{style:v.commentForm,children:[p.jsx("textarea",{value:E,onChange:$=>g($.target.value),placeholder:"Add a family note...",style:v.commentTextarea}),p.jsxs("div",{style:v.commentSubmitRow,children:[p.jsx("input",{type:"text",value:T,onChange:$=>S($.target.value),placeholder:"Your name",style:v.commentNameInput}),p.jsx("button",{onClick:G,style:v.commentSubmitBtn,children:"Add Note"})]})]})]})]})]}),V&&p.jsx("div",{style:v.modal,onClick:()=>O(!1),children:p.jsxs("div",{style:v.modalContent,onClick:$=>$.stopPropagation(),children:[p.jsx("button",{style:v.modalClose,onClick:()=>O(!1),children:""}),p.jsx("img",{src:t.handwrittenImageUrl,alt:"Original handwritten recipe",style:v.modalImage})]})})]})}const wC=t=>!t||!Array.isArray(t)?[{qty:"",unit:"",ingredient:""}]:t.map(e=>{if(e.qty!==void 0||e.unit!==void 0&&e.ingredient!==void 0&&e.amount===void 0)return{qty:e.qty||"",unit:e.unit||"",ingredient:e.ingredient||""};const n=e.amount||"",r=m0(n);return{qty:r.quantity||"",unit:r.unit||"",ingredient:r.item||e.ingredient||""}}),EC=t=>t?{...t,ingredients:wC(t.ingredients)}:p0;function TC({recipe:t,onSave:e,onCancel:n,showNotification:r,recipes:i}){const[s,a]=ee.useState(EC(t)),[l,u]=ee.useState("manual"),[h,f]=ee.useState(null),[y,_]=ee.useState((t==null?void 0:t.imageUrl)||null),[C,N]=ee.useState(null),[V,O]=ee.useState((t==null?void 0:t.handwrittenImageUrl)||null),[x,w]=ee.useState(!1),[A,M]=ee.useState(!1),[W,q]=ee.useState(""),[E,g]=ee.useState(null),[T,S]=ee.useState(null),[k,D]=ee.useState(!1),[I,$e]=ee.useState(null),[We,_t]=ee.useState(null),[ke,G]=ee.useState(null),[Q,ne]=ee.useState(null),[ge,oe]=ee.useState("");ee.useEffect(()=>{const P=JSON.stringify(t||p0),U=JSON.stringify(s);D(P!==U||h||C)},[s,h,C,t]),ee.useEffect(()=>{const P=U=>{k&&(U.preventDefault(),U.returnValue="")};return window.addEventListener("beforeunload",P),()=>window.removeEventListener("beforeunload",P)},[k]),ee.useEffect(()=>{window.scrollTo(0,0)},[]);const $=(P,U)=>{a(K=>({...K,[P]:U}))},ae=(P,U,K)=>{const Z=[...s.ingredients];Z[P]={...Z[P],[U]:K},P===s.ingredients.length-1&&K.trim()&&(Z[P].qty||Z[P].unit||Z[P].ingredient)&&!Z[P+1]&&Z.push({qty:"",unit:"",ingredient:""}),a(Ee=>({...Ee,ingredients:Z}))},ye=()=>{a(P=>({...P,ingredients:[...P.ingredients,{qty:"",unit:"",ingredient:""}]}))},me=P=>{s.ingredients.length>1&&a(U=>({...U,ingredients:U.ingredients.filter((K,Z)=>Z!==P)}))},Pe=(P,U)=>{const K=[...s.instructions];K[P]=U,P===s.instructions.length-1&&U.trim()&&(K[P+1]||K.push("")),a(Z=>({...Z,instructions:K}))},De=()=>{a(P=>({...P,instructions:[...P.instructions,""]}))},Vt=P=>{s.instructions.length>1&&a(U=>({...U,instructions:U.instructions.filter((K,Z)=>Z!==P)}))},lt=(P,U)=>{$e(P),G(U)},vt=(P,U)=>{P.preventDefault(),_t(U)},Mt=()=>{if(I!==null&&We!==null&&I!==We){if(ke==="ingredient"){const P=[...s.ingredients],[U]=P.splice(I,1);P.splice(We,0,U),a(K=>({...K,ingredients:P}))}else if(ke==="instruction"){const P=[...s.instructions],[U]=P.splice(I,1);P.splice(We,0,U),a(K=>({...K,instructions:P}))}}$e(null),_t(null),G(null)},Tn=(P,U="main")=>{var Ee;const K=(Ee=P.target.files)==null?void 0:Ee[0];if(!K)return;if(!ig(K,r)){P.target.value="";return}const Z=URL.createObjectURL(K);U==="main"?(f(K),_(Z)):(N(K),O(Z))},qt=async(P,U)=>{const K=`${U}/${Date.now()}-${P.name}`,Z=lh(uh,K);return await nC(Z,P),rC(Z)},Ht=async P=>{const U=P.type==="application/pdf",K=P.type.startsWith("image/");if(!U&&!K){r("Please select an image or PDF file","error");return}if(ig(P,r)){w(!0),K?(g(URL.createObjectURL(P)),S(null)):(g(null),S(P.name));try{const Z=await new Promise((_e,Le)=>{const Gt=new FileReader;Gt.onload=()=>_e(Gt.result.split(",")[1]),Gt.onerror=Le,Gt.readAsDataURL(P)}),en=(await sg(U?"scan-pdf":"scan-image",{imageData:Z,imageType:P.type})).content[0].text.match(/\{[\s\S]*\}/);if(en){const _e=JSON.parse(en[0]);a(Le=>({...Le,..._e})),r("Recipe extracted! Review the details below."),u("manual")}}catch(Z){console.error("Error:",Z),r("Could not read recipe. Try entering it manually.","error")}finally{w(!1)}}},jn=async()=>{const P=W.trim();if(!P){r("Please paste the recipe content from the website","error");return}w(!0);try{const U=P.match(/https?:\/\/[^\s]+/),K=U?U[0]:"",Ee=(await sg("extract-website",{content:P})).content[0].text.match(/\{[\s\S]*\}/);if(Ee){const en=JSON.parse(Ee[0]);a(_e=>({..._e,...en,authorIsFamily:!1,sourceUrl:K})),r("Recipe imported! Review the details below."),u("manual")}}catch(U){console.error("Error:",U),r("Could not extract recipe. Try copying just the recipe text.","error")}finally{w(!1)}},ei=async P=>{if(P.preventDefault(),!s.title.trim()){r("Please enter a recipe title","error");return}if(!t){const U=i.find(K=>K.title.toLowerCase().trim()===s.title.toLowerCase().trim()&&!K.trashedAt);if(U&&!confirm(`A recipe called "${U.title}" already exists. Save anyway?`))return}M(!0);try{let U=s.imageUrl||"",K=s.handwrittenImageUrl||"";h&&(r("Uploading photo..."),U=await qt(h,"recipes")),C&&(r("Uploading handwritten recipe..."),K=await qt(C,"handwritten"));const Z={...s,imageUrl:U,imageCaption:s.imageCaption||"",handwrittenImageUrl:K,handwrittenImageCaption:s.handwrittenImageCaption||"",sourceUrl:s.sourceUrl||"",ingredients:Array.isArray(s.ingredients)?s.ingredients.filter(Ee=>Ee.amount||Ee.ingredient||Ee.qty):[],instructions:Array.isArray(s.instructions)?s.instructions.filter(Ee=>Ee&&Ee.trim()):[],comments:s.comments||[],madeIt:s.madeIt||[]};D(!1),await e(Z)}catch(U){console.error("Submit error:",U),r("Error saving recipe: "+U.message,"error"),M(!1)}},ti=()=>{k&&!confirm("You have unsaved changes. Are you sure you want to leave?")||n()},F=fC.filter(P=>P.toLowerCase().startsWith(ge.toLowerCase()));return p.jsxs("div",{style:v.addPage,children:[p.jsxs("div",{style:v.addPageHeader,children:[p.jsx("h1",{style:v.addPageTitle,children:t?"Edit Recipe":"Add New Recipe"}),p.jsx("p",{style:v.addPageSubtitle,children:"Share a treasured family recipe"})]}),!t&&p.jsxs("div",{style:v.tabs,className:"tabs",children:[p.jsx("button",{style:l==="manual"?v.tabActive:v.tab,onClick:()=>u("manual"),children:"Write it out"}),p.jsx("button",{style:l==="scan"?v.tabActive:v.tab,onClick:()=>u("scan"),children:"Scan file"}),p.jsx("button",{style:l==="website"?v.tabActive:v.tab,onClick:()=>u("website"),children:"Import website"})]}),l==="scan"&&p.jsxs("div",{style:{marginBottom:32},children:[p.jsx("div",{style:v.scanUploadArea,onClick:()=>document.getElementById("scan-file-input").click(),children:x?p.jsxs("div",{style:{textAlign:"center"},children:[p.jsx("div",{style:v.spinner}),p.jsx("p",{style:{marginTop:16,color:"#5a5a5a"},children:"Reading recipe..."})]}):E?p.jsx("img",{src:E,alt:"Uploaded",style:{maxHeight:200,maxWidth:"100%"}}):T?p.jsxs("p",{style:{color:"#5a5a5a"},children:[" ",T]}):p.jsxs(p.Fragment,{children:[p.jsx("div",{style:v.uploadIcon,children:""}),p.jsx("p",{style:v.uploadText,children:"Drop an image or PDF here, or click to browse"}),p.jsx("p",{style:v.uploadHint,children:"Supports: JPG, PNG, PDF (max 10MB)"})]})}),p.jsx("input",{id:"scan-file-input",type:"file",accept:"image/*,.pdf",onChange:P=>{var U;return((U=P.target.files)==null?void 0:U[0])&&Ht(P.target.files[0])},style:{display:"none"}})]}),l==="website"&&p.jsxs("div",{style:v.websiteImportArea,children:[p.jsx("textarea",{value:W,onChange:P=>q(P.target.value),placeholder:"Paste the recipe text from a website here... (you can include the URL)",style:{...v.textarea,minHeight:200,marginBottom:16}}),p.jsx("button",{onClick:jn,disabled:x,style:v.importBtn,children:x?"Processing...":"Extract Recipe"})]}),l==="manual"&&p.jsxs("form",{onSubmit:ei,style:v.form,className:"form-container",children:[p.jsxs("div",{style:v.formSection,children:[p.jsx("h3",{style:v.formSectionTitle,children:"Basic Information"}),p.jsxs("div",{style:v.fieldGroup,children:[p.jsx("label",{style:v.fieldLabel,children:"Recipe Title *"}),p.jsx("input",{type:"text",value:s.title,onChange:P=>$("title",P.target.value),placeholder:"e.g., Grandma's Apple Pie",style:v.input,required:!0})]}),p.jsxs("div",{style:{...v.gridRow,marginBottom:20},className:"grid-row",children:[p.jsxs("div",{children:[p.jsx("label",{style:v.fieldLabel,children:"Category"}),p.jsxs("select",{value:s.category,onChange:P=>$("category",P.target.value),style:v.select,children:[p.jsx("option",{value:"",children:"Select..."}),Eo.filter(P=>P.id!=="all").map(P=>p.jsx("option",{value:P.id,children:P.name},P.id))]})]}),p.jsxs("div",{children:[p.jsx("label",{style:v.fieldLabel,children:"Author"}),p.jsx("input",{type:"text",value:s.author,onChange:P=>$("author",P.target.value),placeholder:"e.g., Grandma",style:v.input})]}),p.jsxs("div",{children:[p.jsx("label",{style:v.fieldLabel,children:"Source"}),p.jsxs("select",{value:s.authorIsFamily?"family":"external",onChange:P=>$("authorIsFamily",P.target.value==="family"),style:v.select,children:[p.jsx("option",{value:"family",children:"Family Recipe"}),p.jsx("option",{value:"external",children:"External Source"})]})]})]}),p.jsxs("div",{style:{...v.gridRow,marginBottom:20},className:"grid-row",children:[p.jsxs("div",{children:[p.jsx("label",{style:v.fieldLabel,children:"Prep Time"}),p.jsx("input",{type:"text",value:s.prepTime,onChange:P=>$("prepTime",P.target.value),placeholder:"e.g., 20 min",style:v.input})]}),p.jsxs("div",{children:[p.jsx("label",{style:v.fieldLabel,children:"Cook Time"}),p.jsx("input",{type:"text",value:s.cookTime,onChange:P=>$("cookTime",P.target.value),placeholder:"e.g., 1 hour",style:v.input})]}),p.jsxs("div",{children:[p.jsx("label",{style:v.fieldLabel,children:"Servings"}),p.jsx("input",{type:"text",value:s.servings,onChange:P=>$("servings",P.target.value),placeholder:"e.g., 8",style:v.input})]})]}),p.jsxs("div",{style:v.fieldGroup,children:[p.jsx("label",{style:v.fieldLabel,children:"Source URL"}),p.jsx("input",{type:"url",value:s.sourceUrl||"",onChange:P=>$("sourceUrl",P.target.value),placeholder:"https://...",style:v.input}),p.jsx("p",{style:v.fieldHint,children:"Link to where you found or adapted this recipe (optional)"})]}),p.jsxs("div",{style:{...v.fieldGroup,display:"flex",alignItems:"center",gap:12},children:[p.jsx("input",{type:"checkbox",id:"showInAuthorFilter",checked:s.showInAuthorFilter!==!1,onChange:P=>$("showInAuthorFilter",P.target.checked),style:{width:18,height:18,cursor:"pointer"}}),p.jsx("label",{htmlFor:"showInAuthorFilter",style:{...v.fieldLabel,margin:0,cursor:"pointer"},children:"Include in author filter on homepage"})]})]}),p.jsxs("div",{style:v.formSection,children:[p.jsx("h3",{style:v.formSectionTitle,children:"Ingredients"}),p.jsx("p",{style:v.fieldHint,children:"Drag to reorder  New row auto-adds when typing in last row"}),s.ingredients.map((P,U)=>p.jsxs("div",{style:{...v.ingredientRow,opacity:I===U&&ke==="ingredient"?.5:1,borderTop:We===U&&ke==="ingredient"?"2px solid #5c6d5e":"none"},className:"ingredient-row",draggable:!0,onDragStart:()=>lt(U,"ingredient"),onDragOver:K=>vt(K,U),onDragEnd:Mt,children:[p.jsx("span",{style:v.dragHandle,className:"drag-handle",children:""}),p.jsx("input",{type:"text",value:P.qty||"",onChange:K=>ae(U,"qty",K.target.value),placeholder:"Qty",style:v.qtyInput,className:"qty-input"}),p.jsxs("div",{style:{position:"relative"},children:[p.jsx("input",{type:"text",value:P.unit||"",onChange:K=>{ae(U,"unit",K.target.value),oe(K.target.value)},onFocus:()=>{ne(U),oe(P.unit||"")},onBlur:()=>setTimeout(()=>ne(null),200),placeholder:"Unit",style:v.unitInput,className:"unit-input"}),Q===U&&F.length>0&&p.jsx("div",{style:v.unitAutocomplete,children:F.slice(0,6).map(K=>p.jsx("button",{type:"button",style:v.unitSuggestion,onMouseDown:()=>{ae(U,"unit",yl(K)),ne(null)},children:K},K))})]}),p.jsx("input",{type:"text",value:P.ingredient||"",onChange:K=>ae(U,"ingredient",K.target.value),placeholder:"Ingredient (e.g., flour, sifted)",style:v.ingredientInput}),p.jsx("button",{type:"button",onClick:()=>me(U),style:v.removeBtn,disabled:s.ingredients.length<=1,children:""})]},U)),p.jsx("button",{type:"button",onClick:ye,style:v.addRowBtn,children:"+ Add Ingredient"})]}),p.jsxs("div",{style:v.formSection,children:[p.jsx("h3",{style:v.formSectionTitle,children:"Instructions"}),p.jsx("p",{style:v.fieldHint,children:"Drag to reorder  New step auto-adds when typing in last step"}),s.instructions.map((P,U)=>p.jsxs("div",{style:{...v.instructionRow,opacity:I===U&&ke==="instruction"?.5:1,borderTop:We===U&&ke==="instruction"?"2px solid #5c6d5e":"none"},draggable:!0,onDragStart:()=>lt(U,"instruction"),onDragOver:K=>vt(K,U),onDragEnd:Mt,children:[p.jsx("span",{style:v.dragHandle,className:"drag-handle",children:""}),p.jsx("span",{style:v.stepNumber,children:U+1}),p.jsx("textarea",{value:P,onChange:K=>Pe(U,K.target.value),placeholder:`Step ${U+1}...`,style:v.instructionTextarea,rows:2}),p.jsx("button",{type:"button",onClick:()=>Vt(U),style:{...v.removeBtn,marginTop:8},disabled:s.instructions.length<=1,children:""})]},U)),p.jsx("button",{type:"button",onClick:De,style:v.addRowBtn,children:"+ Add Step"})]}),p.jsxs("div",{style:v.formSection,children:[p.jsx("h3",{style:v.formSectionTitle,children:"Notes & Story"}),p.jsxs("div",{style:v.fieldGroup,children:[p.jsx("label",{style:v.fieldLabel,children:"Tips & Notes"}),p.jsx("textarea",{value:s.notes,onChange:P=>$("notes",P.target.value),placeholder:"Any tips, variations, or notes about this recipe...",style:v.textarea})]}),p.jsxs("div",{style:v.fieldGroup,children:[p.jsx("label",{style:v.fieldLabel,children:"The Story"}),p.jsx("p",{style:v.fieldHint,children:"Share the history or special memories behind this recipe"}),p.jsx("textarea",{value:s.story,onChange:P=>$("story",P.target.value),placeholder:"Tell the story behind this recipe...",style:{...v.textarea,minHeight:150}})]})]}),p.jsxs("div",{style:v.formSection,children:[p.jsx("h3",{style:v.formSectionTitle,children:"Photos"}),p.jsxs("div",{style:v.fieldGroup,children:[p.jsx("label",{style:v.fieldLabel,children:"Recipe Photo"}),p.jsx("div",{style:v.imageUploadArea,onClick:()=>document.getElementById("main-image-input").click(),children:y?p.jsx("img",{src:y,alt:"Preview",style:v.imagePreview}):p.jsxs(p.Fragment,{children:[p.jsx("div",{style:v.uploadIcon,children:""}),p.jsx("p",{style:v.uploadText,children:"Click to upload photo"}),p.jsx("p",{style:v.uploadHint,children:"Max 10MB"})]})}),p.jsx("input",{id:"main-image-input",type:"file",accept:"image/*",onChange:P=>Tn(P,"main"),style:{display:"none"}}),y&&p.jsxs("div",{style:{marginTop:12},children:[p.jsx("label",{style:v.fieldLabel,children:"Photo Caption"}),p.jsx("input",{type:"text",value:s.imageCaption||"",onChange:P=>$("imageCaption",P.target.value),placeholder:"e.g., Thanksgiving 2023",style:v.input})]})]}),p.jsxs("div",{style:v.fieldGroup,children:[p.jsx("label",{style:v.fieldLabel,children:"Original Handwritten Recipe"}),p.jsx("p",{style:v.fieldHint,children:"Upload a photo of the original recipe card for preservation"}),p.jsx("div",{style:v.imageUploadArea,onClick:()=>document.getElementById("handwritten-image-input").click(),children:V?p.jsx("img",{src:V,alt:"Handwritten",style:v.imagePreview}):p.jsxs(p.Fragment,{children:[p.jsx("div",{style:v.uploadIcon,children:""}),p.jsx("p",{style:v.uploadText,children:"Click to upload handwritten recipe"}),p.jsx("p",{style:v.uploadHint,children:"Max 10MB"})]})}),p.jsx("input",{id:"handwritten-image-input",type:"file",accept:"image/*",onChange:P=>Tn(P,"handwritten"),style:{display:"none"}}),V&&p.jsxs("div",{style:{marginTop:12},children:[p.jsx("label",{style:v.fieldLabel,children:"Handwritten Recipe Caption"}),p.jsx("input",{type:"text",value:s.handwrittenImageCaption||"",onChange:P=>$("handwrittenImageCaption",P.target.value),placeholder:"e.g., Grandma's original card from 1965",style:v.input})]})]})]}),p.jsxs("div",{style:v.formActions,children:[p.jsx("button",{type:"button",onClick:ti,style:v.cancelBtn,children:"Cancel"}),p.jsx("button",{type:"submit",style:v.saveBtn,disabled:A,children:A?"Saving...":"Save Recipe"})]})]})]})}function IC({recipes:t,onRestore:e,onDelete:n,onEmptyTrash:r,onBack:i}){return ee.useEffect(()=>{window.scrollTo(0,0)},[]),p.jsxs("div",{style:v.trashPage,children:[p.jsxs("div",{style:v.trashHeader,children:[p.jsx("h1",{style:v.trashTitle,children:"Trash"}),p.jsx("p",{style:v.trashSubtitle,children:t.length===0?"No recipes in trash":`${t.length} recipe${t.length===1?"":"s"} in trash`})]}),t.length>0&&p.jsxs(p.Fragment,{children:[p.jsx("p",{style:v.trashWarning,children:" Emptying trash permanently deletes all recipes and cannot be undone."}),p.jsx("div",{style:{marginBottom:32,textAlign:"center"},children:p.jsx("button",{onClick:r,style:v.emptyTrashBtn,children:"Empty Trash"})}),p.jsx("div",{children:t.map(s=>p.jsxs("div",{style:v.trashItem,children:[p.jsxs("div",{children:[p.jsx("h3",{style:v.trashItemTitle,children:s.title}),p.jsxs("p",{style:v.trashItemMeta,children:["Deleted ",ch(s.trashedAt)]})]}),p.jsxs("div",{style:v.trashItemActions,children:[p.jsx("button",{onClick:()=>e(s),style:v.restoreBtn,children:"Restore"}),p.jsx("button",{onClick:()=>{confirm(`Permanently delete "${s.title}"? This cannot be undone.`)&&n(s)},style:v.deleteBtn,children:"Delete"})]})]},s.id))})]}),t.length===0&&p.jsxs("div",{style:v.emptyState,children:[p.jsx("div",{style:v.emptyIcon,children:""}),p.jsx("p",{style:v.emptyTitle,children:"Trash is empty"}),p.jsx("p",{style:v.emptyText,children:"Deleted recipes will appear here"})]}),p.jsx("div",{style:{textAlign:"center",marginTop:40},children:p.jsx("button",{onClick:i,style:v.backBtn,children:" Back to Recipes"})})]})}function SC(){var ti;const[t,e]=ee.useState([]),[n,r]=ee.useState(!0),[i,s]=ee.useState(()=>rg("bfr-isFamily",!1)),[a,l]=ee.useState(!1),[u,h]=ee.useState(""),[f,y]=ee.useState("home"),[_,C]=ee.useState(null),[N,V]=ee.useState(null),[O,x]=ee.useState(""),[w,A]=ee.useState("all"),[M,W]=ee.useState("all"),[q,E]=ee.useState("newest"),[g,T]=ee.useState(!1),S=gC(O,300),[k,D]=ee.useState(()=>rg("bfr-favorites",[])),[I,$e]=ee.useState(null),[We,_t]=ee.useState(!1),[ke,G]=ee.useState(!1);ee.useEffect(()=>{const F=Fx(qm(fn,"recipes"),jx("dateAdded","desc")),P=Hx(F,U=>{const K=U.docs.map(Z=>({id:Z.id,...Z.data()}));e(K),r(!1)},U=>{console.error("Firebase error:",U),Q("Error loading recipes","error"),r(!1)});return()=>P()},[]),ee.useEffect(()=>{const F=()=>{const P=window.location.hash;if(P.startsWith("#recipe-")){const U=P.replace("#recipe-",""),K=t.find(Z=>Z.id===U);K&&!K.trashedAt&&(C(K),y("detail"))}};return F(),window.addEventListener("hashchange",F),()=>window.removeEventListener("hashchange",F)},[t]);const Q=(F,P="success")=>{$e({message:F,type:P}),setTimeout(()=>$e(null),3e3)},ne=()=>{u.toLowerCase()===hC?(s(!0),qu("bfr-isFamily",!0),l(!1),h(""),Q("Welcome, family! ")):Q("Incorrect code","error")},ge=()=>{s(!1),qu("bfr-isFamily",!1),Q("Logged out")},oe=(F,P=null)=>{window.scrollTo(0,0),F==="detail"&&P?(C(P),window.history.pushState(null,"",`#recipe-${P.id}`)):window.history.pushState(null,"",window.location.pathname),F==="edit"&&P?(V(P),y("add")):F==="export"?Tn():(y(F),F!=="detail"&&C(null),F!=="add"&&V(null))},$=F=>{D(P=>{const U=P.includes(F)?P.filter(K=>K!==F):[...P,F];return qu("bfr-favorites",U),U})},ae=async F=>{try{if(F.id){const{id:P,...U}=F;await Ar(xn(fn,"recipes",P),U),Q("Recipe updated!")}else{const P={...F,dateAdded:new Date().toISOString()};delete P.id,await qx(qm(fn,"recipes"),P),Q("Recipe added!")}oe("home")}catch(P){console.error("Save error:",P),Q("Error saving recipe","error")}},ye=async F=>{if(confirm("Move this recipe to trash?"))try{await Ar(xn(fn,"recipes",F.id),{trashedAt:new Date().toISOString()}),Q("Recipe moved to trash"),oe("home")}catch(P){console.error("Trash error:",P),Q("Error trashing recipe","error")}},me=async F=>{try{await Ar(xn(fn,"recipes",F.id),{trashedAt:null}),Q("Recipe restored!")}catch(P){console.error("Restore error:",P),Q("Error restoring recipe","error")}},Pe=async F=>{try{if(F.imageUrl)try{const P=lh(uh,F.imageUrl);await tg(P)}catch{}if(F.handwrittenImageUrl)try{const P=lh(uh,F.handwrittenImageUrl);await tg(P)}catch{}await Wx(xn(fn,"recipes",F.id)),Q("Recipe permanently deleted")}catch(P){console.error("Delete error:",P),Q("Error deleting recipe","error")}},De=async()=>{if(confirm(`Permanently delete ${Ht.length} recipe(s) from trash? This cannot be undone.`)){_t(!0);try{for(const F of Ht)await Pe(F);Q("Trash emptied")}catch(F){console.error("Empty trash error:",F),Q("Error emptying trash","error")}finally{_t(!1)}}},Vt=async(F,P)=>{try{const U=t.find(Ee=>Ee.id===F);if(!U)return;const K={id:Date.now().toString(),text:P.text,author:P.author,date:new Date().toISOString()},Z=[...U.comments||[],K];await Ar(xn(fn,"recipes",F),{comments:Z}),Q("Comment added")}catch(U){console.error("Comment error:",U),Q("Error adding comment","error")}},lt=async(F,P)=>{try{const U=t.find(Z=>Z.id===F);if(!U)return;const K=(U.comments||[]).filter(Z=>Z.id!==P);await Ar(xn(fn,"recipes",F),{comments:K}),Q("Comment removed")}catch(U){console.error("Delete comment error:",U),Q("Error removing comment","error")}},vt=async(F,P)=>{try{const U=t.find(Ee=>Ee.id===F);if(!U)return;const K={id:Date.now().toString(),name:P||"Someone",date:new Date().toISOString()},Z=[...U.madeIt||[],K];await Ar(xn(fn,"recipes",F),{madeIt:Z}),Q(`${P||"You"} made it! `)}catch(U){console.error("Made it error:",U),Q("Error recording","error")}},Mt=async()=>{if(!confirm('This will convert old scanned ingredients where "4 cup" is in one column. Continue?'))return;_t(!0);let F=0;try{for(const P of t){if(!P.ingredients||P.ingredients.length===0||!P.ingredients.some(Z=>Z.amount!==void 0&&Z.qty===void 0||Z.qty&&Z.qty.includes(" ")))continue;const K=P.ingredients.map(Z=>{if(Z.qty!==void 0&&!Z.qty.includes(" "))return{qty:Z.qty||"",unit:yl(Z.unit)||"",ingredient:Z.ingredient||""};const Ee=Z.amount||Z.qty||"",en=Z.ingredient||"",_e=m0(Ee);return{qty:_e.quantity||"",unit:yl(_e.unit)||"",ingredient:_e.item||en}});await Ar(xn(fn,"recipes",P.id),{ingredients:K}),F++}Q(`Migrated ${F} recipes to new format`)}catch(P){console.error("Migration error:",P),Q("Error migrating recipes","error")}finally{_t(!1)}},Tn=()=>{const F=JSON.stringify(t,null,2),P=new Blob([F],{type:"application/json"}),U=URL.createObjectURL(P),K=document.createElement("a");K.href=U,K.download="bever-family-recipes.json",K.click(),URL.revokeObjectURL(U),Q("Recipes exported!")},qt=ee.useMemo(()=>t.filter(F=>!F.trashedAt),[t]),Ht=ee.useMemo(()=>t.filter(F=>F.trashedAt),[t]),jn=ee.useMemo(()=>qt.filter(F=>{var _e,Le,Gt,es,ts;const P=S.toLowerCase(),U=(_e=F.ingredients)==null?void 0:_e.some(ni=>{var Un,ns,rs,Bn,Vo;return((Un=ni.ingredient)==null?void 0:Un.toLowerCase().includes(P))||((ns=ni.amount)==null?void 0:ns.toLowerCase().includes(P))||((rs=ni.unit)==null?void 0:rs.toLowerCase().includes(P))||((Vo=(Bn=ni.qty)==null?void 0:Bn.toLowerCase)==null?void 0:Vo.call(Bn).includes(P))}),K=!S||((Le=F.title)==null?void 0:Le.toLowerCase().includes(P))||U||((Gt=F.author)==null?void 0:Gt.toLowerCase().includes(P))||((es=F.notes)==null?void 0:es.toLowerCase().includes(P))||((ts=F.story)==null?void 0:ts.toLowerCase().includes(P)),Z=w==="all"||F.category===w,Ee=M==="all"||F.author===M,en=!g||k.includes(F.id);return K&&Z&&Ee&&en}).sort((F,P)=>{switch(q){case"oldest":return new Date(F.dateAdded)-new Date(P.dateAdded);case"newest":return new Date(P.dateAdded)-new Date(F.dateAdded);case"a-z":return(F.title||"").localeCompare(P.title||"");case"z-a":return(P.title||"").localeCompare(F.title||"");case"category":return(F.category||"").localeCompare(P.category||"")||(F.title||"").localeCompare(P.title||"");default:return 0}}),[qt,S,w,M,q,g,k]),ei=ee.useMemo(()=>[...new Set(qt.filter(P=>P.author&&P.showInAuthorFilter!==!1).map(P=>P.author))].sort(),[qt]);return n?p.jsx("div",{style:v.loadingScreen,children:p.jsxs("div",{style:v.loadingContent,children:[p.jsx("div",{style:v.loadingLogo,children:"BF"}),p.jsx("p",{style:v.loadingText,children:"Loading recipes..."})]})}):p.jsxs("div",{style:v.app,children:[p.jsx(yC,{isFamily:i,currentView:f,onNavigate:oe,onFamilyLogin:()=>l(!0),onLogout:ge,trashedCount:Ht.length}),p.jsxs("main",{children:[f==="home"&&!_&&p.jsxs(p.Fragment,{children:[p.jsxs("section",{style:v.hero,className:"hero-section",children:[p.jsx("p",{style:v.heroWelcome,children:"Welcome to the"}),p.jsx("h1",{style:v.heroTitle,children:"Bever Family Recipes"}),p.jsxs("div",{style:v.divider,children:[p.jsx("span",{style:v.dividerLine}),p.jsx("span",{style:v.dividerIcon,children:""}),p.jsx("span",{style:v.dividerLine})]}),p.jsxs("p",{style:v.heroSubtitle,children:["A collection of treasured recipes passed down through generations.",p.jsx("br",{}),"From our kitchen to yours."]}),p.jsx("div",{style:v.searchContainer,children:p.jsx("input",{type:"text",value:O,onChange:F=>x(F.target.value),placeholder:"Search recipes, ingredients, stories...",style:v.searchInput,"aria-label":"Search recipes"})})]}),p.jsx("section",{style:v.categorySection,className:"category-section",children:p.jsx("div",{style:v.categoryPills,className:"category-pills",children:Eo.map(F=>p.jsx("button",{style:{...v.categoryPill,...w===F.id?v.categoryPillActive:{}},onClick:()=>A(F.id),children:F.name},F.id))})}),p.jsxs("section",{style:v.recipeSection,className:"recipe-section",children:[p.jsxs("div",{style:v.sectionHeader,children:[p.jsx("h2",{style:v.sectionTitle,children:w==="all"?"All Recipes":(ti=Eo.find(F=>F.id===w))==null?void 0:ti.name}),p.jsxs("span",{style:v.recipeCount,children:[jn.length," recipes"]})]}),p.jsxs("div",{style:v.filterRow,className:"filter-row",children:[p.jsxs("div",{style:v.filterGroup,children:[p.jsx("select",{value:q,onChange:F=>E(F.target.value),style:v.filterSelect,"aria-label":"Sort recipes",children:dC.map(F=>p.jsx("option",{value:F.id,children:F.name},F.id))}),ei.length>1&&p.jsxs("select",{value:M,onChange:F=>W(F.target.value),style:v.filterSelect,"aria-label":"Filter by author",children:[p.jsx("option",{value:"all",children:"All Authors"}),ei.map(F=>p.jsx("option",{value:F,children:F},F))]})]}),p.jsx("button",{style:{...v.favoritesToggle,...g?v.favoritesToggleActive:{}},onClick:()=>T(!g),children:g?" Favorites":" Favorites"})]}),jn.length>0?p.jsx("div",{style:v.recipeGrid,className:"recipe-grid",children:jn.map(F=>p.jsx(_C,{recipe:F,isFavorite:k.includes(F.id),onToggleFavorite:$,onClick:()=>oe("detail",F)},F.id))}):p.jsxs("div",{style:v.emptyState,children:[p.jsx("div",{style:v.emptyIcon,children:""}),p.jsx("p",{style:v.emptyTitle,children:"No recipes found"}),p.jsx("p",{style:v.emptyText,children:"Try adjusting your search or filters"})]}),i&&p.jsxs("div",{style:{textAlign:"center",marginTop:32},children:[p.jsx("button",{onClick:()=>G(!ke),style:{background:"none",border:"none",color:"#c9c4bc",fontSize:11,cursor:"pointer",letterSpacing:1},children:ke?" Hide Tools":" Admin Tools"}),ke&&p.jsxs("div",{style:{marginTop:16,padding:20,background:"#f5f3ef",borderRadius:4},children:[p.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:12,justifyContent:"center",marginBottom:12},children:[p.jsx("button",{onClick:Mt,disabled:We,style:v.adminToolBtn,children:We?"Processing...":"Split Qty/Unit"}),Ht.length>0&&p.jsxs("button",{onClick:De,disabled:We,style:{...v.adminToolBtn,backgroundColor:"#9b6b5b"},children:["Empty Trash (",Ht.length,")"]})]}),p.jsx("p",{style:{fontSize:11,color:"#7a7a7a",margin:0},children:'Split Qty/Unit: Fix old scanned recipes where "4 cup" is in one column'})]})]})]})]}),f==="detail"&&_&&p.jsx(vC,{recipe:_,isFamily:i,isFavorite:k.includes(_.id),onBack:()=>oe("home"),onEdit:()=>oe("edit",_),onDelete:ye,onToggleFavorite:$,onAddComment:Vt,onDeleteComment:lt,onMadeIt:vt,showNotification:Q}),f==="add"&&p.jsx(TC,{recipe:N,recipes:qt,onSave:ae,onCancel:()=>oe("home"),showNotification:Q}),f==="trash"&&p.jsx(IC,{recipes:Ht,onRestore:me,onDelete:Pe,onEmptyTrash:De,onBack:()=>oe("home")})]}),p.jsxs("footer",{style:v.footer,children:[p.jsx("div",{style:v.footerLogo,children:"BF"}),p.jsx("p",{style:v.footerText,children:"Bever Family Recipes"}),p.jsx("p",{style:v.footerTagline,children:"Gathering around the table, one recipe at a time"})]}),a&&p.jsx("div",{style:v.loginModal,onClick:()=>l(!1),children:p.jsxs("div",{style:v.loginBox,onClick:F=>F.stopPropagation(),children:[p.jsx("h2",{style:v.loginTitle,children:"Family Access"}),p.jsx("p",{style:v.loginSubtitle,children:"Enter the family code to edit recipes"}),p.jsx("input",{type:"password",value:u,onChange:F=>h(F.target.value),placeholder:"Family code",style:v.loginInput,onKeyDown:F=>F.key==="Enter"&&ne(),autoFocus:!0}),p.jsx("button",{onClick:ne,style:v.loginBtn,children:"Enter"}),p.jsx("button",{onClick:()=>l(!1),style:v.loginCancel,children:"Cancel"})]})}),I&&p.jsx("div",{style:{...v.notification,...I.type==="error"?v.notificationError:{}},children:I.message})]})}Hu.createRoot(document.getElementById("root")).render(p.jsx(rw.StrictMode,{children:p.jsx(SC,{})}));
