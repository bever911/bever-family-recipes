(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function L0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ng={exports:{}},pl={},rg={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vo=Symbol.for("react.element"),O0=Symbol.for("react.portal"),j0=Symbol.for("react.fragment"),M0=Symbol.for("react.strict_mode"),F0=Symbol.for("react.profiler"),B0=Symbol.for("react.provider"),U0=Symbol.for("react.context"),z0=Symbol.for("react.forward_ref"),$0=Symbol.for("react.suspense"),W0=Symbol.for("react.memo"),H0=Symbol.for("react.lazy"),Ff=Symbol.iterator;function q0(t){return t===null||typeof t!="object"?null:(t=Ff&&t[Ff]||t["@@iterator"],typeof t=="function"?t:null)}var ig={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sg=Object.assign,og={};function $i(t,e,n){this.props=t,this.context=e,this.refs=og,this.updater=n||ig}$i.prototype.isReactComponent={};$i.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};$i.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ag(){}ag.prototype=$i.prototype;function lh(t,e,n){this.props=t,this.context=e,this.refs=og,this.updater=n||ig}var uh=lh.prototype=new ag;uh.constructor=lh;sg(uh,$i.prototype);uh.isPureReactComponent=!0;var Bf=Array.isArray,lg=Object.prototype.hasOwnProperty,ch={current:null},ug={key:!0,ref:!0,__self:!0,__source:!0};function cg(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)lg.call(e,r)&&!ug.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:vo,type:t,key:s,ref:o,props:i,_owner:ch.current}}function G0(t,e){return{$$typeof:vo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function hh(t){return typeof t=="object"&&t!==null&&t.$$typeof===vo}function K0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Uf=/\/+/g;function su(t,e){return typeof t=="object"&&t!==null&&t.key!=null?K0(""+t.key):e.toString(36)}function ya(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case vo:case O0:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+su(o,0):r,Bf(i)?(n="",t!=null&&(n=t.replace(Uf,"$&/")+"/"),ya(i,e,n,"",function(h){return h})):i!=null&&(hh(i)&&(i=G0(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Uf,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Bf(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+su(s,l);o+=ya(s,e,n,u,i)}else if(u=q0(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+su(s,l++),o+=ya(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Go(t,e,n){if(t==null)return t;var r=[],i=0;return ya(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Q0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _t={current:null},va={transition:null},Y0={ReactCurrentDispatcher:_t,ReactCurrentBatchConfig:va,ReactCurrentOwner:ch};function hg(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:Go,forEach:function(t,e,n){Go(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Go(t,function(){e++}),e},toArray:function(t){return Go(t,function(e){return e})||[]},only:function(t){if(!hh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ue.Component=$i;ue.Fragment=j0;ue.Profiler=F0;ue.PureComponent=lh;ue.StrictMode=M0;ue.Suspense=$0;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y0;ue.act=hg;ue.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=sg({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=ch.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)lg.call(e,u)&&!ug.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:vo,type:t.type,key:i,ref:s,props:r,_owner:o}};ue.createContext=function(t){return t={$$typeof:U0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:B0,_context:t},t.Consumer=t};ue.createElement=cg;ue.createFactory=function(t){var e=cg.bind(null,t);return e.type=t,e};ue.createRef=function(){return{current:null}};ue.forwardRef=function(t){return{$$typeof:z0,render:t}};ue.isValidElement=hh;ue.lazy=function(t){return{$$typeof:H0,_payload:{_status:-1,_result:t},_init:Q0}};ue.memo=function(t,e){return{$$typeof:W0,type:t,compare:e===void 0?null:e}};ue.startTransition=function(t){var e=va.transition;va.transition={};try{t()}finally{va.transition=e}};ue.unstable_act=hg;ue.useCallback=function(t,e){return _t.current.useCallback(t,e)};ue.useContext=function(t){return _t.current.useContext(t)};ue.useDebugValue=function(){};ue.useDeferredValue=function(t){return _t.current.useDeferredValue(t)};ue.useEffect=function(t,e){return _t.current.useEffect(t,e)};ue.useId=function(){return _t.current.useId()};ue.useImperativeHandle=function(t,e,n){return _t.current.useImperativeHandle(t,e,n)};ue.useInsertionEffect=function(t,e){return _t.current.useInsertionEffect(t,e)};ue.useLayoutEffect=function(t,e){return _t.current.useLayoutEffect(t,e)};ue.useMemo=function(t,e){return _t.current.useMemo(t,e)};ue.useReducer=function(t,e,n){return _t.current.useReducer(t,e,n)};ue.useRef=function(t){return _t.current.useRef(t)};ue.useState=function(t){return _t.current.useState(t)};ue.useSyncExternalStore=function(t,e,n){return _t.current.useSyncExternalStore(t,e,n)};ue.useTransition=function(){return _t.current.useTransition()};ue.version="18.3.1";rg.exports=ue;var te=rg.exports;const X0=L0(te);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J0=te,Z0=Symbol.for("react.element"),ew=Symbol.for("react.fragment"),tw=Object.prototype.hasOwnProperty,nw=J0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rw={key:!0,ref:!0,__self:!0,__source:!0};function dg(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)tw.call(e,r)&&!rw.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Z0,type:t,key:s,ref:o,props:i,_owner:nw.current}}pl.Fragment=ew;pl.jsx=dg;pl.jsxs=dg;ng.exports=pl;var p=ng.exports,Hu={},fg={exports:{}},Ft={},pg={exports:{}},mg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,K){var W=q.length;q.push(K);e:for(;0<W;){var se=W-1>>>1,le=q[se];if(0<i(le,K))q[se]=K,q[W]=le,W=se;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var K=q[0],W=q.pop();if(W!==K){q[0]=W;e:for(var se=0,le=q.length,oe=le>>>1;se<oe;){var ae=2*(se+1)-1,Pt=q[ae],Et=ae+1,Dt=q[Et];if(0>i(Pt,W))Et<le&&0>i(Dt,Pt)?(q[se]=Dt,q[Et]=W,se=Et):(q[se]=Pt,q[ae]=W,se=ae);else if(Et<le&&0>i(Dt,W))q[se]=Dt,q[Et]=W,se=Et;else break e}}return K}function i(q,K){var W=q.sortIndex-K.sortIndex;return W!==0?W:q.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],h=[],f=1,y=null,_=3,R=!1,P=!1,N=!1,V=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(q){for(var K=n(h);K!==null;){if(K.callback===null)r(h);else if(K.startTime<=q)r(h),K.sortIndex=K.expirationTime,e(u,K);else break;K=n(h)}}function b(q){if(N=!1,C(q),!P)if(n(u)!==null)P=!0,kt(B);else{var K=n(h);K!==null&&We(b,K.startTime-q)}}function B(q,K){P=!1,N&&(N=!1,x(v),v=-1),R=!0;var W=_;try{for(C(K),y=n(u);y!==null&&(!(y.expirationTime>K)||q&&!S());){var se=y.callback;if(typeof se=="function"){y.callback=null,_=y.priorityLevel;var le=se(y.expirationTime<=K);K=t.unstable_now(),typeof le=="function"?y.callback=le:y===n(u)&&r(u),C(K)}else r(u);y=n(u)}if(y!==null)var oe=!0;else{var ae=n(h);ae!==null&&We(b,ae.startTime-K),oe=!1}return oe}finally{y=null,_=W,R=!1}}var $=!1,T=null,v=-1,E=5,I=-1;function S(){return!(t.unstable_now()-I<E)}function k(){if(T!==null){var q=t.unstable_now();I=q;var K=!0;try{K=T(!0,q)}finally{K?A():($=!1,T=null)}}else $=!1}var A;if(typeof w=="function")A=function(){w(k)};else if(typeof MessageChannel<"u"){var Re=new MessageChannel,it=Re.port2;Re.port1.onmessage=k,A=function(){it.postMessage(null)}}else A=function(){V(k,0)};function kt(q){T=q,$||($=!0,A())}function We(q,K){v=V(function(){q(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){P||R||(P=!0,kt(B))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(q){switch(_){case 1:case 2:case 3:var K=3;break;default:K=_}var W=_;_=K;try{return q()}finally{_=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,K){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var W=_;_=q;try{return K()}finally{_=W}},t.unstable_scheduleCallback=function(q,K,W){var se=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?se+W:se):W=se,q){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=W+le,q={id:f++,callback:K,priorityLevel:q,startTime:W,expirationTime:le,sortIndex:-1},W>se?(q.sortIndex=W,e(h,q),n(u)===null&&q===n(h)&&(N?(x(v),v=-1):N=!0,We(b,W-se))):(q.sortIndex=le,e(u,q),P||R||(P=!0,kt(B))),q},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(q){var K=_;return function(){var W=_;_=K;try{return q.apply(this,arguments)}finally{_=W}}}})(mg);pg.exports=mg;var iw=pg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sw=te,Mt=iw;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gg=new Set,Hs={};function Kr(t,e){Ri(t,e),Ri(t+"Capture",e)}function Ri(t,e){for(Hs[t]=e,t=0;t<e.length;t++)gg.add(e[t])}var Sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qu=Object.prototype.hasOwnProperty,ow=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zf={},$f={};function aw(t){return qu.call($f,t)?!0:qu.call(zf,t)?!1:ow.test(t)?$f[t]=!0:(zf[t]=!0,!1)}function lw(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function uw(t,e,n,r){if(e===null||typeof e>"u"||lw(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function wt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var nt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){nt[t]=new wt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];nt[e]=new wt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){nt[t]=new wt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){nt[t]=new wt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){nt[t]=new wt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){nt[t]=new wt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){nt[t]=new wt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){nt[t]=new wt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){nt[t]=new wt(t,5,!1,t.toLowerCase(),null,!1,!1)});var dh=/[\-:]([a-z])/g;function fh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(dh,fh);nt[e]=new wt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(dh,fh);nt[e]=new wt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(dh,fh);nt[e]=new wt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){nt[t]=new wt(t,1,!1,t.toLowerCase(),null,!1,!1)});nt.xlinkHref=new wt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){nt[t]=new wt(t,1,!1,t.toLowerCase(),null,!0,!0)});function ph(t,e,n,r){var i=nt.hasOwnProperty(e)?nt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(uw(e,n,i,r)&&(n=null),r||i===null?aw(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Dn=sw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ko=Symbol.for("react.element"),li=Symbol.for("react.portal"),ui=Symbol.for("react.fragment"),mh=Symbol.for("react.strict_mode"),Gu=Symbol.for("react.profiler"),yg=Symbol.for("react.provider"),vg=Symbol.for("react.context"),gh=Symbol.for("react.forward_ref"),Ku=Symbol.for("react.suspense"),Qu=Symbol.for("react.suspense_list"),yh=Symbol.for("react.memo"),$n=Symbol.for("react.lazy"),_g=Symbol.for("react.offscreen"),Wf=Symbol.iterator;function fs(t){return t===null||typeof t!="object"?null:(t=Wf&&t[Wf]||t["@@iterator"],typeof t=="function"?t:null)}var Pe=Object.assign,ou;function Is(t){if(ou===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ou=e&&e[1]||""}return`
`+ou+t}var au=!1;function lu(t,e){if(!t||au)return"";au=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{au=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Is(t):""}function cw(t){switch(t.tag){case 5:return Is(t.type);case 16:return Is("Lazy");case 13:return Is("Suspense");case 19:return Is("SuspenseList");case 0:case 2:case 15:return t=lu(t.type,!1),t;case 11:return t=lu(t.type.render,!1),t;case 1:return t=lu(t.type,!0),t;default:return""}}function Yu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ui:return"Fragment";case li:return"Portal";case Gu:return"Profiler";case mh:return"StrictMode";case Ku:return"Suspense";case Qu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case vg:return(t.displayName||"Context")+".Consumer";case yg:return(t._context.displayName||"Context")+".Provider";case gh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case yh:return e=t.displayName||null,e!==null?e:Yu(t.type)||"Memo";case $n:e=t._payload,t=t._init;try{return Yu(t(e))}catch{}}return null}function hw(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yu(e);case 8:return e===mh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function cr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function wg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function dw(t){var e=wg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Qo(t){t._valueTracker||(t._valueTracker=dw(t))}function Eg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=wg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Va(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Xu(t,e){var n=e.checked;return Pe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Hf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=cr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Tg(t,e){e=e.checked,e!=null&&ph(t,"checked",e,!1)}function Ju(t,e){Tg(t,e);var n=cr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Zu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Zu(t,e.type,cr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function qf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Zu(t,e,n){(e!=="number"||Va(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ss=Array.isArray;function wi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+cr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ec(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Pe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Gf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(Ss(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:cr(n)}}function Ig(t,e){var n=cr(e.value),r=cr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Kf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Sg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Sg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Yo,xg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Yo=Yo||document.createElement("div"),Yo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Yo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function qs(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ds={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fw=["Webkit","ms","Moz","O"];Object.keys(Ds).forEach(function(t){fw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ds[e]=Ds[t]})});function Ag(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ds.hasOwnProperty(t)&&Ds[t]?(""+e).trim():e+"px"}function Rg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Ag(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var pw=Pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nc(t,e){if(e){if(pw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function rc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ic=null;function vh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var sc=null,Ei=null,Ti=null;function Qf(t){if(t=Eo(t)){if(typeof sc!="function")throw Error(z(280));var e=t.stateNode;e&&(e=_l(e),sc(t.stateNode,t.type,e))}}function Cg(t){Ei?Ti?Ti.push(t):Ti=[t]:Ei=t}function kg(){if(Ei){var t=Ei,e=Ti;if(Ti=Ei=null,Qf(t),e)for(t=0;t<e.length;t++)Qf(e[t])}}function Pg(t,e){return t(e)}function Dg(){}var uu=!1;function Ng(t,e,n){if(uu)return t(e,n);uu=!0;try{return Pg(t,e,n)}finally{uu=!1,(Ei!==null||Ti!==null)&&(Dg(),kg())}}function Gs(t,e){var n=t.stateNode;if(n===null)return null;var r=_l(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var oc=!1;if(Sn)try{var ps={};Object.defineProperty(ps,"passive",{get:function(){oc=!0}}),window.addEventListener("test",ps,ps),window.removeEventListener("test",ps,ps)}catch{oc=!1}function mw(t,e,n,r,i,s,o,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(f){this.onError(f)}}var Ns=!1,La=null,Oa=!1,ac=null,gw={onError:function(t){Ns=!0,La=t}};function yw(t,e,n,r,i,s,o,l,u){Ns=!1,La=null,mw.apply(gw,arguments)}function vw(t,e,n,r,i,s,o,l,u){if(yw.apply(this,arguments),Ns){if(Ns){var h=La;Ns=!1,La=null}else throw Error(z(198));Oa||(Oa=!0,ac=h)}}function Qr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function bg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Yf(t){if(Qr(t)!==t)throw Error(z(188))}function _w(t){var e=t.alternate;if(!e){if(e=Qr(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Yf(i),t;if(s===r)return Yf(i),e;s=s.sibling}throw Error(z(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function Vg(t){return t=_w(t),t!==null?Lg(t):null}function Lg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Lg(t);if(e!==null)return e;t=t.sibling}return null}var Og=Mt.unstable_scheduleCallback,Xf=Mt.unstable_cancelCallback,ww=Mt.unstable_shouldYield,Ew=Mt.unstable_requestPaint,je=Mt.unstable_now,Tw=Mt.unstable_getCurrentPriorityLevel,_h=Mt.unstable_ImmediatePriority,jg=Mt.unstable_UserBlockingPriority,ja=Mt.unstable_NormalPriority,Iw=Mt.unstable_LowPriority,Mg=Mt.unstable_IdlePriority,ml=null,cn=null;function Sw(t){if(cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(ml,t,void 0,(t.current.flags&128)===128)}catch{}}var Zt=Math.clz32?Math.clz32:Rw,xw=Math.log,Aw=Math.LN2;function Rw(t){return t>>>=0,t===0?32:31-(xw(t)/Aw|0)|0}var Xo=64,Jo=4194304;function xs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ma(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=xs(l):(s&=o,s!==0&&(r=xs(s)))}else o=n&~i,o!==0?r=xs(o):s!==0&&(r=xs(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Zt(e),i=1<<n,r|=t[n],e&=~i;return r}function Cw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Zt(s),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=Cw(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function lc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Fg(){var t=Xo;return Xo<<=1,!(Xo&4194240)&&(Xo=64),t}function cu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function _o(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Zt(e),t[e]=n}function Pw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Zt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function wh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Zt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ve=0;function Bg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ug,Eh,zg,$g,Wg,uc=!1,Zo=[],Xn=null,Jn=null,Zn=null,Ks=new Map,Qs=new Map,Hn=[],Dw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Jf(t,e){switch(t){case"focusin":case"focusout":Xn=null;break;case"dragenter":case"dragleave":Jn=null;break;case"mouseover":case"mouseout":Zn=null;break;case"pointerover":case"pointerout":Ks.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qs.delete(e.pointerId)}}function ms(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Eo(e),e!==null&&Eh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Nw(t,e,n,r,i){switch(e){case"focusin":return Xn=ms(Xn,t,e,n,r,i),!0;case"dragenter":return Jn=ms(Jn,t,e,n,r,i),!0;case"mouseover":return Zn=ms(Zn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ks.set(s,ms(Ks.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Qs.set(s,ms(Qs.get(s)||null,t,e,n,r,i)),!0}return!1}function Hg(t){var e=Pr(t.target);if(e!==null){var n=Qr(e);if(n!==null){if(e=n.tag,e===13){if(e=bg(n),e!==null){t.blockedOn=e,Wg(t.priority,function(){zg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _a(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=cc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ic=r,n.target.dispatchEvent(r),ic=null}else return e=Eo(n),e!==null&&Eh(e),t.blockedOn=n,!1;e.shift()}return!0}function Zf(t,e,n){_a(t)&&n.delete(e)}function bw(){uc=!1,Xn!==null&&_a(Xn)&&(Xn=null),Jn!==null&&_a(Jn)&&(Jn=null),Zn!==null&&_a(Zn)&&(Zn=null),Ks.forEach(Zf),Qs.forEach(Zf)}function gs(t,e){t.blockedOn===e&&(t.blockedOn=null,uc||(uc=!0,Mt.unstable_scheduleCallback(Mt.unstable_NormalPriority,bw)))}function Ys(t){function e(i){return gs(i,t)}if(0<Zo.length){gs(Zo[0],t);for(var n=1;n<Zo.length;n++){var r=Zo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Xn!==null&&gs(Xn,t),Jn!==null&&gs(Jn,t),Zn!==null&&gs(Zn,t),Ks.forEach(e),Qs.forEach(e),n=0;n<Hn.length;n++)r=Hn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Hn.length&&(n=Hn[0],n.blockedOn===null);)Hg(n),n.blockedOn===null&&Hn.shift()}var Ii=Dn.ReactCurrentBatchConfig,Fa=!0;function Vw(t,e,n,r){var i=ve,s=Ii.transition;Ii.transition=null;try{ve=1,Th(t,e,n,r)}finally{ve=i,Ii.transition=s}}function Lw(t,e,n,r){var i=ve,s=Ii.transition;Ii.transition=null;try{ve=4,Th(t,e,n,r)}finally{ve=i,Ii.transition=s}}function Th(t,e,n,r){if(Fa){var i=cc(t,e,n,r);if(i===null)wu(t,e,r,Ba,n),Jf(t,r);else if(Nw(i,t,e,n,r))r.stopPropagation();else if(Jf(t,r),e&4&&-1<Dw.indexOf(t)){for(;i!==null;){var s=Eo(i);if(s!==null&&Ug(s),s=cc(t,e,n,r),s===null&&wu(t,e,r,Ba,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else wu(t,e,r,null,n)}}var Ba=null;function cc(t,e,n,r){if(Ba=null,t=vh(r),t=Pr(t),t!==null)if(e=Qr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=bg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ba=t,null}function qg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Tw()){case _h:return 1;case jg:return 4;case ja:case Iw:return 16;case Mg:return 536870912;default:return 16}default:return 16}}var Kn=null,Ih=null,wa=null;function Gg(){if(wa)return wa;var t,e=Ih,n=e.length,r,i="value"in Kn?Kn.value:Kn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return wa=i.slice(t,1<r?1-r:void 0)}function Ea(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ea(){return!0}function ep(){return!1}function Bt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ea:ep,this.isPropagationStopped=ep,this}return Pe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ea)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ea)},persist:function(){},isPersistent:ea}),e}var Wi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sh=Bt(Wi),wo=Pe({},Wi,{view:0,detail:0}),Ow=Bt(wo),hu,du,ys,gl=Pe({},wo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ys&&(ys&&t.type==="mousemove"?(hu=t.screenX-ys.screenX,du=t.screenY-ys.screenY):du=hu=0,ys=t),hu)},movementY:function(t){return"movementY"in t?t.movementY:du}}),tp=Bt(gl),jw=Pe({},gl,{dataTransfer:0}),Mw=Bt(jw),Fw=Pe({},wo,{relatedTarget:0}),fu=Bt(Fw),Bw=Pe({},Wi,{animationName:0,elapsedTime:0,pseudoElement:0}),Uw=Bt(Bw),zw=Pe({},Wi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$w=Bt(zw),Ww=Pe({},Wi,{data:0}),np=Bt(Ww),Hw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Gw[t])?!!e[t]:!1}function xh(){return Kw}var Qw=Pe({},wo,{key:function(t){if(t.key){var e=Hw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ea(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?qw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xh,charCode:function(t){return t.type==="keypress"?Ea(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ea(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Yw=Bt(Qw),Xw=Pe({},gl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rp=Bt(Xw),Jw=Pe({},wo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xh}),Zw=Bt(Jw),eE=Pe({},Wi,{propertyName:0,elapsedTime:0,pseudoElement:0}),tE=Bt(eE),nE=Pe({},gl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),rE=Bt(nE),iE=[9,13,27,32],Ah=Sn&&"CompositionEvent"in window,bs=null;Sn&&"documentMode"in document&&(bs=document.documentMode);var sE=Sn&&"TextEvent"in window&&!bs,Kg=Sn&&(!Ah||bs&&8<bs&&11>=bs),ip=" ",sp=!1;function Qg(t,e){switch(t){case"keyup":return iE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ci=!1;function oE(t,e){switch(t){case"compositionend":return Yg(e);case"keypress":return e.which!==32?null:(sp=!0,ip);case"textInput":return t=e.data,t===ip&&sp?null:t;default:return null}}function aE(t,e){if(ci)return t==="compositionend"||!Ah&&Qg(t,e)?(t=Gg(),wa=Ih=Kn=null,ci=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Kg&&e.locale!=="ko"?null:e.data;default:return null}}var lE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function op(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!lE[t.type]:e==="textarea"}function Xg(t,e,n,r){Cg(r),e=Ua(e,"onChange"),0<e.length&&(n=new Sh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Vs=null,Xs=null;function uE(t){ly(t,0)}function yl(t){var e=fi(t);if(Eg(e))return t}function cE(t,e){if(t==="change")return e}var Jg=!1;if(Sn){var pu;if(Sn){var mu="oninput"in document;if(!mu){var ap=document.createElement("div");ap.setAttribute("oninput","return;"),mu=typeof ap.oninput=="function"}pu=mu}else pu=!1;Jg=pu&&(!document.documentMode||9<document.documentMode)}function lp(){Vs&&(Vs.detachEvent("onpropertychange",Zg),Xs=Vs=null)}function Zg(t){if(t.propertyName==="value"&&yl(Xs)){var e=[];Xg(e,Xs,t,vh(t)),Ng(uE,e)}}function hE(t,e,n){t==="focusin"?(lp(),Vs=e,Xs=n,Vs.attachEvent("onpropertychange",Zg)):t==="focusout"&&lp()}function dE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return yl(Xs)}function fE(t,e){if(t==="click")return yl(e)}function pE(t,e){if(t==="input"||t==="change")return yl(e)}function mE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nn=typeof Object.is=="function"?Object.is:mE;function Js(t,e){if(nn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!qu.call(e,i)||!nn(t[i],e[i]))return!1}return!0}function up(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cp(t,e){var n=up(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=up(n)}}function ey(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ey(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ty(){for(var t=window,e=Va();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Va(t.document)}return e}function Rh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function gE(t){var e=ty(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ey(n.ownerDocument.documentElement,n)){if(r!==null&&Rh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=cp(n,s);var o=cp(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var yE=Sn&&"documentMode"in document&&11>=document.documentMode,hi=null,hc=null,Ls=null,dc=!1;function hp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;dc||hi==null||hi!==Va(r)||(r=hi,"selectionStart"in r&&Rh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ls&&Js(Ls,r)||(Ls=r,r=Ua(hc,"onSelect"),0<r.length&&(e=new Sh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=hi)))}function ta(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var di={animationend:ta("Animation","AnimationEnd"),animationiteration:ta("Animation","AnimationIteration"),animationstart:ta("Animation","AnimationStart"),transitionend:ta("Transition","TransitionEnd")},gu={},ny={};Sn&&(ny=document.createElement("div").style,"AnimationEvent"in window||(delete di.animationend.animation,delete di.animationiteration.animation,delete di.animationstart.animation),"TransitionEvent"in window||delete di.transitionend.transition);function vl(t){if(gu[t])return gu[t];if(!di[t])return t;var e=di[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ny)return gu[t]=e[n];return t}var ry=vl("animationend"),iy=vl("animationiteration"),sy=vl("animationstart"),oy=vl("transitionend"),ay=new Map,dp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mr(t,e){ay.set(t,e),Kr(e,[t])}for(var yu=0;yu<dp.length;yu++){var vu=dp[yu],vE=vu.toLowerCase(),_E=vu[0].toUpperCase()+vu.slice(1);mr(vE,"on"+_E)}mr(ry,"onAnimationEnd");mr(iy,"onAnimationIteration");mr(sy,"onAnimationStart");mr("dblclick","onDoubleClick");mr("focusin","onFocus");mr("focusout","onBlur");mr(oy,"onTransitionEnd");Ri("onMouseEnter",["mouseout","mouseover"]);Ri("onMouseLeave",["mouseout","mouseover"]);Ri("onPointerEnter",["pointerout","pointerover"]);Ri("onPointerLeave",["pointerout","pointerover"]);Kr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Kr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Kr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Kr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Kr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Kr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var As="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wE=new Set("cancel close invalid load scroll toggle".split(" ").concat(As));function fp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,vw(r,e,void 0,t),t.currentTarget=null}function ly(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;fp(i,l,h),s=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;fp(i,l,h),s=u}}}if(Oa)throw t=ac,Oa=!1,ac=null,t}function Ie(t,e){var n=e[yc];n===void 0&&(n=e[yc]=new Set);var r=t+"__bubble";n.has(r)||(uy(e,t,2,!1),n.add(r))}function _u(t,e,n){var r=0;e&&(r|=4),uy(n,t,r,e)}var na="_reactListening"+Math.random().toString(36).slice(2);function Zs(t){if(!t[na]){t[na]=!0,gg.forEach(function(n){n!=="selectionchange"&&(wE.has(n)||_u(n,!1,t),_u(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[na]||(e[na]=!0,_u("selectionchange",!1,e))}}function uy(t,e,n,r){switch(qg(e)){case 1:var i=Vw;break;case 4:i=Lw;break;default:i=Th}n=i.bind(null,e,n,t),i=void 0,!oc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function wu(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Pr(l),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}l=l.parentNode}}r=r.return}Ng(function(){var h=s,f=vh(n),y=[];e:{var _=ay.get(t);if(_!==void 0){var R=Sh,P=t;switch(t){case"keypress":if(Ea(n)===0)break e;case"keydown":case"keyup":R=Yw;break;case"focusin":P="focus",R=fu;break;case"focusout":P="blur",R=fu;break;case"beforeblur":case"afterblur":R=fu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=tp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=Mw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=Zw;break;case ry:case iy:case sy:R=Uw;break;case oy:R=tE;break;case"scroll":R=Ow;break;case"wheel":R=rE;break;case"copy":case"cut":case"paste":R=$w;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=rp}var N=(e&4)!==0,V=!N&&t==="scroll",x=N?_!==null?_+"Capture":null:_;N=[];for(var w=h,C;w!==null;){C=w;var b=C.stateNode;if(C.tag===5&&b!==null&&(C=b,x!==null&&(b=Gs(w,x),b!=null&&N.push(eo(w,b,C)))),V)break;w=w.return}0<N.length&&(_=new R(_,P,null,n,f),y.push({event:_,listeners:N}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",R=t==="mouseout"||t==="pointerout",_&&n!==ic&&(P=n.relatedTarget||n.fromElement)&&(Pr(P)||P[xn]))break e;if((R||_)&&(_=f.window===f?f:(_=f.ownerDocument)?_.defaultView||_.parentWindow:window,R?(P=n.relatedTarget||n.toElement,R=h,P=P?Pr(P):null,P!==null&&(V=Qr(P),P!==V||P.tag!==5&&P.tag!==6)&&(P=null)):(R=null,P=h),R!==P)){if(N=tp,b="onMouseLeave",x="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(N=rp,b="onPointerLeave",x="onPointerEnter",w="pointer"),V=R==null?_:fi(R),C=P==null?_:fi(P),_=new N(b,w+"leave",R,n,f),_.target=V,_.relatedTarget=C,b=null,Pr(f)===h&&(N=new N(x,w+"enter",P,n,f),N.target=C,N.relatedTarget=V,b=N),V=b,R&&P)t:{for(N=R,x=P,w=0,C=N;C;C=ii(C))w++;for(C=0,b=x;b;b=ii(b))C++;for(;0<w-C;)N=ii(N),w--;for(;0<C-w;)x=ii(x),C--;for(;w--;){if(N===x||x!==null&&N===x.alternate)break t;N=ii(N),x=ii(x)}N=null}else N=null;R!==null&&pp(y,_,R,N,!1),P!==null&&V!==null&&pp(y,V,P,N,!0)}}e:{if(_=h?fi(h):window,R=_.nodeName&&_.nodeName.toLowerCase(),R==="select"||R==="input"&&_.type==="file")var B=cE;else if(op(_))if(Jg)B=pE;else{B=dE;var $=hE}else(R=_.nodeName)&&R.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(B=fE);if(B&&(B=B(t,h))){Xg(y,B,n,f);break e}$&&$(t,_,h),t==="focusout"&&($=_._wrapperState)&&$.controlled&&_.type==="number"&&Zu(_,"number",_.value)}switch($=h?fi(h):window,t){case"focusin":(op($)||$.contentEditable==="true")&&(hi=$,hc=h,Ls=null);break;case"focusout":Ls=hc=hi=null;break;case"mousedown":dc=!0;break;case"contextmenu":case"mouseup":case"dragend":dc=!1,hp(y,n,f);break;case"selectionchange":if(yE)break;case"keydown":case"keyup":hp(y,n,f)}var T;if(Ah)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else ci?Qg(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(Kg&&n.locale!=="ko"&&(ci||v!=="onCompositionStart"?v==="onCompositionEnd"&&ci&&(T=Gg()):(Kn=f,Ih="value"in Kn?Kn.value:Kn.textContent,ci=!0)),$=Ua(h,v),0<$.length&&(v=new np(v,t,null,n,f),y.push({event:v,listeners:$}),T?v.data=T:(T=Yg(n),T!==null&&(v.data=T)))),(T=sE?oE(t,n):aE(t,n))&&(h=Ua(h,"onBeforeInput"),0<h.length&&(f=new np("onBeforeInput","beforeinput",null,n,f),y.push({event:f,listeners:h}),f.data=T))}ly(y,e)})}function eo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ua(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Gs(t,n),s!=null&&r.unshift(eo(t,s,i)),s=Gs(t,e),s!=null&&r.push(eo(t,s,i))),t=t.return}return r}function ii(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function pp(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,i?(u=Gs(n,s),u!=null&&o.unshift(eo(n,u,l))):i||(u=Gs(n,s),u!=null&&o.push(eo(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var EE=/\r\n?/g,TE=/\u0000|\uFFFD/g;function mp(t){return(typeof t=="string"?t:""+t).replace(EE,`
`).replace(TE,"")}function ra(t,e,n){if(e=mp(e),mp(t)!==e&&n)throw Error(z(425))}function za(){}var fc=null,pc=null;function mc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var gc=typeof setTimeout=="function"?setTimeout:void 0,IE=typeof clearTimeout=="function"?clearTimeout:void 0,gp=typeof Promise=="function"?Promise:void 0,SE=typeof queueMicrotask=="function"?queueMicrotask:typeof gp<"u"?function(t){return gp.resolve(null).then(t).catch(xE)}:gc;function xE(t){setTimeout(function(){throw t})}function Eu(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ys(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ys(e)}function er(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function yp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Hi=Math.random().toString(36).slice(2),ln="__reactFiber$"+Hi,to="__reactProps$"+Hi,xn="__reactContainer$"+Hi,yc="__reactEvents$"+Hi,AE="__reactListeners$"+Hi,RE="__reactHandles$"+Hi;function Pr(t){var e=t[ln];if(e)return e;for(var n=t.parentNode;n;){if(e=n[xn]||n[ln]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=yp(t);t!==null;){if(n=t[ln])return n;t=yp(t)}return e}t=n,n=t.parentNode}return null}function Eo(t){return t=t[ln]||t[xn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function fi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function _l(t){return t[to]||null}var vc=[],pi=-1;function gr(t){return{current:t}}function xe(t){0>pi||(t.current=vc[pi],vc[pi]=null,pi--)}function Ee(t,e){pi++,vc[pi]=t.current,t.current=e}var hr={},ft=gr(hr),xt=gr(!1),Fr=hr;function Ci(t,e){var n=t.type.contextTypes;if(!n)return hr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function At(t){return t=t.childContextTypes,t!=null}function $a(){xe(xt),xe(ft)}function vp(t,e,n){if(ft.current!==hr)throw Error(z(168));Ee(ft,e),Ee(xt,n)}function cy(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(z(108,hw(t)||"Unknown",i));return Pe({},n,r)}function Wa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||hr,Fr=ft.current,Ee(ft,t),Ee(xt,xt.current),!0}function _p(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=cy(t,e,Fr),r.__reactInternalMemoizedMergedChildContext=t,xe(xt),xe(ft),Ee(ft,t)):xe(xt),Ee(xt,n)}var wn=null,wl=!1,Tu=!1;function hy(t){wn===null?wn=[t]:wn.push(t)}function CE(t){wl=!0,hy(t)}function yr(){if(!Tu&&wn!==null){Tu=!0;var t=0,e=ve;try{var n=wn;for(ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}wn=null,wl=!1}catch(i){throw wn!==null&&(wn=wn.slice(t+1)),Og(_h,yr),i}finally{ve=e,Tu=!1}}return null}var mi=[],gi=0,Ha=null,qa=0,Ut=[],zt=0,Br=null,En=1,Tn="";function Rr(t,e){mi[gi++]=qa,mi[gi++]=Ha,Ha=t,qa=e}function dy(t,e,n){Ut[zt++]=En,Ut[zt++]=Tn,Ut[zt++]=Br,Br=t;var r=En;t=Tn;var i=32-Zt(r)-1;r&=~(1<<i),n+=1;var s=32-Zt(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,En=1<<32-Zt(e)+i|n<<i|r,Tn=s+t}else En=1<<s|n<<i|r,Tn=t}function Ch(t){t.return!==null&&(Rr(t,1),dy(t,1,0))}function kh(t){for(;t===Ha;)Ha=mi[--gi],mi[gi]=null,qa=mi[--gi],mi[gi]=null;for(;t===Br;)Br=Ut[--zt],Ut[zt]=null,Tn=Ut[--zt],Ut[zt]=null,En=Ut[--zt],Ut[zt]=null}var jt=null,Vt=null,Ae=!1,Jt=null;function fy(t,e){var n=$t(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function wp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,jt=t,Vt=er(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,jt=t,Vt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Br!==null?{id:En,overflow:Tn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=$t(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,jt=t,Vt=null,!0):!1;default:return!1}}function _c(t){return(t.mode&1)!==0&&(t.flags&128)===0}function wc(t){if(Ae){var e=Vt;if(e){var n=e;if(!wp(t,e)){if(_c(t))throw Error(z(418));e=er(n.nextSibling);var r=jt;e&&wp(t,e)?fy(r,n):(t.flags=t.flags&-4097|2,Ae=!1,jt=t)}}else{if(_c(t))throw Error(z(418));t.flags=t.flags&-4097|2,Ae=!1,jt=t}}}function Ep(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;jt=t}function ia(t){if(t!==jt)return!1;if(!Ae)return Ep(t),Ae=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!mc(t.type,t.memoizedProps)),e&&(e=Vt)){if(_c(t))throw py(),Error(z(418));for(;e;)fy(t,e),e=er(e.nextSibling)}if(Ep(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Vt=er(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Vt=null}}else Vt=jt?er(t.stateNode.nextSibling):null;return!0}function py(){for(var t=Vt;t;)t=er(t.nextSibling)}function ki(){Vt=jt=null,Ae=!1}function Ph(t){Jt===null?Jt=[t]:Jt.push(t)}var kE=Dn.ReactCurrentBatchConfig;function vs(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function sa(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Tp(t){var e=t._init;return e(t._payload)}function my(t){function e(x,w){if(t){var C=x.deletions;C===null?(x.deletions=[w],x.flags|=16):C.push(w)}}function n(x,w){if(!t)return null;for(;w!==null;)e(x,w),w=w.sibling;return null}function r(x,w){for(x=new Map;w!==null;)w.key!==null?x.set(w.key,w):x.set(w.index,w),w=w.sibling;return x}function i(x,w){return x=ir(x,w),x.index=0,x.sibling=null,x}function s(x,w,C){return x.index=C,t?(C=x.alternate,C!==null?(C=C.index,C<w?(x.flags|=2,w):C):(x.flags|=2,w)):(x.flags|=1048576,w)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,w,C,b){return w===null||w.tag!==6?(w=ku(C,x.mode,b),w.return=x,w):(w=i(w,C),w.return=x,w)}function u(x,w,C,b){var B=C.type;return B===ui?f(x,w,C.props.children,b,C.key):w!==null&&(w.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===$n&&Tp(B)===w.type)?(b=i(w,C.props),b.ref=vs(x,w,C),b.return=x,b):(b=Ca(C.type,C.key,C.props,null,x.mode,b),b.ref=vs(x,w,C),b.return=x,b)}function h(x,w,C,b){return w===null||w.tag!==4||w.stateNode.containerInfo!==C.containerInfo||w.stateNode.implementation!==C.implementation?(w=Pu(C,x.mode,b),w.return=x,w):(w=i(w,C.children||[]),w.return=x,w)}function f(x,w,C,b,B){return w===null||w.tag!==7?(w=Lr(C,x.mode,b,B),w.return=x,w):(w=i(w,C),w.return=x,w)}function y(x,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return w=ku(""+w,x.mode,C),w.return=x,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ko:return C=Ca(w.type,w.key,w.props,null,x.mode,C),C.ref=vs(x,null,w),C.return=x,C;case li:return w=Pu(w,x.mode,C),w.return=x,w;case $n:var b=w._init;return y(x,b(w._payload),C)}if(Ss(w)||fs(w))return w=Lr(w,x.mode,C,null),w.return=x,w;sa(x,w)}return null}function _(x,w,C,b){var B=w!==null?w.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return B!==null?null:l(x,w,""+C,b);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ko:return C.key===B?u(x,w,C,b):null;case li:return C.key===B?h(x,w,C,b):null;case $n:return B=C._init,_(x,w,B(C._payload),b)}if(Ss(C)||fs(C))return B!==null?null:f(x,w,C,b,null);sa(x,C)}return null}function R(x,w,C,b,B){if(typeof b=="string"&&b!==""||typeof b=="number")return x=x.get(C)||null,l(w,x,""+b,B);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ko:return x=x.get(b.key===null?C:b.key)||null,u(w,x,b,B);case li:return x=x.get(b.key===null?C:b.key)||null,h(w,x,b,B);case $n:var $=b._init;return R(x,w,C,$(b._payload),B)}if(Ss(b)||fs(b))return x=x.get(C)||null,f(w,x,b,B,null);sa(w,b)}return null}function P(x,w,C,b){for(var B=null,$=null,T=w,v=w=0,E=null;T!==null&&v<C.length;v++){T.index>v?(E=T,T=null):E=T.sibling;var I=_(x,T,C[v],b);if(I===null){T===null&&(T=E);break}t&&T&&I.alternate===null&&e(x,T),w=s(I,w,v),$===null?B=I:$.sibling=I,$=I,T=E}if(v===C.length)return n(x,T),Ae&&Rr(x,v),B;if(T===null){for(;v<C.length;v++)T=y(x,C[v],b),T!==null&&(w=s(T,w,v),$===null?B=T:$.sibling=T,$=T);return Ae&&Rr(x,v),B}for(T=r(x,T);v<C.length;v++)E=R(T,x,v,C[v],b),E!==null&&(t&&E.alternate!==null&&T.delete(E.key===null?v:E.key),w=s(E,w,v),$===null?B=E:$.sibling=E,$=E);return t&&T.forEach(function(S){return e(x,S)}),Ae&&Rr(x,v),B}function N(x,w,C,b){var B=fs(C);if(typeof B!="function")throw Error(z(150));if(C=B.call(C),C==null)throw Error(z(151));for(var $=B=null,T=w,v=w=0,E=null,I=C.next();T!==null&&!I.done;v++,I=C.next()){T.index>v?(E=T,T=null):E=T.sibling;var S=_(x,T,I.value,b);if(S===null){T===null&&(T=E);break}t&&T&&S.alternate===null&&e(x,T),w=s(S,w,v),$===null?B=S:$.sibling=S,$=S,T=E}if(I.done)return n(x,T),Ae&&Rr(x,v),B;if(T===null){for(;!I.done;v++,I=C.next())I=y(x,I.value,b),I!==null&&(w=s(I,w,v),$===null?B=I:$.sibling=I,$=I);return Ae&&Rr(x,v),B}for(T=r(x,T);!I.done;v++,I=C.next())I=R(T,x,v,I.value,b),I!==null&&(t&&I.alternate!==null&&T.delete(I.key===null?v:I.key),w=s(I,w,v),$===null?B=I:$.sibling=I,$=I);return t&&T.forEach(function(k){return e(x,k)}),Ae&&Rr(x,v),B}function V(x,w,C,b){if(typeof C=="object"&&C!==null&&C.type===ui&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Ko:e:{for(var B=C.key,$=w;$!==null;){if($.key===B){if(B=C.type,B===ui){if($.tag===7){n(x,$.sibling),w=i($,C.props.children),w.return=x,x=w;break e}}else if($.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===$n&&Tp(B)===$.type){n(x,$.sibling),w=i($,C.props),w.ref=vs(x,$,C),w.return=x,x=w;break e}n(x,$);break}else e(x,$);$=$.sibling}C.type===ui?(w=Lr(C.props.children,x.mode,b,C.key),w.return=x,x=w):(b=Ca(C.type,C.key,C.props,null,x.mode,b),b.ref=vs(x,w,C),b.return=x,x=b)}return o(x);case li:e:{for($=C.key;w!==null;){if(w.key===$)if(w.tag===4&&w.stateNode.containerInfo===C.containerInfo&&w.stateNode.implementation===C.implementation){n(x,w.sibling),w=i(w,C.children||[]),w.return=x,x=w;break e}else{n(x,w);break}else e(x,w);w=w.sibling}w=Pu(C,x.mode,b),w.return=x,x=w}return o(x);case $n:return $=C._init,V(x,w,$(C._payload),b)}if(Ss(C))return P(x,w,C,b);if(fs(C))return N(x,w,C,b);sa(x,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,w!==null&&w.tag===6?(n(x,w.sibling),w=i(w,C),w.return=x,x=w):(n(x,w),w=ku(C,x.mode,b),w.return=x,x=w),o(x)):n(x,w)}return V}var Pi=my(!0),gy=my(!1),Ga=gr(null),Ka=null,yi=null,Dh=null;function Nh(){Dh=yi=Ka=null}function bh(t){var e=Ga.current;xe(Ga),t._currentValue=e}function Ec(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Si(t,e){Ka=t,Dh=yi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(St=!0),t.firstContext=null)}function Ht(t){var e=t._currentValue;if(Dh!==t)if(t={context:t,memoizedValue:e,next:null},yi===null){if(Ka===null)throw Error(z(308));yi=t,Ka.dependencies={lanes:0,firstContext:t}}else yi=yi.next=t;return e}var Dr=null;function Vh(t){Dr===null?Dr=[t]:Dr.push(t)}function yy(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Vh(e)):(n.next=i.next,i.next=n),e.interleaved=n,An(t,r)}function An(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Wn=!1;function Lh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function In(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function tr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,pe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,An(t,n)}return i=r.interleaved,i===null?(e.next=e,Vh(r)):(e.next=i.next,i.next=e),r.interleaved=e,An(t,n)}function Ta(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,wh(t,n)}}function Ip(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Qa(t,e,n,r){var i=t.updateQueue;Wn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,h=u.next;u.next=null,o===null?s=h:o.next=h,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=h:l.next=h,f.lastBaseUpdate=u))}if(s!==null){var y=i.baseState;o=0,f=h=u=null,l=s;do{var _=l.lane,R=l.eventTime;if((r&_)===_){f!==null&&(f=f.next={eventTime:R,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var P=t,N=l;switch(_=e,R=n,N.tag){case 1:if(P=N.payload,typeof P=="function"){y=P.call(R,y,_);break e}y=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=N.payload,_=typeof P=="function"?P.call(R,y,_):P,_==null)break e;y=Pe({},y,_);break e;case 2:Wn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,_=i.effects,_===null?i.effects=[l]:_.push(l))}else R={eventTime:R,lane:_,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(h=f=R,u=y):f=f.next=R,o|=_;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;_=l,l=_.next,_.next=null,i.lastBaseUpdate=_,i.shared.pending=null}}while(!0);if(f===null&&(u=y),i.baseState=u,i.firstBaseUpdate=h,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);zr|=o,t.lanes=o,t.memoizedState=y}}function Sp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(z(191,i));i.call(r)}}}var To={},hn=gr(To),no=gr(To),ro=gr(To);function Nr(t){if(t===To)throw Error(z(174));return t}function Oh(t,e){switch(Ee(ro,e),Ee(no,t),Ee(hn,To),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:tc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=tc(e,t)}xe(hn),Ee(hn,e)}function Di(){xe(hn),xe(no),xe(ro)}function _y(t){Nr(ro.current);var e=Nr(hn.current),n=tc(e,t.type);e!==n&&(Ee(no,t),Ee(hn,n))}function jh(t){no.current===t&&(xe(hn),xe(no))}var Ce=gr(0);function Ya(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Iu=[];function Mh(){for(var t=0;t<Iu.length;t++)Iu[t]._workInProgressVersionPrimary=null;Iu.length=0}var Ia=Dn.ReactCurrentDispatcher,Su=Dn.ReactCurrentBatchConfig,Ur=0,ke=null,Ue=null,Ge=null,Xa=!1,Os=!1,io=0,PE=0;function at(){throw Error(z(321))}function Fh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!nn(t[n],e[n]))return!1;return!0}function Bh(t,e,n,r,i,s){if(Ur=s,ke=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ia.current=t===null||t.memoizedState===null?VE:LE,t=n(r,i),Os){s=0;do{if(Os=!1,io=0,25<=s)throw Error(z(301));s+=1,Ge=Ue=null,e.updateQueue=null,Ia.current=OE,t=n(r,i)}while(Os)}if(Ia.current=Ja,e=Ue!==null&&Ue.next!==null,Ur=0,Ge=Ue=ke=null,Xa=!1,e)throw Error(z(300));return t}function Uh(){var t=io!==0;return io=0,t}function an(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?ke.memoizedState=Ge=t:Ge=Ge.next=t,Ge}function qt(){if(Ue===null){var t=ke.alternate;t=t!==null?t.memoizedState:null}else t=Ue.next;var e=Ge===null?ke.memoizedState:Ge.next;if(e!==null)Ge=e,Ue=t;else{if(t===null)throw Error(z(310));Ue=t,t={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},Ge===null?ke.memoizedState=Ge=t:Ge=Ge.next=t}return Ge}function so(t,e){return typeof e=="function"?e(t):e}function xu(t){var e=qt(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=Ue,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,u=null,h=s;do{var f=h.lane;if((Ur&f)===f)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var y={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=y,o=r):u=u.next=y,ke.lanes|=f,zr|=f}h=h.next}while(h!==null&&h!==s);u===null?o=r:u.next=l,nn(r,e.memoizedState)||(St=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ke.lanes|=s,zr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Au(t){var e=qt(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);nn(s,e.memoizedState)||(St=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function wy(){}function Ey(t,e){var n=ke,r=qt(),i=e(),s=!nn(r.memoizedState,i);if(s&&(r.memoizedState=i,St=!0),r=r.queue,zh(Sy.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ge!==null&&Ge.memoizedState.tag&1){if(n.flags|=2048,oo(9,Iy.bind(null,n,r,i,e),void 0,null),Ke===null)throw Error(z(349));Ur&30||Ty(n,e,i)}return i}function Ty(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ke.updateQueue,e===null?(e={lastEffect:null,stores:null},ke.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Iy(t,e,n,r){e.value=n,e.getSnapshot=r,xy(e)&&Ay(t)}function Sy(t,e,n){return n(function(){xy(e)&&Ay(t)})}function xy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!nn(t,n)}catch{return!0}}function Ay(t){var e=An(t,1);e!==null&&en(e,t,1,-1)}function xp(t){var e=an();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:so,lastRenderedState:t},e.queue=t,t=t.dispatch=bE.bind(null,ke,t),[e.memoizedState,t]}function oo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ke.updateQueue,e===null?(e={lastEffect:null,stores:null},ke.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Ry(){return qt().memoizedState}function Sa(t,e,n,r){var i=an();ke.flags|=t,i.memoizedState=oo(1|e,n,void 0,r===void 0?null:r)}function El(t,e,n,r){var i=qt();r=r===void 0?null:r;var s=void 0;if(Ue!==null){var o=Ue.memoizedState;if(s=o.destroy,r!==null&&Fh(r,o.deps)){i.memoizedState=oo(e,n,s,r);return}}ke.flags|=t,i.memoizedState=oo(1|e,n,s,r)}function Ap(t,e){return Sa(8390656,8,t,e)}function zh(t,e){return El(2048,8,t,e)}function Cy(t,e){return El(4,2,t,e)}function ky(t,e){return El(4,4,t,e)}function Py(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Dy(t,e,n){return n=n!=null?n.concat([t]):null,El(4,4,Py.bind(null,e,t),n)}function $h(){}function Ny(t,e){var n=qt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Fh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function by(t,e){var n=qt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Fh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Vy(t,e,n){return Ur&21?(nn(n,e)||(n=Fg(),ke.lanes|=n,zr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,St=!0),t.memoizedState=n)}function DE(t,e){var n=ve;ve=n!==0&&4>n?n:4,t(!0);var r=Su.transition;Su.transition={};try{t(!1),e()}finally{ve=n,Su.transition=r}}function Ly(){return qt().memoizedState}function NE(t,e,n){var r=rr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Oy(t))jy(e,n);else if(n=yy(t,e,n,r),n!==null){var i=yt();en(n,t,r,i),My(n,e,r)}}function bE(t,e,n){var r=rr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Oy(t))jy(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,nn(l,o)){var u=e.interleaved;u===null?(i.next=i,Vh(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=yy(t,e,i,r),n!==null&&(i=yt(),en(n,t,r,i),My(n,e,r))}}function Oy(t){var e=t.alternate;return t===ke||e!==null&&e===ke}function jy(t,e){Os=Xa=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function My(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,wh(t,n)}}var Ja={readContext:Ht,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},VE={readContext:Ht,useCallback:function(t,e){return an().memoizedState=[t,e===void 0?null:e],t},useContext:Ht,useEffect:Ap,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Sa(4194308,4,Py.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Sa(4194308,4,t,e)},useInsertionEffect:function(t,e){return Sa(4,2,t,e)},useMemo:function(t,e){var n=an();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=an();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=NE.bind(null,ke,t),[r.memoizedState,t]},useRef:function(t){var e=an();return t={current:t},e.memoizedState=t},useState:xp,useDebugValue:$h,useDeferredValue:function(t){return an().memoizedState=t},useTransition:function(){var t=xp(!1),e=t[0];return t=DE.bind(null,t[1]),an().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ke,i=an();if(Ae){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),Ke===null)throw Error(z(349));Ur&30||Ty(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Ap(Sy.bind(null,r,s,t),[t]),r.flags|=2048,oo(9,Iy.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=an(),e=Ke.identifierPrefix;if(Ae){var n=Tn,r=En;n=(r&~(1<<32-Zt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=io++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=PE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},LE={readContext:Ht,useCallback:Ny,useContext:Ht,useEffect:zh,useImperativeHandle:Dy,useInsertionEffect:Cy,useLayoutEffect:ky,useMemo:by,useReducer:xu,useRef:Ry,useState:function(){return xu(so)},useDebugValue:$h,useDeferredValue:function(t){var e=qt();return Vy(e,Ue.memoizedState,t)},useTransition:function(){var t=xu(so)[0],e=qt().memoizedState;return[t,e]},useMutableSource:wy,useSyncExternalStore:Ey,useId:Ly,unstable_isNewReconciler:!1},OE={readContext:Ht,useCallback:Ny,useContext:Ht,useEffect:zh,useImperativeHandle:Dy,useInsertionEffect:Cy,useLayoutEffect:ky,useMemo:by,useReducer:Au,useRef:Ry,useState:function(){return Au(so)},useDebugValue:$h,useDeferredValue:function(t){var e=qt();return Ue===null?e.memoizedState=t:Vy(e,Ue.memoizedState,t)},useTransition:function(){var t=Au(so)[0],e=qt().memoizedState;return[t,e]},useMutableSource:wy,useSyncExternalStore:Ey,useId:Ly,unstable_isNewReconciler:!1};function Yt(t,e){if(t&&t.defaultProps){e=Pe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Tc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Pe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Tl={isMounted:function(t){return(t=t._reactInternals)?Qr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=yt(),i=rr(t),s=In(r,i);s.payload=e,n!=null&&(s.callback=n),e=tr(t,s,i),e!==null&&(en(e,t,i,r),Ta(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=yt(),i=rr(t),s=In(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=tr(t,s,i),e!==null&&(en(e,t,i,r),Ta(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=yt(),r=rr(t),i=In(n,r);i.tag=2,e!=null&&(i.callback=e),e=tr(t,i,r),e!==null&&(en(e,t,r,n),Ta(e,t,r))}};function Rp(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Js(n,r)||!Js(i,s):!0}function Fy(t,e,n){var r=!1,i=hr,s=e.contextType;return typeof s=="object"&&s!==null?s=Ht(s):(i=At(e)?Fr:ft.current,r=e.contextTypes,s=(r=r!=null)?Ci(t,i):hr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Tl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Cp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Tl.enqueueReplaceState(e,e.state,null)}function Ic(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Lh(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ht(s):(s=At(e)?Fr:ft.current,i.context=Ci(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Tc(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Tl.enqueueReplaceState(i,i.state,null),Qa(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ni(t,e){try{var n="",r=e;do n+=cw(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Ru(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Sc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var jE=typeof WeakMap=="function"?WeakMap:Map;function By(t,e,n){n=In(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){el||(el=!0,Vc=r),Sc(t,e)},n}function Uy(t,e,n){n=In(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Sc(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Sc(t,e),typeof r!="function"&&(nr===null?nr=new Set([this]):nr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function kp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new jE;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=XE.bind(null,t,e,n),e.then(t,t))}function Pp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Dp(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=In(-1,1),e.tag=2,tr(n,e,1))),n.lanes|=1),t)}var ME=Dn.ReactCurrentOwner,St=!1;function gt(t,e,n,r){e.child=t===null?gy(e,null,n,r):Pi(e,t.child,n,r)}function Np(t,e,n,r,i){n=n.render;var s=e.ref;return Si(e,i),r=Bh(t,e,n,r,s,i),n=Uh(),t!==null&&!St?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Rn(t,e,i)):(Ae&&n&&Ch(e),e.flags|=1,gt(t,e,r,i),e.child)}function bp(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Xh(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,zy(t,e,s,r,i)):(t=Ca(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Js,n(o,r)&&t.ref===e.ref)return Rn(t,e,i)}return e.flags|=1,t=ir(s,r),t.ref=e.ref,t.return=e,e.child=t}function zy(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Js(s,r)&&t.ref===e.ref)if(St=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(St=!0);else return e.lanes=t.lanes,Rn(t,e,i)}return xc(t,e,n,r,i)}function $y(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(_i,bt),bt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ee(_i,bt),bt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ee(_i,bt),bt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ee(_i,bt),bt|=r;return gt(t,e,i,n),e.child}function Wy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function xc(t,e,n,r,i){var s=At(n)?Fr:ft.current;return s=Ci(e,s),Si(e,i),n=Bh(t,e,n,r,s,i),r=Uh(),t!==null&&!St?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Rn(t,e,i)):(Ae&&r&&Ch(e),e.flags|=1,gt(t,e,n,i),e.child)}function Vp(t,e,n,r,i){if(At(n)){var s=!0;Wa(e)}else s=!1;if(Si(e,i),e.stateNode===null)xa(t,e),Fy(e,n,r),Ic(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Ht(h):(h=At(n)?Fr:ft.current,h=Ci(e,h));var f=n.getDerivedStateFromProps,y=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";y||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==h)&&Cp(e,o,r,h),Wn=!1;var _=e.memoizedState;o.state=_,Qa(e,r,o,i),u=e.memoizedState,l!==r||_!==u||xt.current||Wn?(typeof f=="function"&&(Tc(e,n,f,r),u=e.memoizedState),(l=Wn||Rp(e,n,l,r,_,u,h))?(y||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,vy(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:Yt(e.type,l),o.props=h,y=e.pendingProps,_=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Ht(u):(u=At(n)?Fr:ft.current,u=Ci(e,u));var R=n.getDerivedStateFromProps;(f=typeof R=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==y||_!==u)&&Cp(e,o,r,u),Wn=!1,_=e.memoizedState,o.state=_,Qa(e,r,o,i);var P=e.memoizedState;l!==y||_!==P||xt.current||Wn?(typeof R=="function"&&(Tc(e,n,R,r),P=e.memoizedState),(h=Wn||Rp(e,n,h,r,_,P,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,P,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,P,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=P),o.props=r,o.state=P,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),r=!1)}return Ac(t,e,n,r,s,i)}function Ac(t,e,n,r,i,s){Wy(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&_p(e,n,!1),Rn(t,e,s);r=e.stateNode,ME.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Pi(e,t.child,null,s),e.child=Pi(e,null,l,s)):gt(t,e,l,s),e.memoizedState=r.state,i&&_p(e,n,!0),e.child}function Hy(t){var e=t.stateNode;e.pendingContext?vp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&vp(t,e.context,!1),Oh(t,e.containerInfo)}function Lp(t,e,n,r,i){return ki(),Ph(i),e.flags|=256,gt(t,e,n,r),e.child}var Rc={dehydrated:null,treeContext:null,retryLane:0};function Cc(t){return{baseLanes:t,cachePool:null,transitions:null}}function qy(t,e,n){var r=e.pendingProps,i=Ce.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ee(Ce,i&1),t===null)return wc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=xl(o,r,0,null),t=Lr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Cc(n),e.memoizedState=Rc,t):Wh(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return FE(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=ir(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=ir(l,s):(s=Lr(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Cc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Rc,r}return s=t.child,t=s.sibling,r=ir(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Wh(t,e){return e=xl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function oa(t,e,n,r){return r!==null&&Ph(r),Pi(e,t.child,null,n),t=Wh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function FE(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Ru(Error(z(422))),oa(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=xl({mode:"visible",children:r.children},i,0,null),s=Lr(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Pi(e,t.child,null,o),e.child.memoizedState=Cc(o),e.memoizedState=Rc,s);if(!(e.mode&1))return oa(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(z(419)),r=Ru(s,r,void 0),oa(t,e,o,r)}if(l=(o&t.childLanes)!==0,St||l){if(r=Ke,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,An(t,i),en(r,t,i,-1))}return Yh(),r=Ru(Error(z(421))),oa(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=JE.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Vt=er(i.nextSibling),jt=e,Ae=!0,Jt=null,t!==null&&(Ut[zt++]=En,Ut[zt++]=Tn,Ut[zt++]=Br,En=t.id,Tn=t.overflow,Br=e),e=Wh(e,r.children),e.flags|=4096,e)}function Op(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ec(t.return,e,n)}function Cu(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Gy(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(gt(t,e,r.children,n),r=Ce.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Op(t,n,e);else if(t.tag===19)Op(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ee(Ce,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ya(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Cu(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ya(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Cu(e,!0,n,null,s);break;case"together":Cu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function xa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Rn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),zr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=ir(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ir(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function BE(t,e,n){switch(e.tag){case 3:Hy(e),ki();break;case 5:_y(e);break;case 1:At(e.type)&&Wa(e);break;case 4:Oh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ee(Ga,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ee(Ce,Ce.current&1),e.flags|=128,null):n&e.child.childLanes?qy(t,e,n):(Ee(Ce,Ce.current&1),t=Rn(t,e,n),t!==null?t.sibling:null);Ee(Ce,Ce.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Gy(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ee(Ce,Ce.current),r)break;return null;case 22:case 23:return e.lanes=0,$y(t,e,n)}return Rn(t,e,n)}var Ky,kc,Qy,Yy;Ky=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};kc=function(){};Qy=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Nr(hn.current);var s=null;switch(n){case"input":i=Xu(t,i),r=Xu(t,r),s=[];break;case"select":i=Pe({},i,{value:void 0}),r=Pe({},r,{value:void 0}),s=[];break;case"textarea":i=ec(t,i),r=ec(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=za)}nc(n,r);var o;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var l=i[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Hs.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var u=r[h];if(l=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Hs.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&Ie("scroll",t),s||l===u||(s=[])):(s=s||[]).push(h,u))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};Yy=function(t,e,n,r){n!==r&&(e.flags|=4)};function _s(t,e){if(!Ae)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function lt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function UE(t,e,n){var r=e.pendingProps;switch(kh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(e),null;case 1:return At(e.type)&&$a(),lt(e),null;case 3:return r=e.stateNode,Di(),xe(xt),xe(ft),Mh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ia(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Jt!==null&&(jc(Jt),Jt=null))),kc(t,e),lt(e),null;case 5:jh(e);var i=Nr(ro.current);if(n=e.type,t!==null&&e.stateNode!=null)Qy(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return lt(e),null}if(t=Nr(hn.current),ia(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[ln]=e,r[to]=s,t=(e.mode&1)!==0,n){case"dialog":Ie("cancel",r),Ie("close",r);break;case"iframe":case"object":case"embed":Ie("load",r);break;case"video":case"audio":for(i=0;i<As.length;i++)Ie(As[i],r);break;case"source":Ie("error",r);break;case"img":case"image":case"link":Ie("error",r),Ie("load",r);break;case"details":Ie("toggle",r);break;case"input":Hf(r,s),Ie("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ie("invalid",r);break;case"textarea":Gf(r,s),Ie("invalid",r)}nc(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&ra(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&ra(r.textContent,l,t),i=["children",""+l]):Hs.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ie("scroll",r)}switch(n){case"input":Qo(r),qf(r,s,!0);break;case"textarea":Qo(r),Kf(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=za)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Sg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ln]=e,t[to]=r,Ky(t,e,!1,!1),e.stateNode=t;e:{switch(o=rc(n,r),n){case"dialog":Ie("cancel",t),Ie("close",t),i=r;break;case"iframe":case"object":case"embed":Ie("load",t),i=r;break;case"video":case"audio":for(i=0;i<As.length;i++)Ie(As[i],t);i=r;break;case"source":Ie("error",t),i=r;break;case"img":case"image":case"link":Ie("error",t),Ie("load",t),i=r;break;case"details":Ie("toggle",t),i=r;break;case"input":Hf(t,r),i=Xu(t,r),Ie("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Pe({},r,{value:void 0}),Ie("invalid",t);break;case"textarea":Gf(t,r),i=ec(t,r),Ie("invalid",t);break;default:i=r}nc(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?Rg(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&xg(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&qs(t,u):typeof u=="number"&&qs(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Hs.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Ie("scroll",t):u!=null&&ph(t,s,u,o))}switch(n){case"input":Qo(t),qf(t,r,!1);break;case"textarea":Qo(t),Kf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+cr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?wi(t,!!r.multiple,s,!1):r.defaultValue!=null&&wi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=za)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return lt(e),null;case 6:if(t&&e.stateNode!=null)Yy(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=Nr(ro.current),Nr(hn.current),ia(e)){if(r=e.stateNode,n=e.memoizedProps,r[ln]=e,(s=r.nodeValue!==n)&&(t=jt,t!==null))switch(t.tag){case 3:ra(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ra(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ln]=e,e.stateNode=r}return lt(e),null;case 13:if(xe(Ce),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ae&&Vt!==null&&e.mode&1&&!(e.flags&128))py(),ki(),e.flags|=98560,s=!1;else if(s=ia(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(z(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(z(317));s[ln]=e}else ki(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;lt(e),s=!1}else Jt!==null&&(jc(Jt),Jt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ce.current&1?ze===0&&(ze=3):Yh())),e.updateQueue!==null&&(e.flags|=4),lt(e),null);case 4:return Di(),kc(t,e),t===null&&Zs(e.stateNode.containerInfo),lt(e),null;case 10:return bh(e.type._context),lt(e),null;case 17:return At(e.type)&&$a(),lt(e),null;case 19:if(xe(Ce),s=e.memoizedState,s===null)return lt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)_s(s,!1);else{if(ze!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ya(t),o!==null){for(e.flags|=128,_s(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ee(Ce,Ce.current&1|2),e.child}t=t.sibling}s.tail!==null&&je()>bi&&(e.flags|=128,r=!0,_s(s,!1),e.lanes=4194304)}else{if(!r)if(t=Ya(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),_s(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ae)return lt(e),null}else 2*je()-s.renderingStartTime>bi&&n!==1073741824&&(e.flags|=128,r=!0,_s(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=je(),e.sibling=null,n=Ce.current,Ee(Ce,r?n&1|2:n&1),e):(lt(e),null);case 22:case 23:return Qh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?bt&1073741824&&(lt(e),e.subtreeFlags&6&&(e.flags|=8192)):lt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function zE(t,e){switch(kh(e),e.tag){case 1:return At(e.type)&&$a(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Di(),xe(xt),xe(ft),Mh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return jh(e),null;case 13:if(xe(Ce),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));ki()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return xe(Ce),null;case 4:return Di(),null;case 10:return bh(e.type._context),null;case 22:case 23:return Qh(),null;case 24:return null;default:return null}}var aa=!1,ht=!1,$E=typeof WeakSet=="function"?WeakSet:Set,Q=null;function vi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){be(t,e,r)}else n.current=null}function Pc(t,e,n){try{n()}catch(r){be(t,e,r)}}var jp=!1;function WE(t,e){if(fc=Fa,t=ty(),Rh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,h=0,f=0,y=t,_=null;t:for(;;){for(var R;y!==n||i!==0&&y.nodeType!==3||(l=o+i),y!==s||r!==0&&y.nodeType!==3||(u=o+r),y.nodeType===3&&(o+=y.nodeValue.length),(R=y.firstChild)!==null;)_=y,y=R;for(;;){if(y===t)break t;if(_===n&&++h===i&&(l=o),_===s&&++f===r&&(u=o),(R=y.nextSibling)!==null)break;y=_,_=y.parentNode}y=R}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(pc={focusedElem:t,selectionRange:n},Fa=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var N=P.memoizedProps,V=P.memoizedState,x=e.stateNode,w=x.getSnapshotBeforeUpdate(e.elementType===e.type?N:Yt(e.type,N),V);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(b){be(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return P=jp,jp=!1,P}function js(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Pc(e,n,s)}i=i.next}while(i!==r)}}function Il(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Dc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Xy(t){var e=t.alternate;e!==null&&(t.alternate=null,Xy(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ln],delete e[to],delete e[yc],delete e[AE],delete e[RE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Jy(t){return t.tag===5||t.tag===3||t.tag===4}function Mp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Jy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Nc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=za));else if(r!==4&&(t=t.child,t!==null))for(Nc(t,e,n),t=t.sibling;t!==null;)Nc(t,e,n),t=t.sibling}function bc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(bc(t,e,n),t=t.sibling;t!==null;)bc(t,e,n),t=t.sibling}var Xe=null,Xt=!1;function Un(t,e,n){for(n=n.child;n!==null;)Zy(t,e,n),n=n.sibling}function Zy(t,e,n){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(ml,n)}catch{}switch(n.tag){case 5:ht||vi(n,e);case 6:var r=Xe,i=Xt;Xe=null,Un(t,e,n),Xe=r,Xt=i,Xe!==null&&(Xt?(t=Xe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Xe.removeChild(n.stateNode));break;case 18:Xe!==null&&(Xt?(t=Xe,n=n.stateNode,t.nodeType===8?Eu(t.parentNode,n):t.nodeType===1&&Eu(t,n),Ys(t)):Eu(Xe,n.stateNode));break;case 4:r=Xe,i=Xt,Xe=n.stateNode.containerInfo,Xt=!0,Un(t,e,n),Xe=r,Xt=i;break;case 0:case 11:case 14:case 15:if(!ht&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Pc(n,e,o),i=i.next}while(i!==r)}Un(t,e,n);break;case 1:if(!ht&&(vi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){be(n,e,l)}Un(t,e,n);break;case 21:Un(t,e,n);break;case 22:n.mode&1?(ht=(r=ht)||n.memoizedState!==null,Un(t,e,n),ht=r):Un(t,e,n);break;default:Un(t,e,n)}}function Fp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new $E),e.forEach(function(r){var i=ZE.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Kt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Xe=l.stateNode,Xt=!1;break e;case 3:Xe=l.stateNode.containerInfo,Xt=!0;break e;case 4:Xe=l.stateNode.containerInfo,Xt=!0;break e}l=l.return}if(Xe===null)throw Error(z(160));Zy(s,o,i),Xe=null,Xt=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(h){be(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ev(e,t),e=e.sibling}function ev(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Kt(e,t),sn(t),r&4){try{js(3,t,t.return),Il(3,t)}catch(N){be(t,t.return,N)}try{js(5,t,t.return)}catch(N){be(t,t.return,N)}}break;case 1:Kt(e,t),sn(t),r&512&&n!==null&&vi(n,n.return);break;case 5:if(Kt(e,t),sn(t),r&512&&n!==null&&vi(n,n.return),t.flags&32){var i=t.stateNode;try{qs(i,"")}catch(N){be(t,t.return,N)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Tg(i,s),rc(l,o);var h=rc(l,s);for(o=0;o<u.length;o+=2){var f=u[o],y=u[o+1];f==="style"?Rg(i,y):f==="dangerouslySetInnerHTML"?xg(i,y):f==="children"?qs(i,y):ph(i,f,y,h)}switch(l){case"input":Ju(i,s);break;case"textarea":Ig(i,s);break;case"select":var _=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var R=s.value;R!=null?wi(i,!!s.multiple,R,!1):_!==!!s.multiple&&(s.defaultValue!=null?wi(i,!!s.multiple,s.defaultValue,!0):wi(i,!!s.multiple,s.multiple?[]:"",!1))}i[to]=s}catch(N){be(t,t.return,N)}}break;case 6:if(Kt(e,t),sn(t),r&4){if(t.stateNode===null)throw Error(z(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(N){be(t,t.return,N)}}break;case 3:if(Kt(e,t),sn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ys(e.containerInfo)}catch(N){be(t,t.return,N)}break;case 4:Kt(e,t),sn(t);break;case 13:Kt(e,t),sn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Gh=je())),r&4&&Fp(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(ht=(h=ht)||f,Kt(e,t),ht=h):Kt(e,t),sn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!f&&t.mode&1)for(Q=t,f=t.child;f!==null;){for(y=Q=f;Q!==null;){switch(_=Q,R=_.child,_.tag){case 0:case 11:case 14:case 15:js(4,_,_.return);break;case 1:vi(_,_.return);var P=_.stateNode;if(typeof P.componentWillUnmount=="function"){r=_,n=_.return;try{e=r,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(N){be(r,n,N)}}break;case 5:vi(_,_.return);break;case 22:if(_.memoizedState!==null){Up(y);continue}}R!==null?(R.return=_,Q=R):Up(y)}f=f.sibling}e:for(f=null,y=t;;){if(y.tag===5){if(f===null){f=y;try{i=y.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=y.stateNode,u=y.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Ag("display",o))}catch(N){be(t,t.return,N)}}}else if(y.tag===6){if(f===null)try{y.stateNode.nodeValue=h?"":y.memoizedProps}catch(N){be(t,t.return,N)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;f===y&&(f=null),y=y.return}f===y&&(f=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Kt(e,t),sn(t),r&4&&Fp(t);break;case 21:break;default:Kt(e,t),sn(t)}}function sn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Jy(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(qs(i,""),r.flags&=-33);var s=Mp(t);bc(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Mp(t);Nc(t,l,o);break;default:throw Error(z(161))}}catch(u){be(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function HE(t,e,n){Q=t,tv(t)}function tv(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var i=Q,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||aa;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||ht;l=aa;var h=ht;if(aa=o,(ht=u)&&!h)for(Q=i;Q!==null;)o=Q,u=o.child,o.tag===22&&o.memoizedState!==null?zp(i):u!==null?(u.return=o,Q=u):zp(i);for(;s!==null;)Q=s,tv(s),s=s.sibling;Q=i,aa=l,ht=h}Bp(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Q=s):Bp(t)}}function Bp(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ht||Il(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ht)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Yt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Sp(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Sp(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var y=f.dehydrated;y!==null&&Ys(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}ht||e.flags&512&&Dc(e)}catch(_){be(e,e.return,_)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function Up(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function zp(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Il(4,e)}catch(u){be(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){be(e,i,u)}}var s=e.return;try{Dc(e)}catch(u){be(e,s,u)}break;case 5:var o=e.return;try{Dc(e)}catch(u){be(e,o,u)}}}catch(u){be(e,e.return,u)}if(e===t){Q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Q=l;break}Q=e.return}}var qE=Math.ceil,Za=Dn.ReactCurrentDispatcher,Hh=Dn.ReactCurrentOwner,Wt=Dn.ReactCurrentBatchConfig,pe=0,Ke=null,Fe=null,et=0,bt=0,_i=gr(0),ze=0,ao=null,zr=0,Sl=0,qh=0,Ms=null,Tt=null,Gh=0,bi=1/0,_n=null,el=!1,Vc=null,nr=null,la=!1,Qn=null,tl=0,Fs=0,Lc=null,Aa=-1,Ra=0;function yt(){return pe&6?je():Aa!==-1?Aa:Aa=je()}function rr(t){return t.mode&1?pe&2&&et!==0?et&-et:kE.transition!==null?(Ra===0&&(Ra=Fg()),Ra):(t=ve,t!==0||(t=window.event,t=t===void 0?16:qg(t.type)),t):1}function en(t,e,n,r){if(50<Fs)throw Fs=0,Lc=null,Error(z(185));_o(t,n,r),(!(pe&2)||t!==Ke)&&(t===Ke&&(!(pe&2)&&(Sl|=n),ze===4&&qn(t,et)),Rt(t,r),n===1&&pe===0&&!(e.mode&1)&&(bi=je()+500,wl&&yr()))}function Rt(t,e){var n=t.callbackNode;kw(t,e);var r=Ma(t,t===Ke?et:0);if(r===0)n!==null&&Xf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Xf(n),e===1)t.tag===0?CE($p.bind(null,t)):hy($p.bind(null,t)),SE(function(){!(pe&6)&&yr()}),n=null;else{switch(Bg(r)){case 1:n=_h;break;case 4:n=jg;break;case 16:n=ja;break;case 536870912:n=Mg;break;default:n=ja}n=uv(n,nv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function nv(t,e){if(Aa=-1,Ra=0,pe&6)throw Error(z(327));var n=t.callbackNode;if(xi()&&t.callbackNode!==n)return null;var r=Ma(t,t===Ke?et:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=nl(t,r);else{e=r;var i=pe;pe|=2;var s=iv();(Ke!==t||et!==e)&&(_n=null,bi=je()+500,Vr(t,e));do try{QE();break}catch(l){rv(t,l)}while(!0);Nh(),Za.current=s,pe=i,Fe!==null?e=0:(Ke=null,et=0,e=ze)}if(e!==0){if(e===2&&(i=lc(t),i!==0&&(r=i,e=Oc(t,i))),e===1)throw n=ao,Vr(t,0),qn(t,r),Rt(t,je()),n;if(e===6)qn(t,r);else{if(i=t.current.alternate,!(r&30)&&!GE(i)&&(e=nl(t,r),e===2&&(s=lc(t),s!==0&&(r=s,e=Oc(t,s))),e===1))throw n=ao,Vr(t,0),qn(t,r),Rt(t,je()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:Cr(t,Tt,_n);break;case 3:if(qn(t,r),(r&130023424)===r&&(e=Gh+500-je(),10<e)){if(Ma(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){yt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=gc(Cr.bind(null,t,Tt,_n),e);break}Cr(t,Tt,_n);break;case 4:if(qn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Zt(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*qE(r/1960))-r,10<r){t.timeoutHandle=gc(Cr.bind(null,t,Tt,_n),r);break}Cr(t,Tt,_n);break;case 5:Cr(t,Tt,_n);break;default:throw Error(z(329))}}}return Rt(t,je()),t.callbackNode===n?nv.bind(null,t):null}function Oc(t,e){var n=Ms;return t.current.memoizedState.isDehydrated&&(Vr(t,e).flags|=256),t=nl(t,e),t!==2&&(e=Tt,Tt=n,e!==null&&jc(e)),t}function jc(t){Tt===null?Tt=t:Tt.push.apply(Tt,t)}function GE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!nn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function qn(t,e){for(e&=~qh,e&=~Sl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Zt(e),r=1<<n;t[n]=-1,e&=~r}}function $p(t){if(pe&6)throw Error(z(327));xi();var e=Ma(t,0);if(!(e&1))return Rt(t,je()),null;var n=nl(t,e);if(t.tag!==0&&n===2){var r=lc(t);r!==0&&(e=r,n=Oc(t,r))}if(n===1)throw n=ao,Vr(t,0),qn(t,e),Rt(t,je()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Cr(t,Tt,_n),Rt(t,je()),null}function Kh(t,e){var n=pe;pe|=1;try{return t(e)}finally{pe=n,pe===0&&(bi=je()+500,wl&&yr())}}function $r(t){Qn!==null&&Qn.tag===0&&!(pe&6)&&xi();var e=pe;pe|=1;var n=Wt.transition,r=ve;try{if(Wt.transition=null,ve=1,t)return t()}finally{ve=r,Wt.transition=n,pe=e,!(pe&6)&&yr()}}function Qh(){bt=_i.current,xe(_i)}function Vr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,IE(n)),Fe!==null)for(n=Fe.return;n!==null;){var r=n;switch(kh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&$a();break;case 3:Di(),xe(xt),xe(ft),Mh();break;case 5:jh(r);break;case 4:Di();break;case 13:xe(Ce);break;case 19:xe(Ce);break;case 10:bh(r.type._context);break;case 22:case 23:Qh()}n=n.return}if(Ke=t,Fe=t=ir(t.current,null),et=bt=e,ze=0,ao=null,qh=Sl=zr=0,Tt=Ms=null,Dr!==null){for(e=0;e<Dr.length;e++)if(n=Dr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Dr=null}return t}function rv(t,e){do{var n=Fe;try{if(Nh(),Ia.current=Ja,Xa){for(var r=ke.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Xa=!1}if(Ur=0,Ge=Ue=ke=null,Os=!1,io=0,Hh.current=null,n===null||n.return===null){ze=1,ao=e,Fe=null;break}e:{var s=t,o=n.return,l=n,u=e;if(e=et,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,f=l,y=f.tag;if(!(f.mode&1)&&(y===0||y===11||y===15)){var _=f.alternate;_?(f.updateQueue=_.updateQueue,f.memoizedState=_.memoizedState,f.lanes=_.lanes):(f.updateQueue=null,f.memoizedState=null)}var R=Pp(o);if(R!==null){R.flags&=-257,Dp(R,o,l,s,e),R.mode&1&&kp(s,h,e),e=R,u=h;var P=e.updateQueue;if(P===null){var N=new Set;N.add(u),e.updateQueue=N}else P.add(u);break e}else{if(!(e&1)){kp(s,h,e),Yh();break e}u=Error(z(426))}}else if(Ae&&l.mode&1){var V=Pp(o);if(V!==null){!(V.flags&65536)&&(V.flags|=256),Dp(V,o,l,s,e),Ph(Ni(u,l));break e}}s=u=Ni(u,l),ze!==4&&(ze=2),Ms===null?Ms=[s]:Ms.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=By(s,u,e);Ip(s,x);break e;case 1:l=u;var w=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(nr===null||!nr.has(C)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=Uy(s,l,e);Ip(s,b);break e}}s=s.return}while(s!==null)}ov(n)}catch(B){e=B,Fe===n&&n!==null&&(Fe=n=n.return);continue}break}while(!0)}function iv(){var t=Za.current;return Za.current=Ja,t===null?Ja:t}function Yh(){(ze===0||ze===3||ze===2)&&(ze=4),Ke===null||!(zr&268435455)&&!(Sl&268435455)||qn(Ke,et)}function nl(t,e){var n=pe;pe|=2;var r=iv();(Ke!==t||et!==e)&&(_n=null,Vr(t,e));do try{KE();break}catch(i){rv(t,i)}while(!0);if(Nh(),pe=n,Za.current=r,Fe!==null)throw Error(z(261));return Ke=null,et=0,ze}function KE(){for(;Fe!==null;)sv(Fe)}function QE(){for(;Fe!==null&&!ww();)sv(Fe)}function sv(t){var e=lv(t.alternate,t,bt);t.memoizedProps=t.pendingProps,e===null?ov(t):Fe=e,Hh.current=null}function ov(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=zE(n,e),n!==null){n.flags&=32767,Fe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ze=6,Fe=null;return}}else if(n=UE(n,e,bt),n!==null){Fe=n;return}if(e=e.sibling,e!==null){Fe=e;return}Fe=e=t}while(e!==null);ze===0&&(ze=5)}function Cr(t,e,n){var r=ve,i=Wt.transition;try{Wt.transition=null,ve=1,YE(t,e,n,r)}finally{Wt.transition=i,ve=r}return null}function YE(t,e,n,r){do xi();while(Qn!==null);if(pe&6)throw Error(z(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Pw(t,s),t===Ke&&(Fe=Ke=null,et=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||la||(la=!0,uv(ja,function(){return xi(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Wt.transition,Wt.transition=null;var o=ve;ve=1;var l=pe;pe|=4,Hh.current=null,WE(t,n),ev(n,t),gE(pc),Fa=!!fc,pc=fc=null,t.current=n,HE(n),Ew(),pe=l,ve=o,Wt.transition=s}else t.current=n;if(la&&(la=!1,Qn=t,tl=i),s=t.pendingLanes,s===0&&(nr=null),Sw(n.stateNode),Rt(t,je()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(el)throw el=!1,t=Vc,Vc=null,t;return tl&1&&t.tag!==0&&xi(),s=t.pendingLanes,s&1?t===Lc?Fs++:(Fs=0,Lc=t):Fs=0,yr(),null}function xi(){if(Qn!==null){var t=Bg(tl),e=Wt.transition,n=ve;try{if(Wt.transition=null,ve=16>t?16:t,Qn===null)var r=!1;else{if(t=Qn,Qn=null,tl=0,pe&6)throw Error(z(331));var i=pe;for(pe|=4,Q=t.current;Q!==null;){var s=Q,o=s.child;if(Q.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(Q=h;Q!==null;){var f=Q;switch(f.tag){case 0:case 11:case 15:js(8,f,s)}var y=f.child;if(y!==null)y.return=f,Q=y;else for(;Q!==null;){f=Q;var _=f.sibling,R=f.return;if(Xy(f),f===h){Q=null;break}if(_!==null){_.return=R,Q=_;break}Q=R}}}var P=s.alternate;if(P!==null){var N=P.child;if(N!==null){P.child=null;do{var V=N.sibling;N.sibling=null,N=V}while(N!==null)}}Q=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Q=o;else e:for(;Q!==null;){if(s=Q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:js(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,Q=x;break e}Q=s.return}}var w=t.current;for(Q=w;Q!==null;){o=Q;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,Q=C;else e:for(o=w;Q!==null;){if(l=Q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Il(9,l)}}catch(B){be(l,l.return,B)}if(l===o){Q=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,Q=b;break e}Q=l.return}}if(pe=i,yr(),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(ml,t)}catch{}r=!0}return r}finally{ve=n,Wt.transition=e}}return!1}function Wp(t,e,n){e=Ni(n,e),e=By(t,e,1),t=tr(t,e,1),e=yt(),t!==null&&(_o(t,1,e),Rt(t,e))}function be(t,e,n){if(t.tag===3)Wp(t,t,n);else for(;e!==null;){if(e.tag===3){Wp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(nr===null||!nr.has(r))){t=Ni(n,t),t=Uy(e,t,1),e=tr(e,t,1),t=yt(),e!==null&&(_o(e,1,t),Rt(e,t));break}}e=e.return}}function XE(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=yt(),t.pingedLanes|=t.suspendedLanes&n,Ke===t&&(et&n)===n&&(ze===4||ze===3&&(et&130023424)===et&&500>je()-Gh?Vr(t,0):qh|=n),Rt(t,e)}function av(t,e){e===0&&(t.mode&1?(e=Jo,Jo<<=1,!(Jo&130023424)&&(Jo=4194304)):e=1);var n=yt();t=An(t,e),t!==null&&(_o(t,e,n),Rt(t,n))}function JE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),av(t,n)}function ZE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),av(t,n)}var lv;lv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||xt.current)St=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return St=!1,BE(t,e,n);St=!!(t.flags&131072)}else St=!1,Ae&&e.flags&1048576&&dy(e,qa,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;xa(t,e),t=e.pendingProps;var i=Ci(e,ft.current);Si(e,n),i=Bh(null,e,r,t,i,n);var s=Uh();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,At(r)?(s=!0,Wa(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Lh(e),i.updater=Tl,e.stateNode=i,i._reactInternals=e,Ic(e,r,t,n),e=Ac(null,e,r,!0,s,n)):(e.tag=0,Ae&&s&&Ch(e),gt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(xa(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=tT(r),t=Yt(r,t),i){case 0:e=xc(null,e,r,t,n);break e;case 1:e=Vp(null,e,r,t,n);break e;case 11:e=Np(null,e,r,t,n);break e;case 14:e=bp(null,e,r,Yt(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yt(r,i),xc(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yt(r,i),Vp(t,e,r,i,n);case 3:e:{if(Hy(e),t===null)throw Error(z(387));r=e.pendingProps,s=e.memoizedState,i=s.element,vy(t,e),Qa(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ni(Error(z(423)),e),e=Lp(t,e,r,n,i);break e}else if(r!==i){i=Ni(Error(z(424)),e),e=Lp(t,e,r,n,i);break e}else for(Vt=er(e.stateNode.containerInfo.firstChild),jt=e,Ae=!0,Jt=null,n=gy(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ki(),r===i){e=Rn(t,e,n);break e}gt(t,e,r,n)}e=e.child}return e;case 5:return _y(e),t===null&&wc(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,mc(r,i)?o=null:s!==null&&mc(r,s)&&(e.flags|=32),Wy(t,e),gt(t,e,o,n),e.child;case 6:return t===null&&wc(e),null;case 13:return qy(t,e,n);case 4:return Oh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Pi(e,null,r,n):gt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yt(r,i),Np(t,e,r,i,n);case 7:return gt(t,e,e.pendingProps,n),e.child;case 8:return gt(t,e,e.pendingProps.children,n),e.child;case 12:return gt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ee(Ga,r._currentValue),r._currentValue=o,s!==null)if(nn(s.value,o)){if(s.children===i.children&&!xt.current){e=Rn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=In(-1,n&-n),u.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?u.next=u:(u.next=f.next,f.next=u),h.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Ec(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(z(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Ec(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}gt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Si(e,n),i=Ht(i),r=r(i),e.flags|=1,gt(t,e,r,n),e.child;case 14:return r=e.type,i=Yt(r,e.pendingProps),i=Yt(r.type,i),bp(t,e,r,i,n);case 15:return zy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yt(r,i),xa(t,e),e.tag=1,At(r)?(t=!0,Wa(e)):t=!1,Si(e,n),Fy(e,r,i),Ic(e,r,i,n),Ac(null,e,r,!0,t,n);case 19:return Gy(t,e,n);case 22:return $y(t,e,n)}throw Error(z(156,e.tag))};function uv(t,e){return Og(t,e)}function eT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $t(t,e,n,r){return new eT(t,e,n,r)}function Xh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function tT(t){if(typeof t=="function")return Xh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===gh)return 11;if(t===yh)return 14}return 2}function ir(t,e){var n=t.alternate;return n===null?(n=$t(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ca(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Xh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ui:return Lr(n.children,i,s,e);case mh:o=8,i|=8;break;case Gu:return t=$t(12,n,e,i|2),t.elementType=Gu,t.lanes=s,t;case Ku:return t=$t(13,n,e,i),t.elementType=Ku,t.lanes=s,t;case Qu:return t=$t(19,n,e,i),t.elementType=Qu,t.lanes=s,t;case _g:return xl(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case yg:o=10;break e;case vg:o=9;break e;case gh:o=11;break e;case yh:o=14;break e;case $n:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=$t(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Lr(t,e,n,r){return t=$t(7,t,r,e),t.lanes=n,t}function xl(t,e,n,r){return t=$t(22,t,r,e),t.elementType=_g,t.lanes=n,t.stateNode={isHidden:!1},t}function ku(t,e,n){return t=$t(6,t,null,e),t.lanes=n,t}function Pu(t,e,n){return e=$t(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function nT(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cu(0),this.expirationTimes=cu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Jh(t,e,n,r,i,s,o,l,u){return t=new nT(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=$t(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lh(s),t}function rT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:li,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function cv(t){if(!t)return hr;t=t._reactInternals;e:{if(Qr(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(At(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(At(n))return cy(t,n,e)}return e}function hv(t,e,n,r,i,s,o,l,u){return t=Jh(n,r,!0,t,i,s,o,l,u),t.context=cv(null),n=t.current,r=yt(),i=rr(n),s=In(r,i),s.callback=e??null,tr(n,s,i),t.current.lanes=i,_o(t,i,r),Rt(t,r),t}function Al(t,e,n,r){var i=e.current,s=yt(),o=rr(i);return n=cv(n),e.context===null?e.context=n:e.pendingContext=n,e=In(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=tr(i,e,o),t!==null&&(en(t,i,o,s),Ta(t,i,o)),o}function rl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Hp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Zh(t,e){Hp(t,e),(t=t.alternate)&&Hp(t,e)}function iT(){return null}var dv=typeof reportError=="function"?reportError:function(t){console.error(t)};function ed(t){this._internalRoot=t}Rl.prototype.render=ed.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Al(t,e,null,null)};Rl.prototype.unmount=ed.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;$r(function(){Al(null,t,null,null)}),e[xn]=null}};function Rl(t){this._internalRoot=t}Rl.prototype.unstable_scheduleHydration=function(t){if(t){var e=$g();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Hn.length&&e!==0&&e<Hn[n].priority;n++);Hn.splice(n,0,t),n===0&&Hg(t)}};function td(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Cl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function qp(){}function sT(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=rl(o);s.call(h)}}var o=hv(e,r,t,0,null,!1,!1,"",qp);return t._reactRootContainer=o,t[xn]=o.current,Zs(t.nodeType===8?t.parentNode:t),$r(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var h=rl(u);l.call(h)}}var u=Jh(t,0,!1,null,null,!1,!1,"",qp);return t._reactRootContainer=u,t[xn]=u.current,Zs(t.nodeType===8?t.parentNode:t),$r(function(){Al(e,u,n,r)}),u}function kl(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var u=rl(o);l.call(u)}}Al(e,o,t,i)}else o=sT(n,e,t,i,r);return rl(o)}Ug=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=xs(e.pendingLanes);n!==0&&(wh(e,n|1),Rt(e,je()),!(pe&6)&&(bi=je()+500,yr()))}break;case 13:$r(function(){var r=An(t,1);if(r!==null){var i=yt();en(r,t,1,i)}}),Zh(t,1)}};Eh=function(t){if(t.tag===13){var e=An(t,134217728);if(e!==null){var n=yt();en(e,t,134217728,n)}Zh(t,134217728)}};zg=function(t){if(t.tag===13){var e=rr(t),n=An(t,e);if(n!==null){var r=yt();en(n,t,e,r)}Zh(t,e)}};$g=function(){return ve};Wg=function(t,e){var n=ve;try{return ve=t,e()}finally{ve=n}};sc=function(t,e,n){switch(e){case"input":if(Ju(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=_l(r);if(!i)throw Error(z(90));Eg(r),Ju(r,i)}}}break;case"textarea":Ig(t,n);break;case"select":e=n.value,e!=null&&wi(t,!!n.multiple,e,!1)}};Pg=Kh;Dg=$r;var oT={usingClientEntryPoint:!1,Events:[Eo,fi,_l,Cg,kg,Kh]},ws={findFiberByHostInstance:Pr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},aT={bundleType:ws.bundleType,version:ws.version,rendererPackageName:ws.rendererPackageName,rendererConfig:ws.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Dn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Vg(t),t===null?null:t.stateNode},findFiberByHostInstance:ws.findFiberByHostInstance||iT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ua=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ua.isDisabled&&ua.supportsFiber)try{ml=ua.inject(aT),cn=ua}catch{}}Ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oT;Ft.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!td(e))throw Error(z(200));return rT(t,e,null,n)};Ft.createRoot=function(t,e){if(!td(t))throw Error(z(299));var n=!1,r="",i=dv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Jh(t,1,!1,null,null,n,!1,r,i),t[xn]=e.current,Zs(t.nodeType===8?t.parentNode:t),new ed(e)};Ft.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=Vg(e),t=t===null?null:t.stateNode,t};Ft.flushSync=function(t){return $r(t)};Ft.hydrate=function(t,e,n){if(!Cl(e))throw Error(z(200));return kl(null,t,e,!0,n)};Ft.hydrateRoot=function(t,e,n){if(!td(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=dv;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=hv(e,null,t,1,n??null,i,!1,s,o),t[xn]=e.current,Zs(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Rl(e)};Ft.render=function(t,e,n){if(!Cl(e))throw Error(z(200));return kl(null,t,e,!1,n)};Ft.unmountComponentAtNode=function(t){if(!Cl(t))throw Error(z(40));return t._reactRootContainer?($r(function(){kl(null,null,t,!1,function(){t._reactRootContainer=null,t[xn]=null})}),!0):!1};Ft.unstable_batchedUpdates=Kh;Ft.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Cl(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return kl(t,e,n,!1,r)};Ft.version="18.3.1-next-f1338f8080-20240426";function fv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fv)}catch(t){console.error(t)}}fv(),fg.exports=Ft;var lT=fg.exports,Gp=lT;Hu.createRoot=Gp.createRoot,Hu.hydrateRoot=Gp.hydrateRoot;var Kp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},uT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},mv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,f=s>>2,y=(s&3)<<4|l>>4;let _=(l&15)<<2|h>>6,R=h&63;u||(R=64,o||(_=64)),r.push(n[f],n[y],n[_],n[R])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(pv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):uT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const y=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||h==null||y==null)throw new cT;const _=s<<2|l>>4;if(r.push(_),h!==64){const R=l<<4&240|h>>2;if(r.push(R),y!==64){const P=h<<6&192|y;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class cT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hT=function(t){const e=pv(t);return mv.encodeByteArray(e,!0)},il=function(t){return hT(t).replace(/\./g,"")},dT=function(t){try{return mv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT=()=>fT().__FIREBASE_DEFAULTS__,mT=()=>{if(typeof process>"u"||typeof Kp>"u")return;const t=Kp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},gT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&dT(t[1]);return e&&JSON.parse(e)},nd=()=>{try{return pT()||mT()||gT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},yT=t=>{var e,n;return(n=(e=nd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},gv=t=>{const e=yT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},yv=()=>{var t;return(t=nd())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[il(JSON.stringify(n)),il(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wT(){var t;const e=(t=nd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ET(){return!wT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function TT(){try{return typeof indexedDB=="object"}catch{return!1}}function IT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="FirebaseError";class Yr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=ST,Object.setPrototypeOf(this,Yr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_v.prototype.create)}}class _v{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?xT(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new Yr(i,l,r)}}function xT(t,e){return t.replace(AT,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const AT=/\{\$([^}]+)}/g;function Mc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Qp(s)&&Qp(o)){if(!Mc(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Qp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(t){return t&&t._delegate?t._delegate:t}class Vi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new vT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kT(e))try{this.getOrInitializeService({instanceIdentifier:kr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=kr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=kr){return this.instances.has(e)}getOptions(e=kr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:CT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=kr){return this.component?this.component.multipleInstances?e:kr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function CT(t){return t===kr?void 0:t}function kT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new RT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(fe||(fe={}));const DT={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},NT=fe.INFO,bT={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},VT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=bT[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wv{constructor(e){this.name=e,this._logLevel=NT,this._logHandler=VT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?DT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...e),this._logHandler(this,fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...e),this._logHandler(this,fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...e),this._logHandler(this,fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...e),this._logHandler(this,fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...e),this._logHandler(this,fe.ERROR,...e)}}const LT=(t,e)=>e.some(n=>t instanceof n);let Yp,Xp;function OT(){return Yp||(Yp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jT(){return Xp||(Xp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ev=new WeakMap,Fc=new WeakMap,Tv=new WeakMap,Du=new WeakMap,rd=new WeakMap;function MT(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(sr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Ev.set(n,t)}).catch(()=>{}),rd.set(e,t),e}function FT(t){if(Fc.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Fc.set(t,e)}let Bc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Fc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Tv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return sr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function BT(t){Bc=t(Bc)}function UT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Nu(this),e,...n);return Tv.set(r,e.sort?e.sort():[e]),sr(r)}:jT().includes(t)?function(...e){return t.apply(Nu(this),e),sr(Ev.get(this))}:function(...e){return sr(t.apply(Nu(this),e))}}function zT(t){return typeof t=="function"?UT(t):(t instanceof IDBTransaction&&FT(t),LT(t,OT())?new Proxy(t,Bc):t)}function sr(t){if(t instanceof IDBRequest)return MT(t);if(Du.has(t))return Du.get(t);const e=zT(t);return e!==t&&(Du.set(t,e),rd.set(e,t)),e}const Nu=t=>rd.get(t);function $T(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=sr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(sr(o.result),u.oldVersion,u.newVersion,sr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const WT=["get","getKey","getAll","getAllKeys","count"],HT=["put","add","delete","clear"],bu=new Map;function Jp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(bu.get(e))return bu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=HT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||WT.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),i&&u.done]))[0]};return bu.set(e,s),s}BT(t=>({...t,get:(e,n,r)=>Jp(e,n)||t.get(e,n,r),has:(e,n)=>!!Jp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(GT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function GT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Uc="@firebase/app",Zp="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn=new wv("@firebase/app"),KT="@firebase/app-compat",QT="@firebase/analytics-compat",YT="@firebase/analytics",XT="@firebase/app-check-compat",JT="@firebase/app-check",ZT="@firebase/auth",e1="@firebase/auth-compat",t1="@firebase/database",n1="@firebase/data-connect",r1="@firebase/database-compat",i1="@firebase/functions",s1="@firebase/functions-compat",o1="@firebase/installations",a1="@firebase/installations-compat",l1="@firebase/messaging",u1="@firebase/messaging-compat",c1="@firebase/performance",h1="@firebase/performance-compat",d1="@firebase/remote-config",f1="@firebase/remote-config-compat",p1="@firebase/storage",m1="@firebase/storage-compat",g1="@firebase/firestore",y1="@firebase/vertexai-preview",v1="@firebase/firestore-compat",_1="firebase",w1="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zc="[DEFAULT]",E1={[Uc]:"fire-core",[KT]:"fire-core-compat",[YT]:"fire-analytics",[QT]:"fire-analytics-compat",[JT]:"fire-app-check",[XT]:"fire-app-check-compat",[ZT]:"fire-auth",[e1]:"fire-auth-compat",[t1]:"fire-rtdb",[n1]:"fire-data-connect",[r1]:"fire-rtdb-compat",[i1]:"fire-fn",[s1]:"fire-fn-compat",[o1]:"fire-iid",[a1]:"fire-iid-compat",[l1]:"fire-fcm",[u1]:"fire-fcm-compat",[c1]:"fire-perf",[h1]:"fire-perf-compat",[d1]:"fire-rc",[f1]:"fire-rc-compat",[p1]:"fire-gcs",[m1]:"fire-gcs-compat",[g1]:"fire-fst",[v1]:"fire-fst-compat",[y1]:"fire-vertex","fire-js":"fire-js",[_1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl=new Map,T1=new Map,$c=new Map;function em(t,e){try{t.container.addComponent(e)}catch(n){Cn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function lo(t){const e=t.name;if($c.has(e))return Cn.debug(`There were multiple attempts to register component ${e}.`),!1;$c.set(e,t);for(const n of sl.values())em(n,t);for(const n of T1.values())em(n,t);return!0}function Iv(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},or=new _v("app","Firebase",I1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Vi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw or.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv=w1;function xv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:zc,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw or.create("bad-app-name",{appName:String(i)});if(n||(n=yv()),!n)throw or.create("no-options");const s=sl.get(i);if(s){if(Mc(n,s.options)&&Mc(r,s.config))return s;throw or.create("duplicate-app",{appName:i})}const o=new PT(i);for(const u of $c.values())o.addComponent(u);const l=new S1(n,r,o);return sl.set(i,l),l}function Av(t=zc){const e=sl.get(t);if(!e&&t===zc&&yv())return xv();if(!e)throw or.create("no-app",{appName:t});return e}function ar(t,e,n){var r;let i=(r=E1[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cn.warn(l.join(" "));return}lo(new Vi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1="firebase-heartbeat-database",A1=1,uo="firebase-heartbeat-store";let Vu=null;function Rv(){return Vu||(Vu=$T(x1,A1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(uo)}catch(n){console.warn(n)}}}}).catch(t=>{throw or.create("idb-open",{originalErrorMessage:t.message})})),Vu}async function R1(t){try{const n=(await Rv()).transaction(uo),r=await n.objectStore(uo).get(Cv(t));return await n.done,r}catch(e){if(e instanceof Yr)Cn.warn(e.message);else{const n=or.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Cn.warn(n.message)}}}async function tm(t,e){try{const r=(await Rv()).transaction(uo,"readwrite");await r.objectStore(uo).put(e,Cv(t)),await r.done}catch(n){if(n instanceof Yr)Cn.warn(n.message);else{const r=or.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Cn.warn(r.message)}}}function Cv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1=1024,k1=30*24*60*60*1e3;class P1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new N1(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=nm();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=k1}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Cn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=nm(),{heartbeatsToSend:r,unsentEntries:i}=D1(this._heartbeatsCache.heartbeats),s=il(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Cn.warn(n),""}}}function nm(){return new Date().toISOString().substring(0,10)}function D1(t,e=C1){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),rm(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),rm(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class N1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return TT()?IT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await R1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return tm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return tm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function rm(t){return il(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(t){lo(new Vi("platform-logger",e=>new qT(e),"PRIVATE")),lo(new Vi("heartbeat",e=>new P1(e),"PRIVATE")),ar(Uc,Zp,t),ar(Uc,Zp,"esm2017"),ar("fire-js","")}b1("");var V1="firebase",L1="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ar(V1,L1,"app");var im=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Or,kv;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,v){function E(){}E.prototype=v.prototype,T.D=v.prototype,T.prototype=new E,T.prototype.constructor=T,T.C=function(I,S,k){for(var A=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)A[Re-2]=arguments[Re];return v.prototype[S].apply(I,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,v,E){E||(E=0);var I=Array(16);if(typeof v=="string")for(var S=0;16>S;++S)I[S]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(S=0;16>S;++S)I[S]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=T.g[0],E=T.g[1],S=T.g[2];var k=T.g[3],A=v+(k^E&(S^k))+I[0]+3614090360&4294967295;v=E+(A<<7&4294967295|A>>>25),A=k+(S^v&(E^S))+I[1]+3905402710&4294967295,k=v+(A<<12&4294967295|A>>>20),A=S+(E^k&(v^E))+I[2]+606105819&4294967295,S=k+(A<<17&4294967295|A>>>15),A=E+(v^S&(k^v))+I[3]+3250441966&4294967295,E=S+(A<<22&4294967295|A>>>10),A=v+(k^E&(S^k))+I[4]+4118548399&4294967295,v=E+(A<<7&4294967295|A>>>25),A=k+(S^v&(E^S))+I[5]+1200080426&4294967295,k=v+(A<<12&4294967295|A>>>20),A=S+(E^k&(v^E))+I[6]+2821735955&4294967295,S=k+(A<<17&4294967295|A>>>15),A=E+(v^S&(k^v))+I[7]+4249261313&4294967295,E=S+(A<<22&4294967295|A>>>10),A=v+(k^E&(S^k))+I[8]+1770035416&4294967295,v=E+(A<<7&4294967295|A>>>25),A=k+(S^v&(E^S))+I[9]+2336552879&4294967295,k=v+(A<<12&4294967295|A>>>20),A=S+(E^k&(v^E))+I[10]+4294925233&4294967295,S=k+(A<<17&4294967295|A>>>15),A=E+(v^S&(k^v))+I[11]+2304563134&4294967295,E=S+(A<<22&4294967295|A>>>10),A=v+(k^E&(S^k))+I[12]+1804603682&4294967295,v=E+(A<<7&4294967295|A>>>25),A=k+(S^v&(E^S))+I[13]+4254626195&4294967295,k=v+(A<<12&4294967295|A>>>20),A=S+(E^k&(v^E))+I[14]+2792965006&4294967295,S=k+(A<<17&4294967295|A>>>15),A=E+(v^S&(k^v))+I[15]+1236535329&4294967295,E=S+(A<<22&4294967295|A>>>10),A=v+(S^k&(E^S))+I[1]+4129170786&4294967295,v=E+(A<<5&4294967295|A>>>27),A=k+(E^S&(v^E))+I[6]+3225465664&4294967295,k=v+(A<<9&4294967295|A>>>23),A=S+(v^E&(k^v))+I[11]+643717713&4294967295,S=k+(A<<14&4294967295|A>>>18),A=E+(k^v&(S^k))+I[0]+3921069994&4294967295,E=S+(A<<20&4294967295|A>>>12),A=v+(S^k&(E^S))+I[5]+3593408605&4294967295,v=E+(A<<5&4294967295|A>>>27),A=k+(E^S&(v^E))+I[10]+38016083&4294967295,k=v+(A<<9&4294967295|A>>>23),A=S+(v^E&(k^v))+I[15]+3634488961&4294967295,S=k+(A<<14&4294967295|A>>>18),A=E+(k^v&(S^k))+I[4]+3889429448&4294967295,E=S+(A<<20&4294967295|A>>>12),A=v+(S^k&(E^S))+I[9]+568446438&4294967295,v=E+(A<<5&4294967295|A>>>27),A=k+(E^S&(v^E))+I[14]+3275163606&4294967295,k=v+(A<<9&4294967295|A>>>23),A=S+(v^E&(k^v))+I[3]+4107603335&4294967295,S=k+(A<<14&4294967295|A>>>18),A=E+(k^v&(S^k))+I[8]+1163531501&4294967295,E=S+(A<<20&4294967295|A>>>12),A=v+(S^k&(E^S))+I[13]+2850285829&4294967295,v=E+(A<<5&4294967295|A>>>27),A=k+(E^S&(v^E))+I[2]+4243563512&4294967295,k=v+(A<<9&4294967295|A>>>23),A=S+(v^E&(k^v))+I[7]+1735328473&4294967295,S=k+(A<<14&4294967295|A>>>18),A=E+(k^v&(S^k))+I[12]+2368359562&4294967295,E=S+(A<<20&4294967295|A>>>12),A=v+(E^S^k)+I[5]+4294588738&4294967295,v=E+(A<<4&4294967295|A>>>28),A=k+(v^E^S)+I[8]+2272392833&4294967295,k=v+(A<<11&4294967295|A>>>21),A=S+(k^v^E)+I[11]+1839030562&4294967295,S=k+(A<<16&4294967295|A>>>16),A=E+(S^k^v)+I[14]+4259657740&4294967295,E=S+(A<<23&4294967295|A>>>9),A=v+(E^S^k)+I[1]+2763975236&4294967295,v=E+(A<<4&4294967295|A>>>28),A=k+(v^E^S)+I[4]+1272893353&4294967295,k=v+(A<<11&4294967295|A>>>21),A=S+(k^v^E)+I[7]+4139469664&4294967295,S=k+(A<<16&4294967295|A>>>16),A=E+(S^k^v)+I[10]+3200236656&4294967295,E=S+(A<<23&4294967295|A>>>9),A=v+(E^S^k)+I[13]+681279174&4294967295,v=E+(A<<4&4294967295|A>>>28),A=k+(v^E^S)+I[0]+3936430074&4294967295,k=v+(A<<11&4294967295|A>>>21),A=S+(k^v^E)+I[3]+3572445317&4294967295,S=k+(A<<16&4294967295|A>>>16),A=E+(S^k^v)+I[6]+76029189&4294967295,E=S+(A<<23&4294967295|A>>>9),A=v+(E^S^k)+I[9]+3654602809&4294967295,v=E+(A<<4&4294967295|A>>>28),A=k+(v^E^S)+I[12]+3873151461&4294967295,k=v+(A<<11&4294967295|A>>>21),A=S+(k^v^E)+I[15]+530742520&4294967295,S=k+(A<<16&4294967295|A>>>16),A=E+(S^k^v)+I[2]+3299628645&4294967295,E=S+(A<<23&4294967295|A>>>9),A=v+(S^(E|~k))+I[0]+4096336452&4294967295,v=E+(A<<6&4294967295|A>>>26),A=k+(E^(v|~S))+I[7]+1126891415&4294967295,k=v+(A<<10&4294967295|A>>>22),A=S+(v^(k|~E))+I[14]+2878612391&4294967295,S=k+(A<<15&4294967295|A>>>17),A=E+(k^(S|~v))+I[5]+4237533241&4294967295,E=S+(A<<21&4294967295|A>>>11),A=v+(S^(E|~k))+I[12]+1700485571&4294967295,v=E+(A<<6&4294967295|A>>>26),A=k+(E^(v|~S))+I[3]+2399980690&4294967295,k=v+(A<<10&4294967295|A>>>22),A=S+(v^(k|~E))+I[10]+4293915773&4294967295,S=k+(A<<15&4294967295|A>>>17),A=E+(k^(S|~v))+I[1]+2240044497&4294967295,E=S+(A<<21&4294967295|A>>>11),A=v+(S^(E|~k))+I[8]+1873313359&4294967295,v=E+(A<<6&4294967295|A>>>26),A=k+(E^(v|~S))+I[15]+4264355552&4294967295,k=v+(A<<10&4294967295|A>>>22),A=S+(v^(k|~E))+I[6]+2734768916&4294967295,S=k+(A<<15&4294967295|A>>>17),A=E+(k^(S|~v))+I[13]+1309151649&4294967295,E=S+(A<<21&4294967295|A>>>11),A=v+(S^(E|~k))+I[4]+4149444226&4294967295,v=E+(A<<6&4294967295|A>>>26),A=k+(E^(v|~S))+I[11]+3174756917&4294967295,k=v+(A<<10&4294967295|A>>>22),A=S+(v^(k|~E))+I[2]+718787259&4294967295,S=k+(A<<15&4294967295|A>>>17),A=E+(k^(S|~v))+I[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(S+(A<<21&4294967295|A>>>11))&4294967295,T.g[2]=T.g[2]+S&4294967295,T.g[3]=T.g[3]+k&4294967295}r.prototype.u=function(T,v){v===void 0&&(v=T.length);for(var E=v-this.blockSize,I=this.B,S=this.h,k=0;k<v;){if(S==0)for(;k<=E;)i(this,T,k),k+=this.blockSize;if(typeof T=="string"){for(;k<v;)if(I[S++]=T.charCodeAt(k++),S==this.blockSize){i(this,I),S=0;break}}else for(;k<v;)if(I[S++]=T[k++],S==this.blockSize){i(this,I),S=0;break}}this.h=S,this.o+=v},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;var E=8*this.o;for(v=T.length-8;v<T.length;++v)T[v]=E&255,E/=256;for(this.u(T),T=Array(16),v=E=0;4>v;++v)for(var I=0;32>I;I+=8)T[E++]=this.g[v]>>>I&255;return T};function s(T,v){var E=l;return Object.prototype.hasOwnProperty.call(E,T)?E[T]:E[T]=v(T)}function o(T,v){this.h=v;for(var E=[],I=!0,S=T.length-1;0<=S;S--){var k=T[S]|0;I&&k==v||(E[S]=k,I=!1)}this.g=E}var l={};function u(T){return-128<=T&&128>T?s(T,function(v){return new o([v|0],0>v?-1:0)}):new o([T|0],0>T?-1:0)}function h(T){if(isNaN(T)||!isFinite(T))return y;if(0>T)return V(h(-T));for(var v=[],E=1,I=0;T>=E;I++)v[I]=T/E|0,E*=4294967296;return new o(v,0)}function f(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return V(f(T.substring(1),v));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=h(Math.pow(v,8)),I=y,S=0;S<T.length;S+=8){var k=Math.min(8,T.length-S),A=parseInt(T.substring(S,S+k),v);8>k?(k=h(Math.pow(v,k)),I=I.j(k).add(h(A))):(I=I.j(E),I=I.add(h(A)))}return I}var y=u(0),_=u(1),R=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-V(this).m();for(var T=0,v=1,E=0;E<this.g.length;E++){var I=this.i(E);T+=(0<=I?I:4294967296+I)*v,v*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(P(this))return"0";if(N(this))return"-"+V(this).toString(T);for(var v=h(Math.pow(T,6)),E=this,I="";;){var S=b(E,v).g;E=x(E,S.j(v));var k=((0<E.g.length?E.g[0]:E.h)>>>0).toString(T);if(E=S,P(E))return k+I;for(;6>k.length;)k="0"+k;I=k+I}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function P(T){if(T.h!=0)return!1;for(var v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function N(T){return T.h==-1}t.l=function(T){return T=x(this,T),N(T)?-1:P(T)?0:1};function V(T){for(var v=T.g.length,E=[],I=0;I<v;I++)E[I]=~T.g[I];return new o(E,~T.h).add(_)}t.abs=function(){return N(this)?V(this):this},t.add=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],I=0,S=0;S<=v;S++){var k=I+(this.i(S)&65535)+(T.i(S)&65535),A=(k>>>16)+(this.i(S)>>>16)+(T.i(S)>>>16);I=A>>>16,k&=65535,A&=65535,E[S]=A<<16|k}return new o(E,E[E.length-1]&-2147483648?-1:0)};function x(T,v){return T.add(V(v))}t.j=function(T){if(P(this)||P(T))return y;if(N(this))return N(T)?V(this).j(V(T)):V(V(this).j(T));if(N(T))return V(this.j(V(T)));if(0>this.l(R)&&0>T.l(R))return h(this.m()*T.m());for(var v=this.g.length+T.g.length,E=[],I=0;I<2*v;I++)E[I]=0;for(I=0;I<this.g.length;I++)for(var S=0;S<T.g.length;S++){var k=this.i(I)>>>16,A=this.i(I)&65535,Re=T.i(S)>>>16,it=T.i(S)&65535;E[2*I+2*S]+=A*it,w(E,2*I+2*S),E[2*I+2*S+1]+=k*it,w(E,2*I+2*S+1),E[2*I+2*S+1]+=A*Re,w(E,2*I+2*S+1),E[2*I+2*S+2]+=k*Re,w(E,2*I+2*S+2)}for(I=0;I<v;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=v;I<2*v;I++)E[I]=0;return new o(E,0)};function w(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function C(T,v){this.g=T,this.h=v}function b(T,v){if(P(v))throw Error("division by zero");if(P(T))return new C(y,y);if(N(T))return v=b(V(T),v),new C(V(v.g),V(v.h));if(N(v))return v=b(T,V(v)),new C(V(v.g),v.h);if(30<T.g.length){if(N(T)||N(v))throw Error("slowDivide_ only works with positive integers.");for(var E=_,I=v;0>=I.l(T);)E=B(E),I=B(I);var S=$(E,1),k=$(I,1);for(I=$(I,2),E=$(E,2);!P(I);){var A=k.add(I);0>=A.l(T)&&(S=S.add(E),k=A),I=$(I,1),E=$(E,1)}return v=x(T,S.j(v)),new C(S,v)}for(S=y;0<=T.l(v);){for(E=Math.max(1,Math.floor(T.m()/v.m())),I=Math.ceil(Math.log(E)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),k=h(E),A=k.j(v);N(A)||0<A.l(T);)E-=I,k=h(E),A=k.j(v);P(k)&&(k=_),S=S.add(k),T=x(T,A)}return new C(S,T)}t.A=function(T){return b(this,T).h},t.and=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)&T.i(I);return new o(E,this.h&T.h)},t.or=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)|T.i(I);return new o(E,this.h|T.h)},t.xor=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)^T.i(I);return new o(E,this.h^T.h)};function B(T){for(var v=T.g.length+1,E=[],I=0;I<v;I++)E[I]=T.i(I)<<1|T.i(I-1)>>>31;return new o(E,T.h)}function $(T,v){var E=v>>5;v%=32;for(var I=T.g.length-E,S=[],k=0;k<I;k++)S[k]=0<v?T.i(k+E)>>>v|T.i(k+E+1)<<32-v:T.i(k+E);return new o(S,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,kv=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=f,Or=o}).apply(typeof im<"u"?im:typeof self<"u"?self:typeof window<"u"?window:{});var ca=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pv,Rs,Dv,ka,Wc,Nv,bv,Vv;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,c,d){return a==Array.prototype||a==Object.prototype||(a[c]=d.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof ca=="object"&&ca];for(var c=0;c<a.length;++c){var d=a[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function i(a,c){if(c)e:{var d=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var D=a[g];if(!(D in d))break e;d=d[D]}a=a[a.length-1],g=d[a],c=c(g),c!=g&&c!=null&&e(d,a,{configurable:!0,writable:!0,value:c})}}function s(a,c){a instanceof String&&(a+="");var d=0,g=!1,D={next:function(){if(!g&&d<a.length){var L=d++;return{value:c(L,a[L]),done:!1}}return g=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(a){return a||function(){return s(this,function(c,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var c=typeof a;return c=c!="object"?c:a?Array.isArray(a)?"array":c:"null",c=="array"||c=="object"&&typeof a.length=="number"}function h(a){var c=typeof a;return c=="object"&&a!=null||c=="function"}function f(a,c,d){return a.call.apply(a.bind,arguments)}function y(a,c,d){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,g),a.apply(c,D)}}return function(){return a.apply(c,arguments)}}function _(a,c,d){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:y,_.apply(null,arguments)}function R(a,c){var d=Array.prototype.slice.call(arguments,1);return function(){var g=d.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function P(a,c){function d(){}d.prototype=c.prototype,a.aa=c.prototype,a.prototype=new d,a.prototype.constructor=a,a.Qb=function(g,D,L){for(var H=Array(arguments.length-2),we=2;we<arguments.length;we++)H[we-2]=arguments[we];return c.prototype[D].apply(g,H)}}function N(a){const c=a.length;if(0<c){const d=Array(c);for(let g=0;g<c;g++)d[g]=a[g];return d}return[]}function V(a,c){for(let d=1;d<arguments.length;d++){const g=arguments[d];if(u(g)){const D=a.length||0,L=g.length||0;a.length=D+L;for(let H=0;H<L;H++)a[D+H]=g[H]}else a.push(g)}}class x{constructor(c,d){this.i=c,this.j=d,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function w(a){return/^[\s\xa0]*$/.test(a)}function C(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function b(a){return b[" "](a),a}b[" "]=function(){};var B=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function $(a,c,d){for(const g in a)c.call(d,a[g],g,a)}function T(a,c){for(const d in a)c.call(void 0,a[d],d,a)}function v(a){const c={};for(const d in a)c[d]=a[d];return c}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(a,c){let d,g;for(let D=1;D<arguments.length;D++){g=arguments[D];for(d in g)a[d]=g[d];for(let L=0;L<E.length;L++)d=E[L],Object.prototype.hasOwnProperty.call(g,d)&&(a[d]=g[d])}}function S(a){var c=1;a=a.split(":");const d=[];for(;0<c&&a.length;)d.push(a.shift()),c--;return a.length&&d.push(a.join(":")),d}function k(a){l.setTimeout(()=>{throw a},0)}function A(){var a=K;let c=null;return a.g&&(c=a.g,a.g=a.g.next,a.g||(a.h=null),c.next=null),c}class Re{constructor(){this.h=this.g=null}add(c,d){const g=it.get();g.set(c,d),this.h?this.h.next=g:this.g=g,this.h=g}}var it=new x(()=>new kt,a=>a.reset());class kt{constructor(){this.next=this.g=this.h=null}set(c,d){this.h=c,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let We,q=!1,K=new Re,W=()=>{const a=l.Promise.resolve(void 0);We=()=>{a.then(se)}};var se=()=>{for(var a;a=A();){try{a.h.call(a.g)}catch(d){k(d)}var c=it;c.j(a),100>c.h&&(c.h++,a.next=c.g,c.g=a)}q=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function oe(a,c){this.type=a,this.g=this.target=c,this.defaultPrevented=!1}oe.prototype.h=function(){this.defaultPrevented=!0};var ae=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,c=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const d=()=>{};l.addEventListener("test",d,c),l.removeEventListener("test",d,c)}catch{}return a}();function Pt(a,c){if(oe.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var d=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=c,c=a.relatedTarget){if(B){e:{try{b(c.nodeName);var D=!0;break e}catch{}D=!1}D||(c=null)}}else d=="mouseover"?c=a.fromElement:d=="mouseout"&&(c=a.toElement);this.relatedTarget=c,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Et[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Pt.aa.h.call(this)}}P(Pt,oe);var Et={2:"touch",3:"pen",4:"mouse"};Pt.prototype.h=function(){Pt.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Dt="closure_listenable_"+(1e6*Math.random()|0),Yi=0;function Xi(a,c,d,g,D){this.listener=a,this.proxy=null,this.src=c,this.type=d,this.capture=!!g,this.ha=D,this.key=++Yi,this.da=this.fa=!1}function Nn(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function bn(a){this.src=a,this.g={},this.h=0}bn.prototype.add=function(a,c,d,g,D){var L=a.toString();a=this.g[L],a||(a=this.g[L]=[],this.h++);var H=Vn(a,c,g,D);return-1<H?(c=a[H],d||(c.fa=!1)):(c=new Xi(c,this.src,L,!!g,D),c.fa=d,a.push(c)),c};function _r(a,c){var d=c.type;if(d in a.g){var g=a.g[d],D=Array.prototype.indexOf.call(g,c,void 0),L;(L=0<=D)&&Array.prototype.splice.call(g,D,1),L&&(Nn(c),a.g[d].length==0&&(delete a.g[d],a.h--))}}function Vn(a,c,d,g){for(var D=0;D<a.length;++D){var L=a[D];if(!L.da&&L.listener==c&&L.capture==!!d&&L.ha==g)return D}return-1}var wr="closure_lm_"+(1e6*Math.random()|0),Ln={};function Er(a,c,d,g,D){if(Array.isArray(c)){for(var L=0;L<c.length;L++)Er(a,c[L],d,g,D);return null}return d=Qe(d),a&&a[Dt]?a.K(c,d,h(g)?!!g.capture:!1,D):Ji(a,c,d,!1,g,D)}function Ji(a,c,d,g,D,L){if(!c)throw Error("Invalid event type");var H=h(D)?!!D.capture:!!D,we=Z(a);if(we||(a[wr]=we=new bn(a)),d=we.add(c,d,g,H,L),d.proxy)return d;if(g=U(),d.proxy=g,g.src=a,g.listener=d,a.addEventListener)ae||(D=H),D===void 0&&(D=!1),a.addEventListener(c.toString(),g,D);else if(a.attachEvent)a.attachEvent(M(c.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return d}function U(){function a(d){return c.call(a.src,a.listener,d)}const c=G;return a}function J(a,c,d,g,D){if(Array.isArray(c))for(var L=0;L<c.length;L++)J(a,c[L],d,g,D);else g=h(g)?!!g.capture:!!g,d=Qe(d),a&&a[Dt]?(a=a.i,c=String(c).toString(),c in a.g&&(L=a.g[c],d=Vn(L,d,g,D),-1<d&&(Nn(L[d]),Array.prototype.splice.call(L,d,1),L.length==0&&(delete a.g[c],a.h--)))):a&&(a=Z(a))&&(c=a.g[c.toString()],a=-1,c&&(a=Vn(c,d,g,D)),(d=-1<a?c[a]:null)&&O(d))}function O(a){if(typeof a!="number"&&a&&!a.da){var c=a.src;if(c&&c[Dt])_r(c.i,a);else{var d=a.type,g=a.proxy;c.removeEventListener?c.removeEventListener(d,g,a.capture):c.detachEvent?c.detachEvent(M(d),g):c.addListener&&c.removeListener&&c.removeListener(g),(d=Z(c))?(_r(d,a),d.h==0&&(d.src=null,c[wr]=null)):Nn(a)}}}function M(a){return a in Ln?Ln[a]:Ln[a]="on"+a}function G(a,c){if(a.da)a=!0;else{c=new Pt(c,this);var d=a.listener,g=a.ha||a.src;a.fa&&O(a),a=d.call(g,c)}return a}function Z(a){return a=a[wr],a instanceof bn?a:null}var ce="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qe(a){return typeof a=="function"?a:(a[ce]||(a[ce]=function(c){return a.handleEvent(c)}),a[ce])}function ye(){le.call(this),this.i=new bn(this),this.M=this,this.F=null}P(ye,le),ye.prototype[Dt]=!0,ye.prototype.removeEventListener=function(a,c,d,g){J(this,a,c,d,g)};function He(a,c){var d,g=a.F;if(g)for(d=[];g;g=g.F)d.push(g);if(a=a.M,g=c.type||c,typeof c=="string")c=new oe(c,a);else if(c instanceof oe)c.target=c.target||a;else{var D=c;c=new oe(g,a),I(c,D)}if(D=!0,d)for(var L=d.length-1;0<=L;L--){var H=c.g=d[L];D=Tr(H,g,!0,c)&&D}if(H=c.g=a,D=Tr(H,g,!0,c)&&D,D=Tr(H,g,!1,c)&&D,d)for(L=0;L<d.length;L++)H=c.g=d[L],D=Tr(H,g,!1,c)&&D}ye.prototype.N=function(){if(ye.aa.N.call(this),this.i){var a=this.i,c;for(c in a.g){for(var d=a.g[c],g=0;g<d.length;g++)Nn(d[g]);delete a.g[c],a.h--}}this.F=null},ye.prototype.K=function(a,c,d,g){return this.i.add(String(a),c,!1,d,g)},ye.prototype.L=function(a,c,d,g){return this.i.add(String(a),c,!0,d,g)};function Tr(a,c,d,g){if(c=a.i.g[String(c)],!c)return!0;c=c.concat();for(var D=!0,L=0;L<c.length;++L){var H=c[L];if(H&&!H.da&&H.capture==d){var we=H.listener,Ye=H.ha||H.src;H.fa&&_r(a.i,H),D=we.call(Ye,g)!==!1&&D}}return D&&!g.defaultPrevented}function Zi(a,c,d){if(typeof a=="function")d&&(a=_(a,d));else if(a&&typeof a.handleEvent=="function")a=_(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(a,c||0)}function es(a){a.g=Zi(()=>{a.g=null,a.i&&(a.i=!1,es(a))},a.l);const c=a.h;a.h=null,a.m.apply(null,c)}class Po extends le{constructor(c,d){super(),this.m=c,this.l=d,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:es(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function On(a){le.call(this),this.h=a,this.g={}}P(On,le);var mn=[];function jn(a){$(a.g,function(c,d){this.g.hasOwnProperty(d)&&O(c)},a),a.g={}}On.prototype.N=function(){On.aa.N.call(this),jn(this)},On.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gn=l.JSON.stringify,Do=l.JSON.parse,h0=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Wl(){}Wl.prototype.h=null;function Gd(a){return a.h||(a.h=a.i())}function Kd(){}var ts={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Hl(){oe.call(this,"d")}P(Hl,oe);function ql(){oe.call(this,"c")}P(ql,oe);var Ir={},Qd=null;function No(){return Qd=Qd||new ye}Ir.La="serverreachability";function Yd(a){oe.call(this,Ir.La,a)}P(Yd,oe);function ns(a){const c=No();He(c,new Yd(c))}Ir.STAT_EVENT="statevent";function Xd(a,c){oe.call(this,Ir.STAT_EVENT,a),this.stat=c}P(Xd,oe);function pt(a){const c=No();He(c,new Xd(c,a))}Ir.Ma="timingevent";function Jd(a,c){oe.call(this,Ir.Ma,a),this.size=c}P(Jd,oe);function rs(a,c){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},c)}function is(){this.g=!0}is.prototype.xa=function(){this.g=!1};function d0(a,c,d,g,D,L){a.info(function(){if(a.g)if(L)for(var H="",we=L.split("&"),Ye=0;Ye<we.length;Ye++){var me=we[Ye].split("=");if(1<me.length){var st=me[0];me=me[1];var ot=st.split("_");H=2<=ot.length&&ot[1]=="type"?H+(st+"="+me+"&"):H+(st+"=redacted&")}}else H=null;else H=L;return"XMLHTTP REQ ("+g+") [attempt "+D+"]: "+c+`
`+d+`
`+H})}function f0(a,c,d,g,D,L,H){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+D+"]: "+c+`
`+d+`
`+L+" "+H})}function ei(a,c,d,g){a.info(function(){return"XMLHTTP TEXT ("+c+"): "+m0(a,d)+(g?" "+g:"")})}function p0(a,c){a.info(function(){return"TIMEOUT: "+c})}is.prototype.info=function(){};function m0(a,c){if(!a.g)return c;if(!c)return null;try{var d=JSON.parse(c);if(d){for(a=0;a<d.length;a++)if(Array.isArray(d[a])){var g=d[a];if(!(2>g.length)){var D=g[1];if(Array.isArray(D)&&!(1>D.length)){var L=D[0];if(L!="noop"&&L!="stop"&&L!="close")for(var H=1;H<D.length;H++)D[H]=""}}}}return gn(d)}catch{return c}}var bo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Zd={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Gl;function Vo(){}P(Vo,Wl),Vo.prototype.g=function(){return new XMLHttpRequest},Vo.prototype.i=function(){return{}},Gl=new Vo;function Mn(a,c,d,g){this.j=a,this.i=c,this.l=d,this.R=g||1,this.U=new On(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ef}function ef(){this.i=null,this.g="",this.h=!1}var tf={},Kl={};function Ql(a,c,d){a.L=1,a.v=Mo(yn(c)),a.m=d,a.P=!0,nf(a,null)}function nf(a,c){a.F=Date.now(),Lo(a),a.A=yn(a.v);var d=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),yf(d.i,"t",g),a.C=0,d=a.j.J,a.h=new ef,a.g=Lf(a.j,d?c:null,!a.m),0<a.O&&(a.M=new Po(_(a.Y,a,a.g),a.O)),c=a.U,d=a.g,g=a.ca;var D="readystatechange";Array.isArray(D)||(D&&(mn[0]=D.toString()),D=mn);for(var L=0;L<D.length;L++){var H=Er(d,D[L],g||c.handleEvent,!1,c.h||c);if(!H)break;c.g[H.key]=H}c=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,c)):(a.u="GET",a.g.ea(a.A,a.u,null,c)),ns(),d0(a.i,a.u,a.A,a.l,a.R,a.m)}Mn.prototype.ca=function(a){a=a.target;const c=this.M;c&&vn(a)==3?c.j():this.Y(a)},Mn.prototype.Y=function(a){try{if(a==this.g)e:{const ot=vn(this.g);var c=this.g.Ba();const ri=this.g.Z();if(!(3>ot)&&(ot!=3||this.g&&(this.h.h||this.g.oa()||Sf(this.g)))){this.J||ot!=4||c==7||(c==8||0>=ri?ns(3):ns(2)),Yl(this);var d=this.g.Z();this.X=d;t:if(rf(this)){var g=Sf(this.g);a="";var D=g.length,L=vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Sr(this),ss(this);var H="";break t}this.h.i=new l.TextDecoder}for(c=0;c<D;c++)this.h.h=!0,a+=this.h.i.decode(g[c],{stream:!(L&&c==D-1)});g.length=0,this.h.g+=a,this.C=0,H=this.h.g}else H=this.g.oa();if(this.o=d==200,f0(this.i,this.u,this.A,this.l,this.R,ot,d),this.o){if(this.T&&!this.K){t:{if(this.g){var we,Ye=this.g;if((we=Ye.g?Ye.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(we)){var me=we;break t}}me=null}if(d=me)ei(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xl(this,d);else{this.o=!1,this.s=3,pt(12),Sr(this),ss(this);break e}}if(this.P){d=!0;let Gt;for(;!this.J&&this.C<H.length;)if(Gt=g0(this,H),Gt==Kl){ot==4&&(this.s=4,pt(14),d=!1),ei(this.i,this.l,null,"[Incomplete Response]");break}else if(Gt==tf){this.s=4,pt(15),ei(this.i,this.l,H,"[Invalid Chunk]"),d=!1;break}else ei(this.i,this.l,Gt,null),Xl(this,Gt);if(rf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ot!=4||H.length!=0||this.h.h||(this.s=1,pt(16),d=!1),this.o=this.o&&d,!d)ei(this.i,this.l,H,"[Invalid Chunked Response]"),Sr(this),ss(this);else if(0<H.length&&!this.W){this.W=!0;var st=this.j;st.g==this&&st.ba&&!st.M&&(st.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),ru(st),st.M=!0,pt(11))}}else ei(this.i,this.l,H,null),Xl(this,H);ot==4&&Sr(this),this.o&&!this.J&&(ot==4?Df(this.j,this):(this.o=!1,Lo(this)))}else b0(this.g),d==400&&0<H.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),Sr(this),ss(this)}}}catch{}finally{}};function rf(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function g0(a,c){var d=a.C,g=c.indexOf(`
`,d);return g==-1?Kl:(d=Number(c.substring(d,g)),isNaN(d)?tf:(g+=1,g+d>c.length?Kl:(c=c.slice(g,g+d),a.C=g+d,c)))}Mn.prototype.cancel=function(){this.J=!0,Sr(this)};function Lo(a){a.S=Date.now()+a.I,sf(a,a.I)}function sf(a,c){if(a.B!=null)throw Error("WatchDog timer not null");a.B=rs(_(a.ba,a),c)}function Yl(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Mn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(p0(this.i,this.A),this.L!=2&&(ns(),pt(17)),Sr(this),this.s=2,ss(this)):sf(this,this.S-a)};function ss(a){a.j.G==0||a.J||Df(a.j,a)}function Sr(a){Yl(a);var c=a.M;c&&typeof c.ma=="function"&&c.ma(),a.M=null,jn(a.U),a.g&&(c=a.g,a.g=null,c.abort(),c.ma())}function Xl(a,c){try{var d=a.j;if(d.G!=0&&(d.g==a||Jl(d.h,a))){if(!a.K&&Jl(d.h,a)&&d.G==3){try{var g=d.Da.g.parse(c)}catch{g=null}if(Array.isArray(g)&&g.length==3){var D=g;if(D[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<a.F)Wo(d),zo(d);else break e;nu(d),pt(18)}}else d.za=D[1],0<d.za-d.T&&37500>D[2]&&d.F&&d.v==0&&!d.C&&(d.C=rs(_(d.Za,d),6e3));if(1>=lf(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else Ar(d,11)}else if((a.K||d.g==a)&&Wo(d),!w(c))for(D=d.Da.g.parse(c),c=0;c<D.length;c++){let me=D[c];if(d.T=me[0],me=me[1],d.G==2)if(me[0]=="c"){d.K=me[1],d.ia=me[2];const st=me[3];st!=null&&(d.la=st,d.j.info("VER="+d.la));const ot=me[4];ot!=null&&(d.Aa=ot,d.j.info("SVER="+d.Aa));const ri=me[5];ri!=null&&typeof ri=="number"&&0<ri&&(g=1.5*ri,d.L=g,d.j.info("backChannelRequestTimeoutMs_="+g)),g=d;const Gt=a.g;if(Gt){const qo=Gt.g?Gt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qo){var L=g.h;L.g||qo.indexOf("spdy")==-1&&qo.indexOf("quic")==-1&&qo.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Zl(L,L.h),L.h=null))}if(g.D){const iu=Gt.g?Gt.g.getResponseHeader("X-HTTP-Session-Id"):null;iu&&(g.ya=iu,Te(g.I,g.D,iu))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-a.F,d.j.info("Handshake RTT: "+d.R+"ms")),g=d;var H=a;if(g.qa=Vf(g,g.J?g.ia:null,g.W),H.K){uf(g.h,H);var we=H,Ye=g.L;Ye&&(we.I=Ye),we.B&&(Yl(we),Lo(we)),g.g=H}else kf(g);0<d.i.length&&$o(d)}else me[0]!="stop"&&me[0]!="close"||Ar(d,7);else d.G==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?Ar(d,7):tu(d):me[0]!="noop"&&d.l&&d.l.ta(me),d.v=0)}}ns(4)}catch{}}var y0=class{constructor(a,c){this.g=a,this.map=c}};function of(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function af(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function lf(a){return a.h?1:a.g?a.g.size:0}function Jl(a,c){return a.h?a.h==c:a.g?a.g.has(c):!1}function Zl(a,c){a.g?a.g.add(c):a.h=c}function uf(a,c){a.h&&a.h==c?a.h=null:a.g&&a.g.has(c)&&a.g.delete(c)}of.prototype.cancel=function(){if(this.i=cf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function cf(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let c=a.i;for(const d of a.g.values())c=c.concat(d.D);return c}return N(a.i)}function v0(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var c=[],d=a.length,g=0;g<d;g++)c.push(a[g]);return c}c=[],d=0;for(g in a)c[d++]=a[g];return c}function _0(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var c=[];a=a.length;for(var d=0;d<a;d++)c.push(d);return c}c=[],d=0;for(const g in a)c[d++]=g;return c}}}function hf(a,c){if(a.forEach&&typeof a.forEach=="function")a.forEach(c,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,c,void 0);else for(var d=_0(a),g=v0(a),D=g.length,L=0;L<D;L++)c.call(void 0,g[L],d&&d[L],a)}var df=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function w0(a,c){if(a){a=a.split("&");for(var d=0;d<a.length;d++){var g=a[d].indexOf("="),D=null;if(0<=g){var L=a[d].substring(0,g);D=a[d].substring(g+1)}else L=a[d];c(L,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function xr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof xr){this.h=a.h,Oo(this,a.j),this.o=a.o,this.g=a.g,jo(this,a.s),this.l=a.l;var c=a.i,d=new ls;d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),ff(this,d),this.m=a.m}else a&&(c=String(a).match(df))?(this.h=!1,Oo(this,c[1]||"",!0),this.o=os(c[2]||""),this.g=os(c[3]||"",!0),jo(this,c[4]),this.l=os(c[5]||"",!0),ff(this,c[6]||"",!0),this.m=os(c[7]||"")):(this.h=!1,this.i=new ls(null,this.h))}xr.prototype.toString=function(){var a=[],c=this.j;c&&a.push(as(c,pf,!0),":");var d=this.g;return(d||c=="file")&&(a.push("//"),(c=this.o)&&a.push(as(c,pf,!0),"@"),a.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&a.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(as(d,d.charAt(0)=="/"?I0:T0,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",as(d,x0)),a.join("")};function yn(a){return new xr(a)}function Oo(a,c,d){a.j=d?os(c,!0):c,a.j&&(a.j=a.j.replace(/:$/,""))}function jo(a,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);a.s=c}else a.s=null}function ff(a,c,d){c instanceof ls?(a.i=c,A0(a.i,a.h)):(d||(c=as(c,S0)),a.i=new ls(c,a.h))}function Te(a,c,d){a.i.set(c,d)}function Mo(a){return Te(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function os(a,c){return a?c?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function as(a,c,d){return typeof a=="string"?(a=encodeURI(a).replace(c,E0),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function E0(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var pf=/[#\/\?@]/g,T0=/[#\?:]/g,I0=/[#\?]/g,S0=/[#\?@]/g,x0=/#/g;function ls(a,c){this.h=this.g=null,this.i=a||null,this.j=!!c}function Fn(a){a.g||(a.g=new Map,a.h=0,a.i&&w0(a.i,function(c,d){a.add(decodeURIComponent(c.replace(/\+/g," ")),d)}))}t=ls.prototype,t.add=function(a,c){Fn(this),this.i=null,a=ti(this,a);var d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(c),this.h+=1,this};function mf(a,c){Fn(a),c=ti(a,c),a.g.has(c)&&(a.i=null,a.h-=a.g.get(c).length,a.g.delete(c))}function gf(a,c){return Fn(a),c=ti(a,c),a.g.has(c)}t.forEach=function(a,c){Fn(this),this.g.forEach(function(d,g){d.forEach(function(D){a.call(c,D,g,this)},this)},this)},t.na=function(){Fn(this);const a=Array.from(this.g.values()),c=Array.from(this.g.keys()),d=[];for(let g=0;g<c.length;g++){const D=a[g];for(let L=0;L<D.length;L++)d.push(c[g])}return d},t.V=function(a){Fn(this);let c=[];if(typeof a=="string")gf(this,a)&&(c=c.concat(this.g.get(ti(this,a))));else{a=Array.from(this.g.values());for(let d=0;d<a.length;d++)c=c.concat(a[d])}return c},t.set=function(a,c){return Fn(this),this.i=null,a=ti(this,a),gf(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[c]),this.h+=1,this},t.get=function(a,c){return a?(a=this.V(a),0<a.length?String(a[0]):c):c};function yf(a,c,d){mf(a,c),0<d.length&&(a.i=null,a.g.set(ti(a,c),N(d)),a.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],c=Array.from(this.g.keys());for(var d=0;d<c.length;d++){var g=c[d];const L=encodeURIComponent(String(g)),H=this.V(g);for(g=0;g<H.length;g++){var D=L;H[g]!==""&&(D+="="+encodeURIComponent(String(H[g]))),a.push(D)}}return this.i=a.join("&")};function ti(a,c){return c=String(c),a.j&&(c=c.toLowerCase()),c}function A0(a,c){c&&!a.j&&(Fn(a),a.i=null,a.g.forEach(function(d,g){var D=g.toLowerCase();g!=D&&(mf(this,g),yf(this,D,d))},a)),a.j=c}function R0(a,c){const d=new is;if(l.Image){const g=new Image;g.onload=R(Bn,d,"TestLoadImage: loaded",!0,c,g),g.onerror=R(Bn,d,"TestLoadImage: error",!1,c,g),g.onabort=R(Bn,d,"TestLoadImage: abort",!1,c,g),g.ontimeout=R(Bn,d,"TestLoadImage: timeout",!1,c,g),l.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else c(!1)}function C0(a,c){const d=new is,g=new AbortController,D=setTimeout(()=>{g.abort(),Bn(d,"TestPingServer: timeout",!1,c)},1e4);fetch(a,{signal:g.signal}).then(L=>{clearTimeout(D),L.ok?Bn(d,"TestPingServer: ok",!0,c):Bn(d,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(D),Bn(d,"TestPingServer: error",!1,c)})}function Bn(a,c,d,g,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),g(d)}catch{}}function k0(){this.g=new h0}function P0(a,c,d){const g=d||"";try{hf(a,function(D,L){let H=D;h(D)&&(H=gn(D)),c.push(g+L+"="+encodeURIComponent(H))})}catch(D){throw c.push(g+"type="+encodeURIComponent("_badmap")),D}}function Fo(a){this.l=a.Ub||null,this.j=a.eb||!1}P(Fo,Wl),Fo.prototype.g=function(){return new Bo(this.l,this.j)},Fo.prototype.i=function(a){return function(){return a}}({});function Bo(a,c){ye.call(this),this.D=a,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(Bo,ye),t=Bo.prototype,t.open=function(a,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=c,this.readyState=1,cs(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(c.body=a),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,us(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,cs(this)),this.g&&(this.readyState=3,cs(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;vf(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function vf(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var c=a.value?a.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!a.done}))&&(this.response=this.responseText+=c)}a.done?us(this):cs(this),this.readyState==3&&vf(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,us(this))},t.Qa=function(a){this.g&&(this.response=a,us(this))},t.ga=function(){this.g&&us(this)};function us(a){a.readyState=4,a.l=null,a.j=null,a.v=null,cs(a)}t.setRequestHeader=function(a,c){this.u.append(a,c)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],c=this.h.entries();for(var d=c.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=c.next();return a.join(`\r
`)};function cs(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Bo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function _f(a){let c="";return $(a,function(d,g){c+=g,c+=":",c+=d,c+=`\r
`}),c}function eu(a,c,d){e:{for(g in d){var g=!1;break e}g=!0}g||(d=_f(d),typeof a=="string"?d!=null&&encodeURIComponent(String(d)):Te(a,c,d))}function Ne(a){ye.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(Ne,ye);var D0=/^https?$/i,N0=["POST","PUT"];t=Ne.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,c,d,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);c=c?c.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Gl.g(),this.v=this.o?Gd(this.o):Gd(Gl),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(c,String(a),!0),this.B=!1}catch(L){wf(this,L);return}if(a=d||"",d=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var D in g)d.set(D,g[D]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const L of g.keys())d.set(L,g.get(L));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(d.keys()).find(L=>L.toLowerCase()=="content-type"),D=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(N0,c,void 0))||g||D||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,H]of d)this.g.setRequestHeader(L,H);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{If(this),this.u=!0,this.g.send(a),this.u=!1}catch(L){wf(this,L)}};function wf(a,c){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=c,a.m=5,Ef(a),Uo(a)}function Ef(a){a.A||(a.A=!0,He(a,"complete"),He(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,He(this,"complete"),He(this,"abort"),Uo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Uo(this,!0)),Ne.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Tf(this):this.bb())},t.bb=function(){Tf(this)};function Tf(a){if(a.h&&typeof o<"u"&&(!a.v[1]||vn(a)!=4||a.Z()!=2)){if(a.u&&vn(a)==4)Zi(a.Ea,0,a);else if(He(a,"readystatechange"),vn(a)==4){a.h=!1;try{const H=a.Z();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var d;if(!(d=c)){var g;if(g=H===0){var D=String(a.D).match(df)[1]||null;!D&&l.self&&l.self.location&&(D=l.self.location.protocol.slice(0,-1)),g=!D0.test(D?D.toLowerCase():"")}d=g}if(d)He(a,"complete"),He(a,"success");else{a.m=6;try{var L=2<vn(a)?a.g.statusText:""}catch{L=""}a.l=L+" ["+a.Z()+"]",Ef(a)}}finally{Uo(a)}}}}function Uo(a,c){if(a.g){If(a);const d=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,c||He(a,"ready");try{d.onreadystatechange=g}catch{}}}function If(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function vn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<vn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var c=this.g.responseText;return a&&c.indexOf(a)==0&&(c=c.substring(a.length)),Do(c)}};function Sf(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function b0(a){const c={};a=(a.g&&2<=vn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(w(a[g]))continue;var d=S(a[g]);const D=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const L=c[D]||[];c[D]=L,L.push(d)}T(c,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function hs(a,c,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||c}function xf(a){this.Aa=0,this.i=[],this.j=new is,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=hs("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=hs("baseRetryDelayMs",5e3,a),this.cb=hs("retryDelaySeedMs",1e4,a),this.Wa=hs("forwardChannelMaxRetries",2,a),this.wa=hs("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new of(a&&a.concurrentRequestLimit),this.Da=new k0,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=xf.prototype,t.la=8,t.G=1,t.connect=function(a,c,d,g){pt(0),this.W=a,this.H=c||{},d&&g!==void 0&&(this.H.OSID=d,this.H.OAID=g),this.F=this.X,this.I=Vf(this,null,this.W),$o(this)};function tu(a){if(Af(a),a.G==3){var c=a.U++,d=yn(a.I);if(Te(d,"SID",a.K),Te(d,"RID",c),Te(d,"TYPE","terminate"),ds(a,d),c=new Mn(a,a.j,c),c.L=2,c.v=Mo(yn(d)),d=!1,l.navigator&&l.navigator.sendBeacon)try{d=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!d&&l.Image&&(new Image().src=c.v,d=!0),d||(c.g=Lf(c.j,null),c.g.ea(c.v)),c.F=Date.now(),Lo(c)}bf(a)}function zo(a){a.g&&(ru(a),a.g.cancel(),a.g=null)}function Af(a){zo(a),a.u&&(l.clearTimeout(a.u),a.u=null),Wo(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function $o(a){if(!af(a.h)&&!a.s){a.s=!0;var c=a.Ga;We||W(),q||(We(),q=!0),K.add(c,a),a.B=0}}function V0(a,c){return lf(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=c.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=rs(_(a.Ga,a,c),Nf(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const D=new Mn(this,this.j,a);let L=this.o;if(this.S&&(L?(L=v(L),I(L,this.S)):L=this.S),this.m!==null||this.O||(D.H=L,L=null),this.P)e:{for(var c=0,d=0;d<this.i.length;d++){t:{var g=this.i[d];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(c+=g,4096<c){c=d;break e}if(c===4096||d===this.i.length-1){c=d+1;break e}}c=1e3}else c=1e3;c=Cf(this,D,c),d=yn(this.I),Te(d,"RID",a),Te(d,"CVER",22),this.D&&Te(d,"X-HTTP-Session-Id",this.D),ds(this,d),L&&(this.O?c="headers="+encodeURIComponent(String(_f(L)))+"&"+c:this.m&&eu(d,this.m,L)),Zl(this.h,D),this.Ua&&Te(d,"TYPE","init"),this.P?(Te(d,"$req",c),Te(d,"SID","null"),D.T=!0,Ql(D,d,null)):Ql(D,d,c),this.G=2}}else this.G==3&&(a?Rf(this,a):this.i.length==0||af(this.h)||Rf(this))};function Rf(a,c){var d;c?d=c.l:d=a.U++;const g=yn(a.I);Te(g,"SID",a.K),Te(g,"RID",d),Te(g,"AID",a.T),ds(a,g),a.m&&a.o&&eu(g,a.m,a.o),d=new Mn(a,a.j,d,a.B+1),a.m===null&&(d.H=a.o),c&&(a.i=c.D.concat(a.i)),c=Cf(a,d,1e3),d.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Zl(a.h,d),Ql(d,g,c)}function ds(a,c){a.H&&$(a.H,function(d,g){Te(c,g,d)}),a.l&&hf({},function(d,g){Te(c,g,d)})}function Cf(a,c,d){d=Math.min(a.i.length,d);var g=a.l?_(a.l.Na,a.l,a):null;e:{var D=a.i;let L=-1;for(;;){const H=["count="+d];L==-1?0<d?(L=D[0].g,H.push("ofs="+L)):L=0:H.push("ofs="+L);let we=!0;for(let Ye=0;Ye<d;Ye++){let me=D[Ye].g;const st=D[Ye].map;if(me-=L,0>me)L=Math.max(0,D[Ye].g-100),we=!1;else try{P0(st,H,"req"+me+"_")}catch{g&&g(st)}}if(we){g=H.join("&");break e}}}return a=a.i.splice(0,d),c.D=a,g}function kf(a){if(!a.g&&!a.u){a.Y=1;var c=a.Fa;We||W(),q||(We(),q=!0),K.add(c,a),a.v=0}}function nu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=rs(_(a.Fa,a),Nf(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Pf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=rs(_(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),zo(this),Pf(this))};function ru(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Pf(a){a.g=new Mn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var c=yn(a.qa);Te(c,"RID","rpc"),Te(c,"SID",a.K),Te(c,"AID",a.T),Te(c,"CI",a.F?"0":"1"),!a.F&&a.ja&&Te(c,"TO",a.ja),Te(c,"TYPE","xmlhttp"),ds(a,c),a.m&&a.o&&eu(c,a.m,a.o),a.L&&(a.g.I=a.L);var d=a.g;a=a.ia,d.L=1,d.v=Mo(yn(c)),d.m=null,d.P=!0,nf(d,a)}t.Za=function(){this.C!=null&&(this.C=null,zo(this),nu(this),pt(19))};function Wo(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Df(a,c){var d=null;if(a.g==c){Wo(a),ru(a),a.g=null;var g=2}else if(Jl(a.h,c))d=c.D,uf(a.h,c),g=1;else return;if(a.G!=0){if(c.o)if(g==1){d=c.m?c.m.length:0,c=Date.now()-c.F;var D=a.B;g=No(),He(g,new Jd(g,d)),$o(a)}else kf(a);else if(D=c.s,D==3||D==0&&0<c.X||!(g==1&&V0(a,c)||g==2&&nu(a)))switch(d&&0<d.length&&(c=a.h,c.i=c.i.concat(d)),D){case 1:Ar(a,5);break;case 4:Ar(a,10);break;case 3:Ar(a,6);break;default:Ar(a,2)}}}function Nf(a,c){let d=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(d*=2),d*c}function Ar(a,c){if(a.j.info("Error code "+c),c==2){var d=_(a.fb,a),g=a.Xa;const D=!g;g=new xr(g||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Oo(g,"https"),Mo(g),D?R0(g.toString(),d):C0(g.toString(),d)}else pt(2);a.G=0,a.l&&a.l.sa(c),bf(a),Af(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function bf(a){if(a.G=0,a.ka=[],a.l){const c=cf(a.h);(c.length!=0||a.i.length!=0)&&(V(a.ka,c),V(a.ka,a.i),a.h.i.length=0,N(a.i),a.i.length=0),a.l.ra()}}function Vf(a,c,d){var g=d instanceof xr?yn(d):new xr(d);if(g.g!="")c&&(g.g=c+"."+g.g),jo(g,g.s);else{var D=l.location;g=D.protocol,c=c?c+"."+D.hostname:D.hostname,D=+D.port;var L=new xr(null);g&&Oo(L,g),c&&(L.g=c),D&&jo(L,D),d&&(L.l=d),g=L}return d=a.D,c=a.ya,d&&c&&Te(g,d,c),Te(g,"VER",a.la),ds(a,g),g}function Lf(a,c,d){if(c&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=a.Ca&&!a.pa?new Ne(new Fo({eb:d})):new Ne(a.pa),c.Ha(a.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Of(){}t=Of.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ho(){}Ho.prototype.g=function(a,c){return new Nt(a,c)};function Nt(a,c){ye.call(this),this.g=new xf(c),this.l=a,this.h=c&&c.messageUrlParams||null,a=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(a?a["X-WebChannel-Content-Type"]=c.messageContentType:a={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(a?a["X-WebChannel-Client-Profile"]=c.va:a={"X-WebChannel-Client-Profile":c.va}),this.g.S=a,(a=c&&c.Sb)&&!w(a)&&(this.g.m=a),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!w(c)&&(this.g.D=c,a=this.h,a!==null&&c in a&&(a=this.h,c in a&&delete a[c])),this.j=new ni(this)}P(Nt,ye),Nt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Nt.prototype.close=function(){tu(this.g)},Nt.prototype.o=function(a){var c=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.u&&(d={},d.__data__=gn(a),a=d);c.i.push(new y0(c.Ya++,a)),c.G==3&&$o(c)},Nt.prototype.N=function(){this.g.l=null,delete this.j,tu(this.g),delete this.g,Nt.aa.N.call(this)};function jf(a){Hl.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var c=a.__sm__;if(c){e:{for(const d in c){a=d;break e}a=void 0}(this.i=a)&&(a=this.i,c=c!==null&&a in c?c[a]:void 0),this.data=c}else this.data=a}P(jf,Hl);function Mf(){ql.call(this),this.status=1}P(Mf,ql);function ni(a){this.g=a}P(ni,Of),ni.prototype.ua=function(){He(this.g,"a")},ni.prototype.ta=function(a){He(this.g,new jf(a))},ni.prototype.sa=function(a){He(this.g,new Mf)},ni.prototype.ra=function(){He(this.g,"b")},Ho.prototype.createWebChannel=Ho.prototype.g,Nt.prototype.send=Nt.prototype.o,Nt.prototype.open=Nt.prototype.m,Nt.prototype.close=Nt.prototype.close,Vv=function(){return new Ho},bv=function(){return No()},Nv=Ir,Wc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},bo.NO_ERROR=0,bo.TIMEOUT=8,bo.HTTP_ERROR=6,ka=bo,Zd.COMPLETE="complete",Dv=Zd,Kd.EventType=ts,ts.OPEN="a",ts.CLOSE="b",ts.ERROR="c",ts.MESSAGE="d",ye.prototype.listen=ye.prototype.K,Rs=Kd,Ne.prototype.listenOnce=Ne.prototype.L,Ne.prototype.getLastError=Ne.prototype.Ka,Ne.prototype.getLastErrorCode=Ne.prototype.Ba,Ne.prototype.getStatus=Ne.prototype.Z,Ne.prototype.getResponseJson=Ne.prototype.Oa,Ne.prototype.getResponseText=Ne.prototype.oa,Ne.prototype.send=Ne.prototype.ea,Ne.prototype.setWithCredentials=Ne.prototype.Ha,Pv=Ne}).apply(typeof ca<"u"?ca:typeof self<"u"?self:typeof window<"u"?window:{});const sm="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ct.UNAUTHENTICATED=new ct(null),ct.GOOGLE_CREDENTIALS=new ct("google-credentials-uid"),ct.FIRST_PARTY=new ct("first-party-uid"),ct.MOCK_USER=new ct("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qi="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr=new wv("@firebase/firestore");function Es(){return Wr.logLevel}function X(t,...e){if(Wr.logLevel<=fe.DEBUG){const n=e.map(id);Wr.debug(`Firestore (${qi}): ${t}`,...n)}}function kn(t,...e){if(Wr.logLevel<=fe.ERROR){const n=e.map(id);Wr.error(`Firestore (${qi}): ${t}`,...n)}}function Li(t,...e){if(Wr.logLevel<=fe.WARN){const n=e.map(id);Wr.warn(`Firestore (${qi}): ${t}`,...n)}}function id(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t="Unexpected state"){const e=`FIRESTORE (${qi}) INTERNAL ASSERTION FAILED: `+t;throw kn(e),new Error(e)}function _e(t,e){t||ne()}function ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends Yr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class O1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ct.UNAUTHENTICATED))}shutdown(){}}class j1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class M1{constructor(e){this.t=e,this.currentUser=ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){_e(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new jr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new jr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new jr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_e(typeof r.accessToken=="string"),new Lv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string"),new ct(e)}}class F1{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ct.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class B1{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new F1(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class U1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class z1{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){_e(this.o===void 0);const r=s=>{s.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,X("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(_e(typeof n.token=="string"),this.R=n.token,new U1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=$1(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ge(t,e){return t<e?-1:t>e?1:0}function Oi(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Y(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return $e.fromMillis(Date.now())}static fromDate(e){return $e.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new $e(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.timestamp=e}static fromTimestamp(e){return new re(e)}static min(){return new re(new $e(0,0))}static max(){return new re(new $e(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(),r===void 0?r=e.length-n:r>e.length-n&&ne(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return co.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof co?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Se extends co{construct(e,n,r){return new Se(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Se(n)}static emptyPath(){return new Se([])}}const W1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ze extends co{construct(e,n,r){return new Ze(e,n,r)}static isValidIdentifier(e){return W1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ze.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ze(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Y(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new Y(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Y(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new Y(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ze(n)}static emptyPath(){return new Ze([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.path=e}static fromPath(e){return new ee(Se.fromString(e))}static fromName(e){return new ee(Se.fromString(e).popFirst(5))}static empty(){return new ee(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Se.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ee(new Se(e.slice()))}}function H1(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=re.fromTimestamp(r===1e9?new $e(n+1,0):new $e(n,r));return new dr(i,ee.empty(),e)}function q1(t){return new dr(t.readTime,t.key,-1)}class dr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new dr(re.min(),ee.empty(),-1)}static max(){return new dr(re.max(),ee.empty(),-1)}}function G1(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ee.comparator(t.documentKey,e.documentKey),n!==0?n:ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Q1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Io(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==K1)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(i=>i?F.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new F((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(e[h]).next(f=>{o[h]=f,++l,l===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new F((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function Y1(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function So(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}sd.oe=-1;function Pl(t){return t==null}function ol(t){return t===0&&1/t==-1/0}function X1(t){return typeof t=="number"&&Number.isInteger(t)&&!ol(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Xr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function jv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,n){this.comparator=e,this.root=n||Je.EMPTY}insert(e,n){return new De(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Je.BLACK,null,null))}remove(e){return new De(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Je.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ha(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ha(this.root,e,this.comparator,!1)}getReverseIterator(){return new ha(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ha(this.root,e,this.comparator,!0)}}class ha{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Je{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Je.RED,this.left=i??Je.EMPTY,this.right=s??Je.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Je(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Je.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Je.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Je.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Je.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ne();const e=this.left.check();if(e!==this.right.check())throw ne();return e+(this.isRed()?0:1)}}Je.EMPTY=null,Je.RED=!0,Je.BLACK=!1;Je.EMPTY=new class{constructor(){this.size=0}get key(){throw ne()}get value(){throw ne()}get color(){throw ne()}get left(){throw ne()}get right(){throw ne()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Je(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.comparator=e,this.data=new De(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new am(this.data.getIterator())}getIteratorFrom(e){return new am(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof tt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new tt(this.comparator);return n.data=e,n}}class am{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.fields=e,e.sort(Ze.comparator)}static empty(){return new Lt([])}unionWith(e){let n=new tt(Ze.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Lt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Oi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Mv("Invalid base64 string: "+s):s}}(e);return new rt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rt.EMPTY_BYTE_STRING=new rt("");const J1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fr(t){if(_e(!!t),typeof t=="string"){let e=0;const n=J1.exec(t);if(_e(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Oe(t.seconds),nanos:Oe(t.nanos)}}function Oe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Hr(t){return typeof t=="string"?rt.fromBase64String(t):rt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function od(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function ad(t){const e=t.mapValue.fields.__previous_value__;return od(e)?ad(e):e}function ho(t){const e=fr(t.mapValue.fields.__local_write_time__.timestampValue);return new $e(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,n,r,i,s,o,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h}}class fo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new fo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof fo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da={mapValue:{}};function qr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?od(t)?4:tI(t)?9007199254740991:eI(t)?10:11:ne()}function pn(t,e){if(t===e)return!0;const n=qr(t);if(n!==qr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ho(t).isEqual(ho(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=fr(i.timestampValue),l=fr(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Hr(i.bytesValue).isEqual(Hr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Oe(i.geoPointValue.latitude)===Oe(s.geoPointValue.latitude)&&Oe(i.geoPointValue.longitude)===Oe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Oe(i.integerValue)===Oe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Oe(i.doubleValue),l=Oe(s.doubleValue);return o===l?ol(o)===ol(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Oi(t.arrayValue.values||[],e.arrayValue.values||[],pn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(om(o)!==om(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!pn(o[u],l[u])))return!1;return!0}(t,e);default:return ne()}}function po(t,e){return(t.values||[]).find(n=>pn(n,e))!==void 0}function ji(t,e){if(t===e)return 0;const n=qr(t),r=qr(e);if(n!==r)return ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=Oe(s.integerValue||s.doubleValue),u=Oe(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return lm(t.timestampValue,e.timestampValue);case 4:return lm(ho(t),ho(e));case 5:return ge(t.stringValue,e.stringValue);case 6:return function(s,o){const l=Hr(s),u=Hr(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){const f=ge(l[h],u[h]);if(f!==0)return f}return ge(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=ge(Oe(s.latitude),Oe(o.latitude));return l!==0?l:ge(Oe(s.longitude),Oe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return um(t.arrayValue,e.arrayValue);case 10:return function(s,o){var l,u,h,f;const y=s.fields||{},_=o.fields||{},R=(l=y.value)===null||l===void 0?void 0:l.arrayValue,P=(u=_.value)===null||u===void 0?void 0:u.arrayValue,N=ge(((h=R==null?void 0:R.values)===null||h===void 0?void 0:h.length)||0,((f=P==null?void 0:P.values)===null||f===void 0?void 0:f.length)||0);return N!==0?N:um(R,P)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===da.mapValue&&o===da.mapValue)return 0;if(s===da.mapValue)return 1;if(o===da.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=o.fields||{},f=Object.keys(h);u.sort(),f.sort();for(let y=0;y<u.length&&y<f.length;++y){const _=ge(u[y],f[y]);if(_!==0)return _;const R=ji(l[u[y]],h[f[y]]);if(R!==0)return R}return ge(u.length,f.length)}(t.mapValue,e.mapValue);default:throw ne()}}function lm(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);const n=fr(t),r=fr(e),i=ge(n.seconds,r.seconds);return i!==0?i:ge(n.nanos,r.nanos)}function um(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=ji(n[i],r[i]);if(s)return s}return ge(n.length,r.length)}function Mi(t){return Hc(t)}function Hc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=fr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Hr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ee.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Hc(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Hc(n.fields[o])}`;return i+"}"}(t.mapValue):ne()}function cm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function qc(t){return!!t&&"integerValue"in t}function ld(t){return!!t&&"arrayValue"in t}function hm(t){return!!t&&"nullValue"in t}function dm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Pa(t){return!!t&&"mapValue"in t}function eI(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Bs(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Xr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Bs(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Bs(t.arrayValue.values[n]);return e}return Object.assign({},t)}function tI(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.value=e}static empty(){return new It({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Pa(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bs(n)}setAll(e){let n=Ze.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=Bs(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Pa(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return pn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Pa(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Xr(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new It(Bs(this.value))}}function Fv(t){const e=[];return Xr(t.fields,(n,r)=>{const i=new Ze([n]);if(Pa(r)){const s=Fv(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Lt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new dt(e,0,re.min(),re.min(),re.min(),It.empty(),0)}static newFoundDocument(e,n,r,i){return new dt(e,1,n,re.min(),r,i,0)}static newNoDocument(e,n){return new dt(e,2,n,re.min(),re.min(),It.empty(),0)}static newUnknownDocument(e,n){return new dt(e,3,n,re.min(),re.min(),It.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=It.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=It.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,n){this.position=e,this.inclusive=n}}function fm(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ee.comparator(ee.fromName(o.referenceValue),n.key):r=ji(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function pm(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!pn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,n="asc"){this.field=e,this.dir=n}}function nI(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{}class Be extends Bv{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new iI(e,n,r):n==="array-contains"?new aI(e,r):n==="in"?new lI(e,r):n==="not-in"?new uI(e,r):n==="array-contains-any"?new cI(e,r):new Be(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new sI(e,r):new oI(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ji(n,this.value)):n!==null&&qr(this.value)===qr(n)&&this.matchesComparison(ji(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rn extends Bv{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new rn(e,n)}matches(e){return Uv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Uv(t){return t.op==="and"}function zv(t){return rI(t)&&Uv(t)}function rI(t){for(const e of t.filters)if(e instanceof rn)return!1;return!0}function Gc(t){if(t instanceof Be)return t.field.canonicalString()+t.op.toString()+Mi(t.value);if(zv(t))return t.filters.map(e=>Gc(e)).join(",");{const e=t.filters.map(n=>Gc(n)).join(",");return`${t.op}(${e})`}}function $v(t,e){return t instanceof Be?function(r,i){return i instanceof Be&&r.op===i.op&&r.field.isEqual(i.field)&&pn(r.value,i.value)}(t,e):t instanceof rn?function(r,i){return i instanceof rn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&$v(o,i.filters[l]),!0):!1}(t,e):void ne()}function Wv(t){return t instanceof Be?function(n){return`${n.field.canonicalString()} ${n.op} ${Mi(n.value)}`}(t):t instanceof rn?function(n){return n.op.toString()+" {"+n.getFilters().map(Wv).join(" ,")+"}"}(t):"Filter"}class iI extends Be{constructor(e,n,r){super(e,n,r),this.key=ee.fromName(r.referenceValue)}matches(e){const n=ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class sI extends Be{constructor(e,n){super(e,"in",n),this.keys=Hv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class oI extends Be{constructor(e,n){super(e,"not-in",n),this.keys=Hv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Hv(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ee.fromName(r.referenceValue))}class aI extends Be{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ld(n)&&po(n.arrayValue,this.value)}}class lI extends Be{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&po(this.value.arrayValue,n)}}class uI extends Be{constructor(e,n){super(e,"not-in",n)}matches(e){if(po(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!po(this.value.arrayValue,n)}}class cI extends Be{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ld(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>po(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function mm(t,e=null,n=[],r=[],i=null,s=null,o=null){return new hI(t,e,n,r,i,s,o)}function ud(t){const e=ie(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Gc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Pl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Mi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Mi(r)).join(",")),e.ue=n}return e.ue}function cd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!nI(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!$v(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!pm(t.startAt,e.startAt)&&pm(t.endAt,e.endAt)}function Kc(t){return ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function dI(t,e,n,r,i,s,o,l){return new Gi(t,e,n,r,i,s,o,l)}function hd(t){return new Gi(t)}function gm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function qv(t){return t.collectionGroup!==null}function Us(t){const e=ie(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new tt(Ze.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new mo(s,r))}),n.has(Ze.keyField().canonicalString())||e.ce.push(new mo(Ze.keyField(),r))}return e.ce}function dn(t){const e=ie(t);return e.le||(e.le=fI(e,Us(t))),e.le}function fI(t,e){if(t.limitType==="F")return mm(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new mo(i.field,s)});const n=t.endAt?new al(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new al(t.startAt.position,t.startAt.inclusive):null;return mm(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Qc(t,e){const n=t.filters.concat([e]);return new Gi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Yc(t,e,n){return new Gi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Dl(t,e){return cd(dn(t),dn(e))&&t.limitType===e.limitType}function Gv(t){return`${ud(dn(t))}|lt:${t.limitType}`}function si(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Wv(i)).join(", ")}]`),Pl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Mi(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Mi(i)).join(",")),`Target(${r})`}(dn(t))}; limitType=${t.limitType})`}function Nl(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ee.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Us(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,u){const h=fm(o,l,u);return o.inclusive?h<=0:h<0}(r.startAt,Us(r),i)||r.endAt&&!function(o,l,u){const h=fm(o,l,u);return o.inclusive?h>=0:h>0}(r.endAt,Us(r),i))}(t,e)}function pI(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Kv(t){return(e,n)=>{let r=!1;for(const i of Us(t)){const s=mI(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function mI(t,e,n){const r=t.field.isKeyField()?ee.comparator(e.key,n.key):function(s,o,l){const u=o.data.field(s),h=l.data.field(s);return u!==null&&h!==null?ji(u,h):ne()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Xr(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return jv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=new De(ee.comparator);function Pn(){return gI}const Qv=new De(ee.comparator);function Cs(...t){let e=Qv;for(const n of t)e=e.insert(n.key,n);return e}function Yv(t){let e=Qv;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function br(){return zs()}function Xv(){return zs()}function zs(){return new Ki(t=>t.toString(),(t,e)=>t.isEqual(e))}const yI=new De(ee.comparator),vI=new tt(ee.comparator);function he(...t){let e=vI;for(const n of t)e=e.add(n);return e}const _I=new tt(ge);function wI(){return _I}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dd(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ol(e)?"-0":e}}function Jv(t){return{integerValue:""+t}}function EI(t,e){return X1(e)?Jv(e):dd(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(){this._=void 0}}function TI(t,e,n){return t instanceof ll?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&od(s)&&(s=ad(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof go?e_(t,e):t instanceof yo?t_(t,e):function(i,s){const o=Zv(i,s),l=ym(o)+ym(i.Pe);return qc(o)&&qc(i.Pe)?Jv(l):dd(i.serializer,l)}(t,e)}function II(t,e,n){return t instanceof go?e_(t,e):t instanceof yo?t_(t,e):n}function Zv(t,e){return t instanceof ul?function(r){return qc(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class ll extends bl{}class go extends bl{constructor(e){super(),this.elements=e}}function e_(t,e){const n=n_(e);for(const r of t.elements)n.some(i=>pn(i,r))||n.push(r);return{arrayValue:{values:n}}}class yo extends bl{constructor(e){super(),this.elements=e}}function t_(t,e){let n=n_(e);for(const r of t.elements)n=n.filter(i=>!pn(i,r));return{arrayValue:{values:n}}}class ul extends bl{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function ym(t){return Oe(t.integerValue||t.doubleValue)}function n_(t){return ld(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function SI(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof go&&i instanceof go||r instanceof yo&&i instanceof yo?Oi(r.elements,i.elements,pn):r instanceof ul&&i instanceof ul?pn(r.Pe,i.Pe):r instanceof ll&&i instanceof ll}(t.transform,e.transform)}class xI{constructor(e,n){this.version=e,this.transformResults=n}}class tn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new tn}static exists(e){return new tn(void 0,e)}static updateTime(e){return new tn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Da(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Vl{}function r_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new fd(t.key,tn.none()):new xo(t.key,t.data,tn.none());{const n=t.data,r=It.empty();let i=new tt(Ze.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new vr(t.key,r,new Lt(i.toArray()),tn.none())}}function AI(t,e,n){t instanceof xo?function(i,s,o){const l=i.value.clone(),u=_m(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof vr?function(i,s,o){if(!Da(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=_m(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(i_(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function $s(t,e,n,r){return t instanceof xo?function(s,o,l,u){if(!Da(s.precondition,o))return l;const h=s.value.clone(),f=wm(s.fieldTransforms,u,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof vr?function(s,o,l,u){if(!Da(s.precondition,o))return l;const h=wm(s.fieldTransforms,u,o),f=o.data;return f.setAll(i_(s)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(y=>y.field))}(t,e,n,r):function(s,o,l){return Da(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function RI(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=Zv(r.transform,i||null);s!=null&&(n===null&&(n=It.empty()),n.set(r.field,s))}return n||null}function vm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Oi(r,i,(s,o)=>SI(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class xo extends Vl{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class vr extends Vl{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function i_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function _m(t,e,n){const r=new Map;_e(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,II(o,l,n[i]))}return r}function wm(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,TI(s,o,e))}return r}class fd extends Vl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class CI extends Vl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&AI(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=$s(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=$s(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Xv();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const u=r_(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),he())}isEqual(e){return this.batchId===e.batchId&&Oi(this.mutations,e.mutations,(n,r)=>vm(n,r))&&Oi(this.baseMutations,e.baseMutations,(n,r)=>vm(n,r))}}class pd{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){_e(e.mutations.length===r.length);let i=function(){return yI}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new pd(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me,de;function NI(t){switch(t){default:return ne();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function s_(t){if(t===void 0)return kn("GRPC error has no .code"),j.UNKNOWN;switch(t){case Me.OK:return j.OK;case Me.CANCELLED:return j.CANCELLED;case Me.UNKNOWN:return j.UNKNOWN;case Me.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case Me.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case Me.INTERNAL:return j.INTERNAL;case Me.UNAVAILABLE:return j.UNAVAILABLE;case Me.UNAUTHENTICATED:return j.UNAUTHENTICATED;case Me.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case Me.NOT_FOUND:return j.NOT_FOUND;case Me.ALREADY_EXISTS:return j.ALREADY_EXISTS;case Me.PERMISSION_DENIED:return j.PERMISSION_DENIED;case Me.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case Me.ABORTED:return j.ABORTED;case Me.OUT_OF_RANGE:return j.OUT_OF_RANGE;case Me.UNIMPLEMENTED:return j.UNIMPLEMENTED;case Me.DATA_LOSS:return j.DATA_LOSS;default:return ne()}}(de=Me||(Me={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI=new Or([4294967295,4294967295],0);function Em(t){const e=bI().encode(t),n=new kv;return n.update(e),new Uint8Array(n.digest())}function Tm(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Or([n,r],0),new Or([i,s],0)]}class md{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ks(`Invalid padding: ${n}`);if(r<0)throw new ks(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ks(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ks(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Or.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Or.fromNumber(r)));return i.compare(VI)===1&&(i=new Or([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Em(e),[r,i]=Tm(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new md(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=Em(e),[r,i]=Tm(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ks extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ao.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ll(re.min(),i,new De(ge),Pn(),he())}}class Ao{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ao(r,n,he(),he(),he())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class o_{constructor(e,n){this.targetId=e,this.me=n}}class a_{constructor(e,n,r=rt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Im{constructor(){this.fe=0,this.ge=xm(),this.pe=rt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=he(),n=he(),r=he();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ne()}}),new Ao(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=xm()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,_e(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class LI{constructor(e){this.Le=e,this.Be=new Map,this.ke=Pn(),this.qe=Sm(),this.Qe=new De(ge)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ne()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Kc(s))if(r===0){const o=new ee(s.path);this.Ue(n,o,dt.newNoDocument(o,re.min()))}else _e(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=Hr(r).toUint8Array()}catch(u){if(u instanceof Mv)return Li("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new md(o,i,s)}catch(u){return Li(u instanceof ks?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const l=this.Je(o);if(l){if(s.current&&Kc(l.target)){const u=new ee(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,dt.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=he();this.qe.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Ll(e,n,this.Qe,this.ke,r);return this.ke=Pn(),this.qe=Sm(),this.Qe=new De(ge),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Im,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new tt(ge),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Im),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Sm(){return new De(ee.comparator)}function xm(){return new De(ee.comparator)}const OI={asc:"ASCENDING",desc:"DESCENDING"},jI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MI={and:"AND",or:"OR"};class FI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Xc(t,e){return t.useProto3Json||Pl(e)?e:{value:e}}function cl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function l_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function BI(t,e){return cl(t,e.toTimestamp())}function fn(t){return _e(!!t),re.fromTimestamp(function(n){const r=fr(n);return new $e(r.seconds,r.nanos)}(t))}function gd(t,e){return Jc(t,e).canonicalString()}function Jc(t,e){const n=function(i){return new Se(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function u_(t){const e=Se.fromString(t);return _e(p_(e)),e}function Zc(t,e){return gd(t.databaseId,e.path)}function Lu(t,e){const n=u_(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ee(h_(n))}function c_(t,e){return gd(t.databaseId,e)}function UI(t){const e=u_(t);return e.length===4?Se.emptyPath():h_(e)}function eh(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function h_(t){return _e(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Am(t,e,n){return{name:Zc(t,e),fields:n.value.mapValue.fields}}function zI(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ne()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,f){return h.useProto3Json?(_e(f===void 0||typeof f=="string"),rt.fromBase64String(f||"")):(_e(f===void 0||f instanceof Buffer||f instanceof Uint8Array),rt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const f=h.code===void 0?j.UNKNOWN:s_(h.code);return new Y(f,h.message||"")}(o);n=new a_(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Lu(t,r.document.name),s=fn(r.document.updateTime),o=r.document.createTime?fn(r.document.createTime):re.min(),l=new It({mapValue:{fields:r.document.fields}}),u=dt.newFoundDocument(i,s,o,l),h=r.targetIds||[],f=r.removedTargetIds||[];n=new Na(h,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Lu(t,r.document),s=r.readTime?fn(r.readTime):re.min(),o=dt.newNoDocument(i,s),l=r.removedTargetIds||[];n=new Na([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Lu(t,r.document),s=r.removedTargetIds||[];n=new Na([],s,i,null)}else{if(!("filter"in e))return ne();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new DI(i,s),l=r.targetId;n=new o_(l,o)}}return n}function $I(t,e){let n;if(e instanceof xo)n={update:Am(t,e.key,e.value)};else if(e instanceof fd)n={delete:Zc(t,e.key)};else if(e instanceof vr)n={update:Am(t,e.key,e.data),updateMask:JI(e.fieldMask)};else{if(!(e instanceof CI))return ne();n={verify:Zc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof ll)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof go)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof yo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ul)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw ne()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:BI(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ne()}(t,e.precondition)),n}function WI(t,e){return t&&t.length>0?(_e(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?fn(i.updateTime):fn(s);return o.isEqual(re.min())&&(o=fn(s)),new xI(o,i.transformResults||[])}(n,e))):[]}function HI(t,e){return{documents:[c_(t,e.path)]}}function qI(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=c_(t,i);const s=function(h){if(h.length!==0)return f_(rn.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(h){if(h.length!==0)return h.map(f=>function(_){return{field:oi(_.field),direction:QI(_.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Xc(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:i}}function GI(t){let e=UI(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){_e(r===1);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(y){const _=d_(y);return _ instanceof rn&&zv(_)?_.getFilters():[_]}(n.where));let o=[];n.orderBy&&(o=function(y){return y.map(_=>function(P){return new mo(ai(P.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(_))}(n.orderBy));let l=null;n.limit&&(l=function(y){let _;return _=typeof y=="object"?y.value:y,Pl(_)?null:_}(n.limit));let u=null;n.startAt&&(u=function(y){const _=!!y.before,R=y.values||[];return new al(R,_)}(n.startAt));let h=null;return n.endAt&&(h=function(y){const _=!y.before,R=y.values||[];return new al(R,_)}(n.endAt)),dI(e,i,o,s,l,"F",u,h)}function KI(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function d_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ai(n.unaryFilter.field);return Be.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ai(n.unaryFilter.field);return Be.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ai(n.unaryFilter.field);return Be.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ai(n.unaryFilter.field);return Be.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ne()}}(t):t.fieldFilter!==void 0?function(n){return Be.create(ai(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ne()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return rn.create(n.compositeFilter.filters.map(r=>d_(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ne()}}(n.compositeFilter.op))}(t):ne()}function QI(t){return OI[t]}function YI(t){return jI[t]}function XI(t){return MI[t]}function oi(t){return{fieldPath:t.canonicalString()}}function ai(t){return Ze.fromServerFormat(t.fieldPath)}function f_(t){return t instanceof Be?function(n){if(n.op==="=="){if(dm(n.value))return{unaryFilter:{field:oi(n.field),op:"IS_NAN"}};if(hm(n.value))return{unaryFilter:{field:oi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(dm(n.value))return{unaryFilter:{field:oi(n.field),op:"IS_NOT_NAN"}};if(hm(n.value))return{unaryFilter:{field:oi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oi(n.field),op:YI(n.op),value:n.value}}}(t):t instanceof rn?function(n){const r=n.getFilters().map(i=>f_(i));return r.length===1?r[0]:{compositeFilter:{op:XI(n.op),filters:r}}}(t):ne()}function JI(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function p_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,n,r,i,s=re.min(),o=re.min(),l=rt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Yn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Yn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Yn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Yn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e){this.ct=e}}function eS(t){const e=GI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Yc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(){this.un=new nS}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(dr.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(dr.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class nS{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new tt(Se.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new tt(Se.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Fi(0)}static kn(){return new Fi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(){this.changes=new Ki(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&$s(r.mutation,i,Lt.empty(),$e.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,he()).next(()=>r))}getLocalViewOfDocuments(e,n,r=he()){const i=br();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Cs();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=br();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,he()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=Pn();const o=zs(),l=function(){return zs()}();return n.forEach((u,h)=>{const f=r.get(h.key);i.has(h.key)&&(f===void 0||f.mutation instanceof vr)?s=s.insert(h.key,h):f!==void 0?(o.set(h.key,f.mutation.getFieldMask()),$s(f.mutation,h,f.mutation.getFieldMask(),$e.now())):o.set(h.key,Lt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,f)=>o.set(h,f)),n.forEach((h,f)=>{var y;return l.set(h,new iS(f,(y=o.get(h))!==null&&y!==void 0?y:null))}),l))}recalculateAndSaveOverlays(e,n){const r=zs();let i=new De((o,l)=>o-l),s=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let f=r.get(u)||Lt.empty();f=l.applyToLocalView(h,f),r.set(u,f);const y=(i.get(l.batchId)||he()).add(u);i=i.insert(l.batchId,y)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,f=u.value,y=Xv();f.forEach(_=>{if(!s.has(_)){const R=r_(n.get(_),r.get(_));R!==null&&y.set(_,R),s=s.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,y))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ee.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):qv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):F.resolve(br());let l=-1,u=s;return o.next(h=>F.forEach(h,(f,y)=>(l<y.largestBatchId&&(l=y.largestBatchId),s.get(f)?F.resolve():this.remoteDocumentCache.getEntry(e,f).next(_=>{u=u.insert(f,_)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,he())).next(f=>({batchId:l,changes:Yv(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ee(n)).next(r=>{let i=Cs();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Cs();return this.indexManager.getCollectionParents(e,s).next(l=>F.forEach(l,u=>{const h=function(y,_){return new Gi(_,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(f=>{f.forEach((y,_)=>{o=o.insert(y,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,h)=>{const f=h.getKey();o.get(f)===null&&(o=o.insert(f,dt.newInvalidDocument(f)))});let l=Cs();return o.forEach((u,h)=>{const f=s.get(u);f!==void 0&&$s(f.mutation,h,Lt.empty(),$e.now()),Nl(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:fn(i.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:eS(i.bundledQuery),readTime:fn(i.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(){this.overlays=new De(ee.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=br();return F.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const i=br(),s=n.length+1,o=new ee(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return F.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new De((h,f)=>h-f);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let f=s.get(h.largestBatchId);f===null&&(f=br(),s=s.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const l=br(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,f)=>l.set(h,f)),!(l.size()>=i)););return F.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new PI(n,r));let s=this.Ir.get(n);s===void 0&&(s=he(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(){this.sessionToken=rt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(){this.Tr=new tt(qe.Er),this.dr=new tt(qe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new qe(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new qe(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ee(new Se([])),r=new qe(n,e),i=new qe(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ee(new Se([])),r=new qe(n,e),i=new qe(n,e+1);let s=he();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new qe(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class qe{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ee.comparator(e.key,n.key)||ge(e.wr,n.wr)}static Ar(e,n){return ge(e.wr,n.wr)||ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new tt(qe.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new kI(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.br=this.br.add(new qe(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return F.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new qe(n,0),i=new qe(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const l=this.Dr(o.wr);s.push(l)}),F.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new tt(ge);return n.forEach(i=>{const s=new qe(i,0),o=new qe(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],l=>{r=r.add(l.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ee.isDocumentKey(s)||(s=s.child(""));const o=new qe(new ee(s),0);let l=new tt(ge);return this.br.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(u.wr)),!0)},o),F.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){_e(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,i=>{const s=new qe(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new qe(n,0),i=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e){this.Mr=e,this.docs=function(){return new De(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():dt.newInvalidDocument(n))}getEntries(e,n){let r=Pn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():dt.newInvalidDocument(i))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Pn();const o=n.path,l=new ee(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:f}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||G1(q1(f),r)<=0||(i.has(f.key)||Nl(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return F.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ne()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new hS(this)}getSize(e){return F.resolve(this.size)}}class hS extends rS{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(e){this.persistence=e,this.Nr=new Ki(n=>ud(n),cd),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.Lr=0,this.Br=new yd,this.targetCount=0,this.kr=Fi.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Fi(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),F.waitFor(s).next(()=>i)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),F.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e,n){this.qr={},this.overlays={},this.Qr=new sd(0),this.Kr=!1,this.Kr=!0,this.$r=new lS,this.referenceDelegate=e(this),this.Ur=new dS(this),this.indexManager=new tS,this.remoteDocumentCache=function(i){return new cS(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new ZI(n),this.Gr=new oS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new aS,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new uS(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const i=new pS(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class pS extends Q1{constructor(e){super(),this.currentSequenceNumber=e}}class vd{constructor(e){this.persistence=e,this.Jr=new yd,this.Yr=null}static Zr(e){return new vd(e)}get Xr(){if(this.Yr)return this.Yr;throw ne()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const i=ee.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,re.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=he(),i=he();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new _d(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return ET()?8:Y1(_T())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new mS;return this.Xi(e,n,o).next(l=>{if(s.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Es()<=fe.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",si(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(Es()<=fe.DEBUG&&X("QueryEngine","Query:",si(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Es()<=fe.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",si(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,dn(n))):F.resolve())}Yi(e,n){if(gm(n))return F.resolve(null);let r=dn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Yc(n,null,"F"),r=dn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=he(...s);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.ts(n,l);return this.ns(n,h,o,u.readTime)?this.Yi(e,Yc(n,null,"F")):this.rs(e,h,n,u)}))})))}Zi(e,n,r,i){return gm(n)||i.isEqual(re.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?F.resolve(null):(Es()<=fe.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),si(n)),this.rs(e,o,n,H1(i,-1)).next(l=>l))})}ts(e,n){let r=new tt(Kv(e));return n.forEach((i,s)=>{Nl(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Es()<=fe.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",si(n)),this.Ji.getDocumentsMatchingQuery(e,n,dr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new De(ge),this._s=new Ki(s=>ud(s),cd),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sS(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function vS(t,e,n,r){return new yS(t,e,n,r)}async function m_(t,e){const n=ie(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=he();for(const h of i){o.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}for(const h of s){l.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:l}))})})}function _S(t,e){const n=ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,f){const y=h.batch,_=y.keys();let R=F.resolve();return _.forEach(P=>{R=R.next(()=>f.getEntry(u,P)).next(N=>{const V=h.docVersions.get(P);_e(V!==null),N.version.compareTo(V)<0&&(y.applyToRemoteDocument(N,h),N.isValidDocument()&&(N.setReadTime(h.commitVersion),f.addEntry(N)))})}),R.next(()=>l.mutationQueue.removeMutationBatch(u,y))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=he();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function g_(t){const e=ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function wS(t,e){const n=ie(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const l=[];e.targetChanges.forEach((f,y)=>{const _=i.get(y);if(!_)return;l.push(n.Ur.removeMatchingKeys(s,f.removedDocuments,y).next(()=>n.Ur.addMatchingKeys(s,f.addedDocuments,y)));let R=_.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(y)!==null?R=R.withResumeToken(rt.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):f.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(f.resumeToken,r)),i=i.insert(y,R),function(N,V,x){return N.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(_,R,f)&&l.push(n.Ur.updateTargetData(s,R))});let u=Pn(),h=he();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),l.push(ES(s,o,e.documentUpdates).next(f=>{u=f.Ps,h=f.Is})),!r.isEqual(re.min())){const f=n.Ur.getLastRemoteSnapshotVersion(s).next(y=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(f)}return F.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.os=i,s))}function ES(t,e,n){let r=he(),i=he();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Pn();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(re.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):X("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function TS(t,e){const n=ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function IS(t,e){const n=ie(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,F.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Yn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function th(t,e,n){const r=ie(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!So(o))throw o;X("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Rm(t,e,n){const r=ie(t);let i=re.min(),s=he();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,f){const y=ie(u),_=y._s.get(f);return _!==void 0?F.resolve(y.os.get(_)):y.Ur.getTargetData(h,f)}(r,o,dn(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:re.min(),n?s:he())).next(l=>(SS(r,pI(e),l),{documents:l,Ts:s})))}function SS(t,e,n){let r=t.us.get(e)||re.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class Cm{constructor(){this.activeTargetIds=wI()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xS{constructor(){this.so=new Cm,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Cm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){X("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){X("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fa=null;function Ou(){return fa===null?fa=function(){return 268435456+Math.round(2147483648*Math.random())}():fa++,"0x"+fa.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ut="WebChannelConnection";class kS extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const l=Ou(),u=this.xo(n,r.toUriEncodedString());X("RestConnection",`Sending RPC '${n}' ${l}:`,u,i);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,s,o),this.No(n,u,h,i).then(f=>(X("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw Li("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",u,"request:",i),f})}Lo(n,r,i,s,o,l){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=RS[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Ou();return new Promise((o,l)=>{const u=new Pv;u.setWithCredentials(!0),u.listenOnce(Dv.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ka.NO_ERROR:const f=u.getResponseJson();X(ut,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case ka.TIMEOUT:X(ut,`RPC '${e}' ${s} timed out`),l(new Y(j.DEADLINE_EXCEEDED,"Request time out"));break;case ka.HTTP_ERROR:const y=u.getStatus();if(X(ut,`RPC '${e}' ${s} failed with status:`,y,"response text:",u.getResponseText()),y>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);const R=_==null?void 0:_.error;if(R&&R.status&&R.message){const P=function(V){const x=V.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(x)>=0?x:j.UNKNOWN}(R.status);l(new Y(P,R.message))}else l(new Y(j.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Y(j.UNAVAILABLE,"Connection failed."));break;default:ne()}}finally{X(ut,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);X(ut,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",h,r,15)})}Bo(e,n,r){const i=Ou(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Vv(),l=bv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=s.join("");X(ut,`Creating RPC '${e}' stream ${i}: ${f}`,u);const y=o.createWebChannel(f,u);let _=!1,R=!1;const P=new CS({Io:V=>{R?X(ut,`Not sending because RPC '${e}' stream ${i} is closed:`,V):(_||(X(ut,`Opening RPC '${e}' stream ${i} transport.`),y.open(),_=!0),X(ut,`RPC '${e}' stream ${i} sending:`,V),y.send(V))},To:()=>y.close()}),N=(V,x,w)=>{V.listen(x,C=>{try{w(C)}catch(b){setTimeout(()=>{throw b},0)}})};return N(y,Rs.EventType.OPEN,()=>{R||(X(ut,`RPC '${e}' stream ${i} transport opened.`),P.yo())}),N(y,Rs.EventType.CLOSE,()=>{R||(R=!0,X(ut,`RPC '${e}' stream ${i} transport closed`),P.So())}),N(y,Rs.EventType.ERROR,V=>{R||(R=!0,Li(ut,`RPC '${e}' stream ${i} transport errored:`,V),P.So(new Y(j.UNAVAILABLE,"The operation could not be completed")))}),N(y,Rs.EventType.MESSAGE,V=>{var x;if(!R){const w=V.data[0];_e(!!w);const C=w,b=C.error||((x=C[0])===null||x===void 0?void 0:x.error);if(b){X(ut,`RPC '${e}' stream ${i} received error:`,b);const B=b.status;let $=function(E){const I=Me[E];if(I!==void 0)return s_(I)}(B),T=b.message;$===void 0&&($=j.INTERNAL,T="Unknown error status: "+B+" with message "+b.message),R=!0,P.So(new Y($,T)),y.close()}else X(ut,`RPC '${e}' stream ${i} received:`,w),P.bo(w)}}),N(l,Nv.STAT_EVENT,V=>{V.stat===Wc.PROXY?X(ut,`RPC '${e}' stream ${i} detected buffering proxy`):V.stat===Wc.NOPROXY&&X(ut,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{P.wo()},0),P}}function ju(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ol(t){return new FI(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&X("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e,n,r,i,s,o,l,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new y_(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(kn(n.toString()),kn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new Y(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return X("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(X("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class PS extends v_{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=zI(this.serializer,e),r=function(s){if(!("targetChange"in s))return re.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?re.min():o.readTime?fn(o.readTime):re.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=eh(this.serializer),n.addTarget=function(s,o){let l;const u=o.target;if(l=Kc(u)?{documents:HI(s,u)}:{query:qI(s,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=l_(s,o.resumeToken);const h=Xc(s,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(re.min())>0){l.readTime=cl(s,o.snapshotVersion.toTimestamp());const h=Xc(s,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=KI(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=eh(this.serializer),n.removeTarget=e,this.a_(n)}}class DS extends v_{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return _e(!!e.streamToken),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){_e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=WI(e.writeResults,e.commitTime),r=fn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=eh(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>$I(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Y(j.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Jc(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Y(j.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,Jc(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(j.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class bS{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(kn(n),this.D_=!1):X("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Jr(this)&&(X("RemoteStore","Restarting streams for network reachability change."),await async function(u){const h=ie(u);h.L_.add(4),await Ro(h),h.q_.set("Unknown"),h.L_.delete(4),await jl(h)}(this))})}),this.q_=new bS(r,i)}}async function jl(t){if(Jr(t))for(const e of t.B_)await e(!0)}async function Ro(t){for(const e of t.B_)await e(!1)}function __(t,e){const n=ie(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Id(n)?Td(n):Qi(n).r_()&&Ed(n,e))}function wd(t,e){const n=ie(t),r=Qi(n);n.N_.delete(e),r.r_()&&w_(n,e),n.N_.size===0&&(r.r_()?r.o_():Jr(n)&&n.q_.set("Unknown"))}function Ed(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Qi(t).A_(e)}function w_(t,e){t.Q_.xe(e),Qi(t).R_(e)}function Td(t){t.Q_=new LI({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Qi(t).start(),t.q_.v_()}function Id(t){return Jr(t)&&!Qi(t).n_()&&t.N_.size>0}function Jr(t){return ie(t).L_.size===0}function E_(t){t.Q_=void 0}async function LS(t){t.q_.set("Online")}async function OS(t){t.N_.forEach((e,n)=>{Ed(t,e)})}async function jS(t,e){E_(t),Id(t)?(t.q_.M_(e),Td(t)):t.q_.set("Unknown")}async function MS(t,e,n){if(t.q_.set("Online"),e instanceof a_&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(r){X("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await hl(t,r)}else if(e instanceof Na?t.Q_.Ke(e):e instanceof o_?t.Q_.He(e):t.Q_.We(e),!n.isEqual(re.min()))try{const r=await g_(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.Q_.rt(o);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.N_.get(h);f&&s.N_.set(h,f.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,h)=>{const f=s.N_.get(u);if(!f)return;s.N_.set(u,f.withResumeToken(rt.EMPTY_BYTE_STRING,f.snapshotVersion)),w_(s,u);const y=new Yn(f.target,u,h,f.sequenceNumber);Ed(s,y)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){X("RemoteStore","Failed to raise snapshot:",r),await hl(t,r)}}async function hl(t,e,n){if(!So(e))throw e;t.L_.add(1),await Ro(t),t.q_.set("Offline"),n||(n=()=>g_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await jl(t)})}function T_(t,e){return e().catch(n=>hl(t,n,e))}async function Ml(t){const e=ie(t),n=pr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;FS(e);)try{const i=await TS(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,BS(e,i)}catch(i){await hl(e,i)}I_(e)&&S_(e)}function FS(t){return Jr(t)&&t.O_.length<10}function BS(t,e){t.O_.push(e);const n=pr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function I_(t){return Jr(t)&&!pr(t).n_()&&t.O_.length>0}function S_(t){pr(t).start()}async function US(t){pr(t).p_()}async function zS(t){const e=pr(t);for(const n of t.O_)e.m_(n.mutations)}async function $S(t,e,n){const r=t.O_.shift(),i=pd.from(r,e,n);await T_(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Ml(t)}async function WS(t,e){e&&pr(t).V_&&await async function(r,i){if(function(o){return NI(o)&&o!==j.ABORTED}(i.code)){const s=r.O_.shift();pr(r).s_(),await T_(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Ml(r)}}(t,e),I_(t)&&S_(t)}async function Pm(t,e){const n=ie(t);n.asyncQueue.verifyOperationInProgress(),X("RemoteStore","RemoteStore received new credentials");const r=Jr(n);n.L_.add(3),await Ro(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await jl(n)}async function HS(t,e){const n=ie(t);e?(n.L_.delete(2),await jl(n)):e||(n.L_.add(2),await Ro(n),n.q_.set("Unknown"))}function Qi(t){return t.K_||(t.K_=function(n,r,i){const s=ie(n);return s.w_(),new PS(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:LS.bind(null,t),Ro:OS.bind(null,t),mo:jS.bind(null,t),d_:MS.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Id(t)?Td(t):t.q_.set("Unknown")):(await t.K_.stop(),E_(t))})),t.K_}function pr(t){return t.U_||(t.U_=function(n,r,i){const s=ie(n);return s.w_(),new DS(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:US.bind(null,t),mo:WS.bind(null,t),f_:zS.bind(null,t),g_:$S.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Ml(t)):(await t.U_.stop(),t.O_.length>0&&(X("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new Sd(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xd(t,e){if(kn("AsyncQueue",`${e}: ${t}`),So(t))return new Y(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ee.comparator(n.key,r.key):(n,r)=>ee.comparator(n.key,r.key),this.keyedMap=Cs(),this.sortedSet=new De(this.comparator)}static emptySet(e){return new Ai(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ai)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ai;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(){this.W_=new De(ee.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ne():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Bi{constructor(e,n,r,i,s,o,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Bi(e,n,Ai.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class GS{constructor(){this.queries=Nm(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ie(n),s=i.queries;i.queries=Nm(),s.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new Y(j.ABORTED,"Firestore shutting down"))}}function Nm(){return new Ki(t=>Gv(t),Dl)}async function KS(t,e){const n=ie(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new qS,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=xd(o,`Initialization of query '${si(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Ad(n)}async function QS(t,e){const n=ie(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function YS(t,e){const n=ie(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.j_)l.X_(i)&&(r=!0);o.z_=i}}r&&Ad(n)}function XS(t,e,n){const r=ie(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function Ad(t){t.Y_.forEach(e=>{e.next()})}var nh,bm;(bm=nh||(nh={})).ea="default",bm.Cache="cache";class JS{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Bi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Bi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==nh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e){this.key=e}}class A_{constructor(e){this.key=e}}class ZS{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=he(),this.mutatedKeys=he(),this.Aa=Kv(e),this.Ra=new Ai(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Dm,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,y)=>{const _=i.get(f),R=Nl(this.query,y)?y:null,P=!!_&&this.mutatedKeys.has(_.key),N=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let V=!1;_&&R?_.data.isEqual(R.data)?P!==N&&(r.track({type:3,doc:R}),V=!0):this.ga(_,R)||(r.track({type:2,doc:R}),V=!0,(u&&this.Aa(R,u)>0||h&&this.Aa(R,h)<0)&&(l=!0)):!_&&R?(r.track({type:0,doc:R}),V=!0):_&&!R&&(r.track({type:1,doc:_}),V=!0,(u||h)&&(l=!0)),V&&(R?(o=o.add(R),s=N?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:l,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,y)=>function(R,P){const N=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne()}};return N(R)-N(P)}(f.type,y.type)||this.Aa(f.doc,y.doc)),this.pa(r),i=i!=null&&i;const l=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,h=u!==this.Ea;return this.Ea=u,o.length!==0||h?{snapshot:new Bi(this.query,e.Ra,s,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Dm,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=he(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new A_(r))}),this.da.forEach(r=>{e.has(r)||n.push(new x_(r))}),n}ba(e){this.Ta=e.Ts,this.da=he();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Bi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class ex{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class tx{constructor(e){this.key=e,this.va=!1}}class nx{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ki(l=>Gv(l),Dl),this.Ma=new Map,this.xa=new Set,this.Oa=new De(ee.comparator),this.Na=new Map,this.La=new yd,this.Ba={},this.ka=new Map,this.qa=Fi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function rx(t,e,n=!0){const r=N_(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await R_(r,e,n,!0),i}async function ix(t,e){const n=N_(t);await R_(n,e,!0,!1)}async function R_(t,e,n,r){const i=await IS(t.localStore,dn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await sx(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&__(t.remoteStore,i),l}async function sx(t,e,n,r,i){t.Ka=(y,_,R)=>async function(N,V,x,w){let C=V.view.ma(x);C.ns&&(C=await Rm(N.localStore,V.query,!1).then(({documents:T})=>V.view.ma(T,C)));const b=w&&w.targetChanges.get(V.targetId),B=w&&w.targetMismatches.get(V.targetId)!=null,$=V.view.applyChanges(C,N.isPrimaryClient,b,B);return Lm(N,V.targetId,$.wa),$.snapshot}(t,y,_,R);const s=await Rm(t.localStore,e,!0),o=new ZS(e,s.Ts),l=o.ma(s.documents),u=Ao.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=o.applyChanges(l,t.isPrimaryClient,u);Lm(t,n,h.wa);const f=new ex(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function ox(t,e,n){const r=ie(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Dl(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await th(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&wd(r.remoteStore,i.targetId),rh(r,i.targetId)}).catch(Io)):(rh(r,i.targetId),await th(r.localStore,i.targetId,!0))}async function ax(t,e){const n=ie(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),wd(n.remoteStore,r.targetId))}async function lx(t,e,n){const r=mx(t);try{const i=await function(o,l){const u=ie(o),h=$e.now(),f=l.reduce((R,P)=>R.add(P.key),he());let y,_;return u.persistence.runTransaction("Locally write mutations","readwrite",R=>{let P=Pn(),N=he();return u.cs.getEntries(R,f).next(V=>{P=V,P.forEach((x,w)=>{w.isValidDocument()||(N=N.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(R,P)).next(V=>{y=V;const x=[];for(const w of l){const C=RI(w,y.get(w.key).overlayedDocument);C!=null&&x.push(new vr(w.key,C,Fv(C.value.mapValue),tn.exists(!0)))}return u.mutationQueue.addMutationBatch(R,h,x,l)}).next(V=>{_=V;const x=V.applyToLocalDocumentSet(y,N);return u.documentOverlayCache.saveOverlays(R,V.batchId,x)})}).then(()=>({batchId:_.batchId,changes:Yv(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let h=o.Ba[o.currentUser.toKey()];h||(h=new De(ge)),h=h.insert(l,u),o.Ba[o.currentUser.toKey()]=h}(r,i.batchId,n),await Co(r,i.changes),await Ml(r.remoteStore)}catch(i){const s=xd(i,"Failed to persist write");n.reject(s)}}async function C_(t,e){const n=ie(t);try{const r=await wS(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(_e(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?_e(o.va):i.removedDocuments.size>0&&(_e(o.va),o.va=!1))}),await Co(n,r,e)}catch(r){await Io(r)}}function Vm(t,e,n){const r=ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const l=o.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=ie(o);u.onlineState=l;let h=!1;u.queries.forEach((f,y)=>{for(const _ of y.j_)_.Z_(l)&&(h=!0)}),h&&Ad(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ux(t,e,n){const r=ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new De(ee.comparator);o=o.insert(s,dt.newNoDocument(s,re.min()));const l=he().add(s),u=new Ll(re.min(),new Map,new De(ge),o,l);await C_(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),Rd(r)}else await th(r.localStore,e,!1).then(()=>rh(r,e,n)).catch(Io)}async function cx(t,e){const n=ie(t),r=e.batch.batchId;try{const i=await _S(n.localStore,e);P_(n,r,null),k_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Co(n,i)}catch(i){await Io(i)}}async function hx(t,e,n){const r=ie(t);try{const i=await function(o,l){const u=ie(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return u.mutationQueue.lookupMutationBatch(h,l).next(y=>(_e(y!==null),f=y.keys(),u.mutationQueue.removeMutationBatch(h,y))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>u.localDocuments.getDocuments(h,f))})}(r.localStore,e);P_(r,e,n),k_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Co(r,i)}catch(i){await Io(i)}}function k_(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function P_(t,e,n){const r=ie(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function rh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||D_(t,r)})}function D_(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(wd(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Rd(t))}function Lm(t,e,n){for(const r of n)r instanceof x_?(t.La.addReference(r.key,e),dx(t,r)):r instanceof A_?(X("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||D_(t,r.key)):ne()}function dx(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(X("SyncEngine","New document in limbo: "+n),t.xa.add(r),Rd(t))}function Rd(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ee(Se.fromString(e)),r=t.qa.next();t.Na.set(r,new tx(n)),t.Oa=t.Oa.insert(n,r),__(t.remoteStore,new Yn(dn(hd(n.path)),r,"TargetPurposeLimboResolution",sd.oe))}}async function Co(t,e,n){const r=ie(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(h=>{var f;if((h||n)&&r.isPrimaryClient){const y=h?!h.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,y?"current":"not-current")}if(h){i.push(h);const y=_d.Wi(u.targetId,h);s.push(y)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(u,h){const f=ie(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>F.forEach(h,_=>F.forEach(_.$i,R=>f.persistence.referenceDelegate.addReference(y,_.targetId,R)).next(()=>F.forEach(_.Ui,R=>f.persistence.referenceDelegate.removeReference(y,_.targetId,R)))))}catch(y){if(!So(y))throw y;X("LocalStore","Failed to update sequence numbers: "+y)}for(const y of h){const _=y.targetId;if(!y.fromCache){const R=f.os.get(_),P=R.snapshotVersion,N=R.withLastLimboFreeSnapshotVersion(P);f.os=f.os.insert(_,N)}}}(r.localStore,s))}async function fx(t,e){const n=ie(t);if(!n.currentUser.isEqual(e)){X("SyncEngine","User change. New user:",e.toKey());const r=await m_(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(l=>{l.forEach(u=>{u.reject(new Y(j.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Co(n,r.hs)}}function px(t,e){const n=ie(t),r=n.Na.get(e);if(r&&r.va)return he().add(r.key);{let i=he();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const l=n.Fa.get(o);i=i.unionWith(l.view.Va)}return i}}function N_(t){const e=ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=C_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=px.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ux.bind(null,e),e.Ca.d_=YS.bind(null,e.eventManager),e.Ca.$a=XS.bind(null,e.eventManager),e}function mx(t){const e=ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cx.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hx.bind(null,e),e}class dl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ol(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return vS(this.persistence,new gS,e.initialUser,this.serializer)}Ga(e){return new fS(vd.Zr,this.serializer)}Wa(e){return new xS}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}dl.provider={build:()=>new dl};class ih{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Vm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=fx.bind(null,this.syncEngine),await HS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new GS}()}createDatastore(e){const n=Ol(e.databaseInfo.databaseId),r=function(s){return new kS(s)}(e.databaseInfo);return function(s,o,l,u){return new NS(s,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new VS(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Vm(this.syncEngine,n,0),function(){return km.D()?new km:new AS}())}createSyncEngine(e,n){return function(i,s,o,l,u,h,f){const y=new nx(i,s,o,l,u,h);return f&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ie(i);X("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Ro(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ih.provider={build:()=>new ih};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):kn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ct.UNAUTHENTICATED,this.clientId=Ov.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{X("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(X("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=xd(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Mu(t,e){t.asyncQueue.verifyOperationInProgress(),X("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await m_(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Om(t,e){t.asyncQueue.verifyOperationInProgress();const n=await vx(t);X("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Pm(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Pm(e.remoteStore,i)),t._onlineComponents=e}async function vx(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X("FirestoreClient","Using user provided OfflineComponentProvider");try{await Mu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===j.FAILED_PRECONDITION||i.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Li("Error using user provided cache. Falling back to memory cache: "+n),await Mu(t,new dl)}}else X("FirestoreClient","Using default OfflineComponentProvider"),await Mu(t,new dl);return t._offlineComponents}async function b_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X("FirestoreClient","Using user provided OnlineComponentProvider"),await Om(t,t._uninitializedComponentsProvider._online)):(X("FirestoreClient","Using default OnlineComponentProvider"),await Om(t,new ih))),t._onlineComponents}function _x(t){return b_(t).then(e=>e.syncEngine)}async function jm(t){const e=await b_(t),n=e.eventManager;return n.onListen=rx.bind(null,e.syncEngine),n.onUnlisten=ox.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ix.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ax.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L_(t,e,n){if(!n)throw new Y(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function wx(t,e,n,r){if(e===!0&&r===!0)throw new Y(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Fm(t){if(!ee.isDocumentKey(t))throw new Y(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Bm(t){if(ee.isDocumentKey(t))throw new Y(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Fl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne()}function lr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Fl(t);throw new Y(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Y(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=V_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Y(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Y(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Y(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bl{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Um({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Um(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new O1;switch(r.type){case"firstParty":return new B1(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Mm.get(n);r&&(X("ComponentProvider","Removing Datastore"),Mm.delete(n),r.terminate())}(this),Promise.resolve()}}function Ex(t,e,n,r={}){var i;const s=(t=lr(t,Bl))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Li("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=ct.MOCK_USER;else{l=vv(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new Y(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ct(h)}t._authCredentials=new j1(new Lv(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Zr(this.firestore,e,this._query)}}class Ct{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ur(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ct(this.firestore,e,this._key)}}class ur extends Zr{constructor(e,n,r){super(e,n,hd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ct(this.firestore,null,new ee(e))}withConverter(e){return new ur(this.firestore,e,this._path)}}function zm(t,e,...n){if(t=vt(t),L_("collection","path",e),t instanceof Bl){const r=Se.fromString(e,...n);return Bm(r),new ur(t,null,r)}{if(!(t instanceof Ct||t instanceof ur))throw new Y(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return Bm(r),new ur(t.firestore,null,r)}}function on(t,e,...n){if(t=vt(t),arguments.length===1&&(e=Ov.newId()),L_("doc","path",e),t instanceof Bl){const r=Se.fromString(e,...n);return Fm(r),new Ct(t,null,new ee(r))}{if(!(t instanceof Ct||t instanceof ur))throw new Y(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return Fm(r),new Ct(t.firestore,t instanceof ur?t.converter:null,new ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new y_(this,"async_queue_retry"),this.Vu=()=>{const r=ju();r&&X("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=ju();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=ju();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new jr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!So(e))throw e;X("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw kn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Sd.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&ne()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Wm(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Ui extends Bl{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new $m,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $m(e),this._firestoreClient=void 0,await e}}}function Tx(t,e){const n=typeof t=="object"?t:Av(),r=typeof t=="string"?t:"(default)",i=Iv(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=gv("firestore");s&&Ex(i,...s)}return i}function O_(t){if(t._terminated)throw new Y(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Ix(t),t._firestoreClient}function Ix(t){var e,n,r;const i=t._freezeSettings(),s=function(l,u,h,f){return new Z1(l,u,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,V_(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new yx(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zi(rt.fromBase64String(e))}catch(n){throw new Y(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zi(rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ze(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx=/^__.*__$/;class xx{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new vr(e,this.data,this.fieldMask,n,this.fieldTransforms):new xo(e,this.data,n,this.fieldTransforms)}}class j_{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new vr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function M_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne()}}class Dd{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Dd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return fl(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(M_(this.Cu)&&Sx.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Ax{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ol(e)}Qu(e,n,r,i=!1){return new Dd({Cu:e,methodName:n,qu:r,path:Ze.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nd(t){const e=t._freezeSettings(),n=Ol(t._databaseId);return new Ax(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Rx(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);bd("Data must be an object, but it was:",o,r);const l=F_(r,o);let u,h;if(s.merge)u=new Lt(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const y of s.mergeFields){const _=sh(e,y,n);if(!o.contains(_))throw new Y(j.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);U_(f,_)||f.push(_)}u=new Lt(f),h=o.fieldTransforms.filter(y=>u.covers(y.field))}else u=null,h=o.fieldTransforms;return new xx(new It(l),u,h)}class zl extends Cd{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zl}}function Cx(t,e,n,r){const i=t.Qu(1,e,n);bd("Data must be an object, but it was:",i,r);const s=[],o=It.empty();Xr(r,(u,h)=>{const f=Vd(e,u,n);h=vt(h);const y=i.Nu(f);if(h instanceof zl)s.push(f);else{const _=ko(h,y);_!=null&&(s.push(f),o.set(f,_))}});const l=new Lt(s);return new j_(o,l,i.fieldTransforms)}function kx(t,e,n,r,i,s){const o=t.Qu(1,e,n),l=[sh(e,r,n)],u=[i];if(s.length%2!=0)throw new Y(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)l.push(sh(e,s[_])),u.push(s[_+1]);const h=[],f=It.empty();for(let _=l.length-1;_>=0;--_)if(!U_(h,l[_])){const R=l[_];let P=u[_];P=vt(P);const N=o.Nu(R);if(P instanceof zl)h.push(R);else{const V=ko(P,N);V!=null&&(h.push(R),f.set(R,V))}}const y=new Lt(h);return new j_(f,y,o.fieldTransforms)}function Px(t,e,n,r=!1){return ko(n,t.Qu(r?4:3,e))}function ko(t,e){if(B_(t=vt(t)))return bd("Unsupported field value:",e,t),F_(t,e);if(t instanceof Cd)return function(r,i){if(!M_(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let u=ko(l,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=vt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return EI(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=$e.fromDate(r);return{timestampValue:cl(i.serializer,s)}}if(r instanceof $e){const s=new $e(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:cl(i.serializer,s)}}if(r instanceof kd)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zi)return{bytesValue:l_(i.serializer,r._byteString)};if(r instanceof Ct){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:gd(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Pd)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return dd(l.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Fl(r)}`)}(t,e)}function F_(t,e){const n={};return jv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xr(t,(r,i)=>{const s=ko(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function B_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof $e||t instanceof kd||t instanceof zi||t instanceof Ct||t instanceof Cd||t instanceof Pd)}function bd(t,e,n){if(!B_(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Fl(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function sh(t,e,n){if((e=vt(e))instanceof Ul)return e._internalPath;if(typeof e=="string")return Vd(t,e);throw fl("Field path arguments must be of type string or ",t,!1,void 0,n)}const Dx=new RegExp("[~\\*/\\[\\]]");function Vd(t,e,n){if(e.search(Dx)>=0)throw fl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ul(...e.split("."))._internalPath}catch{throw fl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function fl(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Y(j.INVALID_ARGUMENT,l+t+u)}function U_(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Nx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ld("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Nx extends z_{data(){return super.data()}}function Ld(t,e){return typeof e=="string"?Vd(t,e):e instanceof Ul?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Od{}class $_ extends Od{}function Vx(t,e,...n){let r=[];e instanceof Od&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Md).length,l=s.filter(u=>u instanceof jd).length;if(o>1||o>0&&l>0)throw new Y(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class jd extends $_{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new jd(e,n,r)}_apply(e){const n=this._parse(e);return W_(e._query,n),new Zr(e.firestore,e.converter,Qc(e._query,n))}_parse(e){const n=Nd(e.firestore);return function(s,o,l,u,h,f,y){let _;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Y(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){qm(y,f);const R=[];for(const P of y)R.push(Hm(u,s,P));_={arrayValue:{values:R}}}else _=Hm(u,s,y)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||qm(y,f),_=Px(l,o,y,f==="in"||f==="not-in");return Be.create(h,f,_)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Md extends Od{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Md(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:rn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const l=s.getFlattenedFilters();for(const u of l)W_(o,u),o=Qc(o,u)}(e._query,n),new Zr(e.firestore,e.converter,Qc(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Fd extends $_{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Fd(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new Y(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Y(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new mo(s,o)}(e._query,this._field,this._direction);return new Zr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Gi(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Lx(t,e="asc"){const n=e,r=Ld("orderBy",t);return Fd._create(r,n)}function Hm(t,e,n){if(typeof(n=vt(n))=="string"){if(n==="")throw new Y(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qv(e)&&n.indexOf("/")!==-1)throw new Y(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Se.fromString(n));if(!ee.isDocumentKey(r))throw new Y(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return cm(t,new ee(r))}if(n instanceof Ct)return cm(t,n._key);throw new Y(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fl(n)}.`)}function qm(t,e){if(!Array.isArray(t)||t.length===0)throw new Y(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function W_(t,e){const n=function(i,s){for(const o of i)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Y(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Ox{convertValue(e,n="none"){switch(qr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Hr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ne()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Xr(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Oe(o.doubleValue));return new Pd(s)}convertGeoPoint(e){return new kd(Oe(e.latitude),Oe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ad(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ho(e));default:return null}}convertTimestamp(e){const n=fr(e);return new $e(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Se.fromString(e);_e(p_(r));const i=new fo(r.get(1),r.get(3)),s=new ee(r.popFirst(5));return i.isEqual(n)||kn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jx(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class H_ extends z_{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ba(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ld("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ba extends H_{data(e={}){return super.data(e)}}class Mx{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ps(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ba(this._firestore,this._userDataWriter,r.key,r,new Ps(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new ba(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Ps(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new ba(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Ps(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,f=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:Fx(l.type),doc:u,oldIndex:h,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Fx(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne()}}class q_ extends Ox{constructor(e){super(),this.firestore=e}convertBytes(e){return new zi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ct(this.firestore,null,n)}}function zn(t,e,n,...r){t=lr(t,Ct);const i=lr(t.firestore,Ui),s=Nd(i);let o;return o=typeof(e=vt(e))=="string"||e instanceof Ul?kx(s,"updateDoc",t._key,e,n,r):Cx(s,"updateDoc",t._key,e),Bd(i,[o.toMutation(t._key,tn.exists(!0))])}function Bx(t){return Bd(lr(t.firestore,Ui),[new fd(t._key,tn.none())])}function Ux(t,e){const n=lr(t.firestore,Ui),r=on(t),i=jx(t.converter,e);return Bd(n,[Rx(Nd(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,tn.exists(!1))]).then(()=>r)}function zx(t,...e){var n,r,i;t=vt(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Wm(e[o])||(s=e[o],o++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Wm(e[o])){const y=e[o];e[o]=(n=y.next)===null||n===void 0?void 0:n.bind(y),e[o+1]=(r=y.error)===null||r===void 0?void 0:r.bind(y),e[o+2]=(i=y.complete)===null||i===void 0?void 0:i.bind(y)}let u,h,f;if(t instanceof Ct)h=lr(t.firestore,Ui),f=hd(t._key.path),u={next:y=>{e[o]&&e[o]($x(h,t,y))},error:e[o+1],complete:e[o+2]};else{const y=lr(t,Zr);h=lr(y.firestore,Ui),f=y._query;const _=new q_(h);u={next:R=>{e[o]&&e[o](new Mx(h,_,y,R))},error:e[o+1],complete:e[o+2]},bx(t._query)}return function(_,R,P,N){const V=new gx(N),x=new JS(R,V,P);return _.asyncQueue.enqueueAndForget(async()=>KS(await jm(_),x)),()=>{V.Za(),_.asyncQueue.enqueueAndForget(async()=>QS(await jm(_),x))}}(O_(h),f,l,u)}function Bd(t,e){return function(r,i){const s=new jr;return r.asyncQueue.enqueueAndForget(async()=>lx(await _x(r),i,s)),s.promise}(O_(t),e)}function $x(t,e,n){const r=n.docs.get(e._key),i=new q_(t);return new H_(t,i,e._key,r,new Ps(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){qi=i})(Sv),lo(new Vi("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new Ui(new M1(r.getProvider("auth-internal")),new z1(r.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Y(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fo(h.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),ar(sm,"4.7.3",e),ar(sm,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_="firebasestorage.googleapis.com",K_="storageBucket",Wx=2*60*1e3,Hx=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le extends Yr{constructor(e,n,r=0){super(Fu(e),`Firebase Storage: ${n} (${Fu(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Le.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Fu(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ve;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ve||(Ve={}));function Fu(t){return"storage/"+t}function Ud(){const t="An unknown error occurred, please check the error payload for server response.";return new Le(Ve.UNKNOWN,t)}function qx(t){return new Le(Ve.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Gx(t){return new Le(Ve.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Kx(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Le(Ve.UNAUTHENTICATED,t)}function Qx(){return new Le(Ve.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Yx(t){return new Le(Ve.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Xx(){return new Le(Ve.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Jx(){return new Le(Ve.CANCELED,"User canceled the upload/download.")}function Zx(t){return new Le(Ve.INVALID_URL,"Invalid URL '"+t+"'.")}function eA(t){return new Le(Ve.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function tA(){return new Le(Ve.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+K_+"' property when initializing the app?")}function nA(){return new Le(Ve.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function rA(){return new Le(Ve.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function iA(t){return new Le(Ve.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function oh(t){return new Le(Ve.INVALID_ARGUMENT,t)}function Q_(){return new Le(Ve.APP_DELETED,"The Firebase app was deleted.")}function sA(t){return new Le(Ve.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ws(t,e){return new Le(Ve.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ts(t){throw new Le(Ve.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Ot.makeFromUrl(e,n)}catch{return new Ot(e,"")}if(r.path==="")return r;throw eA(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(b){b.path.charAt(b.path.length-1)==="/"&&(b.path_=b.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function h(b){b.path_=decodeURIComponent(b.path)}const f="v[A-Za-z0-9_]+",y=n.replace(/[.]/g,"\\."),_="(/([^?#]*).*)?$",R=new RegExp(`^https?://${y}/${f}/b/${i}/o${_}`,"i"),P={bucket:1,path:3},N=n===G_?"(?:storage.googleapis.com|storage.cloud.google.com)":n,V="([^?#]*)",x=new RegExp(`^https?://${N}/${i}/${V}`,"i"),C=[{regex:l,indices:u,postModify:s},{regex:R,indices:P,postModify:h},{regex:x,indices:{bucket:1,path:2},postModify:h}];for(let b=0;b<C.length;b++){const B=C[b],$=B.regex.exec(e);if($){const T=$[B.indices.bucket];let v=$[B.indices.path];v||(v=""),r=new Ot(T,v),B.postModify(r);break}}if(r==null)throw Zx(e);return r}}class oA{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(t,e,n){let r=1,i=null,s=null,o=!1,l=0;function u(){return l===2}let h=!1;function f(...V){h||(h=!0,e.apply(null,V))}function y(V){i=setTimeout(()=>{i=null,t(R,u())},V)}function _(){s&&clearTimeout(s)}function R(V,...x){if(h){_();return}if(V){_(),f.call(null,V,...x);return}if(u()||o){_(),f.call(null,V,...x);return}r<64&&(r*=2);let C;l===1?(l=2,C=0):C=(r+Math.random())*1e3,y(C)}let P=!1;function N(V){P||(P=!0,_(),!h&&(i!==null?(V||(l=2),clearTimeout(i),y(0)):V||(l=1)))}return y(0),s=setTimeout(()=>{o=!0,N(!0)},n),N}function lA(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(t){return t!==void 0}function cA(t){return typeof t=="object"&&!Array.isArray(t)}function zd(t){return typeof t=="string"||t instanceof String}function Gm(t){return $d()&&t instanceof Blob}function $d(){return typeof Blob<"u"}function Km(t,e,n,r){if(r<e)throw oh(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw oh(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $l(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Y_(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Mr;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Mr||(Mr={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e,n,r,i,s,o,l,u,h,f,y,_=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=h,this.progressCallback_=f,this.connectionFactory_=y,this.retry=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,P)=>{this.resolve_=R,this.reject_=P,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new pa(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=l=>{const u=l.loaded,h=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,h)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const l=s.getErrorCode()===Mr.NO_ERROR,u=s.getStatus();if(!l||hA(u,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===Mr.ABORT;r(!1,new pa(!1,null,f));return}const h=this.successCodes_.indexOf(u)!==-1;r(!0,new pa(h,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());uA(u)?s(u):s()}catch(u){o(u)}else if(l!==null){const u=Ud();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(i.canceled){const u=this.appDelete_?Q_():Jx();o(u)}else{const u=Xx();o(u)}};this.canceled_?n(!1,new pa(!1,null,!0)):this.backoffId_=aA(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&lA(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class pa{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function fA(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function pA(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function mA(t,e){e&&(t["X-Firebase-GMPID"]=e)}function gA(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function yA(t,e,n,r,i,s,o=!0){const l=Y_(t.urlParams),u=t.url+l,h=Object.assign({},t.headers);return mA(h,e),fA(h,n),pA(h,s),gA(h,r),new dA(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function _A(...t){const e=vA();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if($d())return new Blob(t);throw new Le(Ve.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function wA(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(t){if(typeof atob>"u")throw iA("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Bu{constructor(e,n){this.data=e,this.contentType=n||null}}function TA(t,e){switch(t){case un.RAW:return new Bu(X_(e));case un.BASE64:case un.BASE64URL:return new Bu(J_(t,e));case un.DATA_URL:return new Bu(SA(e),xA(e))}throw Ud()}function X_(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function IA(t){let e;try{e=decodeURIComponent(t)}catch{throw Ws(un.DATA_URL,"Malformed data URL.")}return X_(e)}function J_(t,e){switch(t){case un.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Ws(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case un.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Ws(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=EA(e)}catch(i){throw i.message.includes("polyfill")?i:Ws(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class Z_{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Ws(un.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=AA(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function SA(t){const e=new Z_(t);return e.base64?J_(un.BASE64,e.rest):IA(e.rest)}function xA(t){return new Z_(t).contentType}function AA(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e,n){let r=0,i="";Gm(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(Gm(this.data_)){const r=this.data_,i=wA(r,e,n);return i===null?null:new Gn(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Gn(r,!0)}}static getBlob(...e){if($d()){const n=e.map(r=>r instanceof Gn?r.data_:r);return new Gn(_A.apply(null,n))}else{const n=e.map(o=>zd(o)?TA(un.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)i[s++]=o[l]}),new Gn(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e0(t){let e;try{e=JSON.parse(t)}catch{return null}return cA(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function CA(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function t0(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(t,e){return e}class mt{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||kA}}let ma=null;function PA(t){return!zd(t)||t.length<2?t:t0(t)}function n0(){if(ma)return ma;const t=[];t.push(new mt("bucket")),t.push(new mt("generation")),t.push(new mt("metageneration")),t.push(new mt("name","fullPath",!0));function e(s,o){return PA(o)}const n=new mt("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new mt("size");return i.xform=r,t.push(i),t.push(new mt("timeCreated")),t.push(new mt("updated")),t.push(new mt("md5Hash",null,!0)),t.push(new mt("cacheControl",null,!0)),t.push(new mt("contentDisposition",null,!0)),t.push(new mt("contentEncoding",null,!0)),t.push(new mt("contentLanguage",null,!0)),t.push(new mt("contentType",null,!0)),t.push(new mt("metadata","customMetadata",!0)),ma=t,ma}function DA(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Ot(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function NA(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return DA(r,t),r}function r0(t,e,n){const r=e0(e);return r===null?null:NA(t,r,n)}function bA(t,e,n,r){const i=e0(e);if(i===null||!zd(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(h=>{const f=t.bucket,y=t.fullPath,_="/b/"+o(f)+"/o/"+o(y),R=$l(_,n,r),P=Y_({alt:"media",token:h});return R+P})[0]}function VA(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class Wd{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(t){if(!t)throw Ud()}function LA(t,e){function n(r,i){const s=r0(t,i,e);return i0(s!==null),s}return n}function OA(t,e){function n(r,i){const s=r0(t,i,e);return i0(s!==null),bA(s,i,t.host,t._protocol)}return n}function s0(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=Qx():i=Kx():n.getStatus()===402?i=Gx(t.bucket):n.getStatus()===403?i=Yx(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function o0(t){const e=s0(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=qx(t.path)),s.serverResponse=i.serverResponse,s}return n}function jA(t,e,n){const r=e.fullServerUrl(),i=$l(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,l=new Wd(i,s,OA(t,n),o);return l.errorHandler=o0(e),l}function MA(t,e){const n=e.fullServerUrl(),r=$l(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(u,h){}const l=new Wd(r,i,o,s);return l.successCodes=[200,204],l.errorHandler=o0(e),l}function FA(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function BA(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=FA(null,e)),r}function UA(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let C="";for(let b=0;b<2;b++)C=C+Math.random().toString().slice(2);return C}const u=l();o["Content-Type"]="multipart/related; boundary="+u;const h=BA(e,r,i),f=VA(h,n),y="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+u+`\r
Content-Type: `+h.contentType+`\r
\r
`,_=`\r
--`+u+"--",R=Gn.getBlob(y,r,_);if(R===null)throw nA();const P={name:h.fullPath},N=$l(s,t.host,t._protocol),V="POST",x=t.maxUploadRetryTime,w=new Wd(N,V,LA(t,n),x);return w.urlParams=P,w.headers=o,w.body=R.uploadData(),w.errorHandler=s0(e),w}class zA{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Mr.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Mr.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Mr.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Ts("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ts("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ts("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ts("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ts("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class $A extends zA{initXhr(){this.xhr_.responseType="text"}}function Hd(){return new $A}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,n){this._service=e,n instanceof Ot?this._location=n:this._location=Ot.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Gr(e,n)}get root(){const e=new Ot(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return t0(this._location.path)}get storage(){return this._service}get parent(){const e=RA(this._location.path);if(e===null)return null;const n=new Ot(this._location.bucket,e);return new Gr(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw sA(e)}}function WA(t,e,n){t._throwIfRoot("uploadBytes");const r=UA(t.storage,t._location,n0(),new Gn(e,!0),n);return t.storage.makeRequestWithTokens(r,Hd).then(i=>({metadata:i,ref:t}))}function HA(t){t._throwIfRoot("getDownloadURL");const e=jA(t.storage,t._location,n0());return t.storage.makeRequestWithTokens(e,Hd).then(n=>{if(n===null)throw rA();return n})}function qA(t){t._throwIfRoot("deleteObject");const e=MA(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Hd)}function GA(t,e){const n=CA(t._location.path,e),r=new Ot(t._location.bucket,n);return new Gr(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(t){return/^[A-Za-z]+:\/\//.test(t)}function QA(t,e){return new Gr(t,e)}function a0(t,e){if(t instanceof qd){const n=t;if(n._bucket==null)throw tA();const r=new Gr(n,n._bucket);return e!=null?a0(r,e):r}else return e!==void 0?GA(t,e):t}function YA(t,e){if(e&&KA(e)){if(t instanceof qd)return QA(t,e);throw oh("To use ref(service, url), the first argument must be a Storage instance.")}else return a0(t,e)}function Qm(t,e){const n=e==null?void 0:e[K_];return n==null?null:Ot.makeFromBucketSpec(n,t)}function XA(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:vv(i,t.app.options.projectId))}class qd{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=G_,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Wx,this._maxUploadRetryTime=Hx,this._requests=new Set,i!=null?this._bucket=Ot.makeFromBucketSpec(i,this._host):this._bucket=Qm(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ot.makeFromBucketSpec(this._url,e):this._bucket=Qm(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Km("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Km("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Gr(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new oA(Q_());{const o=yA(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const Ym="@firebase/storage",Xm="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0="storage";function JA(t,e,n){return t=vt(t),WA(t,e,n)}function ZA(t){return t=vt(t),HA(t)}function Jm(t){return t=vt(t),qA(t)}function Uu(t,e){return t=vt(t),YA(t,e)}function eR(t=Av(),e){t=vt(t);const r=Iv(t,l0).getImmediate({identifier:e}),i=gv("storage");return i&&tR(r,...i),r}function tR(t,e,n,r={}){XA(t,e,n,r)}function nR(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new qd(n,r,i,e,Sv)}function rR(){lo(new Vi(l0,nR,"PUBLIC").setMultipleInstances(!0)),ar(Ym,Xm,""),ar(Ym,Xm,"esm2017")}rR();const iR={apiKey:"AIzaSyA0ZCgyjVAqKBDbR9-iiUb8bVyH7UijiDo",authDomain:"bever-family-recipes.firebaseapp.com",projectId:"bever-family-recipes",storageBucket:"bever-family-recipes.firebasestorage.app",messagingSenderId:"609429863508",appId:"1:609429863508:web:aee0811bd4c8757d2501c1"},u0=xv(iR),Qt=Tx(u0),zu=eR(u0),Zm=(t,e)=>{try{const n=localStorage.getItem(t);return n?JSON.parse(n):e}catch{return e}},$u=(t,e)=>{try{localStorage.setItem(t,JSON.stringify(e))}catch{}},sR="bluestar",oR=[{id:"all",name:"All Recipes",icon:""},{id:"breakfast",name:"Breakfast",icon:""},{id:"main-course",name:"Main Course",icon:""},{id:"side-dish",name:"Sides",icon:""},{id:"dessert",name:"Desserts",icon:""},{id:"pasta",name:"Pasta",icon:""},{id:"soup",name:"Soups",icon:""},{id:"salad",name:"Salads",icon:""},{id:"appetizer",name:"Appetizers",icon:""},{id:"bread",name:"Breads",icon:""},{id:"beverage",name:"Beverages",icon:""},{id:"other",name:"Other",icon:""}],aR=[{id:"newest",name:"Newest First"},{id:"oldest",name:"Oldest First"},{id:"a-z",name:"A  Z"},{id:"z-a",name:"Z  A"},{id:"category",name:"By Category"}],lR=["cup","cups","tbsp","tsp","oz","lb","g","kg","ml","liter","pint","quart","gallon","piece","slice","clove","can","package","stick","pinch","dash","sprig","large","medium","small","whole","bunch","head"],uR={id:"",title:"",category:"",author:"",authorIsFamily:!0,servings:"",prepTime:"",cookTime:"",ingredients:[{qty:"",unit:"",ingredient:""}],instructions:[""],notes:"",story:"",imageUrl:"",handwrittenImageUrl:"",dateAdded:"",trashedAt:null,comments:[],madeIt:[]},eg=4/3,ah={tablespoons:"tbsp",tablespoon:"tbsp",tbsps:"tbsp",tbs:"tbsp",T:"tbsp",teaspoons:"tsp",teaspoon:"tsp",tsps:"tsp",t:"tsp","t.":"tsp",cups:"cup",c:"cup",C:"cup","c.":"cup",ounces:"oz",ounce:"oz",ozs:"oz","fluid ounces":"fl oz","fluid ounce":"fl oz","fl. oz.":"fl oz","fl. oz":"fl oz",pints:"pint",pt:"pint",pts:"pint",quarts:"quart",qt:"quart",qts:"quart",gallons:"gallon",gal:"gallon",gals:"gallon",milliliters:"ml",milliliter:"ml",mls:"ml",mL:"ml",liters:"liter",litre:"liter",litres:"liter",l:"liter",L:"liter",pounds:"lb",pound:"lb",lbs:"lb","lb.":"lb",grams:"g",gram:"g",gr:"g",kilograms:"kg",kilogram:"kg",kgs:"kg",pieces:"piece",pcs:"piece",pc:"piece",slices:"slice",cloves:"clove",heads:"head",bunches:"bunch",cans:"can",packages:"package",pkgs:"package",pkg:"package",sticks:"stick",pinches:"pinch",dashes:"dash",sprigs:"sprig",stalks:"stalk",leaves:"leaf",large:"large",lg:"large",medium:"medium",med:"medium",small:"small",sm:"small"},cR=t=>{if(!t)return"";const e=t.trim().toLowerCase();return ah[e]||ah[t.trim()]||t.trim()},ga={"":.5,"":.333,"":.667,"":.25,"":.75,"":.2,"":.4,"":.6,"":.8,"":.167,"":.833,"":.125,"":.375,"":.625,"":.875,"1/2":.5,"1/3":.333,"2/3":.667,"1/4":.25,"3/4":.75,"1/8":.125,"3/8":.375,"5/8":.625,"7/8":.875},hR=["tablespoons?","tbsps?","tbs","T","teaspoons?","tsps?","t","cups?","c","ounces?","ozs?","oz","fluid ounces?","fl\\.? ?oz\\.?","pints?","pts?","quarts?","qts?","gallons?","gals?","milliliters?","mls?","mL","liters?","litres?","L","l","pounds?","lbs?\\.?","grams?","g","gr","kilograms?","kgs?","kg","pieces?","pcs?","pc","slices?","cloves?","heads?","bunches?","bunch","cans?","packages?","pkgs?","pkg","sticks?","pinch(?:es)?","dash(?:es)?","sprigs?","stalks?","leaves?","leaf","large","lg","medium","med","small","sm"].join("|"),tg=t=>{if(!t||typeof t!="string")return{quantity:"",unit:"",item:t||""};let n=t.trim(),r="",i="",s="";const o=n.match(/^(\d+)\s+([1-9]\/[1-9])\s*/),l=n.match(/^(\d+)([\u00BC-\u00BE\u2150-\u215E])\s*/),u=n.match(/^([1-9]\/[1-9])\s*/),h=n.match(/^([\u00BC-\u00BE\u2150-\u215E])\s*/),f=n.match(/^(\d+(?:\.\d+)?)\s*/);if(o){const R=parseFloat(o[1]),P=ga[o[2]]||0;r=R+P,n=n.slice(o[0].length).trim()}else if(l){const R=parseFloat(l[1]),P=ga[l[2]]||0;r=R+P,n=n.slice(l[0].length).trim()}else u?(r=ga[u[1]]||u[1],n=n.slice(u[0].length).trim()):h?(r=ga[h[1]]||h[1],n=n.slice(h[0].length).trim()):f&&(r=parseFloat(f[1]),n=n.slice(f[0].length).trim());const y=new RegExp(`^(${hR})\\.?\\s*`,"i"),_=n.match(y);return _&&(i=cR(_[1]),n=n.slice(_[0].length).trim()),s=n,{quantity:r.toString(),unit:i,item:s}},dR=[/(?:bake|cook|roast|simmer|boil|fry|saut|grill|broil|steam)\s+(?:for\s+)?(?:about\s+)?(\d+)\s*(?:to|-)\s*(\d+)\s*(minutes?|mins?|hours?|hrs?)/i,/(?:bake|cook|roast|simmer|boil|fry|saut|grill|broil|steam)\s+(?:for\s+)?(?:about\s+)?(\d+)\s*(minutes?|mins?|hours?|hrs?)/i,/(\d+)\s*(?:to|-)\s*(\d+)\s*(minutes?|mins?|hours?|hrs?)\s+(?:or\s+)?(?:until)/i,/(\d+)\s*(minutes?|mins?|hours?|hrs?)\s+(?:or\s+)?(?:until)/i,/(?:for\s+)(\d+)\s*(?:to|-)\s*(\d+)\s*(minutes?|mins?|hours?|hrs?)/i,/(?:for\s+)(\d+)\s*(minutes?|mins?|hours?|hrs?)/i],fR=t=>{if(!t||!Array.isArray(t))return null;const e=t.join(" ");for(const n of dR){const r=e.match(n);if(r){const i=/hours?|hrs?/i.test(r[r.length-1]);if(r[2]&&!isNaN(r[2])&&r[1]&&!isNaN(r[1])){const s=Math.round((parseInt(r[1])+parseInt(r[2]))/2);return i?`${s} hours`:`${s} min`}else if(r[1]&&!isNaN(r[1])){const s=parseInt(r[1]);return i?`${s} hour${s>1?"s":""}`:`${s} min`}}}return null},pR=t=>new Promise((e,n)=>{const r=new Image,i=document.createElement("canvas"),s=i.getContext("2d");r.onload=()=>{const o=r.width,l=r.height,u=o/l,f=Math.min(o,1200),y=f/eg;i.width=f,i.height=y,s.fillStyle="#f5f3ef",s.fillRect(0,0,f,y);let _,R,P,N;u>eg?(_=f,R=f/u,P=0,N=(y-R)/2):(R=y,_=y*u,P=(f-_)/2,N=0),s.drawImage(r,P,N,_,R),i.toBlob(V=>{V?e(new File([V],t.name,{type:"image/jpeg"})):n(new Error("Failed to process image"))},"image/jpeg",.85)},r.onerror=()=>n(new Error("Failed to load image")),r.src=URL.createObjectURL(t)}),c0=(t,e)=>t?e!==!1?`From ${t}'s Kitchen`:`Recipe from ${t}`:"",mR=(t,e)=>{if(!t)return t;const n=t.match(/^([\d.\/]+)/);if(!n)return t;let r=n[1];if(r.includes("/")){const[o,l]=r.split("/").map(Number);r=o/l}else r=parseFloat(r);if(isNaN(r))return t;const i=r*e;let s;return i===Math.floor(i)?s=i.toString():Math.abs(i-.25)<.01?s="1/4":Math.abs(i-.333)<.01?s="1/3":Math.abs(i-.5)<.01?s="1/2":Math.abs(i-.667)<.01?s="2/3":Math.abs(i-.75)<.01?s="3/4":s=i.toFixed(2).replace(/\.?0+$/,""),t.replace(n[1],s)},gR=t=>{if(!t&&t!==0)return"";const e=parseFloat(t);if(isNaN(e))return t.toString();if(e===Math.floor(e))return e.toString();const n=Math.floor(e),r=e-n,i=[{val:.125,str:""},{val:.167,str:""},{val:.2,str:""},{val:.25,str:""},{val:.333,str:""},{val:.375,str:""},{val:.4,str:""},{val:.5,str:""},{val:.6,str:""},{val:.625,str:""},{val:.667,str:""},{val:.75,str:""},{val:.8,str:""},{val:.833,str:""},{val:.875,str:""}];for(const s of i)if(Math.abs(r-s.val)<.02)return n>0?`${n} ${s.str}`:s.str;return e.toFixed(2).replace(/\.?0+$/,"")},yR=t=>t?gR(t):"",Wu=async(t,e)=>{const n=await fetch("/.netlify/functions/recipe-ai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:t,...e})});if(!n.ok){const r=await n.json();throw new Error(r.error||"AI request failed")}return n.json()};function vR(){const[t,e]=te.useState([]),[n]=te.useState(oR),[r,i]=te.useState("home"),[s,o]=te.useState(null),[l,u]=te.useState("all"),[h,f]=te.useState("all"),[y,_]=te.useState(""),[R,P]=te.useState("newest"),[N,V]=te.useState(!1),[x,w]=te.useState(null),[C,b]=te.useState(!0),[B,$]=te.useState(()=>Zm("bfr-favorites",[])),[T,v]=te.useState(!1),[E,I]=te.useState(!1),[S,k]=te.useState(()=>Zm("bfr-family-auth",!1)),[A,Re]=te.useState(!1),[it,kt]=te.useState(""),We=["all",...new Set(t.filter(O=>O.authorIsFamily!==!1&&O.author&&!O.trashedAt).map(O=>O.author))],q=t.filter(O=>!O.trashedAt),K=t.filter(O=>O.trashedAt),W=()=>{it.toLowerCase()===sR.toLowerCase()?(k(!0),$u("bfr-family-auth",!0),Re(!1),kt(""),ae("Welcome to the family kitchen!")):ae("Incorrect family code","error")},se=()=>{k(!1),$u("bfr-family-auth",!1),ae("Logged out")};te.useEffect(()=>{const O=Vx(zm(Qt,"recipes"),Lx("dateAdded","desc")),M=zx(O,G=>{const Z=G.docs.map(ce=>({id:ce.id,...ce.data()}));e(Z),b(!1)},G=>{console.error("Firestore error:",G),b(!1)});return()=>M()},[]),te.useEffect(()=>{const O=window.location.hash;if(O&&O.startsWith("#recipe-")){const M=O.replace("#recipe-",""),G=t.find(Z=>Z.id===M);G&&(o(G),i("view"))}},[t]),te.useEffect(()=>{$u("bfr-favorites",B)},[B]);const le=O=>{$(M=>M.includes(O)?M.filter(G=>G!==O):[...M,O])},oe=(O,M=null)=>{O!=="home"&&(_(""),f("all")),o(M),i(O),I(!1),O==="view"&&M?window.history.pushState(null,"",`#recipe-${M.id}`):window.history.pushState(null,"",window.location.pathname)},ae=(O,M="success")=>{w({message:O,type:M}),setTimeout(()=>w(null),3e3)},Pt=O=>{const M=`${window.location.origin}${window.location.pathname}#recipe-${O}`;navigator.clipboard.writeText(M).then(()=>{ae("Link copied to clipboard!")}).catch(()=>{ae("Could not copy link","error")})},Et=O=>{const M={...O};if(Array.isArray(M.ingredients)&&(M.ingredients=M.ingredients.map(G=>{if(typeof G=="string"){const Z=tg(G);return{amount:`${Z.quantity} ${Z.unit}`.trim(),ingredient:Z.item}}else if(G.amount!==void 0&&G.ingredient!==void 0){let Z=G.amount||"";return Z=Z.replace(/(\d)\s*\/\s*(\d)/g,"$1/$2"),Object.entries(ah).forEach(([ce,Qe])=>{const ye=new RegExp(`\\b${ce}\\b\\.?`,"gi");Z=Z.replace(ye,Qe)}),Z=Z.replace(/\bc\.(?!\w)/gi,"cup"),Z=Z.replace(/\bt\.(?!\w)/gi,"tsp"),Z=Z.replace(/\s+/g," ").trim(),{amount:Z,ingredient:G.ingredient}}return G})),!M.cookTime&&Array.isArray(M.instructions)){const G=fR(M.instructions);G&&(M.cookTime=G)}return M},Dt=async O=>{try{const{id:M,...G}=Et(O);if(M)await zn(on(Qt,"recipes",M),G),ae("Recipe updated");else{const Z={...G,dateAdded:new Date().toISOString()};await Ux(zm(Qt,"recipes"),Z),ae("Recipe saved")}oe("home")}catch(M){console.error("Save error:",M),ae("Error saving recipe: "+M.message,"error")}},Yi=async()=>{if(!confirm("This will normalize all existing recipe data (units, ingredients). Continue?"))return;V(!0);let O=0;try{for(const M of t){const G=Et(M),{id:Z,...ce}=G;JSON.stringify(M)!==JSON.stringify(G)&&Z&&(await zn(on(Qt,"recipes",Z),ce),O++)}ae(`Normalized ${O} recipes`)}catch(M){console.error("Normalize error:",M),ae("Error normalizing recipes","error")}finally{V(!1)}},Xi=async()=>{if(!confirm("This will convert all ingredients to the new format (qty, unit, ingredient). Continue?"))return;V(!0);let O=0;try{for(const M of t){if(!M.ingredients||M.ingredients.length===0||!M.ingredients.some(ce=>ce.amount!==void 0&&ce.qty===void 0))continue;const Z=M.ingredients.map(ce=>{if(ce.qty!==void 0)return ce;const Qe=ce.amount||"",ye=tg(Qe+" "+(ce.ingredient||""));return{qty:ye.quantity||"",unit:ye.unit||"",ingredient:ye.item||ce.ingredient||""}});await zn(on(Qt,"recipes",M.id),{ingredients:Z}),O++}ae(`Migrated ${O} recipes to new format`)}catch(M){console.error("Migration error:",M),ae("Error migrating recipes","error")}finally{V(!1)}},Nn=async(O,M)=>{try{const G=t.find(Qe=>Qe.id===O);if(!G)return;const Z={id:Date.now().toString(),text:M.text,author:M.author,date:new Date().toISOString()},ce=[...G.comments||[],Z];await zn(on(Qt,"recipes",O),{comments:ce}),ae("Comment added")}catch(G){console.error("Comment error:",G),ae("Error adding comment","error")}},bn=async(O,M)=>{try{const G=t.find(ce=>ce.id===O);if(!G)return;const Z=(G.comments||[]).filter(ce=>ce.id!==M);await zn(on(Qt,"recipes",O),{comments:Z}),ae("Comment removed")}catch(G){console.error("Delete comment error:",G),ae("Error removing comment","error")}},_r=async(O,M)=>{try{const G=t.find(Qe=>Qe.id===O);if(!G)return;const Z={id:Date.now().toString(),name:M||"Someone",date:new Date().toISOString()},ce=[...G.madeIt||[],Z];await zn(on(Qt,"recipes",O),{madeIt:ce}),ae(`${M||"You"} made it! `)}catch(G){console.error("Made it error:",G),ae("Error recording","error")}},Vn=async O=>{try{await zn(on(Qt,"recipes",O),{trashedAt:new Date().toISOString()}),ae("Recipe moved to trash"),oe("home")}catch(M){console.error("Trash error:",M),ae("Error moving to trash","error")}},wr=async O=>{try{await zn(on(Qt,"recipes",O),{trashedAt:null}),ae("Recipe restored")}catch(M){console.error("Restore error:",M),ae("Error restoring recipe","error")}},Ln=async(O,M,G)=>{try{if(M&&M.includes("firebasestorage"))try{const Z=Uu(zu,M);await Jm(Z)}catch{console.log("Image deletion skipped")}if(G&&G.includes("firebasestorage"))try{const Z=Uu(zu,G);await Jm(Z)}catch{console.log("Handwritten image deletion skipped")}await Bx(on(Qt,"recipes",O)),ae("Recipe permanently deleted")}catch(Z){console.error("Delete error:",Z),ae("Error deleting recipe","error")}},Er=async()=>{if(confirm(`Permanently delete ${K.length} recipe(s) from trash? This cannot be undone.`)){V(!0);try{for(const O of K)await Ln(O.id,O.imageUrl,O.handwrittenImageUrl);ae("Trash emptied")}catch(O){console.error("Empty trash error:",O),ae("Error emptying trash","error")}finally{V(!1)}}},Ji=async(O,M="recipes")=>{if(!O)return null;try{const G=await pR(O),Z=`${M}/${Date.now()}_${O.name.replace(/\.[^.]+$/,".jpg")}`,ce=Uu(zu,Z);return await JA(ce,G),await ZA(ce)}catch(G){throw console.error("Upload error:",G),G}},U=()=>{const O=JSON.stringify(t,null,2),M=new Blob([O],{type:"application/json"}),G=URL.createObjectURL(M),Z=document.createElement("a");Z.href=G,Z.download="bever-family-recipes.json",Z.click(),URL.revokeObjectURL(G),ae("Recipes exported!")},J=q.filter(O=>{var He,Tr,Zi,es,Po,On;const M=y.toLowerCase(),G=(He=O.ingredients)==null?void 0:He.some(mn=>{var jn,gn,Do;return((jn=mn.ingredient)==null?void 0:jn.toLowerCase().includes(M))||((gn=mn.amount)==null?void 0:gn.toLowerCase().includes(M))||((Do=mn.unit)==null?void 0:Do.toLowerCase().includes(M))}),Z=!y||((Tr=O.title)==null?void 0:Tr.toLowerCase().includes(M))||G||((Zi=O.author)==null?void 0:Zi.toLowerCase().includes(M))||((es=O.notes)==null?void 0:es.toLowerCase().includes(M))||((Po=O.story)==null?void 0:Po.toLowerCase().includes(M))||((On=O.comments)==null?void 0:On.some(mn=>{var jn,gn;return((jn=mn.text)==null?void 0:jn.toLowerCase().includes(M))||((gn=mn.author)==null?void 0:gn.toLowerCase().includes(M))})),ce=l==="all"||O.category===l,Qe=h==="all"||O.author===h,ye=!T||B.includes(O.id);return Z&&ce&&Qe&&ye}).sort((O,M)=>{switch(R){case"oldest":return new Date(O.dateAdded)-new Date(M.dateAdded);case"newest":return new Date(M.dateAdded)-new Date(O.dateAdded);case"a-z":return(O.title||"").localeCompare(M.title||"");case"z-a":return(M.title||"").localeCompare(O.title||"");case"category":return(O.category||"").localeCompare(M.category||"")||(O.title||"").localeCompare(M.title||"");default:return 0}});return C?p.jsx("div",{style:m.loadingScreen,children:p.jsxs("div",{style:m.loadingContent,children:[p.jsx("div",{style:m.loadingLogo,children:"BF"}),p.jsx("p",{style:m.loadingText,children:"Loading recipes..."})]})}):p.jsxs("div",{style:m.app,children:[x&&p.jsx("div",{style:{...m.notification,backgroundColor:x.type==="success"?"#5c6d5e":"#9b6b5b"},children:x.message}),A&&p.jsx("div",{style:m.modal,onClick:()=>Re(!1),children:p.jsxs("div",{style:m.familyLoginModal,onClick:O=>O.stopPropagation(),children:[p.jsx("button",{style:m.modalClose,onClick:()=>Re(!1),children:""}),p.jsx("h2",{style:m.familyLoginTitle,children:"Family Access"}),p.jsx("p",{style:m.familyLoginText,children:"Enter the family code to add and edit recipes."}),p.jsx("input",{type:"password",value:it,onChange:O=>kt(O.target.value),onKeyDown:O=>O.key==="Enter"&&W(),placeholder:"Family code",style:m.familyCodeInput,autoFocus:!0}),p.jsx("button",{onClick:W,style:m.familyLoginBtn,children:"Enter Kitchen"})]})}),p.jsxs("header",{style:m.header,className:"no-print",children:[p.jsxs("div",{style:m.headerInner,children:[p.jsxs("div",{style:m.logo,onClick:()=>{oe("home"),u("all")},children:[p.jsx("span",{style:m.logoMark,children:"BF"}),p.jsxs("div",{style:m.logoText,children:[p.jsx("span",{style:m.logoTitle,children:"Bever Family"}),p.jsx("span",{style:m.logoSubtitle,children:"R E C I P E S"})]})]}),p.jsxs("nav",{style:m.nav,className:"desktop-nav",children:[p.jsx("button",{style:r==="home"?m.navLinkActive:m.navLink,onClick:()=>oe("home"),children:"Recipes"}),S&&p.jsxs(p.Fragment,{children:[p.jsx("button",{style:r==="add"?m.navLinkActive:m.navLink,onClick:()=>oe("add"),children:"Add New"}),p.jsxs("button",{style:r==="trash"?m.navLinkActive:m.navLink,onClick:()=>oe("trash"),children:["Trash ",K.length>0&&`(${K.length})`]})]}),p.jsx("button",{style:m.navLink,onClick:U,title:"Export all recipes as JSON",children:"Export"}),S?p.jsx("button",{style:m.navLink,onClick:se,title:"Log out of family access",children:"Log Out"}):p.jsx("button",{style:m.familyBtn,onClick:()=>Re(!0),children:"Family Login"})]}),p.jsx("button",{style:m.mobileMenuBtn,className:"mobile-menu-btn",onClick:()=>I(!E),children:E?"":""})]}),E&&p.jsxs("nav",{style:m.mobileNav,className:"mobile-nav",children:[p.jsx("button",{style:m.mobileNavLink,onClick:()=>oe("home"),children:"All Recipes"}),S&&p.jsxs(p.Fragment,{children:[p.jsx("button",{style:m.mobileNavLink,onClick:()=>oe("add"),children:"Add New Recipe"}),p.jsxs("button",{style:m.mobileNavLink,onClick:()=>oe("trash"),children:["Trash ",K.length>0&&`(${K.length})`]})]}),p.jsx("button",{style:m.mobileNavLink,onClick:()=>{U(),I(!1)},children:"Export Recipes"}),S?p.jsx("button",{style:m.mobileNavLink,onClick:()=>{se(),I(!1)},children:"Log Out"}):p.jsx("button",{style:m.mobileNavLink,onClick:()=>{Re(!0),I(!1)},children:"Family Login"})]})]}),p.jsxs("main",{style:m.main,children:[r==="home"&&p.jsx(_R,{recipes:q,filteredRecipes:J,categories:n,selectedCategory:l,setSelectedCategory:u,familyAuthors:We,selectedAuthor:h,setSelectedAuthor:f,searchQuery:y,setSearchQuery:_,sortBy:R,setSortBy:P,setSelectedRecipe:O=>oe("view",O),setView:oe,onNormalizeAll:Yi,onMigrateIngredients:Xi,onEmptyTrash:Er,trashedCount:K.length,isProcessing:N,favorites:B,toggleFavorite:le,showFavoritesOnly:T,setShowFavoritesOnly:v,isFamily:S}),r==="trash"&&S&&p.jsx(ER,{trashedRecipes:K,categories:n,onRestore:wr,onPermanentDelete:Ln,onEmptyTrash:Er,onBack:()=>oe("home"),isProcessing:N}),(r==="add"||r==="edit")&&S&&p.jsx(IR,{recipe:s,categories:n.filter(O=>O.id!=="all"),onSave:Dt,onCancel:()=>oe(s?"view":"home",s),isProcessing:N,setIsProcessing:V,showNotification:ae,uploadImage:Ji}),r==="view"&&s&&p.jsx(SR,{recipe:t.find(O=>O.id===s.id)||s,categories:n,onEdit:()=>oe("edit",s),onDelete:()=>{confirm("Move this recipe to trash?")&&Vn(s.id)},onBack:()=>oe("home"),onAddComment:O=>Nn(s.id,O),onDeleteComment:O=>bn(s.id,O),onShare:()=>Pt(s.id),onMadeIt:O=>_r(s.id,O),isFavorite:B.includes(s.id),onToggleFavorite:()=>le(s.id),isFamily:S})]}),p.jsx("footer",{style:m.footer,className:"no-print",children:p.jsxs("div",{style:m.footerContent,children:[p.jsx("span",{style:m.footerLogo,children:"BF"}),p.jsx("p",{style:m.footerText,children:"Bever Family Recipes"}),p.jsx("p",{style:m.footerTagline,children:"Gathering around the table, one recipe at a time"})]})})]})}function _R({recipes:t,filteredRecipes:e,categories:n,selectedCategory:r,setSelectedCategory:i,familyAuthors:s,selectedAuthor:o,setSelectedAuthor:l,searchQuery:u,setSearchQuery:h,sortBy:f,setSortBy:y,setSelectedRecipe:_,setView:R,onNormalizeAll:P,onMigrateIngredients:N,onEmptyTrash:V,trashedCount:x,isProcessing:w,favorites:C,toggleFavorite:b,showFavoritesOnly:B,setShowFavoritesOnly:$,isFamily:T}){var I;const[v,E]=te.useState(!1);return p.jsxs("div",{children:[p.jsx("section",{style:m.hero,className:"no-print",children:p.jsxs("div",{style:m.heroContent,children:[p.jsx("p",{style:m.heroWelcome,children:"Welcome to the"}),p.jsx("h1",{style:m.heroTitle,children:"Bever Family Recipes"}),p.jsxs("div",{style:m.heroDivider,children:[p.jsx("span",{style:m.heroDividerLine}),p.jsx("span",{style:m.heroDividerIcon,children:""}),p.jsx("span",{style:m.heroDividerLine})]}),p.jsxs("p",{style:m.heroSubtitle,children:["A collection of treasured recipes passed down through generations.",p.jsx("br",{}),"From our kitchen to yours."]}),p.jsxs("div",{style:m.searchContainer,children:[p.jsx("input",{type:"text",placeholder:"Search recipes, ingredients, stories...",value:u,onChange:S=>h(S.target.value),style:m.searchInput}),u&&p.jsx("button",{style:m.clearSearch,onClick:()=>h(""),children:""})]}),p.jsxs("div",{style:m.filterRow,children:[s.length>2&&p.jsxs("div",{style:m.filterGroup,children:[p.jsx("label",{style:m.filterLabel,children:"From:"}),p.jsxs("select",{value:o,onChange:S=>l(S.target.value),style:m.filterSelect,children:[p.jsx("option",{value:"all",children:"All Family"}),s.filter(S=>S!=="all").map(S=>p.jsx("option",{value:S,children:S},S))]})]}),p.jsxs("div",{style:m.filterGroup,children:[p.jsx("label",{style:m.filterLabel,children:"Sort:"}),p.jsx("select",{value:f,onChange:S=>y(S.target.value),style:m.filterSelect,children:aR.map(S=>p.jsx("option",{value:S.id,children:S.name},S.id))})]}),p.jsxs("button",{style:{...m.favoritesToggle,backgroundColor:B?"#5c6d5e":"transparent",color:B?"white":"#5a5a5a"},onClick:()=>$(!B),children:[" Favorites ",B&&`(${C.length})`]})]})]})}),p.jsx("section",{style:m.categorySection,className:"no-print",children:p.jsx("div",{style:m.categoryPills,children:n.map(S=>p.jsx("button",{style:r===S.id?m.categoryPillActive:m.categoryPill,onClick:()=>i(S.id),children:S.name},S.id))})}),p.jsxs("section",{style:m.recipeSection,children:[p.jsxs("div",{style:m.sectionHeader,children:[p.jsxs("h2",{style:m.sectionTitle,children:[B?"Favorites":r==="all"?"All Recipes":(I=n.find(S=>S.id===r))==null?void 0:I.name,o!=="all"&&` from ${o}`]}),p.jsxs("span",{style:m.recipeCount,children:[e.length," ",e.length===1?"recipe":"recipes"]})]}),e.length>0?p.jsx("div",{style:m.recipeGrid,children:e.map(S=>p.jsx(wR,{recipe:S,categories:n,onClick:()=>_(S),isFavorite:C.includes(S.id),onToggleFavorite:k=>{k.stopPropagation(),b(S.id)}},S.id))}):p.jsxs("div",{style:m.emptyState,children:[p.jsx("div",{style:m.emptyIcon,children:""}),p.jsx("h3",{style:m.emptyTitle,children:"No recipes found"}),p.jsx("p",{style:m.emptyText,children:u||o!=="all"||B?"Try adjusting your search or filters.":"Start your family's collection by adding the first recipe."}),!u&&o==="all"&&!B&&T&&p.jsx("button",{style:m.emptyButton,onClick:()=>R("add"),children:"Add a Recipe"})]}),T&&p.jsxs("div",{style:{textAlign:"center",marginTop:32},children:[p.jsx("button",{onClick:()=>E(!v),style:{background:"none",border:"none",color:"#c9c4bc",fontSize:11,cursor:"pointer",letterSpacing:1},children:v?" Hide Tools":" Admin Tools"}),v&&p.jsxs("div",{style:{marginTop:16,padding:20,background:"#f5f3ef",borderRadius:4},children:[p.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:12,justifyContent:"center",marginBottom:12},children:[p.jsx("button",{onClick:P,disabled:w,style:m.adminToolBtn,children:w?"Processing...":"Normalize Units"}),p.jsx("button",{onClick:N,disabled:w,style:m.adminToolBtn,children:"Migrate Ingredients"}),x>0&&p.jsxs("button",{onClick:V,disabled:w,style:{...m.adminToolBtn,backgroundColor:"#9b6b5b"},children:["Empty Trash (",x,")"]})]}),p.jsx("p",{style:{fontSize:11,color:"#7a7a7a",margin:0},children:"Normalize: fix units & fractions  Migrate: convert to qty/unit/ingredient format"})]})]})]})]})}function wR({recipe:t,categories:e,onClick:n,isFavorite:r,onToggleFavorite:i}){var h,f;const s=e.find(y=>y.id===t.category),[o,l]=te.useState(!1);(h=t.comments)!=null&&h.length;const u=((f=t.madeIt)==null?void 0:f.length)||0;return p.jsxs("div",{style:m.recipeCard,onClick:n,children:[p.jsxs("div",{style:m.cardImageContainer,children:[t.imageUrl&&!o?p.jsx("img",{src:t.imageUrl,alt:t.title,style:m.cardImage,onError:()=>l(!0)}):p.jsx("div",{style:m.cardImagePlaceholder,children:p.jsx("span",{style:m.placeholderIcon,children:""})}),p.jsx("button",{style:{...m.favoriteBtn,color:r?"#c75050":"white"},onClick:i,title:r?"Remove from favorites":"Add to favorites",children:r?"":""})]}),p.jsxs("div",{style:m.cardContent,children:[s&&p.jsx("span",{style:m.cardCategory,children:s.name}),p.jsx("h3",{style:m.cardTitle,children:t.title}),t.author&&p.jsx("p",{style:m.cardAuthor,children:c0(t.author,t.authorIsFamily)}),p.jsxs("div",{style:m.cardMeta,children:[t.prepTime&&p.jsx("span",{children:t.prepTime}),t.prepTime&&t.servings&&p.jsx("span",{style:m.cardMetaDot,children:""}),t.servings&&p.jsxs("span",{children:["Serves ",t.servings]}),u>0&&p.jsxs(p.Fragment,{children:[p.jsx("span",{style:m.cardMetaDot,children:""}),p.jsxs("span",{children:[" ",u," made"]})]})]})]})]})}function ER({trashedRecipes:t,categories:e,onRestore:n,onPermanentDelete:r,onEmptyTrash:i,onBack:s,isProcessing:o}){const l=u=>u?new Date(u).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"";return p.jsxs("div",{style:m.trashPage,children:[p.jsxs("div",{style:m.trashHeader,children:[p.jsx("button",{onClick:s,style:m.backBtn,children:" Back to Recipes"}),p.jsx("h1",{style:m.trashTitle,children:"Trash"}),p.jsxs("p",{style:m.trashSubtitle,children:[t.length," ",t.length===1?"recipe":"recipes"," in trash"]})]}),t.length>0?p.jsxs(p.Fragment,{children:[p.jsxs("div",{style:m.trashActions,children:[p.jsx("button",{onClick:i,disabled:o,style:m.emptyTrashBtn,children:o?"Deleting...":"Empty Trash"}),p.jsx("p",{style:m.trashWarning,children:" Emptying trash permanently deletes all recipes and cannot be undone."})]}),p.jsx("div",{style:m.trashList,children:t.map(u=>{const h=e.find(f=>f.id===u.category);return p.jsxs("div",{style:m.trashItem,children:[p.jsxs("div",{style:m.trashItemInfo,children:[p.jsx("h3",{style:m.trashItemTitle,children:u.title}),p.jsxs("p",{style:m.trashItemMeta,children:[h&&`${h.name}  `,u.author&&`${u.author}  `,"Deleted ",l(u.trashedAt)]})]}),p.jsxs("div",{style:m.trashItemActions,children:[p.jsx("button",{onClick:()=>n(u.id),style:m.restoreBtn,children:"Restore"}),p.jsx("button",{onClick:()=>{confirm(`Permanently delete "${u.title}"? This cannot be undone.`)&&r(u.id,u.imageUrl,u.handwrittenImageUrl)},style:m.permanentDeleteBtn,children:"Delete Forever"})]})]},u.id)})})]}):p.jsxs("div",{style:m.emptyTrash,children:[p.jsx("div",{style:m.emptyIcon,children:""}),p.jsx("h3",{style:m.emptyTitle,children:"Trash is empty"}),p.jsx("p",{style:m.emptyText,children:"Deleted recipes will appear here."})]})]})}function TR({ingredient:t,index:e,onUpdate:n,onRemove:r,canRemove:i}){const[s,o]=te.useState(!1),[l,u]=te.useState([]),h=t.qty!==void 0?t.qty:"",f=t.unit!==void 0?t.unit:"",y=t.ingredient||"",_=t.amount!==void 0&&t.qty===void 0,R=N=>{if(n(e,"unit",N),N){const V=lR.filter(x=>x.toLowerCase().startsWith(N.toLowerCase())).slice(0,5);u(V),o(V.length>0)}else o(!1)},P=N=>{n(e,"unit",N),o(!1)};return p.jsxs("div",{style:m.ingredientRow,children:[p.jsx("input",{type:"text",value:_?t.amount:h,onChange:N=>n(e,_?"amount":"qty",N.target.value),placeholder:"1",style:m.qtyInput}),p.jsxs("div",{style:m.unitInputWrapper,children:[p.jsx("input",{type:"text",value:_?"":f,onChange:N=>R(N.target.value),onFocus:()=>{f&&R(f)},onBlur:()=>setTimeout(()=>o(!1),150),placeholder:"cup",style:m.unitInput,disabled:_}),s&&l.length>0&&p.jsx("div",{style:m.unitSuggestions,children:l.map((N,V)=>p.jsx("button",{type:"button",style:m.unitSuggestion,onMouseDown:()=>P(N),children:N},V))})]}),p.jsx("input",{type:"text",value:y,onChange:N=>n(e,"ingredient",N.target.value),placeholder:"all-purpose flour",style:m.ingredientInput}),p.jsx("button",{type:"button",onClick:r,style:m.removeBtn,disabled:!i,children:""})]})}function IR({recipe:t,categories:e,onSave:n,onCancel:r,isProcessing:i,setIsProcessing:s,showNotification:o,uploadImage:l}){const[u,h]=te.useState("manual"),[f,y]=te.useState(t||uR),[_,R]=te.useState(null),[P,N]=te.useState(null),[V,x]=te.useState((t==null?void 0:t.imageUrl)||null),[w,C]=te.useState((t==null?void 0:t.handwrittenImageUrl)||null),[b,B]=te.useState(null),[$,T]=te.useState(null),[v,E]=te.useState(!1),[I,S]=te.useState(""),[k,A]=te.useState(""),[Re,it]=te.useState(!1),kt=te.useRef(null),We=te.useRef(null),q=te.useRef(null),K=(U,J)=>{y(O=>({...O,[U]:J}))},W=(U,J,O)=>{y(M=>({...M,ingredients:M.ingredients.map((G,Z)=>Z===U?{...G,[J]:O}:G)}))},se=()=>{y(U=>({...U,ingredients:[...U.ingredients,{qty:"",unit:"",ingredient:""}]}))},le=U=>{f.ingredients.length>1&&y(J=>({...J,ingredients:J.ingredients.filter((O,M)=>M!==U)}))},oe=(U,J)=>{y(O=>({...O,instructions:O.instructions.map((M,G)=>G===U?J:M)}))},ae=()=>{y(U=>({...U,instructions:[...U.instructions,""]}))},Pt=U=>{f.instructions.length>1&&y(J=>({...J,instructions:J.instructions.filter((O,M)=>M!==U)}))},Et=U=>{const J=U.target.files[0];if(J){if(!J.type.startsWith("image/")){o("Please select an image file","error");return}x(URL.createObjectURL(J)),B(J)}},Dt=U=>{const J=U.target.files[0];if(J){if(!J.type.startsWith("image/")){o("Please select an image file","error");return}C(URL.createObjectURL(J)),T(J)}},Yi=()=>{x(null),B(null),K("imageUrl","")},Xi=()=>{C(null),T(null),K("handwrittenImageUrl","")},Nn=U=>{U.preventDefault(),it(!0)},bn=U=>{U.preventDefault(),it(!1)},_r=U=>{U.preventDefault(),it(!1);const J=U.dataTransfer.files[0];J&&Vn(J)},Vn=async U=>{const J=U.type==="application/pdf",O=U.type.startsWith("image/");if(!J&&!O){o("Please select an image or PDF file","error");return}s(!0),O?(R(URL.createObjectURL(U)),N(null)):(R(null),N(U.name));try{const M=await new Promise((ce,Qe)=>{const ye=new FileReader;ye.onload=()=>ce(ye.result.split(",")[1]),ye.onerror=Qe,ye.readAsDataURL(U)}),Z=(await Wu(J?"scan-pdf":"scan-image",{imageData:M,imageType:U.type})).content[0].text.match(/\{[\s\S]*\}/);if(Z){const ce=JSON.parse(Z[0]);y(Qe=>({...Qe,...ce})),o("Recipe extracted! Review the details below."),h("manual")}}catch(M){console.error("Error:",M),o("Could not read recipe. Try entering it manually.","error")}finally{s(!1)}},wr=async U=>{const J=U.target.files[0];J&&Vn(J)},Ln=async()=>{const U=k.trim();if(!U){o("Please paste the recipe content from the website","error");return}s(!0);try{const O=(await Wu("extract-website",{content:U})).content[0].text.match(/\{[\s\S]*\}/);if(O){const M=JSON.parse(O[0]);y(G=>({...G,...M,authorIsFamily:!1})),o("Recipe imported! Review the details below."),h("manual")}}catch(J){console.error("Error:",J),o("Could not extract recipe. Try copying just the recipe text.","error")}finally{s(!1)}},Er=async()=>{const U=I.trim();if(!U){o("Please enter a recipe URL","error");return}if(!U.startsWith("http://")&&!U.startsWith("https://")){o("Please enter a valid URL starting with http:// or https://","error");return}s(!0);try{const J=await Wu("fetch-url",{url:U});if(J.error){o(J.error,"error");return}const O=J.content[0].text.match(/\{[\s\S]*\}/);if(O){const M=JSON.parse(O[0]);y(G=>({...G,...M,authorIsFamily:!1})),o("Recipe imported! Review the details below."),h("manual")}}catch(J){console.error("Error:",J),o("Could not fetch recipe. Some sites block this - try pasting the content instead.","error")}finally{s(!1)}},Ji=async U=>{if(U.preventDefault(),!f.title.trim()){o("Please enter a recipe title","error");return}E(!0);try{let J=f.imageUrl||"",O=f.handwrittenImageUrl||"";b&&(o("Uploading photo..."),J=await l(b,"recipes")),$&&(o("Uploading handwritten recipe..."),O=await l($,"handwritten"));const M={...f,imageUrl:J,handwrittenImageUrl:O,ingredients:Array.isArray(f.ingredients)?f.ingredients.filter(G=>G.amount||G.ingredient):[],instructions:Array.isArray(f.instructions)?f.instructions.filter(G=>G&&G.trim()):[],comments:f.comments||[],madeIt:f.madeIt||[]};await n(M)}catch(J){console.error("Submit error:",J),o("Error saving recipe: "+J.message,"error"),E(!1)}};return p.jsxs("div",{style:m.addPage,children:[p.jsxs("div",{style:m.addPageHeader,children:[p.jsx("h1",{style:m.addPageTitle,children:t?"Edit Recipe":"Add New Recipe"}),p.jsx("p",{style:m.addPageSubtitle,children:"Share a treasured family recipe"})]}),!t&&p.jsxs("div",{style:m.tabs,children:[p.jsx("button",{style:u==="manual"?m.tabActive:m.tab,onClick:()=>h("manual"),children:"Write it out"}),p.jsx("button",{style:u==="scan"?m.tabActive:m.tab,onClick:()=>h("scan"),children:"Scan file"}),p.jsx("button",{style:u==="website"?m.tabActive:m.tab,onClick:()=>h("website"),children:"From website or document"})]}),u==="scan"&&!t&&p.jsxs("div",{style:m.scanSection,children:[p.jsxs("div",{style:{...m.uploadZone,borderColor:Re?"#8a9a8e":"#d9d6d0",backgroundColor:Re?"#f0f5f1":"#faf9f7"},onClick:()=>{var U;return(U=kt.current)==null?void 0:U.click()},onDragOver:Nn,onDragLeave:bn,onDrop:_r,children:[_?p.jsx("img",{src:_,alt:"Uploaded",style:m.uploadedImage}):P?p.jsxs("div",{style:m.pdfPreview,children:[p.jsx("div",{style:m.pdfIcon,children:"PDF"}),p.jsx("p",{style:m.pdfFileName,children:P})]}):p.jsxs(p.Fragment,{children:[p.jsx("div",{style:m.scanIcon,children:""}),p.jsx("h3",{style:m.scanTitle,children:"Scan a Recipe"}),p.jsxs("p",{style:m.scanText,children:["Drag & drop a photo or PDF here, or click to browse.",p.jsx("br",{}),"We'll convert it to text for you."]}),p.jsx("button",{type:"button",style:m.uploadButton,children:"Choose File"}),p.jsx("p",{style:m.fileTypes,children:"Supports: JPG, PNG, PDF"})]}),i&&p.jsxs("div",{style:m.processingOverlay,children:[p.jsx("div",{style:m.spinner}),p.jsx("p",{children:"Reading recipe..."})]})]}),p.jsx("input",{ref:kt,type:"file",accept:"image/*,.pdf,application/pdf",onChange:wr,style:{display:"none"}})]}),u==="website"&&!t&&p.jsx("div",{style:m.websiteSection,children:p.jsxs("div",{style:m.websiteBox,children:[p.jsx("div",{style:m.scanIcon,children:""}),p.jsx("h3",{style:m.scanTitle,children:"Import from Website"}),p.jsxs("p",{style:m.scanText,children:["Found a recipe online? Enter the URL and we'll grab it for you,",p.jsx("br",{}),"or paste the recipe content directly."]}),p.jsxs("div",{style:m.websiteInputGroup,children:[p.jsx("label",{style:m.label,children:"Option 1: Fetch from URL"}),p.jsxs("div",{style:m.urlFetchRow,children:[p.jsx("input",{type:"text",value:I,onChange:U=>S(U.target.value),placeholder:"https://www.allrecipes.com/recipe/...",style:m.urlInput}),p.jsx("button",{type:"button",onClick:Er,style:m.fetchButton,disabled:i,children:i?"Fetching...":"Fetch"})]}),p.jsx("p",{style:m.websiteHint,children:"Works with most recipe sites. Some sites may block this."})]}),p.jsxs("div",{style:m.orDivider,children:[p.jsx("span",{style:m.orLine}),p.jsx("span",{style:m.orText,children:"or"}),p.jsx("span",{style:m.orLine})]}),p.jsxs("div",{style:m.websiteInputGroup,children:[p.jsx("label",{style:m.label,children:"Option 2: Paste Recipe Content"}),p.jsx("p",{style:m.websiteHint,children:"Copy the recipe from the website and paste it here"}),p.jsx("textarea",{value:k,onChange:U=>A(U.target.value),placeholder:"Paste the recipe content here...",style:m.websiteTextarea,rows:10}),p.jsx("button",{type:"button",onClick:Ln,style:m.uploadButton,disabled:i||!k.trim(),children:i?"Extracting...":"Extract Recipe"})]}),i&&p.jsxs("div",{style:m.processingOverlay,children:[p.jsx("div",{style:m.spinner}),p.jsx("p",{children:"Reading recipe..."})]})]})}),(u==="manual"||t)&&p.jsxs("form",{onSubmit:Ji,style:m.form,children:[p.jsxs("div",{style:m.formSection,children:[p.jsx("h3",{style:m.formSectionTitle,children:"Basic Information"}),p.jsxs("div",{style:m.formRow,children:[p.jsxs("div",{style:m.formGroup,children:[p.jsx("label",{style:m.label,children:"Recipe Title"}),p.jsx("input",{type:"text",value:f.title,onChange:U=>K("title",U.target.value),placeholder:"Grandma's Apple Pie",style:m.input})]}),p.jsxs("div",{style:m.formGroup,children:[p.jsx("label",{style:m.label,children:"Category"}),p.jsxs("select",{value:f.category,onChange:U=>K("category",U.target.value),style:m.select,children:[p.jsx("option",{value:"",children:"Select one..."}),e.map(U=>p.jsx("option",{value:U.id,children:U.name},U.id))]})]})]}),p.jsxs("div",{style:m.formRow3,children:[p.jsxs("div",{style:m.formGroup,children:[p.jsx("label",{style:m.label,children:"Prep Time"}),p.jsx("input",{type:"text",value:f.prepTime,onChange:U=>K("prepTime",U.target.value),placeholder:"20 min",style:m.input})]}),p.jsxs("div",{style:m.formGroup,children:[p.jsx("label",{style:m.label,children:"Cook Time"}),p.jsx("input",{type:"text",value:f.cookTime,onChange:U=>K("cookTime",U.target.value),placeholder:"1 hour",style:m.input})]}),p.jsxs("div",{style:m.formGroup,children:[p.jsx("label",{style:m.label,children:"Servings"}),p.jsx("input",{type:"text",value:f.servings,onChange:U=>K("servings",U.target.value),placeholder:"6-8",style:m.input})]})]}),p.jsxs("div",{style:m.formRow,children:[p.jsxs("div",{style:m.formGroup,children:[p.jsx("label",{style:m.label,children:"Recipe from"}),p.jsx("input",{type:"text",value:f.author,onChange:U=>K("author",U.target.value),placeholder:"Grandma Bever, Mom, etc.",style:m.input})]}),p.jsxs("div",{style:m.formGroup,children:[p.jsx("label",{style:m.label,children:"Source Type"}),p.jsxs("div",{style:m.radioGroup,children:[p.jsxs("label",{style:m.radioLabel,children:[p.jsx("input",{type:"radio",name:"authorIsFamily",checked:f.authorIsFamily!==!1,onChange:()=>K("authorIsFamily",!0),style:m.radio}),p.jsx("span",{children:"Family Member"}),p.jsx("span",{style:m.radioHint,children:"(shows in filter)"})]}),p.jsxs("label",{style:m.radioLabel,children:[p.jsx("input",{type:"radio",name:"authorIsFamily",checked:f.authorIsFamily===!1,onChange:()=>K("authorIsFamily",!1),style:m.radio}),p.jsx("span",{children:"Website / Cookbook / Friend"}),p.jsx("span",{style:m.radioHint,children:"(not in filter)"})]})]})]})]})]}),p.jsxs("div",{style:m.formSection,children:[p.jsx("h3",{style:m.formSectionTitle,children:"Photos"}),p.jsxs("div",{style:m.photoGrid,children:[p.jsxs("div",{style:m.photoUploadArea,children:[p.jsx("label",{style:m.photoLabel,children:"Finished Dish"}),V?p.jsxs("div",{style:m.photoPreviewContainer,children:[p.jsx("img",{src:V,alt:"Recipe",style:m.photoPreview}),p.jsxs("div",{style:m.photoActions,children:[p.jsx("button",{type:"button",onClick:()=>{var U;return(U=We.current)==null?void 0:U.click()},style:m.photoChangeBtn,children:"Change"}),p.jsx("button",{type:"button",onClick:Yi,style:m.photoRemoveBtn,children:"Remove"})]})]}):p.jsxs("div",{style:m.photoDropzone,onClick:()=>{var U;return(U=We.current)==null?void 0:U.click()},children:[p.jsx("span",{style:m.photoIcon,children:""}),p.jsx("p",{style:m.photoText,children:"Add photo of the dish"})]}),p.jsx("input",{ref:We,type:"file",accept:"image/*",onChange:Et,style:{display:"none"}})]}),p.jsxs("div",{style:m.photoUploadArea,children:[p.jsx("label",{style:m.photoLabel,children:"Original Recipe Card"}),w?p.jsxs("div",{style:m.photoPreviewContainer,children:[p.jsx("img",{src:w,alt:"Handwritten",style:m.photoPreview}),p.jsxs("div",{style:m.photoActions,children:[p.jsx("button",{type:"button",onClick:()=>{var U;return(U=q.current)==null?void 0:U.click()},style:m.photoChangeBtn,children:"Change"}),p.jsx("button",{type:"button",onClick:Xi,style:m.photoRemoveBtn,children:"Remove"})]})]}):p.jsxs("div",{style:m.photoDropzone,onClick:()=>{var U;return(U=q.current)==null?void 0:U.click()},children:[p.jsx("span",{style:m.photoIcon,children:""}),p.jsx("p",{style:m.photoText,children:"Add handwritten recipe"})]}),p.jsx("input",{ref:q,type:"file",accept:"image/*",onChange:Dt,style:{display:"none"}})]})]})]}),p.jsxs("div",{style:m.formSection,children:[p.jsx("h3",{style:m.formSectionTitle,children:"The Story"}),p.jsx("p",{style:m.fieldHint,children:"Share the history or special memories behind this recipe"}),p.jsx("textarea",{value:f.story,onChange:U=>K("story",U.target.value),placeholder:"This recipe has been in our family since... Grandma used to make this every Christmas... The secret ingredient is...",style:m.storyInput,rows:4})]}),p.jsxs("div",{style:m.formSection,children:[p.jsx("h3",{style:m.formSectionTitle,children:"Ingredients"}),f.ingredients.map((U,J)=>p.jsx(TR,{ingredient:U,index:J,onUpdate:W,onRemove:()=>le(J),canRemove:f.ingredients.length>1},J)),p.jsx("button",{type:"button",onClick:se,style:m.addItemBtn,children:"+ Add ingredient"})]}),p.jsxs("div",{style:m.formSection,children:[p.jsx("h3",{style:m.formSectionTitle,children:"Instructions"}),f.instructions.map((U,J)=>p.jsxs("div",{style:m.instructionRow,children:[p.jsx("span",{style:m.stepNum,children:J+1}),p.jsx("textarea",{value:U,onChange:O=>oe(J,O.target.value),placeholder:"Describe this step...",style:m.instructionInput,rows:2}),p.jsx("button",{type:"button",onClick:()=>Pt(J),style:m.removeBtn,children:""})]},J)),p.jsx("button",{type:"button",onClick:ae,style:m.addItemBtn,children:"+ Add step"})]}),p.jsxs("div",{style:m.formSection,children:[p.jsx("h3",{style:m.formSectionTitle,children:"Tips & Notes"}),p.jsx("textarea",{value:f.notes,onChange:U=>K("notes",U.target.value),placeholder:"Any tips, variations, or substitutions...",style:m.notesInput,rows:3})]}),p.jsxs("div",{style:m.formActions,children:[p.jsx("button",{type:"button",onClick:r,style:m.cancelBtn,children:"Cancel"}),p.jsx("button",{type:"submit",style:m.saveBtn,disabled:v,children:v?"Saving...":"Save Recipe"})]})]})]})}function SR({recipe:t,categories:e,onEdit:n,onDelete:r,onBack:i,onAddComment:s,onDeleteComment:o,onShare:l,onMadeIt:u,isFavorite:h,onToggleFavorite:f,isFamily:y}){var We,q,K;const _=e.find(W=>W.id===t.category),[R,P]=te.useState(!1),[N,V]=te.useState(!1),[x,w]=te.useState({author:"",text:""}),[C,b]=te.useState(!1),[B,$]=te.useState(!1),[T,v]=te.useState(""),[E,I]=te.useState(1),[S,k]=te.useState(!1),A=()=>{x.text.trim()&&(x.author.trim()||(x.author="Anonymous"),s(x),w({author:"",text:""}),b(!1))},Re=()=>{u(T.trim()||"Someone"),v(""),$(!1)},it=W=>W?new Date(W).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"",kt=(W,se=1)=>{if(W.qty!==void 0){const le=W.qty?parseFloat(W.qty)*se:"";return{amount:`${le?yR(le):""} ${W.unit||""}`.trim(),ingredient:W.ingredient||""}}return{amount:mR(W.amount,se),ingredient:W.ingredient||""}};return p.jsxs("div",{style:m.detailPage,children:[p.jsxs("div",{style:m.detailNav,className:"no-print",children:[p.jsx("button",{onClick:i,style:m.backBtn,children:" Back"}),p.jsxs("div",{style:m.detailActions,children:[p.jsx("button",{onClick:f,style:{...m.actionBtn,color:h?"#c75050":"#5a5a5a"},children:h?"":""}),p.jsx("button",{onClick:l,style:m.actionBtn,children:"Share"}),p.jsx("button",{onClick:()=>window.print(),style:m.actionBtn,children:"Print"}),y&&p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:n,style:m.actionBtn,children:"Edit"}),p.jsx("button",{onClick:r,style:m.deleteBtn,children:"Delete"})]})]})]}),p.jsxs("article",{style:m.recipeDetail,className:"print-recipe",children:[t.imageUrl&&!R&&p.jsx("div",{style:m.detailImageWrap,className:"print-image",children:p.jsx("img",{src:t.imageUrl,alt:t.title,style:m.detailImage,onError:()=>P(!0)})}),p.jsxs("div",{style:m.detailContent,children:[p.jsxs("header",{style:m.detailHeader,children:[_&&p.jsx("span",{style:m.detailCategory,children:_.name}),p.jsx("h1",{style:m.detailTitle,children:t.title}),t.author&&p.jsx("p",{style:m.detailAuthor,children:c0(t.author,t.authorIsFamily)}),p.jsxs("div",{style:m.detailMeta,children:[t.prepTime&&p.jsxs("span",{children:["Prep: ",t.prepTime]}),t.cookTime&&p.jsxs("span",{children:["Cook: ",t.cookTime]}),t.servings&&p.jsxs("span",{children:["Serves ",t.servings]})]}),y&&p.jsxs("div",{style:m.madeItSection,className:"no-print",children:[t.madeIt&&t.madeIt.length>0&&p.jsxs("p",{style:m.madeItList,children:[" Made by: ",t.madeIt.map(W=>W.name).join(", ")]}),B?p.jsxs("div",{style:m.madeItForm,children:[p.jsx("input",{type:"text",value:T,onChange:W=>v(W.target.value),placeholder:"Your name",style:m.madeItInput,autoFocus:!0}),p.jsx("button",{onClick:Re,style:m.madeItSubmit,children:"Add"}),p.jsx("button",{onClick:()=>$(!1),style:m.madeItCancel,children:""})]}):p.jsx("button",{onClick:()=>$(!0),style:m.madeItBtn,children:" I Made This!"})]}),!y&&t.madeIt&&t.madeIt.length>0&&p.jsx("div",{style:m.madeItSection,className:"no-print",children:p.jsxs("p",{style:m.madeItList,children:[" Made by: ",t.madeIt.map(W=>W.name).join(", ")]})})]}),t.story&&p.jsxs("section",{style:m.storyBox,children:[p.jsx("h3",{style:m.storyTitle,children:"The Story"}),p.jsx("p",{style:m.storyContent,children:t.story})]}),p.jsxs("div",{style:m.detailDivider,children:[p.jsx("span",{style:m.dividerLine}),p.jsx("span",{style:m.dividerIcon,children:""}),p.jsx("span",{style:m.dividerLine})]}),p.jsxs("div",{style:m.scalerRow,className:"no-print",children:[p.jsx("span",{style:m.scalerLabel,children:"Adjust servings:"}),p.jsxs("div",{style:m.scalerButtons,children:[p.jsx("button",{style:{...m.scalerBtn,...E===.5?m.scalerBtnActive:{}},onClick:()=>I(.5),children:""}),p.jsx("button",{style:{...m.scalerBtn,...E===1?m.scalerBtnActive:{}},onClick:()=>I(1),children:"1"}),p.jsx("button",{style:{...m.scalerBtn,...E===2?m.scalerBtnActive:{}},onClick:()=>I(2),children:"2"}),p.jsx("button",{style:{...m.scalerBtn,...E===3?m.scalerBtnActive:{}},onClick:()=>I(3),children:"3"})]})]}),p.jsxs("div",{style:m.detailBody,children:[p.jsxs("section",{style:m.ingredientsCol,children:[p.jsx("h2",{style:m.colTitle,children:"Ingredients"}),p.jsx("ul",{style:m.ingredientsList,children:(We=t.ingredients)==null?void 0:We.map((W,se)=>{const le=kt(W,E);return p.jsxs("li",{style:m.ingredientItem,children:[p.jsx("strong",{children:le.amount})," ",le.ingredient]},se)})})]}),p.jsxs("section",{style:m.instructionsCol,children:[p.jsx("h2",{style:m.colTitle,children:"Instructions"}),p.jsx("ol",{style:m.instructionsList,children:(q=t.instructions)==null?void 0:q.map((W,se)=>p.jsx("li",{style:m.instructionItem,children:W},se))})]})]}),t.notes&&p.jsxs("section",{style:m.notesBox,children:[p.jsx("h3",{style:m.notesTitle,children:"Tips & Notes"}),p.jsx("p",{style:m.notesContent,children:t.notes})]}),t.handwrittenImageUrl&&!N&&p.jsxs("section",{style:m.handwrittenSection,className:"no-print",children:[p.jsx("h3",{style:m.handwrittenTitle,children:"Original Recipe Card"}),p.jsx("img",{src:t.handwrittenImageUrl,alt:"Original handwritten recipe",style:m.handwrittenThumb,onClick:()=>k(!0),onError:()=>V(!0)}),p.jsx("p",{style:m.handwrittenHint,children:"Click to enlarge"})]}),S&&p.jsx("div",{style:m.modal,onClick:()=>k(!1),children:p.jsxs("div",{style:m.modalContent,onClick:W=>W.stopPropagation(),children:[p.jsx("button",{style:m.modalClose,onClick:()=>k(!1),children:""}),p.jsx("img",{src:t.handwrittenImageUrl,alt:"Original handwritten recipe",style:m.modalImage})]})}),p.jsxs("section",{style:m.commentsSection,className:"no-print",children:[p.jsxs("div",{style:m.commentsSectionHeader,children:[p.jsxs("h3",{style:m.commentsTitle,children:["Family Notes & Reviews (",((K=t.comments)==null?void 0:K.length)||0,")"]}),!C&&p.jsx("button",{onClick:()=>b(!0),style:m.addCommentBtn,children:"+ Add Note"})]}),C&&p.jsxs("div",{style:m.commentForm,children:[p.jsx("input",{type:"text",value:x.author,onChange:W=>w(se=>({...se,author:W.target.value})),placeholder:"Your name",style:m.commentAuthorInput}),p.jsx("textarea",{value:x.text,onChange:W=>w(se=>({...se,text:W.target.value})),placeholder:"Share your experience with this recipe, any changes you made, or tips for others...",style:m.commentTextInput,rows:3}),p.jsxs("div",{style:m.commentFormActions,children:[p.jsx("button",{type:"button",onClick:()=>b(!1),style:m.cancelBtn,children:"Cancel"}),p.jsx("button",{type:"button",onClick:A,style:m.saveBtn,disabled:!x.text.trim(),children:"Add Note"})]})]}),t.comments&&t.comments.length>0?p.jsx("div",{style:m.commentsList,children:t.comments.map(W=>p.jsxs("div",{style:m.commentItem,children:[p.jsxs("div",{style:m.commentHeader,children:[p.jsx("span",{style:m.commentAuthor,children:W.author}),p.jsx("span",{style:m.commentDate,children:it(W.date)})]}),p.jsx("p",{style:m.commentText,children:W.text}),p.jsx("button",{onClick:()=>{confirm("Remove this note?")&&o(W.id)},style:m.deleteCommentBtn,children:"Remove"})]},W.id))}):!C&&p.jsx("p",{style:m.noComments,children:"No notes yet. Be the first to share your experience with this recipe!"})]})]})]})]})}const m={app:{minHeight:"100vh",backgroundColor:"#fdfcfa",fontFamily:"'Montserrat', -apple-system, BlinkMacSystemFont, sans-serif",color:"#2d2d2d"},loadingScreen:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f5f3ef"},loadingContent:{textAlign:"center"},loadingLogo:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:48,color:"#8a9a8e",letterSpacing:4,marginBottom:16},loadingText:{color:"#5a5a5a",fontSize:14,letterSpacing:2},notification:{position:"fixed",top:20,right:20,padding:"14px 28px",borderRadius:2,color:"white",fontSize:13,fontWeight:500,letterSpacing:.5,zIndex:1e3,boxShadow:"0 4px 20px rgba(0,0,0,0.15)"},header:{backgroundColor:"#fdfcfa",borderBottom:"1px solid #e8e6e2",padding:"20px 40px"},headerInner:{maxWidth:1200,margin:"0 auto",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:16},logo:{display:"flex",alignItems:"center",gap:16,cursor:"pointer"},logoMark:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:28,color:"#8a9a8e",letterSpacing:3},logoText:{display:"flex",flexDirection:"column"},logoTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:20,fontWeight:600,color:"#2d2d2d",lineHeight:1.1},logoSubtitle:{fontSize:10,letterSpacing:3,color:"#8a9a8e"},nav:{display:"flex",gap:24},navLink:{background:"none",border:"none",fontSize:13,fontWeight:500,color:"#5a5a5a",cursor:"pointer",letterSpacing:1,textTransform:"uppercase",padding:"8px 0",borderBottom:"2px solid transparent"},navLinkActive:{background:"none",border:"none",fontSize:13,fontWeight:500,color:"#2d2d2d",cursor:"pointer",letterSpacing:1,textTransform:"uppercase",padding:"8px 0",borderBottom:"2px solid #8a9a8e"},mobileMenuBtn:{display:"none",background:"none",border:"1px solid #d9d6d0",borderRadius:4,padding:"8px 12px",fontSize:18,cursor:"pointer",color:"#5a5a5a"},mobileNav:{display:"none",flexDirection:"column",gap:0,padding:"16px 0",borderTop:"1px solid #e8e6e2",marginTop:16},mobileNavLink:{background:"none",border:"none",padding:"12px 16px",fontSize:14,color:"#2d2d2d",cursor:"pointer",textAlign:"left",borderBottom:"1px solid #f0ede8"},hero:{backgroundColor:"#f5f3ef",padding:"60px 40px",textAlign:"center"},heroContent:{maxWidth:700,margin:"0 auto"},heroWelcome:{fontSize:13,letterSpacing:3,textTransform:"uppercase",color:"#8a9a8e",marginBottom:12},heroTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:48,fontWeight:400,color:"#2d2d2d",marginBottom:24,lineHeight:1.1},heroDivider:{display:"flex",alignItems:"center",justifyContent:"center",gap:16,marginBottom:24},heroDividerLine:{width:60,height:1,backgroundColor:"#c9c4bc"},heroDividerIcon:{color:"#8a9a8e",fontSize:12},heroSubtitle:{fontSize:15,color:"#5a5a5a",lineHeight:1.8,marginBottom:32},searchContainer:{maxWidth:400,margin:"0 auto",position:"relative"},searchInput:{width:"100%",padding:"16px 48px 16px 24px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,backgroundColor:"white",outline:"none",textAlign:"center",letterSpacing:.5,color:"#2d2d2d"},clearSearch:{position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",background:"none",border:"none",fontSize:20,color:"#7a7a7a",cursor:"pointer",padding:4},filterRow:{marginTop:24,display:"flex",alignItems:"center",justifyContent:"center",gap:16,flexWrap:"wrap"},filterGroup:{display:"flex",alignItems:"center",gap:8},filterLabel:{fontSize:13,color:"#5a5a5a"},filterSelect:{padding:"10px 16px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,backgroundColor:"white",outline:"none",cursor:"pointer",minWidth:130,color:"#2d2d2d"},favoritesToggle:{padding:"10px 16px",fontSize:13,border:"1px solid #d9d6d0",borderRadius:2,cursor:"pointer",fontWeight:500},categorySection:{padding:"24px 40px",borderBottom:"1px solid #e8e6e2",backgroundColor:"#fdfcfa",overflowX:"auto"},categoryPills:{display:"flex",justifyContent:"center",flexWrap:"wrap",gap:10,maxWidth:1e3,margin:"0 auto"},categoryPill:{padding:"8px 16px",background:"transparent",border:"1px solid #d9d6d0",borderRadius:2,fontSize:11,fontWeight:500,color:"#5a5a5a",cursor:"pointer",letterSpacing:1,textTransform:"uppercase",whiteSpace:"nowrap"},categoryPillActive:{padding:"8px 16px",background:"#5c6d5e",border:"1px solid #5c6d5e",borderRadius:2,fontSize:11,fontWeight:500,color:"white",cursor:"pointer",letterSpacing:1,textTransform:"uppercase",whiteSpace:"nowrap"},recipeSection:{padding:"48px 40px",maxWidth:1200,margin:"0 auto"},sectionHeader:{display:"flex",justifyContent:"space-between",alignItems:"baseline",marginBottom:32,paddingBottom:16,borderBottom:"1px solid #e8e6e2",flexWrap:"wrap",gap:8},sectionTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:28,fontWeight:400,color:"#2d2d2d"},recipeCount:{fontSize:13,color:"#7a7a7a",letterSpacing:.5},recipeGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:32},recipeCard:{background:"white",border:"1px solid #e8e6e2",borderRadius:2,overflow:"hidden",cursor:"pointer",textAlign:"left",transition:"box-shadow 0.2s"},cardImageContainer:{height:200,overflow:"hidden",backgroundColor:"#f5f3ef",position:"relative"},cardImage:{width:"100%",height:"100%",objectFit:"cover"},cardImagePlaceholder:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f5f3ef"},placeholderIcon:{fontSize:32,color:"#c9c4bc"},favoriteBtn:{position:"absolute",top:12,right:12,background:"rgba(0,0,0,0.3)",border:"none",borderRadius:"50%",width:36,height:36,fontSize:18,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},cardContent:{padding:20},cardCategory:{fontSize:10,letterSpacing:2,textTransform:"uppercase",color:"#8a9a8e",marginBottom:6,display:"block"},cardTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:20,fontWeight:400,color:"#2d2d2d",marginBottom:6,lineHeight:1.3},cardAuthor:{fontSize:12,color:"#6a6a6a",fontStyle:"italic",marginBottom:10},cardMeta:{fontSize:11,color:"#6a6a6a",display:"flex",alignItems:"center",flexWrap:"wrap"},cardMetaDot:{margin:"0 6px"},emptyState:{textAlign:"center",padding:"60px 20px"},emptyIcon:{fontSize:32,color:"#c9c4bc",marginBottom:24},emptyTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:28,color:"#2d2d2d",marginBottom:12},emptyText:{color:"#5a5a5a",marginBottom:32,fontSize:15},emptyButton:{padding:"14px 32px",background:"#5c6d5e",color:"white",border:"none",borderRadius:2,fontSize:12,fontWeight:500,letterSpacing:1,textTransform:"uppercase",cursor:"pointer"},footer:{backgroundColor:"#f5f3ef",padding:"48px 40px",textAlign:"center",borderTop:"1px solid #e8e6e2"},footerContent:{maxWidth:400,margin:"0 auto"},footerLogo:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:32,color:"#8a9a8e",letterSpacing:4,marginBottom:16,display:"block"},footerText:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:20,color:"#2d2d2d",marginBottom:8},footerTagline:{fontSize:13,color:"#6a6a6a",fontStyle:"italic"},addPage:{maxWidth:700,margin:"0 auto",padding:"48px 24px"},addPageHeader:{textAlign:"center",marginBottom:40},addPageTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:36,color:"#2d2d2d",marginBottom:8},addPageSubtitle:{color:"#6a6a6a",fontSize:14},tabs:{display:"flex",marginBottom:32,border:"1px solid #d9d6d0",borderRadius:2,overflow:"hidden"},tab:{flex:1,padding:"14px 16px",background:"white",border:"none",fontSize:12,fontWeight:500,color:"#5a5a5a",cursor:"pointer",letterSpacing:.5},tabActive:{flex:1,padding:"14px 16px",background:"#5c6d5e",border:"none",fontSize:12,fontWeight:500,color:"white",cursor:"pointer",letterSpacing:.5},scanSection:{marginBottom:32},uploadZone:{border:"2px dashed #d9d6d0",borderRadius:2,padding:"60px 40px",textAlign:"center",cursor:"pointer",backgroundColor:"#faf9f7",position:"relative",transition:"all 0.2s"},scanIcon:{fontSize:32,color:"#8a9a8e",marginBottom:16},scanTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:24,color:"#2d2d2d",marginBottom:12},scanText:{color:"#5a5a5a",fontSize:14,marginBottom:24,lineHeight:1.7},uploadButton:{padding:"14px 28px",background:"#5c6d5e",color:"white",border:"none",borderRadius:2,fontSize:12,fontWeight:500,letterSpacing:1,textTransform:"uppercase",cursor:"pointer"},uploadedImage:{maxWidth:"100%",maxHeight:300,borderRadius:2},pdfPreview:{display:"flex",flexDirection:"column",alignItems:"center",gap:12},pdfIcon:{width:80,height:100,background:"#e8e6e2",borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",fontSize:18,fontWeight:600,color:"#5a5a5a",letterSpacing:1},pdfFileName:{fontSize:14,color:"#4a4a4a",fontWeight:500},fileTypes:{fontSize:12,color:"#7a7a7a",marginTop:16},processingOverlay:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(253,252,250,0.95)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",borderRadius:2},spinner:{width:40,height:40,border:"3px solid #e8e6e2",borderTopColor:"#8a9a8e",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:16},websiteSection:{marginBottom:32},websiteBox:{border:"1px solid #d9d6d0",borderRadius:2,padding:40,backgroundColor:"#faf9f7",position:"relative",textAlign:"center"},websiteInputGroup:{marginTop:24,textAlign:"left"},websiteHint:{fontSize:12,color:"#6a6a6a",marginBottom:8,fontStyle:"italic"},websiteTextarea:{width:"100%",padding:"14px 16px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",fontFamily:"inherit",resize:"vertical",backgroundColor:"white",marginBottom:16,color:"#2d2d2d"},urlFetchRow:{display:"flex",gap:12,marginBottom:8},urlInput:{flex:1,padding:"14px 16px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",fontFamily:"inherit",color:"#2d2d2d"},fetchButton:{padding:"14px 24px",background:"#5c6d5e",color:"white",border:"none",borderRadius:2,fontSize:12,fontWeight:500,letterSpacing:1,textTransform:"uppercase",cursor:"pointer",whiteSpace:"nowrap"},orDivider:{display:"flex",alignItems:"center",justifyContent:"center",gap:16,margin:"32px 0"},orLine:{flex:1,height:1,backgroundColor:"#d9d6d0"},orText:{fontSize:12,color:"#7a7a7a",textTransform:"uppercase",letterSpacing:2},form:{background:"white",border:"1px solid #e8e6e2",padding:40},formSection:{marginBottom:40},formSectionTitle:{fontSize:11,fontWeight:600,letterSpacing:2,textTransform:"uppercase",color:"#8a9a8e",marginBottom:20,paddingBottom:12,borderBottom:"1px solid #e8e6e2"},fieldHint:{fontSize:13,color:"#6a6a6a",marginBottom:12,fontStyle:"italic"},formRow:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:20,marginBottom:20},formRow3:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:20,marginBottom:20},formGroup:{marginBottom:20},label:{display:"block",fontSize:12,fontWeight:500,color:"#4a4a4a",marginBottom:8,letterSpacing:.5},input:{width:"100%",padding:"14px 16px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",fontFamily:"inherit",color:"#2d2d2d"},select:{width:"100%",padding:"14px 16px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",background:"white",cursor:"pointer",fontFamily:"inherit",color:"#2d2d2d"},radioGroup:{display:"flex",flexDirection:"column",gap:10,marginTop:8},radioLabel:{display:"flex",alignItems:"center",gap:8,fontSize:14,color:"#3d3d3d",cursor:"pointer"},radio:{accentColor:"#5c6d5e"},radioHint:{fontSize:11,color:"#8a8a8a",marginLeft:4},photoGrid:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:20},photoUploadArea:{},photoLabel:{display:"block",fontSize:12,fontWeight:500,color:"#4a4a4a",marginBottom:10},photoPreviewContainer:{position:"relative"},photoPreview:{width:"100%",height:180,objectFit:"cover",borderRadius:2},photoActions:{position:"absolute",bottom:12,left:12,display:"flex",gap:8},photoChangeBtn:{padding:"8px 16px",background:"white",border:"none",borderRadius:2,fontSize:12,fontWeight:500,cursor:"pointer"},photoRemoveBtn:{padding:"8px 16px",background:"white",border:"none",borderRadius:2,fontSize:12,fontWeight:500,cursor:"pointer",color:"#9b6b5b"},photoDropzone:{border:"2px dashed #d9d6d0",borderRadius:2,padding:"30px 20px",textAlign:"center",cursor:"pointer",height:180,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},photoIcon:{fontSize:28,display:"block",marginBottom:8},photoText:{fontSize:12,color:"#6a6a6a"},storyInput:{width:"100%",padding:"14px 16px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",fontFamily:"inherit",resize:"vertical",lineHeight:1.7,color:"#2d2d2d"},ingredientRow:{display:"flex",gap:12,marginBottom:12},ingredientInput:{flex:1,padding:"12px 14px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",fontFamily:"inherit",color:"#2d2d2d"},removeBtn:{width:40,height:40,background:"transparent",border:"1px solid #d9d6d0",borderRadius:2,cursor:"pointer",fontSize:18,color:"#7a7a7a",display:"flex",alignItems:"center",justifyContent:"center"},addItemBtn:{padding:"12px 20px",background:"transparent",border:"1px solid #d9d6d0",borderRadius:2,fontSize:13,color:"#5a5a5a",cursor:"pointer",fontFamily:"inherit"},instructionRow:{display:"flex",gap:12,marginBottom:12,alignItems:"flex-start"},stepNum:{width:32,height:32,background:"#f5f3ef",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:13,fontWeight:500,color:"#5a5a5a",flexShrink:0,marginTop:4},instructionInput:{flex:1,padding:"12px 14px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",fontFamily:"inherit",resize:"vertical",color:"#2d2d2d"},notesInput:{width:"100%",padding:"14px 16px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",fontFamily:"inherit",resize:"vertical",color:"#2d2d2d"},formActions:{display:"flex",justifyContent:"flex-end",gap:12,paddingTop:24,borderTop:"1px solid #e8e6e2",marginTop:20},cancelBtn:{padding:"14px 28px",background:"transparent",border:"1px solid #d9d6d0",borderRadius:2,fontSize:12,fontWeight:500,letterSpacing:1,textTransform:"uppercase",cursor:"pointer",color:"#5a5a5a"},saveBtn:{padding:"14px 32px",background:"#5c6d5e",border:"none",borderRadius:2,fontSize:12,fontWeight:500,letterSpacing:1,textTransform:"uppercase",cursor:"pointer",color:"white"},detailPage:{maxWidth:900,margin:"0 auto",padding:"40px 24px"},detailNav:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:32,flexWrap:"wrap",gap:12},backBtn:{padding:"10px 20px",background:"transparent",border:"1px solid #d9d6d0",borderRadius:2,fontSize:13,color:"#5a5a5a",cursor:"pointer"},detailActions:{display:"flex",gap:8,flexWrap:"wrap"},actionBtn:{padding:"10px 16px",background:"white",border:"1px solid #d9d6d0",borderRadius:2,fontSize:12,color:"#5a5a5a",cursor:"pointer",letterSpacing:.5},deleteBtn:{padding:"10px 16px",background:"white",border:"1px solid #c9a89a",borderRadius:2,fontSize:12,color:"#9b6b5b",cursor:"pointer",letterSpacing:.5},recipeDetail:{background:"white",border:"1px solid #e8e6e2",overflow:"hidden"},detailImageWrap:{height:400,overflow:"hidden"},detailImage:{width:"100%",height:"100%",objectFit:"cover"},detailContent:{padding:48},detailHeader:{textAlign:"center",marginBottom:32},detailCategory:{fontSize:11,letterSpacing:2,textTransform:"uppercase",color:"#8a9a8e",marginBottom:12,display:"block"},detailTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:42,fontWeight:400,color:"#2d2d2d",marginBottom:12,lineHeight:1.2},detailAuthor:{fontSize:15,color:"#6a6a6a",fontStyle:"italic",marginBottom:24},detailMeta:{display:"flex",justifyContent:"center",gap:32,fontSize:13,color:"#5a5a5a",flexWrap:"wrap"},madeItSection:{marginTop:24,paddingTop:20,borderTop:"1px solid #f0ede8"},madeItList:{fontSize:13,color:"#5c6d5e",marginBottom:12,fontWeight:500},madeItBtn:{padding:"10px 20px",background:"#f5f3ef",border:"1px solid #d9d6d0",borderRadius:2,fontSize:13,color:"#5c6d5e",cursor:"pointer",fontWeight:500},madeItForm:{display:"flex",gap:8,alignItems:"center",justifyContent:"center"},madeItInput:{padding:"10px 14px",border:"1px solid #d9d6d0",borderRadius:2,fontSize:14,width:150,outline:"none"},madeItSubmit:{padding:"10px 16px",background:"#5c6d5e",color:"white",border:"none",borderRadius:2,fontSize:12,cursor:"pointer"},madeItCancel:{padding:"10px 12px",background:"transparent",border:"1px solid #d9d6d0",borderRadius:2,fontSize:14,cursor:"pointer",color:"#7a7a7a"},storyBox:{padding:28,background:"#faf9f7",borderLeft:"3px solid #c9b896",marginBottom:24},storyTitle:{fontSize:11,fontWeight:600,letterSpacing:2,textTransform:"uppercase",color:"#a89968",marginBottom:12},storyContent:{fontSize:15,color:"#4a4a4a",lineHeight:1.8,fontStyle:"italic"},detailDivider:{display:"flex",alignItems:"center",justifyContent:"center",gap:16,margin:"32px 0"},dividerLine:{width:60,height:1,backgroundColor:"#e8e6e2"},dividerIcon:{color:"#c9c4bc",fontSize:12},scalerRow:{display:"flex",alignItems:"center",justifyContent:"center",gap:12,marginBottom:24,flexWrap:"wrap"},scalerLabel:{fontSize:13,color:"#5a5a5a"},scalerButtons:{display:"flex",gap:6},scalerBtn:{padding:"8px 14px",background:"white",border:"1px solid #d9d6d0",borderRadius:2,fontSize:13,color:"#5a5a5a",cursor:"pointer"},scalerBtnActive:{background:"#5c6d5e",borderColor:"#5c6d5e",color:"white"},detailBody:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:48},ingredientsCol:{},instructionsCol:{},colTitle:{fontSize:11,fontWeight:600,letterSpacing:2,textTransform:"uppercase",color:"#8a9a8e",marginBottom:20,paddingBottom:12,borderBottom:"1px solid #e8e6e2"},ingredientsList:{listStyle:"none"},ingredientItem:{padding:"10px 0",borderBottom:"1px dotted #e8e6e2",fontSize:14,color:"#3d3d3d"},instructionsList:{paddingLeft:20},instructionItem:{padding:"12px 0",fontSize:14,color:"#3d3d3d",lineHeight:1.8},notesBox:{marginTop:40,padding:28,background:"#f9f8f6",borderLeft:"3px solid #8a9a8e"},notesTitle:{fontSize:11,fontWeight:600,letterSpacing:2,textTransform:"uppercase",color:"#8a9a8e",marginBottom:12},notesContent:{fontSize:14,color:"#4a4a4a",lineHeight:1.8,fontStyle:"italic"},handwrittenSection:{marginTop:40,textAlign:"center"},handwrittenTitle:{fontSize:11,fontWeight:600,letterSpacing:2,textTransform:"uppercase",color:"#a89968",marginBottom:16},handwrittenThumb:{maxWidth:300,maxHeight:200,objectFit:"cover",borderRadius:4,border:"1px solid #e8e6e2",cursor:"pointer",transition:"transform 0.2s"},handwrittenHint:{fontSize:11,color:"#8a8a8a",marginTop:8},modal:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:20},modalContent:{position:"relative",maxWidth:"90vw",maxHeight:"90vh"},modalClose:{position:"absolute",top:-40,right:0,background:"none",border:"none",color:"white",fontSize:24,cursor:"pointer"},modalImage:{maxWidth:"100%",maxHeight:"85vh",objectFit:"contain",borderRadius:4},commentsSection:{marginTop:48,paddingTop:32,borderTop:"1px solid #e8e6e2"},commentsSectionHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24,flexWrap:"wrap",gap:12},commentsTitle:{fontSize:11,fontWeight:600,letterSpacing:2,textTransform:"uppercase",color:"#8a9a8e"},addCommentBtn:{padding:"10px 20px",background:"transparent",border:"1px solid #8a9a8e",borderRadius:2,fontSize:12,fontWeight:500,color:"#5c6d5e",cursor:"pointer",letterSpacing:.5},commentForm:{background:"#f9f8f6",padding:24,marginBottom:24,borderRadius:2},commentAuthorInput:{width:"100%",maxWidth:300,padding:"12px 16px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",fontFamily:"inherit",marginBottom:12,color:"#2d2d2d"},commentTextInput:{width:"100%",padding:"12px 16px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",fontFamily:"inherit",resize:"vertical",marginBottom:16,color:"#2d2d2d"},commentFormActions:{display:"flex",justifyContent:"flex-end",gap:12},commentsList:{},commentItem:{padding:"20px 0",borderBottom:"1px solid #e8e6e2",position:"relative"},commentHeader:{display:"flex",alignItems:"baseline",gap:12,marginBottom:8},commentAuthor:{fontWeight:600,fontSize:14,color:"#2d2d2d"},commentDate:{fontSize:12,color:"#7a7a7a"},commentText:{fontSize:14,color:"#4a4a4a",lineHeight:1.7},deleteCommentBtn:{position:"absolute",top:20,right:0,background:"none",border:"none",fontSize:12,color:"#c9a89a",cursor:"pointer"},noComments:{fontSize:14,color:"#7a7a7a",fontStyle:"italic",textAlign:"center",padding:"24px 0"},familyLoginModal:{background:"white",padding:40,borderRadius:4,maxWidth:400,width:"90%",textAlign:"center",position:"relative"},familyLoginTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:28,color:"#2d2d2d",marginBottom:12},familyLoginText:{fontSize:14,color:"#6a6a6a",marginBottom:24},familyCodeInput:{width:"100%",padding:"14px 16px",fontSize:16,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",textAlign:"center",marginBottom:16},familyLoginBtn:{width:"100%",padding:"14px 32px",background:"#5c6d5e",color:"white",border:"none",borderRadius:2,fontSize:14,fontWeight:500,cursor:"pointer"},familyBtn:{background:"none",border:"1px solid #8a9a8e",padding:"8px 16px",fontSize:12,color:"#5c6d5e",cursor:"pointer",borderRadius:2,fontWeight:500,letterSpacing:.5},adminToolBtn:{padding:"12px 24px",background:"#5c6d5e",color:"white",border:"none",borderRadius:2,fontSize:12,cursor:"pointer"},trashPage:{maxWidth:800,margin:"0 auto",padding:"40px 24px"},trashHeader:{marginBottom:32},trashTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:36,color:"#2d2d2d",marginBottom:8,marginTop:24},trashSubtitle:{fontSize:14,color:"#7a7a7a"},trashActions:{marginBottom:32,padding:20,background:"#faf5f3",borderRadius:4,border:"1px solid #e8d8d0"},emptyTrashBtn:{padding:"12px 24px",background:"#9b6b5b",color:"white",border:"none",borderRadius:2,fontSize:12,fontWeight:500,cursor:"pointer",marginBottom:12},trashWarning:{fontSize:12,color:"#9b6b5b",margin:0},trashList:{},trashItem:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px 0",borderBottom:"1px solid #e8e6e2",flexWrap:"wrap",gap:16},trashItemInfo:{flex:1,minWidth:200},trashItemTitle:{fontSize:16,fontWeight:500,color:"#2d2d2d",marginBottom:4},trashItemMeta:{fontSize:12,color:"#7a7a7a",margin:0},trashItemActions:{display:"flex",gap:8},restoreBtn:{padding:"8px 16px",background:"#5c6d5e",color:"white",border:"none",borderRadius:2,fontSize:12,cursor:"pointer"},permanentDeleteBtn:{padding:"8px 16px",background:"transparent",color:"#9b6b5b",border:"1px solid #c9a89a",borderRadius:2,fontSize:12,cursor:"pointer"},emptyTrash:{textAlign:"center",padding:"60px 20px"},qtyInput:{width:60,padding:"12px 10px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",textAlign:"center"},unitInputWrapper:{position:"relative",width:80},unitInput:{width:"100%",padding:"12px 10px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none"},unitSuggestions:{position:"absolute",top:"100%",left:0,right:0,background:"white",border:"1px solid #d9d6d0",borderTop:"none",borderRadius:"0 0 2px 2px",zIndex:10,boxShadow:"0 4px 8px rgba(0,0,0,0.1)"},unitSuggestion:{display:"block",width:"100%",padding:"8px 10px",background:"white",border:"none",textAlign:"left",fontSize:13,cursor:"pointer",color:"#4a4a4a"}};if(typeof window<"u"){const t=document.createElement("style");t.textContent=`
    /* Animations */
    @keyframes spin { to { transform: rotate(360deg); } }
    
    /* Mobile menu visibility */
    @media (min-width: 769px) {
      .mobile-menu-btn { display: none !important; }
      .mobile-nav { display: none !important; }
      .desktop-nav { display: flex !important; }
    }
    
    @media (max-width: 768px) {
      .mobile-menu-btn { display: block !important; }
      .mobile-nav { display: flex !important; }
      .desktop-nav { display: none !important; }
    }
    
    /* Mobile Styles */
    @media (max-width: 768px) {
      header > div {
        padding: 16px 20px !important;
      }
      
      section[style*="hero"] {
        padding: 40px 20px !important;
      }
      
      section[style*="hero"] h1 {
        font-size: 32px !important;
      }
      
      section[style*="categorySection"] {
        padding: 16px 12px !important;
      }
      
      section[style*="categorySection"] > div {
        justify-content: flex-start !important;
        flex-wrap: nowrap !important;
        overflow-x: auto !important;
        -webkit-overflow-scrolling: touch;
        padding-bottom: 8px;
      }
      
      section[style*="recipeSection"] {
        padding: 24px 16px !important;
      }
      
      /* Single column on mobile */
      div[style*="recipeGrid"] {
        grid-template-columns: 1fr !important;
        gap: 20px !important;
      }
      
      div[style*="formRow"], div[style*="formRow3"] {
        grid-template-columns: 1fr !important;
      }
      
      div[style*="photoGrid"] {
        grid-template-columns: 1fr !important;
      }
      
      div[style*="detailBody"] {
        grid-template-columns: 1fr !important;
        gap: 32px !important;
      }
      
      div[style*="detailContent"] {
        padding: 24px 16px !important;
      }
      
      h1[style*="detailTitle"] {
        font-size: 28px !important;
      }
      
      div[style*="detailImageWrap"] {
        height: 250px !important;
      }
      
      form[style*="form"] {
        padding: 24px 16px !important;
      }
      
      div[style*="addPage"] {
        padding: 24px 16px !important;
      }
      
      footer {
        padding: 32px 20px !important;
      }
      
      div[style*="ingredientRow"] {
        flex-wrap: wrap;
      }
      
      input[style*="amountInput"] {
        width: 80px !important;
        flex-shrink: 0;
      }
      
      div[style*="filterRow"] {
        flex-direction: column;
        gap: 12px !important;
      }
      
      div[style*="detailActions"] {
        width: 100%;
        justify-content: center;
      }
    }
    
    /* Print Styles */
    @media print {
      body {
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
      }
      
      .no-print {
        display: none !important;
      }
      
      .print-recipe {
        border: none !important;
        box-shadow: none !important;
        max-width: 100% !important;
      }
      
      .print-image {
        height: 200px !important;
        page-break-inside: avoid;
      }
      
      div[style*="detailPage"] {
        padding: 0 !important;
        max-width: 100% !important;
      }
      
      div[style*="detailContent"] {
        padding: 20px !important;
      }
      
      div[style*="detailBody"] {
        display: block !important;
      }
      
      section[style*="ingredientsCol"] {
        margin-bottom: 24px;
        page-break-inside: avoid;
      }
      
      section[style*="instructionsCol"] {
        page-break-inside: avoid;
      }
      
      h1[style*="detailTitle"] {
        font-size: 24px !important;
        margin-bottom: 8px !important;
      }
      
      div[style*="detailMeta"] {
        margin-bottom: 16px;
      }
      
      section[style*="notesBox"], section[style*="storyBox"] {
        margin-top: 24px !important;
        padding: 16px !important;
        page-break-inside: avoid;
      }
      
      li[style*="ingredientItem"] {
        padding: 4px 0 !important;
        font-size: 12px !important;
      }
      
      li[style*="instructionItem"] {
        padding: 6px 0 !important;
        font-size: 12px !important;
        line-height: 1.5 !important;
      }
      
      h2[style*="colTitle"] {
        font-size: 10px !important;
        margin-bottom: 12px !important;
        padding-bottom: 8px !important;
      }
      
      /* Hide divider on print */
      div[style*="detailDivider"] {
        margin: 16px 0 !important;
      }
      
      /* Ensure single page fit */
      @page {
        margin: 0.5in;
        size: letter;
      }
    }
  `,document.head.appendChild(t)}Hu.createRoot(document.getElementById("root")).render(p.jsx(X0.StrictMode,{children:p.jsx(vR,{})}));
