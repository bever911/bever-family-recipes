(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function L0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ng={exports:{}},pl={},rg={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vs=Symbol.for("react.element"),O0=Symbol.for("react.portal"),j0=Symbol.for("react.fragment"),M0=Symbol.for("react.strict_mode"),F0=Symbol.for("react.profiler"),B0=Symbol.for("react.provider"),U0=Symbol.for("react.context"),z0=Symbol.for("react.forward_ref"),$0=Symbol.for("react.suspense"),W0=Symbol.for("react.memo"),H0=Symbol.for("react.lazy"),Bf=Symbol.iterator;function q0(t){return t===null||typeof t!="object"?null:(t=Bf&&t[Bf]||t["@@iterator"],typeof t=="function"?t:null)}var ig={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},og=Object.assign,sg={};function Wi(t,e,n){this.props=t,this.context=e,this.refs=sg,this.updater=n||ig}Wi.prototype.isReactComponent={};Wi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Wi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ag(){}ag.prototype=Wi.prototype;function ud(t,e,n){this.props=t,this.context=e,this.refs=sg,this.updater=n||ig}var cd=ud.prototype=new ag;cd.constructor=ud;og(cd,Wi.prototype);cd.isPureReactComponent=!0;var Uf=Array.isArray,lg=Object.prototype.hasOwnProperty,dd={current:null},ug={key:!0,ref:!0,__self:!0,__source:!0};function cg(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)lg.call(e,r)&&!ug.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:vs,type:t,key:o,ref:s,props:i,_owner:dd.current}}function G0(t,e){return{$$typeof:vs,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function hd(t){return typeof t=="object"&&t!==null&&t.$$typeof===vs}function K0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var zf=/\/+/g;function ou(t,e){return typeof t=="object"&&t!==null&&t.key!=null?K0(""+t.key):e.toString(36)}function ya(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case vs:case O0:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+ou(s,0):r,Uf(i)?(n="",t!=null&&(n=t.replace(zf,"$&/")+"/"),ya(i,e,n,"",function(d){return d})):i!=null&&(hd(i)&&(i=G0(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(zf,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",Uf(t))for(var l=0;l<t.length;l++){o=t[l];var u=r+ou(o,l);s+=ya(o,e,n,u,i)}else if(u=q0(t),typeof u=="function")for(t=u.call(t),l=0;!(o=t.next()).done;)o=o.value,u=r+ou(o,l++),s+=ya(o,e,n,u,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Gs(t,e,n){if(t==null)return t;var r=[],i=0;return ya(t,r,"","",function(o){return e.call(n,o,i++)}),r}function Q0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Tt={current:null},va={transition:null},Y0={ReactCurrentDispatcher:Tt,ReactCurrentBatchConfig:va,ReactCurrentOwner:dd};function dg(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:Gs,forEach:function(t,e,n){Gs(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Gs(t,function(){e++}),e},toArray:function(t){return Gs(t,function(e){return e})||[]},only:function(t){if(!hd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ue.Component=Wi;ue.Fragment=j0;ue.Profiler=F0;ue.PureComponent=ud;ue.StrictMode=M0;ue.Suspense=$0;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y0;ue.act=dg;ue.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=og({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=dd.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)lg.call(e,u)&&!ug.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:vs,type:t.type,key:i,ref:o,props:r,_owner:s}};ue.createContext=function(t){return t={$$typeof:U0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:B0,_context:t},t.Consumer=t};ue.createElement=cg;ue.createFactory=function(t){var e=cg.bind(null,t);return e.type=t,e};ue.createRef=function(){return{current:null}};ue.forwardRef=function(t){return{$$typeof:z0,render:t}};ue.isValidElement=hd;ue.lazy=function(t){return{$$typeof:H0,_payload:{_status:-1,_result:t},_init:Q0}};ue.memo=function(t,e){return{$$typeof:W0,type:t,compare:e===void 0?null:e}};ue.startTransition=function(t){var e=va.transition;va.transition={};try{t()}finally{va.transition=e}};ue.unstable_act=dg;ue.useCallback=function(t,e){return Tt.current.useCallback(t,e)};ue.useContext=function(t){return Tt.current.useContext(t)};ue.useDebugValue=function(){};ue.useDeferredValue=function(t){return Tt.current.useDeferredValue(t)};ue.useEffect=function(t,e){return Tt.current.useEffect(t,e)};ue.useId=function(){return Tt.current.useId()};ue.useImperativeHandle=function(t,e,n){return Tt.current.useImperativeHandle(t,e,n)};ue.useInsertionEffect=function(t,e){return Tt.current.useInsertionEffect(t,e)};ue.useLayoutEffect=function(t,e){return Tt.current.useLayoutEffect(t,e)};ue.useMemo=function(t,e){return Tt.current.useMemo(t,e)};ue.useReducer=function(t,e,n){return Tt.current.useReducer(t,e,n)};ue.useRef=function(t){return Tt.current.useRef(t)};ue.useState=function(t){return Tt.current.useState(t)};ue.useSyncExternalStore=function(t,e,n){return Tt.current.useSyncExternalStore(t,e,n)};ue.useTransition=function(){return Tt.current.useTransition()};ue.version="18.3.1";rg.exports=ue;var te=rg.exports;const X0=L0(te);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J0=te,Z0=Symbol.for("react.element"),ew=Symbol.for("react.fragment"),tw=Object.prototype.hasOwnProperty,nw=J0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rw={key:!0,ref:!0,__self:!0,__source:!0};function hg(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)tw.call(e,r)&&!rw.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Z0,type:t,key:o,ref:s,props:i,_owner:nw.current}}pl.Fragment=ew;pl.jsx=hg;pl.jsxs=hg;ng.exports=pl;var p=ng.exports,qu={},fg={exports:{}},Ft={},pg={exports:{}},mg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,K){var q=H.length;H.push(K);e:for(;0<q;){var ie=q-1>>>1,le=H[ie];if(0<i(le,K))H[ie]=K,H[q]=le,q=ie;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var K=H[0],q=H.pop();if(q!==K){H[0]=q;e:for(var ie=0,le=H.length,ne=le>>>1;ie<ne;){var ae=2*(ie+1)-1,Oe=H[ae],st=ae+1,gt=H[st];if(0>i(Oe,q))st<le&&0>i(gt,Oe)?(H[ie]=gt,H[st]=q,ie=st):(H[ie]=Oe,H[ae]=q,ie=ae);else if(st<le&&0>i(gt,q))H[ie]=gt,H[st]=q,ie=st;else break e}}return K}function i(H,K){var q=H.sortIndex-K.sortIndex;return q!==0?q:H.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],d=[],f=1,y=null,_=3,R=!1,P=!1,b=!1,L=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(H){for(var K=n(d);K!==null;){if(K.callback===null)r(d);else if(K.startTime<=H)r(d),K.sortIndex=K.expirationTime,e(u,K);else break;K=n(d)}}function N(H){if(b=!1,C(H),!P)if(n(u)!==null)P=!0,Dt(B);else{var K=n(d);K!==null&&He(N,K.startTime-H)}}function B(H,K){P=!1,b&&(b=!1,x(v),v=-1),R=!0;var q=_;try{for(C(K),y=n(u);y!==null&&(!(y.expirationTime>K)||H&&!S());){var ie=y.callback;if(typeof ie=="function"){y.callback=null,_=y.priorityLevel;var le=ie(y.expirationTime<=K);K=t.unstable_now(),typeof le=="function"?y.callback=le:y===n(u)&&r(u),C(K)}else r(u);y=n(u)}if(y!==null)var ne=!0;else{var ae=n(d);ae!==null&&He(N,ae.startTime-K),ne=!1}return ne}finally{y=null,_=q,R=!1}}var $=!1,T=null,v=-1,E=5,I=-1;function S(){return!(t.unstable_now()-I<E)}function k(){if(T!==null){var H=t.unstable_now();I=H;var K=!0;try{K=T(!0,H)}finally{K?A():($=!1,T=null)}}else $=!1}var A;if(typeof w=="function")A=function(){w(k)};else if(typeof MessageChannel<"u"){var Ce=new MessageChannel,Ye=Ce.port2;Ce.port1.onmessage=k,A=function(){Ye.postMessage(null)}}else A=function(){L(k,0)};function Dt(H){T=H,$||($=!0,A())}function He(H,K){v=L(function(){H(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){P||R||(P=!0,Dt(B))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(H){switch(_){case 1:case 2:case 3:var K=3;break;default:K=_}var q=_;_=K;try{return H()}finally{_=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,K){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var q=_;_=H;try{return K()}finally{_=q}},t.unstable_scheduleCallback=function(H,K,q){var ie=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?ie+q:ie):q=ie,H){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=q+le,H={id:f++,callback:K,priorityLevel:H,startTime:q,expirationTime:le,sortIndex:-1},q>ie?(H.sortIndex=q,e(d,H),n(u)===null&&H===n(d)&&(b?(x(v),v=-1):b=!0,He(N,q-ie))):(H.sortIndex=le,e(u,H),P||R||(P=!0,Dt(B))),H},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(H){var K=_;return function(){var q=_;_=K;try{return H.apply(this,arguments)}finally{_=q}}}})(mg);pg.exports=mg;var iw=pg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ow=te,Mt=iw;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gg=new Set,qo={};function Qr(t,e){Ri(t,e),Ri(t+"Capture",e)}function Ri(t,e){for(qo[t]=e,t=0;t<e.length;t++)gg.add(e[t])}var Sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gu=Object.prototype.hasOwnProperty,sw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$f={},Wf={};function aw(t){return Gu.call(Wf,t)?!0:Gu.call($f,t)?!1:sw.test(t)?Wf[t]=!0:($f[t]=!0,!1)}function lw(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function uw(t,e,n,r){if(e===null||typeof e>"u"||lw(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function It(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var it={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){it[t]=new It(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];it[e]=new It(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){it[t]=new It(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){it[t]=new It(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){it[t]=new It(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){it[t]=new It(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){it[t]=new It(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){it[t]=new It(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){it[t]=new It(t,5,!1,t.toLowerCase(),null,!1,!1)});var fd=/[\-:]([a-z])/g;function pd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(fd,pd);it[e]=new It(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(fd,pd);it[e]=new It(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(fd,pd);it[e]=new It(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){it[t]=new It(t,1,!1,t.toLowerCase(),null,!1,!1)});it.xlinkHref=new It("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){it[t]=new It(t,1,!1,t.toLowerCase(),null,!0,!0)});function md(t,e,n,r){var i=it.hasOwnProperty(e)?it[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(uw(e,n,i,r)&&(n=null),r||i===null?aw(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Dn=ow.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ks=Symbol.for("react.element"),ui=Symbol.for("react.portal"),ci=Symbol.for("react.fragment"),gd=Symbol.for("react.strict_mode"),Ku=Symbol.for("react.profiler"),yg=Symbol.for("react.provider"),vg=Symbol.for("react.context"),yd=Symbol.for("react.forward_ref"),Qu=Symbol.for("react.suspense"),Yu=Symbol.for("react.suspense_list"),vd=Symbol.for("react.memo"),$n=Symbol.for("react.lazy"),_g=Symbol.for("react.offscreen"),Hf=Symbol.iterator;function po(t){return t===null||typeof t!="object"?null:(t=Hf&&t[Hf]||t["@@iterator"],typeof t=="function"?t:null)}var Pe=Object.assign,su;function So(t){if(su===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);su=e&&e[1]||""}return`
`+su+t}var au=!1;function lu(t,e){if(!t||au)return"";au=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,l=o.length-1;1<=s&&0<=l&&i[s]!==o[l];)l--;for(;1<=s&&0<=l;s--,l--)if(i[s]!==o[l]){if(s!==1||l!==1)do if(s--,l--,0>l||i[s]!==o[l]){var u=`
`+i[s].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=s&&0<=l);break}}}finally{au=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?So(t):""}function cw(t){switch(t.tag){case 5:return So(t.type);case 16:return So("Lazy");case 13:return So("Suspense");case 19:return So("SuspenseList");case 0:case 2:case 15:return t=lu(t.type,!1),t;case 11:return t=lu(t.type.render,!1),t;case 1:return t=lu(t.type,!0),t;default:return""}}function Xu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ci:return"Fragment";case ui:return"Portal";case Ku:return"Profiler";case gd:return"StrictMode";case Qu:return"Suspense";case Yu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case vg:return(t.displayName||"Context")+".Consumer";case yg:return(t._context.displayName||"Context")+".Provider";case yd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case vd:return e=t.displayName||null,e!==null?e:Xu(t.type)||"Memo";case $n:e=t._payload,t=t._init;try{return Xu(t(e))}catch{}}return null}function dw(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xu(e);case 8:return e===gd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function cr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function wg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function hw(t){var e=wg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Qs(t){t._valueTracker||(t._valueTracker=hw(t))}function Eg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=wg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Va(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ju(t,e){var n=e.checked;return Pe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function qf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=cr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Tg(t,e){e=e.checked,e!=null&&md(t,"checked",e,!1)}function Zu(t,e){Tg(t,e);var n=cr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ec(t,e.type,n):e.hasOwnProperty("defaultValue")&&ec(t,e.type,cr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Gf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ec(t,e,n){(e!=="number"||Va(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var xo=Array.isArray;function Ei(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+cr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function tc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Pe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Kf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(xo(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:cr(n)}}function Ig(t,e){var n=cr(e.value),r=cr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Qf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Sg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Sg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ys,xg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ys=Ys||document.createElement("div"),Ys.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ys.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Go(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var bo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fw=["Webkit","ms","Moz","O"];Object.keys(bo).forEach(function(t){fw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),bo[e]=bo[t]})});function Ag(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||bo.hasOwnProperty(t)&&bo[t]?(""+e).trim():e+"px"}function Cg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Ag(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var pw=Pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rc(t,e){if(e){if(pw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function ic(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var oc=null;function _d(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var sc=null,Ti=null,Ii=null;function Yf(t){if(t=Es(t)){if(typeof sc!="function")throw Error(z(280));var e=t.stateNode;e&&(e=_l(e),sc(t.stateNode,t.type,e))}}function Rg(t){Ti?Ii?Ii.push(t):Ii=[t]:Ti=t}function kg(){if(Ti){var t=Ti,e=Ii;if(Ii=Ti=null,Yf(t),e)for(t=0;t<e.length;t++)Yf(e[t])}}function Pg(t,e){return t(e)}function Dg(){}var uu=!1;function bg(t,e,n){if(uu)return t(e,n);uu=!0;try{return Pg(t,e,n)}finally{uu=!1,(Ti!==null||Ii!==null)&&(Dg(),kg())}}function Ko(t,e){var n=t.stateNode;if(n===null)return null;var r=_l(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var ac=!1;if(Sn)try{var mo={};Object.defineProperty(mo,"passive",{get:function(){ac=!0}}),window.addEventListener("test",mo,mo),window.removeEventListener("test",mo,mo)}catch{ac=!1}function mw(t,e,n,r,i,o,s,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var No=!1,La=null,Oa=!1,lc=null,gw={onError:function(t){No=!0,La=t}};function yw(t,e,n,r,i,o,s,l,u){No=!1,La=null,mw.apply(gw,arguments)}function vw(t,e,n,r,i,o,s,l,u){if(yw.apply(this,arguments),No){if(No){var d=La;No=!1,La=null}else throw Error(z(198));Oa||(Oa=!0,lc=d)}}function Yr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ng(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Xf(t){if(Yr(t)!==t)throw Error(z(188))}function _w(t){var e=t.alternate;if(!e){if(e=Yr(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Xf(i),t;if(o===r)return Xf(i),e;o=o.sibling}throw Error(z(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function Vg(t){return t=_w(t),t!==null?Lg(t):null}function Lg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Lg(t);if(e!==null)return e;t=t.sibling}return null}var Og=Mt.unstable_scheduleCallback,Jf=Mt.unstable_cancelCallback,ww=Mt.unstable_shouldYield,Ew=Mt.unstable_requestPaint,Me=Mt.unstable_now,Tw=Mt.unstable_getCurrentPriorityLevel,wd=Mt.unstable_ImmediatePriority,jg=Mt.unstable_UserBlockingPriority,ja=Mt.unstable_NormalPriority,Iw=Mt.unstable_LowPriority,Mg=Mt.unstable_IdlePriority,ml=null,cn=null;function Sw(t){if(cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(ml,t,void 0,(t.current.flags&128)===128)}catch{}}var Zt=Math.clz32?Math.clz32:Cw,xw=Math.log,Aw=Math.LN2;function Cw(t){return t>>>=0,t===0?32:31-(xw(t)/Aw|0)|0}var Xs=64,Js=4194304;function Ao(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ma(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var l=s&~i;l!==0?r=Ao(l):(o&=s,o!==0&&(r=Ao(o)))}else s=n&~i,s!==0?r=Ao(s):o!==0&&(r=Ao(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Zt(e),i=1<<n,r|=t[n],e&=~i;return r}function Rw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-Zt(o),l=1<<s,u=i[s];u===-1?(!(l&n)||l&r)&&(i[s]=Rw(l,e)):u<=e&&(t.expiredLanes|=l),o&=~l}}function uc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Fg(){var t=Xs;return Xs<<=1,!(Xs&4194240)&&(Xs=64),t}function cu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function _s(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Zt(e),t[e]=n}function Pw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Zt(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function Ed(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Zt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ve=0;function Bg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ug,Td,zg,$g,Wg,cc=!1,Zs=[],Xn=null,Jn=null,Zn=null,Qo=new Map,Yo=new Map,Hn=[],Dw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zf(t,e){switch(t){case"focusin":case"focusout":Xn=null;break;case"dragenter":case"dragleave":Jn=null;break;case"mouseover":case"mouseout":Zn=null;break;case"pointerover":case"pointerout":Qo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yo.delete(e.pointerId)}}function go(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Es(e),e!==null&&Td(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function bw(t,e,n,r,i){switch(e){case"focusin":return Xn=go(Xn,t,e,n,r,i),!0;case"dragenter":return Jn=go(Jn,t,e,n,r,i),!0;case"mouseover":return Zn=go(Zn,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Qo.set(o,go(Qo.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Yo.set(o,go(Yo.get(o)||null,t,e,n,r,i)),!0}return!1}function Hg(t){var e=Dr(t.target);if(e!==null){var n=Yr(e);if(n!==null){if(e=n.tag,e===13){if(e=Ng(n),e!==null){t.blockedOn=e,Wg(t.priority,function(){zg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _a(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=dc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);oc=r,n.target.dispatchEvent(r),oc=null}else return e=Es(n),e!==null&&Td(e),t.blockedOn=n,!1;e.shift()}return!0}function ep(t,e,n){_a(t)&&n.delete(e)}function Nw(){cc=!1,Xn!==null&&_a(Xn)&&(Xn=null),Jn!==null&&_a(Jn)&&(Jn=null),Zn!==null&&_a(Zn)&&(Zn=null),Qo.forEach(ep),Yo.forEach(ep)}function yo(t,e){t.blockedOn===e&&(t.blockedOn=null,cc||(cc=!0,Mt.unstable_scheduleCallback(Mt.unstable_NormalPriority,Nw)))}function Xo(t){function e(i){return yo(i,t)}if(0<Zs.length){yo(Zs[0],t);for(var n=1;n<Zs.length;n++){var r=Zs[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Xn!==null&&yo(Xn,t),Jn!==null&&yo(Jn,t),Zn!==null&&yo(Zn,t),Qo.forEach(e),Yo.forEach(e),n=0;n<Hn.length;n++)r=Hn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Hn.length&&(n=Hn[0],n.blockedOn===null);)Hg(n),n.blockedOn===null&&Hn.shift()}var Si=Dn.ReactCurrentBatchConfig,Fa=!0;function Vw(t,e,n,r){var i=ve,o=Si.transition;Si.transition=null;try{ve=1,Id(t,e,n,r)}finally{ve=i,Si.transition=o}}function Lw(t,e,n,r){var i=ve,o=Si.transition;Si.transition=null;try{ve=4,Id(t,e,n,r)}finally{ve=i,Si.transition=o}}function Id(t,e,n,r){if(Fa){var i=dc(t,e,n,r);if(i===null)wu(t,e,r,Ba,n),Zf(t,r);else if(bw(i,t,e,n,r))r.stopPropagation();else if(Zf(t,r),e&4&&-1<Dw.indexOf(t)){for(;i!==null;){var o=Es(i);if(o!==null&&Ug(o),o=dc(t,e,n,r),o===null&&wu(t,e,r,Ba,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else wu(t,e,r,null,n)}}var Ba=null;function dc(t,e,n,r){if(Ba=null,t=_d(r),t=Dr(t),t!==null)if(e=Yr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ng(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ba=t,null}function qg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Tw()){case wd:return 1;case jg:return 4;case ja:case Iw:return 16;case Mg:return 536870912;default:return 16}default:return 16}}var Kn=null,Sd=null,wa=null;function Gg(){if(wa)return wa;var t,e=Sd,n=e.length,r,i="value"in Kn?Kn.value:Kn.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return wa=i.slice(t,1<r?1-r:void 0)}function Ea(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ea(){return!0}function tp(){return!1}function Bt(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ea:tp,this.isPropagationStopped=tp,this}return Pe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ea)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ea)},persist:function(){},isPersistent:ea}),e}var Hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xd=Bt(Hi),ws=Pe({},Hi,{view:0,detail:0}),Ow=Bt(ws),du,hu,vo,gl=Pe({},ws,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ad,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==vo&&(vo&&t.type==="mousemove"?(du=t.screenX-vo.screenX,hu=t.screenY-vo.screenY):hu=du=0,vo=t),du)},movementY:function(t){return"movementY"in t?t.movementY:hu}}),np=Bt(gl),jw=Pe({},gl,{dataTransfer:0}),Mw=Bt(jw),Fw=Pe({},ws,{relatedTarget:0}),fu=Bt(Fw),Bw=Pe({},Hi,{animationName:0,elapsedTime:0,pseudoElement:0}),Uw=Bt(Bw),zw=Pe({},Hi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$w=Bt(zw),Ww=Pe({},Hi,{data:0}),rp=Bt(Ww),Hw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Gw[t])?!!e[t]:!1}function Ad(){return Kw}var Qw=Pe({},ws,{key:function(t){if(t.key){var e=Hw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ea(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?qw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ad,charCode:function(t){return t.type==="keypress"?Ea(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ea(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Yw=Bt(Qw),Xw=Pe({},gl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ip=Bt(Xw),Jw=Pe({},ws,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ad}),Zw=Bt(Jw),eE=Pe({},Hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),tE=Bt(eE),nE=Pe({},gl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),rE=Bt(nE),iE=[9,13,27,32],Cd=Sn&&"CompositionEvent"in window,Vo=null;Sn&&"documentMode"in document&&(Vo=document.documentMode);var oE=Sn&&"TextEvent"in window&&!Vo,Kg=Sn&&(!Cd||Vo&&8<Vo&&11>=Vo),op=" ",sp=!1;function Qg(t,e){switch(t){case"keyup":return iE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var di=!1;function sE(t,e){switch(t){case"compositionend":return Yg(e);case"keypress":return e.which!==32?null:(sp=!0,op);case"textInput":return t=e.data,t===op&&sp?null:t;default:return null}}function aE(t,e){if(di)return t==="compositionend"||!Cd&&Qg(t,e)?(t=Gg(),wa=Sd=Kn=null,di=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Kg&&e.locale!=="ko"?null:e.data;default:return null}}var lE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ap(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!lE[t.type]:e==="textarea"}function Xg(t,e,n,r){Rg(r),e=Ua(e,"onChange"),0<e.length&&(n=new xd("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Lo=null,Jo=null;function uE(t){ly(t,0)}function yl(t){var e=pi(t);if(Eg(e))return t}function cE(t,e){if(t==="change")return e}var Jg=!1;if(Sn){var pu;if(Sn){var mu="oninput"in document;if(!mu){var lp=document.createElement("div");lp.setAttribute("oninput","return;"),mu=typeof lp.oninput=="function"}pu=mu}else pu=!1;Jg=pu&&(!document.documentMode||9<document.documentMode)}function up(){Lo&&(Lo.detachEvent("onpropertychange",Zg),Jo=Lo=null)}function Zg(t){if(t.propertyName==="value"&&yl(Jo)){var e=[];Xg(e,Jo,t,_d(t)),bg(uE,e)}}function dE(t,e,n){t==="focusin"?(up(),Lo=e,Jo=n,Lo.attachEvent("onpropertychange",Zg)):t==="focusout"&&up()}function hE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return yl(Jo)}function fE(t,e){if(t==="click")return yl(e)}function pE(t,e){if(t==="input"||t==="change")return yl(e)}function mE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nn=typeof Object.is=="function"?Object.is:mE;function Zo(t,e){if(nn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Gu.call(e,i)||!nn(t[i],e[i]))return!1}return!0}function cp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function dp(t,e){var n=cp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cp(n)}}function ey(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ey(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ty(){for(var t=window,e=Va();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Va(t.document)}return e}function Rd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function gE(t){var e=ty(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ey(n.ownerDocument.documentElement,n)){if(r!==null&&Rd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=dp(n,o);var s=dp(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var yE=Sn&&"documentMode"in document&&11>=document.documentMode,hi=null,hc=null,Oo=null,fc=!1;function hp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;fc||hi==null||hi!==Va(r)||(r=hi,"selectionStart"in r&&Rd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Oo&&Zo(Oo,r)||(Oo=r,r=Ua(hc,"onSelect"),0<r.length&&(e=new xd("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=hi)))}function ta(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var fi={animationend:ta("Animation","AnimationEnd"),animationiteration:ta("Animation","AnimationIteration"),animationstart:ta("Animation","AnimationStart"),transitionend:ta("Transition","TransitionEnd")},gu={},ny={};Sn&&(ny=document.createElement("div").style,"AnimationEvent"in window||(delete fi.animationend.animation,delete fi.animationiteration.animation,delete fi.animationstart.animation),"TransitionEvent"in window||delete fi.transitionend.transition);function vl(t){if(gu[t])return gu[t];if(!fi[t])return t;var e=fi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ny)return gu[t]=e[n];return t}var ry=vl("animationend"),iy=vl("animationiteration"),oy=vl("animationstart"),sy=vl("transitionend"),ay=new Map,fp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mr(t,e){ay.set(t,e),Qr(e,[t])}for(var yu=0;yu<fp.length;yu++){var vu=fp[yu],vE=vu.toLowerCase(),_E=vu[0].toUpperCase()+vu.slice(1);mr(vE,"on"+_E)}mr(ry,"onAnimationEnd");mr(iy,"onAnimationIteration");mr(oy,"onAnimationStart");mr("dblclick","onDoubleClick");mr("focusin","onFocus");mr("focusout","onBlur");mr(sy,"onTransitionEnd");Ri("onMouseEnter",["mouseout","mouseover"]);Ri("onMouseLeave",["mouseout","mouseover"]);Ri("onPointerEnter",["pointerout","pointerover"]);Ri("onPointerLeave",["pointerout","pointerover"]);Qr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Co="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Co));function pp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,vw(r,e,void 0,t),t.currentTarget=null}function ly(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var l=r[s],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==o&&i.isPropagationStopped())break e;pp(i,l,d),o=u}else for(s=0;s<r.length;s++){if(l=r[s],u=l.instance,d=l.currentTarget,l=l.listener,u!==o&&i.isPropagationStopped())break e;pp(i,l,d),o=u}}}if(Oa)throw t=lc,Oa=!1,lc=null,t}function Ie(t,e){var n=e[vc];n===void 0&&(n=e[vc]=new Set);var r=t+"__bubble";n.has(r)||(uy(e,t,2,!1),n.add(r))}function _u(t,e,n){var r=0;e&&(r|=4),uy(n,t,r,e)}var na="_reactListening"+Math.random().toString(36).slice(2);function es(t){if(!t[na]){t[na]=!0,gg.forEach(function(n){n!=="selectionchange"&&(wE.has(n)||_u(n,!1,t),_u(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[na]||(e[na]=!0,_u("selectionchange",!1,e))}}function uy(t,e,n,r){switch(qg(e)){case 1:var i=Vw;break;case 4:i=Lw;break;default:i=Id}n=i.bind(null,e,n,t),i=void 0,!ac||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function wu(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;s=s.return}for(;l!==null;){if(s=Dr(l),s===null)return;if(u=s.tag,u===5||u===6){r=o=s;continue e}l=l.parentNode}}r=r.return}bg(function(){var d=o,f=_d(n),y=[];e:{var _=ay.get(t);if(_!==void 0){var R=xd,P=t;switch(t){case"keypress":if(Ea(n)===0)break e;case"keydown":case"keyup":R=Yw;break;case"focusin":P="focus",R=fu;break;case"focusout":P="blur",R=fu;break;case"beforeblur":case"afterblur":R=fu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=np;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=Mw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=Zw;break;case ry:case iy:case oy:R=Uw;break;case sy:R=tE;break;case"scroll":R=Ow;break;case"wheel":R=rE;break;case"copy":case"cut":case"paste":R=$w;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=ip}var b=(e&4)!==0,L=!b&&t==="scroll",x=b?_!==null?_+"Capture":null:_;b=[];for(var w=d,C;w!==null;){C=w;var N=C.stateNode;if(C.tag===5&&N!==null&&(C=N,x!==null&&(N=Ko(w,x),N!=null&&b.push(ts(w,N,C)))),L)break;w=w.return}0<b.length&&(_=new R(_,P,null,n,f),y.push({event:_,listeners:b}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",R=t==="mouseout"||t==="pointerout",_&&n!==oc&&(P=n.relatedTarget||n.fromElement)&&(Dr(P)||P[xn]))break e;if((R||_)&&(_=f.window===f?f:(_=f.ownerDocument)?_.defaultView||_.parentWindow:window,R?(P=n.relatedTarget||n.toElement,R=d,P=P?Dr(P):null,P!==null&&(L=Yr(P),P!==L||P.tag!==5&&P.tag!==6)&&(P=null)):(R=null,P=d),R!==P)){if(b=np,N="onMouseLeave",x="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(b=ip,N="onPointerLeave",x="onPointerEnter",w="pointer"),L=R==null?_:pi(R),C=P==null?_:pi(P),_=new b(N,w+"leave",R,n,f),_.target=L,_.relatedTarget=C,N=null,Dr(f)===d&&(b=new b(x,w+"enter",P,n,f),b.target=C,b.relatedTarget=L,N=b),L=N,R&&P)t:{for(b=R,x=P,w=0,C=b;C;C=oi(C))w++;for(C=0,N=x;N;N=oi(N))C++;for(;0<w-C;)b=oi(b),w--;for(;0<C-w;)x=oi(x),C--;for(;w--;){if(b===x||x!==null&&b===x.alternate)break t;b=oi(b),x=oi(x)}b=null}else b=null;R!==null&&mp(y,_,R,b,!1),P!==null&&L!==null&&mp(y,L,P,b,!0)}}e:{if(_=d?pi(d):window,R=_.nodeName&&_.nodeName.toLowerCase(),R==="select"||R==="input"&&_.type==="file")var B=cE;else if(ap(_))if(Jg)B=pE;else{B=hE;var $=dE}else(R=_.nodeName)&&R.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(B=fE);if(B&&(B=B(t,d))){Xg(y,B,n,f);break e}$&&$(t,_,d),t==="focusout"&&($=_._wrapperState)&&$.controlled&&_.type==="number"&&ec(_,"number",_.value)}switch($=d?pi(d):window,t){case"focusin":(ap($)||$.contentEditable==="true")&&(hi=$,hc=d,Oo=null);break;case"focusout":Oo=hc=hi=null;break;case"mousedown":fc=!0;break;case"contextmenu":case"mouseup":case"dragend":fc=!1,hp(y,n,f);break;case"selectionchange":if(yE)break;case"keydown":case"keyup":hp(y,n,f)}var T;if(Cd)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else di?Qg(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(Kg&&n.locale!=="ko"&&(di||v!=="onCompositionStart"?v==="onCompositionEnd"&&di&&(T=Gg()):(Kn=f,Sd="value"in Kn?Kn.value:Kn.textContent,di=!0)),$=Ua(d,v),0<$.length&&(v=new rp(v,t,null,n,f),y.push({event:v,listeners:$}),T?v.data=T:(T=Yg(n),T!==null&&(v.data=T)))),(T=oE?sE(t,n):aE(t,n))&&(d=Ua(d,"onBeforeInput"),0<d.length&&(f=new rp("onBeforeInput","beforeinput",null,n,f),y.push({event:f,listeners:d}),f.data=T))}ly(y,e)})}function ts(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ua(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Ko(t,n),o!=null&&r.unshift(ts(t,o,i)),o=Ko(t,e),o!=null&&r.push(ts(t,o,i))),t=t.return}return r}function oi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function mp(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,i?(u=Ko(n,o),u!=null&&s.unshift(ts(n,u,l))):i||(u=Ko(n,o),u!=null&&s.push(ts(n,u,l)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var EE=/\r\n?/g,TE=/\u0000|\uFFFD/g;function gp(t){return(typeof t=="string"?t:""+t).replace(EE,`
`).replace(TE,"")}function ra(t,e,n){if(e=gp(e),gp(t)!==e&&n)throw Error(z(425))}function za(){}var pc=null,mc=null;function gc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var yc=typeof setTimeout=="function"?setTimeout:void 0,IE=typeof clearTimeout=="function"?clearTimeout:void 0,yp=typeof Promise=="function"?Promise:void 0,SE=typeof queueMicrotask=="function"?queueMicrotask:typeof yp<"u"?function(t){return yp.resolve(null).then(t).catch(xE)}:yc;function xE(t){setTimeout(function(){throw t})}function Eu(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Xo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Xo(e)}function er(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function vp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var qi=Math.random().toString(36).slice(2),ln="__reactFiber$"+qi,ns="__reactProps$"+qi,xn="__reactContainer$"+qi,vc="__reactEvents$"+qi,AE="__reactListeners$"+qi,CE="__reactHandles$"+qi;function Dr(t){var e=t[ln];if(e)return e;for(var n=t.parentNode;n;){if(e=n[xn]||n[ln]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=vp(t);t!==null;){if(n=t[ln])return n;t=vp(t)}return e}t=n,n=t.parentNode}return null}function Es(t){return t=t[ln]||t[xn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function pi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function _l(t){return t[ns]||null}var _c=[],mi=-1;function gr(t){return{current:t}}function xe(t){0>mi||(t.current=_c[mi],_c[mi]=null,mi--)}function Ee(t,e){mi++,_c[mi]=t.current,t.current=e}var dr={},mt=gr(dr),Ct=gr(!1),Br=dr;function ki(t,e){var n=t.type.contextTypes;if(!n)return dr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Rt(t){return t=t.childContextTypes,t!=null}function $a(){xe(Ct),xe(mt)}function _p(t,e,n){if(mt.current!==dr)throw Error(z(168));Ee(mt,e),Ee(Ct,n)}function cy(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(z(108,dw(t)||"Unknown",i));return Pe({},n,r)}function Wa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||dr,Br=mt.current,Ee(mt,t),Ee(Ct,Ct.current),!0}function wp(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=cy(t,e,Br),r.__reactInternalMemoizedMergedChildContext=t,xe(Ct),xe(mt),Ee(mt,t)):xe(Ct),Ee(Ct,n)}var wn=null,wl=!1,Tu=!1;function dy(t){wn===null?wn=[t]:wn.push(t)}function RE(t){wl=!0,dy(t)}function yr(){if(!Tu&&wn!==null){Tu=!0;var t=0,e=ve;try{var n=wn;for(ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}wn=null,wl=!1}catch(i){throw wn!==null&&(wn=wn.slice(t+1)),Og(wd,yr),i}finally{ve=e,Tu=!1}}return null}var gi=[],yi=0,Ha=null,qa=0,Ut=[],zt=0,Ur=null,En=1,Tn="";function Rr(t,e){gi[yi++]=qa,gi[yi++]=Ha,Ha=t,qa=e}function hy(t,e,n){Ut[zt++]=En,Ut[zt++]=Tn,Ut[zt++]=Ur,Ur=t;var r=En;t=Tn;var i=32-Zt(r)-1;r&=~(1<<i),n+=1;var o=32-Zt(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,En=1<<32-Zt(e)+i|n<<i|r,Tn=o+t}else En=1<<o|n<<i|r,Tn=t}function kd(t){t.return!==null&&(Rr(t,1),hy(t,1,0))}function Pd(t){for(;t===Ha;)Ha=gi[--yi],gi[yi]=null,qa=gi[--yi],gi[yi]=null;for(;t===Ur;)Ur=Ut[--zt],Ut[zt]=null,Tn=Ut[--zt],Ut[zt]=null,En=Ut[--zt],Ut[zt]=null}var jt=null,Vt=null,Ae=!1,Jt=null;function fy(t,e){var n=$t(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ep(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,jt=t,Vt=er(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,jt=t,Vt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ur!==null?{id:En,overflow:Tn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=$t(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,jt=t,Vt=null,!0):!1;default:return!1}}function wc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ec(t){if(Ae){var e=Vt;if(e){var n=e;if(!Ep(t,e)){if(wc(t))throw Error(z(418));e=er(n.nextSibling);var r=jt;e&&Ep(t,e)?fy(r,n):(t.flags=t.flags&-4097|2,Ae=!1,jt=t)}}else{if(wc(t))throw Error(z(418));t.flags=t.flags&-4097|2,Ae=!1,jt=t}}}function Tp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;jt=t}function ia(t){if(t!==jt)return!1;if(!Ae)return Tp(t),Ae=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!gc(t.type,t.memoizedProps)),e&&(e=Vt)){if(wc(t))throw py(),Error(z(418));for(;e;)fy(t,e),e=er(e.nextSibling)}if(Tp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Vt=er(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Vt=null}}else Vt=jt?er(t.stateNode.nextSibling):null;return!0}function py(){for(var t=Vt;t;)t=er(t.nextSibling)}function Pi(){Vt=jt=null,Ae=!1}function Dd(t){Jt===null?Jt=[t]:Jt.push(t)}var kE=Dn.ReactCurrentBatchConfig;function _o(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var l=i.refs;s===null?delete l[o]:l[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function oa(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ip(t){var e=t._init;return e(t._payload)}function my(t){function e(x,w){if(t){var C=x.deletions;C===null?(x.deletions=[w],x.flags|=16):C.push(w)}}function n(x,w){if(!t)return null;for(;w!==null;)e(x,w),w=w.sibling;return null}function r(x,w){for(x=new Map;w!==null;)w.key!==null?x.set(w.key,w):x.set(w.index,w),w=w.sibling;return x}function i(x,w){return x=ir(x,w),x.index=0,x.sibling=null,x}function o(x,w,C){return x.index=C,t?(C=x.alternate,C!==null?(C=C.index,C<w?(x.flags|=2,w):C):(x.flags|=2,w)):(x.flags|=1048576,w)}function s(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,w,C,N){return w===null||w.tag!==6?(w=ku(C,x.mode,N),w.return=x,w):(w=i(w,C),w.return=x,w)}function u(x,w,C,N){var B=C.type;return B===ci?f(x,w,C.props.children,N,C.key):w!==null&&(w.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===$n&&Ip(B)===w.type)?(N=i(w,C.props),N.ref=_o(x,w,C),N.return=x,N):(N=Ra(C.type,C.key,C.props,null,x.mode,N),N.ref=_o(x,w,C),N.return=x,N)}function d(x,w,C,N){return w===null||w.tag!==4||w.stateNode.containerInfo!==C.containerInfo||w.stateNode.implementation!==C.implementation?(w=Pu(C,x.mode,N),w.return=x,w):(w=i(w,C.children||[]),w.return=x,w)}function f(x,w,C,N,B){return w===null||w.tag!==7?(w=Or(C,x.mode,N,B),w.return=x,w):(w=i(w,C),w.return=x,w)}function y(x,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return w=ku(""+w,x.mode,C),w.return=x,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ks:return C=Ra(w.type,w.key,w.props,null,x.mode,C),C.ref=_o(x,null,w),C.return=x,C;case ui:return w=Pu(w,x.mode,C),w.return=x,w;case $n:var N=w._init;return y(x,N(w._payload),C)}if(xo(w)||po(w))return w=Or(w,x.mode,C,null),w.return=x,w;oa(x,w)}return null}function _(x,w,C,N){var B=w!==null?w.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return B!==null?null:l(x,w,""+C,N);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ks:return C.key===B?u(x,w,C,N):null;case ui:return C.key===B?d(x,w,C,N):null;case $n:return B=C._init,_(x,w,B(C._payload),N)}if(xo(C)||po(C))return B!==null?null:f(x,w,C,N,null);oa(x,C)}return null}function R(x,w,C,N,B){if(typeof N=="string"&&N!==""||typeof N=="number")return x=x.get(C)||null,l(w,x,""+N,B);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Ks:return x=x.get(N.key===null?C:N.key)||null,u(w,x,N,B);case ui:return x=x.get(N.key===null?C:N.key)||null,d(w,x,N,B);case $n:var $=N._init;return R(x,w,C,$(N._payload),B)}if(xo(N)||po(N))return x=x.get(C)||null,f(w,x,N,B,null);oa(w,N)}return null}function P(x,w,C,N){for(var B=null,$=null,T=w,v=w=0,E=null;T!==null&&v<C.length;v++){T.index>v?(E=T,T=null):E=T.sibling;var I=_(x,T,C[v],N);if(I===null){T===null&&(T=E);break}t&&T&&I.alternate===null&&e(x,T),w=o(I,w,v),$===null?B=I:$.sibling=I,$=I,T=E}if(v===C.length)return n(x,T),Ae&&Rr(x,v),B;if(T===null){for(;v<C.length;v++)T=y(x,C[v],N),T!==null&&(w=o(T,w,v),$===null?B=T:$.sibling=T,$=T);return Ae&&Rr(x,v),B}for(T=r(x,T);v<C.length;v++)E=R(T,x,v,C[v],N),E!==null&&(t&&E.alternate!==null&&T.delete(E.key===null?v:E.key),w=o(E,w,v),$===null?B=E:$.sibling=E,$=E);return t&&T.forEach(function(S){return e(x,S)}),Ae&&Rr(x,v),B}function b(x,w,C,N){var B=po(C);if(typeof B!="function")throw Error(z(150));if(C=B.call(C),C==null)throw Error(z(151));for(var $=B=null,T=w,v=w=0,E=null,I=C.next();T!==null&&!I.done;v++,I=C.next()){T.index>v?(E=T,T=null):E=T.sibling;var S=_(x,T,I.value,N);if(S===null){T===null&&(T=E);break}t&&T&&S.alternate===null&&e(x,T),w=o(S,w,v),$===null?B=S:$.sibling=S,$=S,T=E}if(I.done)return n(x,T),Ae&&Rr(x,v),B;if(T===null){for(;!I.done;v++,I=C.next())I=y(x,I.value,N),I!==null&&(w=o(I,w,v),$===null?B=I:$.sibling=I,$=I);return Ae&&Rr(x,v),B}for(T=r(x,T);!I.done;v++,I=C.next())I=R(T,x,v,I.value,N),I!==null&&(t&&I.alternate!==null&&T.delete(I.key===null?v:I.key),w=o(I,w,v),$===null?B=I:$.sibling=I,$=I);return t&&T.forEach(function(k){return e(x,k)}),Ae&&Rr(x,v),B}function L(x,w,C,N){if(typeof C=="object"&&C!==null&&C.type===ci&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Ks:e:{for(var B=C.key,$=w;$!==null;){if($.key===B){if(B=C.type,B===ci){if($.tag===7){n(x,$.sibling),w=i($,C.props.children),w.return=x,x=w;break e}}else if($.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===$n&&Ip(B)===$.type){n(x,$.sibling),w=i($,C.props),w.ref=_o(x,$,C),w.return=x,x=w;break e}n(x,$);break}else e(x,$);$=$.sibling}C.type===ci?(w=Or(C.props.children,x.mode,N,C.key),w.return=x,x=w):(N=Ra(C.type,C.key,C.props,null,x.mode,N),N.ref=_o(x,w,C),N.return=x,x=N)}return s(x);case ui:e:{for($=C.key;w!==null;){if(w.key===$)if(w.tag===4&&w.stateNode.containerInfo===C.containerInfo&&w.stateNode.implementation===C.implementation){n(x,w.sibling),w=i(w,C.children||[]),w.return=x,x=w;break e}else{n(x,w);break}else e(x,w);w=w.sibling}w=Pu(C,x.mode,N),w.return=x,x=w}return s(x);case $n:return $=C._init,L(x,w,$(C._payload),N)}if(xo(C))return P(x,w,C,N);if(po(C))return b(x,w,C,N);oa(x,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,w!==null&&w.tag===6?(n(x,w.sibling),w=i(w,C),w.return=x,x=w):(n(x,w),w=ku(C,x.mode,N),w.return=x,x=w),s(x)):n(x,w)}return L}var Di=my(!0),gy=my(!1),Ga=gr(null),Ka=null,vi=null,bd=null;function Nd(){bd=vi=Ka=null}function Vd(t){var e=Ga.current;xe(Ga),t._currentValue=e}function Tc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function xi(t,e){Ka=t,bd=vi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(At=!0),t.firstContext=null)}function Ht(t){var e=t._currentValue;if(bd!==t)if(t={context:t,memoizedValue:e,next:null},vi===null){if(Ka===null)throw Error(z(308));vi=t,Ka.dependencies={lanes:0,firstContext:t}}else vi=vi.next=t;return e}var br=null;function Ld(t){br===null?br=[t]:br.push(t)}function yy(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Ld(e)):(n.next=i.next,i.next=n),e.interleaved=n,An(t,r)}function An(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Wn=!1;function Od(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function In(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function tr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,pe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,An(t,n)}return i=r.interleaved,i===null?(e.next=e,Ld(r)):(e.next=i.next,i.next=e),r.interleaved=e,An(t,n)}function Ta(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ed(t,n)}}function Sp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Qa(t,e,n,r){var i=t.updateQueue;Wn=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,d=u.next;u.next=null,s===null?o=d:s.next=d,s=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==s&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=u))}if(o!==null){var y=i.baseState;s=0,f=d=u=null,l=o;do{var _=l.lane,R=l.eventTime;if((r&_)===_){f!==null&&(f=f.next={eventTime:R,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var P=t,b=l;switch(_=e,R=n,b.tag){case 1:if(P=b.payload,typeof P=="function"){y=P.call(R,y,_);break e}y=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=b.payload,_=typeof P=="function"?P.call(R,y,_):P,_==null)break e;y=Pe({},y,_);break e;case 2:Wn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,_=i.effects,_===null?i.effects=[l]:_.push(l))}else R={eventTime:R,lane:_,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=R,u=y):f=f.next=R,s|=_;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;_=l,l=_.next,_.next=null,i.lastBaseUpdate=_,i.shared.pending=null}}while(!0);if(f===null&&(u=y),i.baseState=u,i.firstBaseUpdate=d,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);$r|=s,t.lanes=s,t.memoizedState=y}}function xp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(z(191,i));i.call(r)}}}var Ts={},dn=gr(Ts),rs=gr(Ts),is=gr(Ts);function Nr(t){if(t===Ts)throw Error(z(174));return t}function jd(t,e){switch(Ee(is,e),Ee(rs,t),Ee(dn,Ts),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:nc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=nc(e,t)}xe(dn),Ee(dn,e)}function bi(){xe(dn),xe(rs),xe(is)}function _y(t){Nr(is.current);var e=Nr(dn.current),n=nc(e,t.type);e!==n&&(Ee(rs,t),Ee(dn,n))}function Md(t){rs.current===t&&(xe(dn),xe(rs))}var Re=gr(0);function Ya(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Iu=[];function Fd(){for(var t=0;t<Iu.length;t++)Iu[t]._workInProgressVersionPrimary=null;Iu.length=0}var Ia=Dn.ReactCurrentDispatcher,Su=Dn.ReactCurrentBatchConfig,zr=0,ke=null,ze=null,Ke=null,Xa=!1,jo=!1,os=0,PE=0;function ut(){throw Error(z(321))}function Bd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!nn(t[n],e[n]))return!1;return!0}function Ud(t,e,n,r,i,o){if(zr=o,ke=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ia.current=t===null||t.memoizedState===null?VE:LE,t=n(r,i),jo){o=0;do{if(jo=!1,os=0,25<=o)throw Error(z(301));o+=1,Ke=ze=null,e.updateQueue=null,Ia.current=OE,t=n(r,i)}while(jo)}if(Ia.current=Ja,e=ze!==null&&ze.next!==null,zr=0,Ke=ze=ke=null,Xa=!1,e)throw Error(z(300));return t}function zd(){var t=os!==0;return os=0,t}function an(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ke===null?ke.memoizedState=Ke=t:Ke=Ke.next=t,Ke}function qt(){if(ze===null){var t=ke.alternate;t=t!==null?t.memoizedState:null}else t=ze.next;var e=Ke===null?ke.memoizedState:Ke.next;if(e!==null)Ke=e,ze=t;else{if(t===null)throw Error(z(310));ze=t,t={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},Ke===null?ke.memoizedState=Ke=t:Ke=Ke.next=t}return Ke}function ss(t,e){return typeof e=="function"?e(t):e}function xu(t){var e=qt(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=ze,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=s=null,u=null,d=o;do{var f=d.lane;if((zr&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var y={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=y,s=r):u=u.next=y,ke.lanes|=f,$r|=f}d=d.next}while(d!==null&&d!==o);u===null?s=r:u.next=l,nn(r,e.memoizedState)||(At=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,ke.lanes|=o,$r|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Au(t){var e=qt(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);nn(o,e.memoizedState)||(At=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function wy(){}function Ey(t,e){var n=ke,r=qt(),i=e(),o=!nn(r.memoizedState,i);if(o&&(r.memoizedState=i,At=!0),r=r.queue,$d(Sy.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Ke!==null&&Ke.memoizedState.tag&1){if(n.flags|=2048,as(9,Iy.bind(null,n,r,i,e),void 0,null),Qe===null)throw Error(z(349));zr&30||Ty(n,e,i)}return i}function Ty(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ke.updateQueue,e===null?(e={lastEffect:null,stores:null},ke.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Iy(t,e,n,r){e.value=n,e.getSnapshot=r,xy(e)&&Ay(t)}function Sy(t,e,n){return n(function(){xy(e)&&Ay(t)})}function xy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!nn(t,n)}catch{return!0}}function Ay(t){var e=An(t,1);e!==null&&en(e,t,1,-1)}function Ap(t){var e=an();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ss,lastRenderedState:t},e.queue=t,t=t.dispatch=NE.bind(null,ke,t),[e.memoizedState,t]}function as(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ke.updateQueue,e===null?(e={lastEffect:null,stores:null},ke.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Cy(){return qt().memoizedState}function Sa(t,e,n,r){var i=an();ke.flags|=t,i.memoizedState=as(1|e,n,void 0,r===void 0?null:r)}function El(t,e,n,r){var i=qt();r=r===void 0?null:r;var o=void 0;if(ze!==null){var s=ze.memoizedState;if(o=s.destroy,r!==null&&Bd(r,s.deps)){i.memoizedState=as(e,n,o,r);return}}ke.flags|=t,i.memoizedState=as(1|e,n,o,r)}function Cp(t,e){return Sa(8390656,8,t,e)}function $d(t,e){return El(2048,8,t,e)}function Ry(t,e){return El(4,2,t,e)}function ky(t,e){return El(4,4,t,e)}function Py(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Dy(t,e,n){return n=n!=null?n.concat([t]):null,El(4,4,Py.bind(null,e,t),n)}function Wd(){}function by(t,e){var n=qt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Bd(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ny(t,e){var n=qt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Bd(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Vy(t,e,n){return zr&21?(nn(n,e)||(n=Fg(),ke.lanes|=n,$r|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,At=!0),t.memoizedState=n)}function DE(t,e){var n=ve;ve=n!==0&&4>n?n:4,t(!0);var r=Su.transition;Su.transition={};try{t(!1),e()}finally{ve=n,Su.transition=r}}function Ly(){return qt().memoizedState}function bE(t,e,n){var r=rr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Oy(t))jy(e,n);else if(n=yy(t,e,n,r),n!==null){var i=wt();en(n,t,r,i),My(n,e,r)}}function NE(t,e,n){var r=rr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Oy(t))jy(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,l=o(s,n);if(i.hasEagerState=!0,i.eagerState=l,nn(l,s)){var u=e.interleaved;u===null?(i.next=i,Ld(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=yy(t,e,i,r),n!==null&&(i=wt(),en(n,t,r,i),My(n,e,r))}}function Oy(t){var e=t.alternate;return t===ke||e!==null&&e===ke}function jy(t,e){jo=Xa=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function My(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ed(t,n)}}var Ja={readContext:Ht,useCallback:ut,useContext:ut,useEffect:ut,useImperativeHandle:ut,useInsertionEffect:ut,useLayoutEffect:ut,useMemo:ut,useReducer:ut,useRef:ut,useState:ut,useDebugValue:ut,useDeferredValue:ut,useTransition:ut,useMutableSource:ut,useSyncExternalStore:ut,useId:ut,unstable_isNewReconciler:!1},VE={readContext:Ht,useCallback:function(t,e){return an().memoizedState=[t,e===void 0?null:e],t},useContext:Ht,useEffect:Cp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Sa(4194308,4,Py.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Sa(4194308,4,t,e)},useInsertionEffect:function(t,e){return Sa(4,2,t,e)},useMemo:function(t,e){var n=an();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=an();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=bE.bind(null,ke,t),[r.memoizedState,t]},useRef:function(t){var e=an();return t={current:t},e.memoizedState=t},useState:Ap,useDebugValue:Wd,useDeferredValue:function(t){return an().memoizedState=t},useTransition:function(){var t=Ap(!1),e=t[0];return t=DE.bind(null,t[1]),an().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ke,i=an();if(Ae){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),Qe===null)throw Error(z(349));zr&30||Ty(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,Cp(Sy.bind(null,r,o,t),[t]),r.flags|=2048,as(9,Iy.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=an(),e=Qe.identifierPrefix;if(Ae){var n=Tn,r=En;n=(r&~(1<<32-Zt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=os++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=PE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},LE={readContext:Ht,useCallback:by,useContext:Ht,useEffect:$d,useImperativeHandle:Dy,useInsertionEffect:Ry,useLayoutEffect:ky,useMemo:Ny,useReducer:xu,useRef:Cy,useState:function(){return xu(ss)},useDebugValue:Wd,useDeferredValue:function(t){var e=qt();return Vy(e,ze.memoizedState,t)},useTransition:function(){var t=xu(ss)[0],e=qt().memoizedState;return[t,e]},useMutableSource:wy,useSyncExternalStore:Ey,useId:Ly,unstable_isNewReconciler:!1},OE={readContext:Ht,useCallback:by,useContext:Ht,useEffect:$d,useImperativeHandle:Dy,useInsertionEffect:Ry,useLayoutEffect:ky,useMemo:Ny,useReducer:Au,useRef:Cy,useState:function(){return Au(ss)},useDebugValue:Wd,useDeferredValue:function(t){var e=qt();return ze===null?e.memoizedState=t:Vy(e,ze.memoizedState,t)},useTransition:function(){var t=Au(ss)[0],e=qt().memoizedState;return[t,e]},useMutableSource:wy,useSyncExternalStore:Ey,useId:Ly,unstable_isNewReconciler:!1};function Yt(t,e){if(t&&t.defaultProps){e=Pe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ic(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Pe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Tl={isMounted:function(t){return(t=t._reactInternals)?Yr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=wt(),i=rr(t),o=In(r,i);o.payload=e,n!=null&&(o.callback=n),e=tr(t,o,i),e!==null&&(en(e,t,i,r),Ta(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=wt(),i=rr(t),o=In(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=tr(t,o,i),e!==null&&(en(e,t,i,r),Ta(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=wt(),r=rr(t),i=In(n,r);i.tag=2,e!=null&&(i.callback=e),e=tr(t,i,r),e!==null&&(en(e,t,r,n),Ta(e,t,r))}};function Rp(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Zo(n,r)||!Zo(i,o):!0}function Fy(t,e,n){var r=!1,i=dr,o=e.contextType;return typeof o=="object"&&o!==null?o=Ht(o):(i=Rt(e)?Br:mt.current,r=e.contextTypes,o=(r=r!=null)?ki(t,i):dr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Tl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function kp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Tl.enqueueReplaceState(e,e.state,null)}function Sc(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Od(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Ht(o):(o=Rt(e)?Br:mt.current,i.context=ki(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Ic(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Tl.enqueueReplaceState(i,i.state,null),Qa(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ni(t,e){try{var n="",r=e;do n+=cw(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Cu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function xc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var jE=typeof WeakMap=="function"?WeakMap:Map;function By(t,e,n){n=In(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){el||(el=!0,Lc=r),xc(t,e)},n}function Uy(t,e,n){n=In(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){xc(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){xc(t,e),typeof r!="function"&&(nr===null?nr=new Set([this]):nr.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function Pp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new jE;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=XE.bind(null,t,e,n),e.then(t,t))}function Dp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function bp(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=In(-1,1),e.tag=2,tr(n,e,1))),n.lanes|=1),t)}var ME=Dn.ReactCurrentOwner,At=!1;function _t(t,e,n,r){e.child=t===null?gy(e,null,n,r):Di(e,t.child,n,r)}function Np(t,e,n,r,i){n=n.render;var o=e.ref;return xi(e,i),r=Ud(t,e,n,r,o,i),n=zd(),t!==null&&!At?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Cn(t,e,i)):(Ae&&n&&kd(e),e.flags|=1,_t(t,e,r,i),e.child)}function Vp(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!Jd(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,zy(t,e,o,r,i)):(t=Ra(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Zo,n(s,r)&&t.ref===e.ref)return Cn(t,e,i)}return e.flags|=1,t=ir(o,r),t.ref=e.ref,t.return=e,e.child=t}function zy(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Zo(o,r)&&t.ref===e.ref)if(At=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(At=!0);else return e.lanes=t.lanes,Cn(t,e,i)}return Ac(t,e,n,r,i)}function $y(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(wi,Nt),Nt|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ee(wi,Nt),Nt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Ee(wi,Nt),Nt|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Ee(wi,Nt),Nt|=r;return _t(t,e,i,n),e.child}function Wy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ac(t,e,n,r,i){var o=Rt(n)?Br:mt.current;return o=ki(e,o),xi(e,i),n=Ud(t,e,n,r,o,i),r=zd(),t!==null&&!At?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Cn(t,e,i)):(Ae&&r&&kd(e),e.flags|=1,_t(t,e,n,i),e.child)}function Lp(t,e,n,r,i){if(Rt(n)){var o=!0;Wa(e)}else o=!1;if(xi(e,i),e.stateNode===null)xa(t,e),Fy(e,n,r),Sc(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,l=e.memoizedProps;s.props=l;var u=s.context,d=n.contextType;typeof d=="object"&&d!==null?d=Ht(d):(d=Rt(n)?Br:mt.current,d=ki(e,d));var f=n.getDerivedStateFromProps,y=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";y||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||u!==d)&&kp(e,s,r,d),Wn=!1;var _=e.memoizedState;s.state=_,Qa(e,r,s,i),u=e.memoizedState,l!==r||_!==u||Ct.current||Wn?(typeof f=="function"&&(Ic(e,n,f,r),u=e.memoizedState),(l=Wn||Rp(e,n,l,r,_,u,d))?(y||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),s.props=r,s.state=u,s.context=d,r=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,vy(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Yt(e.type,l),s.props=d,y=e.pendingProps,_=s.context,u=n.contextType,typeof u=="object"&&u!==null?u=Ht(u):(u=Rt(n)?Br:mt.current,u=ki(e,u));var R=n.getDerivedStateFromProps;(f=typeof R=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==y||_!==u)&&kp(e,s,r,u),Wn=!1,_=e.memoizedState,s.state=_,Qa(e,r,s,i);var P=e.memoizedState;l!==y||_!==P||Ct.current||Wn?(typeof R=="function"&&(Ic(e,n,R,r),P=e.memoizedState),(d=Wn||Rp(e,n,d,r,_,P,u)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,P,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,P,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=P),s.props=r,s.state=P,s.context=u,r=d):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),r=!1)}return Cc(t,e,n,r,o,i)}function Cc(t,e,n,r,i,o){Wy(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&wp(e,n,!1),Cn(t,e,o);r=e.stateNode,ME.current=e;var l=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Di(e,t.child,null,o),e.child=Di(e,null,l,o)):_t(t,e,l,o),e.memoizedState=r.state,i&&wp(e,n,!0),e.child}function Hy(t){var e=t.stateNode;e.pendingContext?_p(t,e.pendingContext,e.pendingContext!==e.context):e.context&&_p(t,e.context,!1),jd(t,e.containerInfo)}function Op(t,e,n,r,i){return Pi(),Dd(i),e.flags|=256,_t(t,e,n,r),e.child}var Rc={dehydrated:null,treeContext:null,retryLane:0};function kc(t){return{baseLanes:t,cachePool:null,transitions:null}}function qy(t,e,n){var r=e.pendingProps,i=Re.current,o=!1,s=(e.flags&128)!==0,l;if((l=s)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ee(Re,i&1),t===null)return Ec(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=xl(s,r,0,null),t=Or(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=kc(n),e.memoizedState=Rc,t):Hd(e,s));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return FE(t,e,s,r,l,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=ir(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=ir(l,o):(o=Or(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?kc(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=Rc,r}return o=t.child,t=o.sibling,r=ir(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Hd(t,e){return e=xl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function sa(t,e,n,r){return r!==null&&Dd(r),Di(e,t.child,null,n),t=Hd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function FE(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=Cu(Error(z(422))),sa(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=xl({mode:"visible",children:r.children},i,0,null),o=Or(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Di(e,t.child,null,s),e.child.memoizedState=kc(s),e.memoizedState=Rc,o);if(!(e.mode&1))return sa(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(z(419)),r=Cu(o,r,void 0),sa(t,e,s,r)}if(l=(s&t.childLanes)!==0,At||l){if(r=Qe,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,An(t,i),en(r,t,i,-1))}return Xd(),r=Cu(Error(z(421))),sa(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=JE.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Vt=er(i.nextSibling),jt=e,Ae=!0,Jt=null,t!==null&&(Ut[zt++]=En,Ut[zt++]=Tn,Ut[zt++]=Ur,En=t.id,Tn=t.overflow,Ur=e),e=Hd(e,r.children),e.flags|=4096,e)}function jp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Tc(t.return,e,n)}function Ru(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Gy(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(_t(t,e,r.children,n),r=Re.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&jp(t,n,e);else if(t.tag===19)jp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ee(Re,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ya(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ru(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ya(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ru(e,!0,n,null,o);break;case"together":Ru(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function xa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Cn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),$r|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=ir(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ir(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function BE(t,e,n){switch(e.tag){case 3:Hy(e),Pi();break;case 5:_y(e);break;case 1:Rt(e.type)&&Wa(e);break;case 4:jd(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ee(Ga,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ee(Re,Re.current&1),e.flags|=128,null):n&e.child.childLanes?qy(t,e,n):(Ee(Re,Re.current&1),t=Cn(t,e,n),t!==null?t.sibling:null);Ee(Re,Re.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Gy(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ee(Re,Re.current),r)break;return null;case 22:case 23:return e.lanes=0,$y(t,e,n)}return Cn(t,e,n)}var Ky,Pc,Qy,Yy;Ky=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Pc=function(){};Qy=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Nr(dn.current);var o=null;switch(n){case"input":i=Ju(t,i),r=Ju(t,r),o=[];break;case"select":i=Pe({},i,{value:void 0}),r=Pe({},r,{value:void 0}),o=[];break;case"textarea":i=tc(t,i),r=tc(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=za)}rc(n,r);var s;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var l=i[d];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(qo.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var u=r[d];if(l=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(o=o||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(qo.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Ie("scroll",t),o||l===u||(o=[])):(o=o||[]).push(d,u))}n&&(o=o||[]).push("style",n);var d=o;(e.updateQueue=d)&&(e.flags|=4)}};Yy=function(t,e,n,r){n!==r&&(e.flags|=4)};function wo(t,e){if(!Ae)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ct(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function UE(t,e,n){var r=e.pendingProps;switch(Pd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(e),null;case 1:return Rt(e.type)&&$a(),ct(e),null;case 3:return r=e.stateNode,bi(),xe(Ct),xe(mt),Fd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ia(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Jt!==null&&(Mc(Jt),Jt=null))),Pc(t,e),ct(e),null;case 5:Md(e);var i=Nr(is.current);if(n=e.type,t!==null&&e.stateNode!=null)Qy(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return ct(e),null}if(t=Nr(dn.current),ia(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[ln]=e,r[ns]=o,t=(e.mode&1)!==0,n){case"dialog":Ie("cancel",r),Ie("close",r);break;case"iframe":case"object":case"embed":Ie("load",r);break;case"video":case"audio":for(i=0;i<Co.length;i++)Ie(Co[i],r);break;case"source":Ie("error",r);break;case"img":case"image":case"link":Ie("error",r),Ie("load",r);break;case"details":Ie("toggle",r);break;case"input":qf(r,o),Ie("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ie("invalid",r);break;case"textarea":Kf(r,o),Ie("invalid",r)}rc(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&ra(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&ra(r.textContent,l,t),i=["children",""+l]):qo.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&Ie("scroll",r)}switch(n){case"input":Qs(r),Gf(r,o,!0);break;case"textarea":Qs(r),Qf(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=za)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Sg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[ln]=e,t[ns]=r,Ky(t,e,!1,!1),e.stateNode=t;e:{switch(s=ic(n,r),n){case"dialog":Ie("cancel",t),Ie("close",t),i=r;break;case"iframe":case"object":case"embed":Ie("load",t),i=r;break;case"video":case"audio":for(i=0;i<Co.length;i++)Ie(Co[i],t);i=r;break;case"source":Ie("error",t),i=r;break;case"img":case"image":case"link":Ie("error",t),Ie("load",t),i=r;break;case"details":Ie("toggle",t),i=r;break;case"input":qf(t,r),i=Ju(t,r),Ie("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Pe({},r,{value:void 0}),Ie("invalid",t);break;case"textarea":Kf(t,r),i=tc(t,r),Ie("invalid",t);break;default:i=r}rc(n,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var u=l[o];o==="style"?Cg(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&xg(t,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Go(t,u):typeof u=="number"&&Go(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(qo.hasOwnProperty(o)?u!=null&&o==="onScroll"&&Ie("scroll",t):u!=null&&md(t,o,u,s))}switch(n){case"input":Qs(t),Gf(t,r,!1);break;case"textarea":Qs(t),Qf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+cr(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Ei(t,!!r.multiple,o,!1):r.defaultValue!=null&&Ei(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=za)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ct(e),null;case 6:if(t&&e.stateNode!=null)Yy(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=Nr(is.current),Nr(dn.current),ia(e)){if(r=e.stateNode,n=e.memoizedProps,r[ln]=e,(o=r.nodeValue!==n)&&(t=jt,t!==null))switch(t.tag){case 3:ra(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ra(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ln]=e,e.stateNode=r}return ct(e),null;case 13:if(xe(Re),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ae&&Vt!==null&&e.mode&1&&!(e.flags&128))py(),Pi(),e.flags|=98560,o=!1;else if(o=ia(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(z(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(z(317));o[ln]=e}else Pi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ct(e),o=!1}else Jt!==null&&(Mc(Jt),Jt=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Re.current&1?$e===0&&($e=3):Xd())),e.updateQueue!==null&&(e.flags|=4),ct(e),null);case 4:return bi(),Pc(t,e),t===null&&es(e.stateNode.containerInfo),ct(e),null;case 10:return Vd(e.type._context),ct(e),null;case 17:return Rt(e.type)&&$a(),ct(e),null;case 19:if(xe(Re),o=e.memoizedState,o===null)return ct(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)wo(o,!1);else{if($e!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Ya(t),s!==null){for(e.flags|=128,wo(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ee(Re,Re.current&1|2),e.child}t=t.sibling}o.tail!==null&&Me()>Vi&&(e.flags|=128,r=!0,wo(o,!1),e.lanes=4194304)}else{if(!r)if(t=Ya(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),wo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Ae)return ct(e),null}else 2*Me()-o.renderingStartTime>Vi&&n!==1073741824&&(e.flags|=128,r=!0,wo(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Me(),e.sibling=null,n=Re.current,Ee(Re,r?n&1|2:n&1),e):(ct(e),null);case 22:case 23:return Yd(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Nt&1073741824&&(ct(e),e.subtreeFlags&6&&(e.flags|=8192)):ct(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function zE(t,e){switch(Pd(e),e.tag){case 1:return Rt(e.type)&&$a(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return bi(),xe(Ct),xe(mt),Fd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Md(e),null;case 13:if(xe(Re),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));Pi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return xe(Re),null;case 4:return bi(),null;case 10:return Vd(e.type._context),null;case 22:case 23:return Yd(),null;case 24:return null;default:return null}}var aa=!1,ft=!1,$E=typeof WeakSet=="function"?WeakSet:Set,Q=null;function _i(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ne(t,e,r)}else n.current=null}function Dc(t,e,n){try{n()}catch(r){Ne(t,e,r)}}var Mp=!1;function WE(t,e){if(pc=Fa,t=ty(),Rd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,l=-1,u=-1,d=0,f=0,y=t,_=null;t:for(;;){for(var R;y!==n||i!==0&&y.nodeType!==3||(l=s+i),y!==o||r!==0&&y.nodeType!==3||(u=s+r),y.nodeType===3&&(s+=y.nodeValue.length),(R=y.firstChild)!==null;)_=y,y=R;for(;;){if(y===t)break t;if(_===n&&++d===i&&(l=s),_===o&&++f===r&&(u=s),(R=y.nextSibling)!==null)break;y=_,_=y.parentNode}y=R}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(mc={focusedElem:t,selectionRange:n},Fa=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var b=P.memoizedProps,L=P.memoizedState,x=e.stateNode,w=x.getSnapshotBeforeUpdate(e.elementType===e.type?b:Yt(e.type,b),L);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(N){Ne(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return P=Mp,Mp=!1,P}function Mo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Dc(e,n,o)}i=i.next}while(i!==r)}}function Il(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function bc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Xy(t){var e=t.alternate;e!==null&&(t.alternate=null,Xy(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ln],delete e[ns],delete e[vc],delete e[AE],delete e[CE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Jy(t){return t.tag===5||t.tag===3||t.tag===4}function Fp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Jy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Nc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=za));else if(r!==4&&(t=t.child,t!==null))for(Nc(t,e,n),t=t.sibling;t!==null;)Nc(t,e,n),t=t.sibling}function Vc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Vc(t,e,n),t=t.sibling;t!==null;)Vc(t,e,n),t=t.sibling}var Ze=null,Xt=!1;function Un(t,e,n){for(n=n.child;n!==null;)Zy(t,e,n),n=n.sibling}function Zy(t,e,n){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(ml,n)}catch{}switch(n.tag){case 5:ft||_i(n,e);case 6:var r=Ze,i=Xt;Ze=null,Un(t,e,n),Ze=r,Xt=i,Ze!==null&&(Xt?(t=Ze,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ze.removeChild(n.stateNode));break;case 18:Ze!==null&&(Xt?(t=Ze,n=n.stateNode,t.nodeType===8?Eu(t.parentNode,n):t.nodeType===1&&Eu(t,n),Xo(t)):Eu(Ze,n.stateNode));break;case 4:r=Ze,i=Xt,Ze=n.stateNode.containerInfo,Xt=!0,Un(t,e,n),Ze=r,Xt=i;break;case 0:case 11:case 14:case 15:if(!ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&Dc(n,e,s),i=i.next}while(i!==r)}Un(t,e,n);break;case 1:if(!ft&&(_i(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ne(n,e,l)}Un(t,e,n);break;case 21:Un(t,e,n);break;case 22:n.mode&1?(ft=(r=ft)||n.memoizedState!==null,Un(t,e,n),ft=r):Un(t,e,n);break;default:Un(t,e,n)}}function Bp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new $E),e.forEach(function(r){var i=ZE.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Kt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,l=s;e:for(;l!==null;){switch(l.tag){case 5:Ze=l.stateNode,Xt=!1;break e;case 3:Ze=l.stateNode.containerInfo,Xt=!0;break e;case 4:Ze=l.stateNode.containerInfo,Xt=!0;break e}l=l.return}if(Ze===null)throw Error(z(160));Zy(o,s,i),Ze=null,Xt=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(d){Ne(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ev(e,t),e=e.sibling}function ev(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Kt(e,t),on(t),r&4){try{Mo(3,t,t.return),Il(3,t)}catch(b){Ne(t,t.return,b)}try{Mo(5,t,t.return)}catch(b){Ne(t,t.return,b)}}break;case 1:Kt(e,t),on(t),r&512&&n!==null&&_i(n,n.return);break;case 5:if(Kt(e,t),on(t),r&512&&n!==null&&_i(n,n.return),t.flags&32){var i=t.stateNode;try{Go(i,"")}catch(b){Ne(t,t.return,b)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&Tg(i,o),ic(l,s);var d=ic(l,o);for(s=0;s<u.length;s+=2){var f=u[s],y=u[s+1];f==="style"?Cg(i,y):f==="dangerouslySetInnerHTML"?xg(i,y):f==="children"?Go(i,y):md(i,f,y,d)}switch(l){case"input":Zu(i,o);break;case"textarea":Ig(i,o);break;case"select":var _=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var R=o.value;R!=null?Ei(i,!!o.multiple,R,!1):_!==!!o.multiple&&(o.defaultValue!=null?Ei(i,!!o.multiple,o.defaultValue,!0):Ei(i,!!o.multiple,o.multiple?[]:"",!1))}i[ns]=o}catch(b){Ne(t,t.return,b)}}break;case 6:if(Kt(e,t),on(t),r&4){if(t.stateNode===null)throw Error(z(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(b){Ne(t,t.return,b)}}break;case 3:if(Kt(e,t),on(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Xo(e.containerInfo)}catch(b){Ne(t,t.return,b)}break;case 4:Kt(e,t),on(t);break;case 13:Kt(e,t),on(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Kd=Me())),r&4&&Bp(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(ft=(d=ft)||f,Kt(e,t),ft=d):Kt(e,t),on(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(Q=t,f=t.child;f!==null;){for(y=Q=f;Q!==null;){switch(_=Q,R=_.child,_.tag){case 0:case 11:case 14:case 15:Mo(4,_,_.return);break;case 1:_i(_,_.return);var P=_.stateNode;if(typeof P.componentWillUnmount=="function"){r=_,n=_.return;try{e=r,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(b){Ne(r,n,b)}}break;case 5:_i(_,_.return);break;case 22:if(_.memoizedState!==null){zp(y);continue}}R!==null?(R.return=_,Q=R):zp(y)}f=f.sibling}e:for(f=null,y=t;;){if(y.tag===5){if(f===null){f=y;try{i=y.stateNode,d?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=y.stateNode,u=y.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Ag("display",s))}catch(b){Ne(t,t.return,b)}}}else if(y.tag===6){if(f===null)try{y.stateNode.nodeValue=d?"":y.memoizedProps}catch(b){Ne(t,t.return,b)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;f===y&&(f=null),y=y.return}f===y&&(f=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Kt(e,t),on(t),r&4&&Bp(t);break;case 21:break;default:Kt(e,t),on(t)}}function on(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Jy(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Go(i,""),r.flags&=-33);var o=Fp(t);Vc(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,l=Fp(t);Nc(t,l,s);break;default:throw Error(z(161))}}catch(u){Ne(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function HE(t,e,n){Q=t,tv(t)}function tv(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var i=Q,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||aa;if(!s){var l=i.alternate,u=l!==null&&l.memoizedState!==null||ft;l=aa;var d=ft;if(aa=s,(ft=u)&&!d)for(Q=i;Q!==null;)s=Q,u=s.child,s.tag===22&&s.memoizedState!==null?$p(i):u!==null?(u.return=s,Q=u):$p(i);for(;o!==null;)Q=o,tv(o),o=o.sibling;Q=i,aa=l,ft=d}Up(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Q=o):Up(t)}}function Up(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ft||Il(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ft)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Yt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&xp(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}xp(e,s,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var y=f.dehydrated;y!==null&&Xo(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}ft||e.flags&512&&bc(e)}catch(_){Ne(e,e.return,_)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function zp(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function $p(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Il(4,e)}catch(u){Ne(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Ne(e,i,u)}}var o=e.return;try{bc(e)}catch(u){Ne(e,o,u)}break;case 5:var s=e.return;try{bc(e)}catch(u){Ne(e,s,u)}}}catch(u){Ne(e,e.return,u)}if(e===t){Q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Q=l;break}Q=e.return}}var qE=Math.ceil,Za=Dn.ReactCurrentDispatcher,qd=Dn.ReactCurrentOwner,Wt=Dn.ReactCurrentBatchConfig,pe=0,Qe=null,Be=null,nt=0,Nt=0,wi=gr(0),$e=0,ls=null,$r=0,Sl=0,Gd=0,Fo=null,St=null,Kd=0,Vi=1/0,_n=null,el=!1,Lc=null,nr=null,la=!1,Qn=null,tl=0,Bo=0,Oc=null,Aa=-1,Ca=0;function wt(){return pe&6?Me():Aa!==-1?Aa:Aa=Me()}function rr(t){return t.mode&1?pe&2&&nt!==0?nt&-nt:kE.transition!==null?(Ca===0&&(Ca=Fg()),Ca):(t=ve,t!==0||(t=window.event,t=t===void 0?16:qg(t.type)),t):1}function en(t,e,n,r){if(50<Bo)throw Bo=0,Oc=null,Error(z(185));_s(t,n,r),(!(pe&2)||t!==Qe)&&(t===Qe&&(!(pe&2)&&(Sl|=n),$e===4&&qn(t,nt)),kt(t,r),n===1&&pe===0&&!(e.mode&1)&&(Vi=Me()+500,wl&&yr()))}function kt(t,e){var n=t.callbackNode;kw(t,e);var r=Ma(t,t===Qe?nt:0);if(r===0)n!==null&&Jf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Jf(n),e===1)t.tag===0?RE(Wp.bind(null,t)):dy(Wp.bind(null,t)),SE(function(){!(pe&6)&&yr()}),n=null;else{switch(Bg(r)){case 1:n=wd;break;case 4:n=jg;break;case 16:n=ja;break;case 536870912:n=Mg;break;default:n=ja}n=uv(n,nv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function nv(t,e){if(Aa=-1,Ca=0,pe&6)throw Error(z(327));var n=t.callbackNode;if(Ai()&&t.callbackNode!==n)return null;var r=Ma(t,t===Qe?nt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=nl(t,r);else{e=r;var i=pe;pe|=2;var o=iv();(Qe!==t||nt!==e)&&(_n=null,Vi=Me()+500,Lr(t,e));do try{QE();break}catch(l){rv(t,l)}while(!0);Nd(),Za.current=o,pe=i,Be!==null?e=0:(Qe=null,nt=0,e=$e)}if(e!==0){if(e===2&&(i=uc(t),i!==0&&(r=i,e=jc(t,i))),e===1)throw n=ls,Lr(t,0),qn(t,r),kt(t,Me()),n;if(e===6)qn(t,r);else{if(i=t.current.alternate,!(r&30)&&!GE(i)&&(e=nl(t,r),e===2&&(o=uc(t),o!==0&&(r=o,e=jc(t,o))),e===1))throw n=ls,Lr(t,0),qn(t,r),kt(t,Me()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:kr(t,St,_n);break;case 3:if(qn(t,r),(r&130023424)===r&&(e=Kd+500-Me(),10<e)){if(Ma(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){wt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=yc(kr.bind(null,t,St,_n),e);break}kr(t,St,_n);break;case 4:if(qn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-Zt(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=Me()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*qE(r/1960))-r,10<r){t.timeoutHandle=yc(kr.bind(null,t,St,_n),r);break}kr(t,St,_n);break;case 5:kr(t,St,_n);break;default:throw Error(z(329))}}}return kt(t,Me()),t.callbackNode===n?nv.bind(null,t):null}function jc(t,e){var n=Fo;return t.current.memoizedState.isDehydrated&&(Lr(t,e).flags|=256),t=nl(t,e),t!==2&&(e=St,St=n,e!==null&&Mc(e)),t}function Mc(t){St===null?St=t:St.push.apply(St,t)}function GE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!nn(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function qn(t,e){for(e&=~Gd,e&=~Sl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Zt(e),r=1<<n;t[n]=-1,e&=~r}}function Wp(t){if(pe&6)throw Error(z(327));Ai();var e=Ma(t,0);if(!(e&1))return kt(t,Me()),null;var n=nl(t,e);if(t.tag!==0&&n===2){var r=uc(t);r!==0&&(e=r,n=jc(t,r))}if(n===1)throw n=ls,Lr(t,0),qn(t,e),kt(t,Me()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,kr(t,St,_n),kt(t,Me()),null}function Qd(t,e){var n=pe;pe|=1;try{return t(e)}finally{pe=n,pe===0&&(Vi=Me()+500,wl&&yr())}}function Wr(t){Qn!==null&&Qn.tag===0&&!(pe&6)&&Ai();var e=pe;pe|=1;var n=Wt.transition,r=ve;try{if(Wt.transition=null,ve=1,t)return t()}finally{ve=r,Wt.transition=n,pe=e,!(pe&6)&&yr()}}function Yd(){Nt=wi.current,xe(wi)}function Lr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,IE(n)),Be!==null)for(n=Be.return;n!==null;){var r=n;switch(Pd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&$a();break;case 3:bi(),xe(Ct),xe(mt),Fd();break;case 5:Md(r);break;case 4:bi();break;case 13:xe(Re);break;case 19:xe(Re);break;case 10:Vd(r.type._context);break;case 22:case 23:Yd()}n=n.return}if(Qe=t,Be=t=ir(t.current,null),nt=Nt=e,$e=0,ls=null,Gd=Sl=$r=0,St=Fo=null,br!==null){for(e=0;e<br.length;e++)if(n=br[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}br=null}return t}function rv(t,e){do{var n=Be;try{if(Nd(),Ia.current=Ja,Xa){for(var r=ke.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Xa=!1}if(zr=0,Ke=ze=ke=null,jo=!1,os=0,qd.current=null,n===null||n.return===null){$e=1,ls=e,Be=null;break}e:{var o=t,s=n.return,l=n,u=e;if(e=nt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=l,y=f.tag;if(!(f.mode&1)&&(y===0||y===11||y===15)){var _=f.alternate;_?(f.updateQueue=_.updateQueue,f.memoizedState=_.memoizedState,f.lanes=_.lanes):(f.updateQueue=null,f.memoizedState=null)}var R=Dp(s);if(R!==null){R.flags&=-257,bp(R,s,l,o,e),R.mode&1&&Pp(o,d,e),e=R,u=d;var P=e.updateQueue;if(P===null){var b=new Set;b.add(u),e.updateQueue=b}else P.add(u);break e}else{if(!(e&1)){Pp(o,d,e),Xd();break e}u=Error(z(426))}}else if(Ae&&l.mode&1){var L=Dp(s);if(L!==null){!(L.flags&65536)&&(L.flags|=256),bp(L,s,l,o,e),Dd(Ni(u,l));break e}}o=u=Ni(u,l),$e!==4&&($e=2),Fo===null?Fo=[o]:Fo.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var x=By(o,u,e);Sp(o,x);break e;case 1:l=u;var w=o.type,C=o.stateNode;if(!(o.flags&128)&&(typeof w.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(nr===null||!nr.has(C)))){o.flags|=65536,e&=-e,o.lanes|=e;var N=Uy(o,l,e);Sp(o,N);break e}}o=o.return}while(o!==null)}sv(n)}catch(B){e=B,Be===n&&n!==null&&(Be=n=n.return);continue}break}while(!0)}function iv(){var t=Za.current;return Za.current=Ja,t===null?Ja:t}function Xd(){($e===0||$e===3||$e===2)&&($e=4),Qe===null||!($r&268435455)&&!(Sl&268435455)||qn(Qe,nt)}function nl(t,e){var n=pe;pe|=2;var r=iv();(Qe!==t||nt!==e)&&(_n=null,Lr(t,e));do try{KE();break}catch(i){rv(t,i)}while(!0);if(Nd(),pe=n,Za.current=r,Be!==null)throw Error(z(261));return Qe=null,nt=0,$e}function KE(){for(;Be!==null;)ov(Be)}function QE(){for(;Be!==null&&!ww();)ov(Be)}function ov(t){var e=lv(t.alternate,t,Nt);t.memoizedProps=t.pendingProps,e===null?sv(t):Be=e,qd.current=null}function sv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=zE(n,e),n!==null){n.flags&=32767,Be=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{$e=6,Be=null;return}}else if(n=UE(n,e,Nt),n!==null){Be=n;return}if(e=e.sibling,e!==null){Be=e;return}Be=e=t}while(e!==null);$e===0&&($e=5)}function kr(t,e,n){var r=ve,i=Wt.transition;try{Wt.transition=null,ve=1,YE(t,e,n,r)}finally{Wt.transition=i,ve=r}return null}function YE(t,e,n,r){do Ai();while(Qn!==null);if(pe&6)throw Error(z(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(Pw(t,o),t===Qe&&(Be=Qe=null,nt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||la||(la=!0,uv(ja,function(){return Ai(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Wt.transition,Wt.transition=null;var s=ve;ve=1;var l=pe;pe|=4,qd.current=null,WE(t,n),ev(n,t),gE(mc),Fa=!!pc,mc=pc=null,t.current=n,HE(n),Ew(),pe=l,ve=s,Wt.transition=o}else t.current=n;if(la&&(la=!1,Qn=t,tl=i),o=t.pendingLanes,o===0&&(nr=null),Sw(n.stateNode),kt(t,Me()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(el)throw el=!1,t=Lc,Lc=null,t;return tl&1&&t.tag!==0&&Ai(),o=t.pendingLanes,o&1?t===Oc?Bo++:(Bo=0,Oc=t):Bo=0,yr(),null}function Ai(){if(Qn!==null){var t=Bg(tl),e=Wt.transition,n=ve;try{if(Wt.transition=null,ve=16>t?16:t,Qn===null)var r=!1;else{if(t=Qn,Qn=null,tl=0,pe&6)throw Error(z(331));var i=pe;for(pe|=4,Q=t.current;Q!==null;){var o=Q,s=o.child;if(Q.flags&16){var l=o.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(Q=d;Q!==null;){var f=Q;switch(f.tag){case 0:case 11:case 15:Mo(8,f,o)}var y=f.child;if(y!==null)y.return=f,Q=y;else for(;Q!==null;){f=Q;var _=f.sibling,R=f.return;if(Xy(f),f===d){Q=null;break}if(_!==null){_.return=R,Q=_;break}Q=R}}}var P=o.alternate;if(P!==null){var b=P.child;if(b!==null){P.child=null;do{var L=b.sibling;b.sibling=null,b=L}while(b!==null)}}Q=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,Q=s;else e:for(;Q!==null;){if(o=Q,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Mo(9,o,o.return)}var x=o.sibling;if(x!==null){x.return=o.return,Q=x;break e}Q=o.return}}var w=t.current;for(Q=w;Q!==null;){s=Q;var C=s.child;if(s.subtreeFlags&2064&&C!==null)C.return=s,Q=C;else e:for(s=w;Q!==null;){if(l=Q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Il(9,l)}}catch(B){Ne(l,l.return,B)}if(l===s){Q=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,Q=N;break e}Q=l.return}}if(pe=i,yr(),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(ml,t)}catch{}r=!0}return r}finally{ve=n,Wt.transition=e}}return!1}function Hp(t,e,n){e=Ni(n,e),e=By(t,e,1),t=tr(t,e,1),e=wt(),t!==null&&(_s(t,1,e),kt(t,e))}function Ne(t,e,n){if(t.tag===3)Hp(t,t,n);else for(;e!==null;){if(e.tag===3){Hp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(nr===null||!nr.has(r))){t=Ni(n,t),t=Uy(e,t,1),e=tr(e,t,1),t=wt(),e!==null&&(_s(e,1,t),kt(e,t));break}}e=e.return}}function XE(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=wt(),t.pingedLanes|=t.suspendedLanes&n,Qe===t&&(nt&n)===n&&($e===4||$e===3&&(nt&130023424)===nt&&500>Me()-Kd?Lr(t,0):Gd|=n),kt(t,e)}function av(t,e){e===0&&(t.mode&1?(e=Js,Js<<=1,!(Js&130023424)&&(Js=4194304)):e=1);var n=wt();t=An(t,e),t!==null&&(_s(t,e,n),kt(t,n))}function JE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),av(t,n)}function ZE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),av(t,n)}var lv;lv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ct.current)At=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return At=!1,BE(t,e,n);At=!!(t.flags&131072)}else At=!1,Ae&&e.flags&1048576&&hy(e,qa,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;xa(t,e),t=e.pendingProps;var i=ki(e,mt.current);xi(e,n),i=Ud(null,e,r,t,i,n);var o=zd();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Rt(r)?(o=!0,Wa(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Od(e),i.updater=Tl,e.stateNode=i,i._reactInternals=e,Sc(e,r,t,n),e=Cc(null,e,r,!0,o,n)):(e.tag=0,Ae&&o&&kd(e),_t(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(xa(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=tT(r),t=Yt(r,t),i){case 0:e=Ac(null,e,r,t,n);break e;case 1:e=Lp(null,e,r,t,n);break e;case 11:e=Np(null,e,r,t,n);break e;case 14:e=Vp(null,e,r,Yt(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yt(r,i),Ac(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yt(r,i),Lp(t,e,r,i,n);case 3:e:{if(Hy(e),t===null)throw Error(z(387));r=e.pendingProps,o=e.memoizedState,i=o.element,vy(t,e),Qa(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Ni(Error(z(423)),e),e=Op(t,e,r,n,i);break e}else if(r!==i){i=Ni(Error(z(424)),e),e=Op(t,e,r,n,i);break e}else for(Vt=er(e.stateNode.containerInfo.firstChild),jt=e,Ae=!0,Jt=null,n=gy(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Pi(),r===i){e=Cn(t,e,n);break e}_t(t,e,r,n)}e=e.child}return e;case 5:return _y(e),t===null&&Ec(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,gc(r,i)?s=null:o!==null&&gc(r,o)&&(e.flags|=32),Wy(t,e),_t(t,e,s,n),e.child;case 6:return t===null&&Ec(e),null;case 13:return qy(t,e,n);case 4:return jd(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Di(e,null,r,n):_t(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yt(r,i),Np(t,e,r,i,n);case 7:return _t(t,e,e.pendingProps,n),e.child;case 8:return _t(t,e,e.pendingProps.children,n),e.child;case 12:return _t(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,Ee(Ga,r._currentValue),r._currentValue=s,o!==null)if(nn(o.value,s)){if(o.children===i.children&&!Ct.current){e=Cn(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){s=o.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=In(-1,n&-n),u.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),Tc(o.return,n,e),l.lanes|=n;break}u=u.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(z(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Tc(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}_t(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,xi(e,n),i=Ht(i),r=r(i),e.flags|=1,_t(t,e,r,n),e.child;case 14:return r=e.type,i=Yt(r,e.pendingProps),i=Yt(r.type,i),Vp(t,e,r,i,n);case 15:return zy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yt(r,i),xa(t,e),e.tag=1,Rt(r)?(t=!0,Wa(e)):t=!1,xi(e,n),Fy(e,r,i),Sc(e,r,i,n),Cc(null,e,r,!0,t,n);case 19:return Gy(t,e,n);case 22:return $y(t,e,n)}throw Error(z(156,e.tag))};function uv(t,e){return Og(t,e)}function eT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $t(t,e,n,r){return new eT(t,e,n,r)}function Jd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function tT(t){if(typeof t=="function")return Jd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===yd)return 11;if(t===vd)return 14}return 2}function ir(t,e){var n=t.alternate;return n===null?(n=$t(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ra(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")Jd(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case ci:return Or(n.children,i,o,e);case gd:s=8,i|=8;break;case Ku:return t=$t(12,n,e,i|2),t.elementType=Ku,t.lanes=o,t;case Qu:return t=$t(13,n,e,i),t.elementType=Qu,t.lanes=o,t;case Yu:return t=$t(19,n,e,i),t.elementType=Yu,t.lanes=o,t;case _g:return xl(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case yg:s=10;break e;case vg:s=9;break e;case yd:s=11;break e;case vd:s=14;break e;case $n:s=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=$t(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Or(t,e,n,r){return t=$t(7,t,r,e),t.lanes=n,t}function xl(t,e,n,r){return t=$t(22,t,r,e),t.elementType=_g,t.lanes=n,t.stateNode={isHidden:!1},t}function ku(t,e,n){return t=$t(6,t,null,e),t.lanes=n,t}function Pu(t,e,n){return e=$t(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function nT(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cu(0),this.expirationTimes=cu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Zd(t,e,n,r,i,o,s,l,u){return t=new nT(t,e,n,l,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=$t(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Od(o),t}function rT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ui,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function cv(t){if(!t)return dr;t=t._reactInternals;e:{if(Yr(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Rt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(Rt(n))return cy(t,n,e)}return e}function dv(t,e,n,r,i,o,s,l,u){return t=Zd(n,r,!0,t,i,o,s,l,u),t.context=cv(null),n=t.current,r=wt(),i=rr(n),o=In(r,i),o.callback=e??null,tr(n,o,i),t.current.lanes=i,_s(t,i,r),kt(t,r),t}function Al(t,e,n,r){var i=e.current,o=wt(),s=rr(i);return n=cv(n),e.context===null?e.context=n:e.pendingContext=n,e=In(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=tr(i,e,s),t!==null&&(en(t,i,s,o),Ta(t,i,s)),s}function rl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function qp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function eh(t,e){qp(t,e),(t=t.alternate)&&qp(t,e)}function iT(){return null}var hv=typeof reportError=="function"?reportError:function(t){console.error(t)};function th(t){this._internalRoot=t}Cl.prototype.render=th.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Al(t,e,null,null)};Cl.prototype.unmount=th.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Wr(function(){Al(null,t,null,null)}),e[xn]=null}};function Cl(t){this._internalRoot=t}Cl.prototype.unstable_scheduleHydration=function(t){if(t){var e=$g();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Hn.length&&e!==0&&e<Hn[n].priority;n++);Hn.splice(n,0,t),n===0&&Hg(t)}};function nh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Rl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Gp(){}function oT(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var d=rl(s);o.call(d)}}var s=dv(e,r,t,0,null,!1,!1,"",Gp);return t._reactRootContainer=s,t[xn]=s.current,es(t.nodeType===8?t.parentNode:t),Wr(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var d=rl(u);l.call(d)}}var u=Zd(t,0,!1,null,null,!1,!1,"",Gp);return t._reactRootContainer=u,t[xn]=u.current,es(t.nodeType===8?t.parentNode:t),Wr(function(){Al(e,u,n,r)}),u}function kl(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var l=i;i=function(){var u=rl(s);l.call(u)}}Al(e,s,t,i)}else s=oT(n,e,t,i,r);return rl(s)}Ug=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ao(e.pendingLanes);n!==0&&(Ed(e,n|1),kt(e,Me()),!(pe&6)&&(Vi=Me()+500,yr()))}break;case 13:Wr(function(){var r=An(t,1);if(r!==null){var i=wt();en(r,t,1,i)}}),eh(t,1)}};Td=function(t){if(t.tag===13){var e=An(t,134217728);if(e!==null){var n=wt();en(e,t,134217728,n)}eh(t,134217728)}};zg=function(t){if(t.tag===13){var e=rr(t),n=An(t,e);if(n!==null){var r=wt();en(n,t,e,r)}eh(t,e)}};$g=function(){return ve};Wg=function(t,e){var n=ve;try{return ve=t,e()}finally{ve=n}};sc=function(t,e,n){switch(e){case"input":if(Zu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=_l(r);if(!i)throw Error(z(90));Eg(r),Zu(r,i)}}}break;case"textarea":Ig(t,n);break;case"select":e=n.value,e!=null&&Ei(t,!!n.multiple,e,!1)}};Pg=Qd;Dg=Wr;var sT={usingClientEntryPoint:!1,Events:[Es,pi,_l,Rg,kg,Qd]},Eo={findFiberByHostInstance:Dr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},aT={bundleType:Eo.bundleType,version:Eo.version,rendererPackageName:Eo.rendererPackageName,rendererConfig:Eo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Dn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Vg(t),t===null?null:t.stateNode},findFiberByHostInstance:Eo.findFiberByHostInstance||iT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ua=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ua.isDisabled&&ua.supportsFiber)try{ml=ua.inject(aT),cn=ua}catch{}}Ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sT;Ft.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nh(e))throw Error(z(200));return rT(t,e,null,n)};Ft.createRoot=function(t,e){if(!nh(t))throw Error(z(299));var n=!1,r="",i=hv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Zd(t,1,!1,null,null,n,!1,r,i),t[xn]=e.current,es(t.nodeType===8?t.parentNode:t),new th(e)};Ft.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=Vg(e),t=t===null?null:t.stateNode,t};Ft.flushSync=function(t){return Wr(t)};Ft.hydrate=function(t,e,n){if(!Rl(e))throw Error(z(200));return kl(null,t,e,!0,n)};Ft.hydrateRoot=function(t,e,n){if(!nh(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=hv;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=dv(e,null,t,1,n??null,i,!1,o,s),t[xn]=e.current,es(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Cl(e)};Ft.render=function(t,e,n){if(!Rl(e))throw Error(z(200));return kl(null,t,e,!1,n)};Ft.unmountComponentAtNode=function(t){if(!Rl(t))throw Error(z(40));return t._reactRootContainer?(Wr(function(){kl(null,null,t,!1,function(){t._reactRootContainer=null,t[xn]=null})}),!0):!1};Ft.unstable_batchedUpdates=Qd;Ft.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Rl(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return kl(t,e,n,!1,r)};Ft.version="18.3.1-next-f1338f8080-20240426";function fv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fv)}catch(t){console.error(t)}}fv(),fg.exports=Ft;var lT=fg.exports,Kp=lT;qu.createRoot=Kp.createRoot,qu.hydrateRoot=Kp.hydrateRoot;var Qp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},uT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],s=t[n++],l=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},mv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,l=s?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,f=o>>2,y=(o&3)<<4|l>>4;let _=(l&15)<<2|d>>6,R=d&63;u||(R=64,s||(_=64)),r.push(n[f],n[y],n[_],n[R])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(pv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):uT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const y=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||l==null||d==null||y==null)throw new cT;const _=o<<2|l>>4;if(r.push(_),d!==64){const R=l<<4&240|d>>2;if(r.push(R),y!==64){const P=d<<6&192|y;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class cT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dT=function(t){const e=pv(t);return mv.encodeByteArray(e,!0)},il=function(t){return dT(t).replace(/\./g,"")},hT=function(t){try{return mv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT=()=>fT().__FIREBASE_DEFAULTS__,mT=()=>{if(typeof process>"u"||typeof Qp>"u")return;const t=Qp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},gT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&hT(t[1]);return e&&JSON.parse(e)},rh=()=>{try{return pT()||mT()||gT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},yT=t=>{var e,n;return(n=(e=rh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},gv=t=>{const e=yT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},yv=()=>{var t;return(t=rh())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[il(JSON.stringify(n)),il(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wT(){var t;const e=(t=rh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ET(){return!wT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function TT(){try{return typeof indexedDB=="object"}catch{return!1}}function IT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="FirebaseError";class Xr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=ST,Object.setPrototypeOf(this,Xr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_v.prototype.create)}}class _v{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?xT(o,r):"Error",l=`${this.serviceName}: ${s} (${i}).`;return new Xr(i,l,r)}}function xT(t,e){return t.replace(AT,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const AT=/\{\$([^}]+)}/g;function Fc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(Yp(o)&&Yp(s)){if(!Fc(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Yp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(t){return t&&t._delegate?t._delegate:t}class Li{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new vT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kT(e))try{this.getOrInitializeService({instanceIdentifier:Pr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Pr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Pr){return this.instances.has(e)}getOptions(e=Pr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);r===l&&s.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:RT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Pr){return this.component?this.component.multipleInstances?e:Pr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function RT(t){return t===Pr?void 0:t}function kT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new CT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(fe||(fe={}));const DT={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},bT=fe.INFO,NT={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},VT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=NT[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wv{constructor(e){this.name=e,this._logLevel=bT,this._logHandler=VT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?DT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...e),this._logHandler(this,fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...e),this._logHandler(this,fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...e),this._logHandler(this,fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...e),this._logHandler(this,fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...e),this._logHandler(this,fe.ERROR,...e)}}const LT=(t,e)=>e.some(n=>t instanceof n);let Xp,Jp;function OT(){return Xp||(Xp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jT(){return Jp||(Jp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ev=new WeakMap,Bc=new WeakMap,Tv=new WeakMap,Du=new WeakMap,ih=new WeakMap;function MT(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(or(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&Ev.set(n,t)}).catch(()=>{}),ih.set(e,t),e}function FT(t){if(Bc.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Bc.set(t,e)}let Uc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Bc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Tv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return or(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function BT(t){Uc=t(Uc)}function UT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(bu(this),e,...n);return Tv.set(r,e.sort?e.sort():[e]),or(r)}:jT().includes(t)?function(...e){return t.apply(bu(this),e),or(Ev.get(this))}:function(...e){return or(t.apply(bu(this),e))}}function zT(t){return typeof t=="function"?UT(t):(t instanceof IDBTransaction&&FT(t),LT(t,OT())?new Proxy(t,Uc):t)}function or(t){if(t instanceof IDBRequest)return MT(t);if(Du.has(t))return Du.get(t);const e=zT(t);return e!==t&&(Du.set(t,e),ih.set(e,t)),e}const bu=t=>ih.get(t);function $T(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),l=or(s);return r&&s.addEventListener("upgradeneeded",u=>{r(or(s.result),u.oldVersion,u.newVersion,or(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const WT=["get","getKey","getAll","getAllKeys","count"],HT=["put","add","delete","clear"],Nu=new Map;function Zp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Nu.get(e))return Nu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=HT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||WT.includes(n)))return;const o=async function(s,...l){const u=this.transaction(s,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),i&&u.done]))[0]};return Nu.set(e,o),o}BT(t=>({...t,get:(e,n,r)=>Zp(e,n)||t.get(e,n,r),has:(e,n)=>!!Zp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(GT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function GT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const zc="@firebase/app",em="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rn=new wv("@firebase/app"),KT="@firebase/app-compat",QT="@firebase/analytics-compat",YT="@firebase/analytics",XT="@firebase/app-check-compat",JT="@firebase/app-check",ZT="@firebase/auth",e1="@firebase/auth-compat",t1="@firebase/database",n1="@firebase/data-connect",r1="@firebase/database-compat",i1="@firebase/functions",o1="@firebase/functions-compat",s1="@firebase/installations",a1="@firebase/installations-compat",l1="@firebase/messaging",u1="@firebase/messaging-compat",c1="@firebase/performance",d1="@firebase/performance-compat",h1="@firebase/remote-config",f1="@firebase/remote-config-compat",p1="@firebase/storage",m1="@firebase/storage-compat",g1="@firebase/firestore",y1="@firebase/vertexai-preview",v1="@firebase/firestore-compat",_1="firebase",w1="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $c="[DEFAULT]",E1={[zc]:"fire-core",[KT]:"fire-core-compat",[YT]:"fire-analytics",[QT]:"fire-analytics-compat",[JT]:"fire-app-check",[XT]:"fire-app-check-compat",[ZT]:"fire-auth",[e1]:"fire-auth-compat",[t1]:"fire-rtdb",[n1]:"fire-data-connect",[r1]:"fire-rtdb-compat",[i1]:"fire-fn",[o1]:"fire-fn-compat",[s1]:"fire-iid",[a1]:"fire-iid-compat",[l1]:"fire-fcm",[u1]:"fire-fcm-compat",[c1]:"fire-perf",[d1]:"fire-perf-compat",[h1]:"fire-rc",[f1]:"fire-rc-compat",[p1]:"fire-gcs",[m1]:"fire-gcs-compat",[g1]:"fire-fst",[v1]:"fire-fst-compat",[y1]:"fire-vertex","fire-js":"fire-js",[_1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol=new Map,T1=new Map,Wc=new Map;function tm(t,e){try{t.container.addComponent(e)}catch(n){Rn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function us(t){const e=t.name;if(Wc.has(e))return Rn.debug(`There were multiple attempts to register component ${e}.`),!1;Wc.set(e,t);for(const n of ol.values())tm(n,t);for(const n of T1.values())tm(n,t);return!0}function Iv(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},sr=new _v("app","Firebase",I1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Li("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw sr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv=w1;function xv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:$c,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw sr.create("bad-app-name",{appName:String(i)});if(n||(n=yv()),!n)throw sr.create("no-options");const o=ol.get(i);if(o){if(Fc(n,o.options)&&Fc(r,o.config))return o;throw sr.create("duplicate-app",{appName:i})}const s=new PT(i);for(const u of Wc.values())s.addComponent(u);const l=new S1(n,r,s);return ol.set(i,l),l}function Av(t=$c){const e=ol.get(t);if(!e&&t===$c&&yv())return xv();if(!e)throw sr.create("no-app",{appName:t});return e}function ar(t,e,n){var r;let i=(r=E1[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const l=[`Unable to register library "${i}" with version "${e}":`];o&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&l.push("and"),s&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Rn.warn(l.join(" "));return}us(new Li(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1="firebase-heartbeat-database",A1=1,cs="firebase-heartbeat-store";let Vu=null;function Cv(){return Vu||(Vu=$T(x1,A1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(cs)}catch(n){console.warn(n)}}}}).catch(t=>{throw sr.create("idb-open",{originalErrorMessage:t.message})})),Vu}async function C1(t){try{const n=(await Cv()).transaction(cs),r=await n.objectStore(cs).get(Rv(t));return await n.done,r}catch(e){if(e instanceof Xr)Rn.warn(e.message);else{const n=sr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Rn.warn(n.message)}}}async function nm(t,e){try{const r=(await Cv()).transaction(cs,"readwrite");await r.objectStore(cs).put(e,Rv(t)),await r.done}catch(n){if(n instanceof Xr)Rn.warn(n.message);else{const r=sr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Rn.warn(r.message)}}}function Rv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1=1024,k1=30*24*60*60*1e3;class P1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new b1(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=rm();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const l=new Date(s.date).valueOf();return Date.now()-l<=k1}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Rn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=rm(),{heartbeatsToSend:r,unsentEntries:i}=D1(this._heartbeatsCache.heartbeats),o=il(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Rn.warn(n),""}}}function rm(){return new Date().toISOString().substring(0,10)}function D1(t,e=R1){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),im(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),im(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class b1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return TT()?IT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await C1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return nm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return nm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function im(t){return il(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(t){us(new Li("platform-logger",e=>new qT(e),"PRIVATE")),us(new Li("heartbeat",e=>new P1(e),"PRIVATE")),ar(zc,em,t),ar(zc,em,"esm2017"),ar("fire-js","")}N1("");var V1="firebase",L1="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ar(V1,L1,"app");var om=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jr,kv;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,v){function E(){}E.prototype=v.prototype,T.D=v.prototype,T.prototype=new E,T.prototype.constructor=T,T.C=function(I,S,k){for(var A=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)A[Ce-2]=arguments[Ce];return v.prototype[S].apply(I,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,v,E){E||(E=0);var I=Array(16);if(typeof v=="string")for(var S=0;16>S;++S)I[S]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(S=0;16>S;++S)I[S]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=T.g[0],E=T.g[1],S=T.g[2];var k=T.g[3],A=v+(k^E&(S^k))+I[0]+3614090360&4294967295;v=E+(A<<7&4294967295|A>>>25),A=k+(S^v&(E^S))+I[1]+3905402710&4294967295,k=v+(A<<12&4294967295|A>>>20),A=S+(E^k&(v^E))+I[2]+606105819&4294967295,S=k+(A<<17&4294967295|A>>>15),A=E+(v^S&(k^v))+I[3]+3250441966&4294967295,E=S+(A<<22&4294967295|A>>>10),A=v+(k^E&(S^k))+I[4]+4118548399&4294967295,v=E+(A<<7&4294967295|A>>>25),A=k+(S^v&(E^S))+I[5]+1200080426&4294967295,k=v+(A<<12&4294967295|A>>>20),A=S+(E^k&(v^E))+I[6]+2821735955&4294967295,S=k+(A<<17&4294967295|A>>>15),A=E+(v^S&(k^v))+I[7]+4249261313&4294967295,E=S+(A<<22&4294967295|A>>>10),A=v+(k^E&(S^k))+I[8]+1770035416&4294967295,v=E+(A<<7&4294967295|A>>>25),A=k+(S^v&(E^S))+I[9]+2336552879&4294967295,k=v+(A<<12&4294967295|A>>>20),A=S+(E^k&(v^E))+I[10]+4294925233&4294967295,S=k+(A<<17&4294967295|A>>>15),A=E+(v^S&(k^v))+I[11]+2304563134&4294967295,E=S+(A<<22&4294967295|A>>>10),A=v+(k^E&(S^k))+I[12]+1804603682&4294967295,v=E+(A<<7&4294967295|A>>>25),A=k+(S^v&(E^S))+I[13]+4254626195&4294967295,k=v+(A<<12&4294967295|A>>>20),A=S+(E^k&(v^E))+I[14]+2792965006&4294967295,S=k+(A<<17&4294967295|A>>>15),A=E+(v^S&(k^v))+I[15]+1236535329&4294967295,E=S+(A<<22&4294967295|A>>>10),A=v+(S^k&(E^S))+I[1]+4129170786&4294967295,v=E+(A<<5&4294967295|A>>>27),A=k+(E^S&(v^E))+I[6]+3225465664&4294967295,k=v+(A<<9&4294967295|A>>>23),A=S+(v^E&(k^v))+I[11]+643717713&4294967295,S=k+(A<<14&4294967295|A>>>18),A=E+(k^v&(S^k))+I[0]+3921069994&4294967295,E=S+(A<<20&4294967295|A>>>12),A=v+(S^k&(E^S))+I[5]+3593408605&4294967295,v=E+(A<<5&4294967295|A>>>27),A=k+(E^S&(v^E))+I[10]+38016083&4294967295,k=v+(A<<9&4294967295|A>>>23),A=S+(v^E&(k^v))+I[15]+3634488961&4294967295,S=k+(A<<14&4294967295|A>>>18),A=E+(k^v&(S^k))+I[4]+3889429448&4294967295,E=S+(A<<20&4294967295|A>>>12),A=v+(S^k&(E^S))+I[9]+568446438&4294967295,v=E+(A<<5&4294967295|A>>>27),A=k+(E^S&(v^E))+I[14]+3275163606&4294967295,k=v+(A<<9&4294967295|A>>>23),A=S+(v^E&(k^v))+I[3]+4107603335&4294967295,S=k+(A<<14&4294967295|A>>>18),A=E+(k^v&(S^k))+I[8]+1163531501&4294967295,E=S+(A<<20&4294967295|A>>>12),A=v+(S^k&(E^S))+I[13]+2850285829&4294967295,v=E+(A<<5&4294967295|A>>>27),A=k+(E^S&(v^E))+I[2]+4243563512&4294967295,k=v+(A<<9&4294967295|A>>>23),A=S+(v^E&(k^v))+I[7]+1735328473&4294967295,S=k+(A<<14&4294967295|A>>>18),A=E+(k^v&(S^k))+I[12]+2368359562&4294967295,E=S+(A<<20&4294967295|A>>>12),A=v+(E^S^k)+I[5]+4294588738&4294967295,v=E+(A<<4&4294967295|A>>>28),A=k+(v^E^S)+I[8]+2272392833&4294967295,k=v+(A<<11&4294967295|A>>>21),A=S+(k^v^E)+I[11]+1839030562&4294967295,S=k+(A<<16&4294967295|A>>>16),A=E+(S^k^v)+I[14]+4259657740&4294967295,E=S+(A<<23&4294967295|A>>>9),A=v+(E^S^k)+I[1]+2763975236&4294967295,v=E+(A<<4&4294967295|A>>>28),A=k+(v^E^S)+I[4]+1272893353&4294967295,k=v+(A<<11&4294967295|A>>>21),A=S+(k^v^E)+I[7]+4139469664&4294967295,S=k+(A<<16&4294967295|A>>>16),A=E+(S^k^v)+I[10]+3200236656&4294967295,E=S+(A<<23&4294967295|A>>>9),A=v+(E^S^k)+I[13]+681279174&4294967295,v=E+(A<<4&4294967295|A>>>28),A=k+(v^E^S)+I[0]+3936430074&4294967295,k=v+(A<<11&4294967295|A>>>21),A=S+(k^v^E)+I[3]+3572445317&4294967295,S=k+(A<<16&4294967295|A>>>16),A=E+(S^k^v)+I[6]+76029189&4294967295,E=S+(A<<23&4294967295|A>>>9),A=v+(E^S^k)+I[9]+3654602809&4294967295,v=E+(A<<4&4294967295|A>>>28),A=k+(v^E^S)+I[12]+3873151461&4294967295,k=v+(A<<11&4294967295|A>>>21),A=S+(k^v^E)+I[15]+530742520&4294967295,S=k+(A<<16&4294967295|A>>>16),A=E+(S^k^v)+I[2]+3299628645&4294967295,E=S+(A<<23&4294967295|A>>>9),A=v+(S^(E|~k))+I[0]+4096336452&4294967295,v=E+(A<<6&4294967295|A>>>26),A=k+(E^(v|~S))+I[7]+1126891415&4294967295,k=v+(A<<10&4294967295|A>>>22),A=S+(v^(k|~E))+I[14]+2878612391&4294967295,S=k+(A<<15&4294967295|A>>>17),A=E+(k^(S|~v))+I[5]+4237533241&4294967295,E=S+(A<<21&4294967295|A>>>11),A=v+(S^(E|~k))+I[12]+1700485571&4294967295,v=E+(A<<6&4294967295|A>>>26),A=k+(E^(v|~S))+I[3]+2399980690&4294967295,k=v+(A<<10&4294967295|A>>>22),A=S+(v^(k|~E))+I[10]+4293915773&4294967295,S=k+(A<<15&4294967295|A>>>17),A=E+(k^(S|~v))+I[1]+2240044497&4294967295,E=S+(A<<21&4294967295|A>>>11),A=v+(S^(E|~k))+I[8]+1873313359&4294967295,v=E+(A<<6&4294967295|A>>>26),A=k+(E^(v|~S))+I[15]+4264355552&4294967295,k=v+(A<<10&4294967295|A>>>22),A=S+(v^(k|~E))+I[6]+2734768916&4294967295,S=k+(A<<15&4294967295|A>>>17),A=E+(k^(S|~v))+I[13]+1309151649&4294967295,E=S+(A<<21&4294967295|A>>>11),A=v+(S^(E|~k))+I[4]+4149444226&4294967295,v=E+(A<<6&4294967295|A>>>26),A=k+(E^(v|~S))+I[11]+3174756917&4294967295,k=v+(A<<10&4294967295|A>>>22),A=S+(v^(k|~E))+I[2]+718787259&4294967295,S=k+(A<<15&4294967295|A>>>17),A=E+(k^(S|~v))+I[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(S+(A<<21&4294967295|A>>>11))&4294967295,T.g[2]=T.g[2]+S&4294967295,T.g[3]=T.g[3]+k&4294967295}r.prototype.u=function(T,v){v===void 0&&(v=T.length);for(var E=v-this.blockSize,I=this.B,S=this.h,k=0;k<v;){if(S==0)for(;k<=E;)i(this,T,k),k+=this.blockSize;if(typeof T=="string"){for(;k<v;)if(I[S++]=T.charCodeAt(k++),S==this.blockSize){i(this,I),S=0;break}}else for(;k<v;)if(I[S++]=T[k++],S==this.blockSize){i(this,I),S=0;break}}this.h=S,this.o+=v},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;var E=8*this.o;for(v=T.length-8;v<T.length;++v)T[v]=E&255,E/=256;for(this.u(T),T=Array(16),v=E=0;4>v;++v)for(var I=0;32>I;I+=8)T[E++]=this.g[v]>>>I&255;return T};function o(T,v){var E=l;return Object.prototype.hasOwnProperty.call(E,T)?E[T]:E[T]=v(T)}function s(T,v){this.h=v;for(var E=[],I=!0,S=T.length-1;0<=S;S--){var k=T[S]|0;I&&k==v||(E[S]=k,I=!1)}this.g=E}var l={};function u(T){return-128<=T&&128>T?o(T,function(v){return new s([v|0],0>v?-1:0)}):new s([T|0],0>T?-1:0)}function d(T){if(isNaN(T)||!isFinite(T))return y;if(0>T)return L(d(-T));for(var v=[],E=1,I=0;T>=E;I++)v[I]=T/E|0,E*=4294967296;return new s(v,0)}function f(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return L(f(T.substring(1),v));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=d(Math.pow(v,8)),I=y,S=0;S<T.length;S+=8){var k=Math.min(8,T.length-S),A=parseInt(T.substring(S,S+k),v);8>k?(k=d(Math.pow(v,k)),I=I.j(k).add(d(A))):(I=I.j(E),I=I.add(d(A)))}return I}var y=u(0),_=u(1),R=u(16777216);t=s.prototype,t.m=function(){if(b(this))return-L(this).m();for(var T=0,v=1,E=0;E<this.g.length;E++){var I=this.i(E);T+=(0<=I?I:4294967296+I)*v,v*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(P(this))return"0";if(b(this))return"-"+L(this).toString(T);for(var v=d(Math.pow(T,6)),E=this,I="";;){var S=N(E,v).g;E=x(E,S.j(v));var k=((0<E.g.length?E.g[0]:E.h)>>>0).toString(T);if(E=S,P(E))return k+I;for(;6>k.length;)k="0"+k;I=k+I}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function P(T){if(T.h!=0)return!1;for(var v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function b(T){return T.h==-1}t.l=function(T){return T=x(this,T),b(T)?-1:P(T)?0:1};function L(T){for(var v=T.g.length,E=[],I=0;I<v;I++)E[I]=~T.g[I];return new s(E,~T.h).add(_)}t.abs=function(){return b(this)?L(this):this},t.add=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],I=0,S=0;S<=v;S++){var k=I+(this.i(S)&65535)+(T.i(S)&65535),A=(k>>>16)+(this.i(S)>>>16)+(T.i(S)>>>16);I=A>>>16,k&=65535,A&=65535,E[S]=A<<16|k}return new s(E,E[E.length-1]&-2147483648?-1:0)};function x(T,v){return T.add(L(v))}t.j=function(T){if(P(this)||P(T))return y;if(b(this))return b(T)?L(this).j(L(T)):L(L(this).j(T));if(b(T))return L(this.j(L(T)));if(0>this.l(R)&&0>T.l(R))return d(this.m()*T.m());for(var v=this.g.length+T.g.length,E=[],I=0;I<2*v;I++)E[I]=0;for(I=0;I<this.g.length;I++)for(var S=0;S<T.g.length;S++){var k=this.i(I)>>>16,A=this.i(I)&65535,Ce=T.i(S)>>>16,Ye=T.i(S)&65535;E[2*I+2*S]+=A*Ye,w(E,2*I+2*S),E[2*I+2*S+1]+=k*Ye,w(E,2*I+2*S+1),E[2*I+2*S+1]+=A*Ce,w(E,2*I+2*S+1),E[2*I+2*S+2]+=k*Ce,w(E,2*I+2*S+2)}for(I=0;I<v;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=v;I<2*v;I++)E[I]=0;return new s(E,0)};function w(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function C(T,v){this.g=T,this.h=v}function N(T,v){if(P(v))throw Error("division by zero");if(P(T))return new C(y,y);if(b(T))return v=N(L(T),v),new C(L(v.g),L(v.h));if(b(v))return v=N(T,L(v)),new C(L(v.g),v.h);if(30<T.g.length){if(b(T)||b(v))throw Error("slowDivide_ only works with positive integers.");for(var E=_,I=v;0>=I.l(T);)E=B(E),I=B(I);var S=$(E,1),k=$(I,1);for(I=$(I,2),E=$(E,2);!P(I);){var A=k.add(I);0>=A.l(T)&&(S=S.add(E),k=A),I=$(I,1),E=$(E,1)}return v=x(T,S.j(v)),new C(S,v)}for(S=y;0<=T.l(v);){for(E=Math.max(1,Math.floor(T.m()/v.m())),I=Math.ceil(Math.log(E)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),k=d(E),A=k.j(v);b(A)||0<A.l(T);)E-=I,k=d(E),A=k.j(v);P(k)&&(k=_),S=S.add(k),T=x(T,A)}return new C(S,T)}t.A=function(T){return N(this,T).h},t.and=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)&T.i(I);return new s(E,this.h&T.h)},t.or=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)|T.i(I);return new s(E,this.h|T.h)},t.xor=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)^T.i(I);return new s(E,this.h^T.h)};function B(T){for(var v=T.g.length+1,E=[],I=0;I<v;I++)E[I]=T.i(I)<<1|T.i(I-1)>>>31;return new s(E,T.h)}function $(T,v){var E=v>>5;v%=32;for(var I=T.g.length-E,S=[],k=0;k<I;k++)S[k]=0<v?T.i(k+E)>>>v|T.i(k+E+1)<<32-v:T.i(k+E);return new s(S,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,kv=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=d,s.fromString=f,jr=s}).apply(typeof om<"u"?om:typeof self<"u"?self:typeof window<"u"?window:{});var ca=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pv,Ro,Dv,ka,Hc,bv,Nv,Vv;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,c,h){return a==Array.prototype||a==Object.prototype||(a[c]=h.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof ca=="object"&&ca];for(var c=0;c<a.length;++c){var h=a[c];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function i(a,c){if(c)e:{var h=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var D=a[g];if(!(D in h))break e;h=h[D]}a=a[a.length-1],g=h[a],c=c(g),c!=g&&c!=null&&e(h,a,{configurable:!0,writable:!0,value:c})}}function o(a,c){a instanceof String&&(a+="");var h=0,g=!1,D={next:function(){if(!g&&h<a.length){var V=h++;return{value:c(V,a[V]),done:!1}}return g=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(a){return a||function(){return o(this,function(c,h){return h})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},l=this||self;function u(a){var c=typeof a;return c=c!="object"?c:a?Array.isArray(a)?"array":c:"null",c=="array"||c=="object"&&typeof a.length=="number"}function d(a){var c=typeof a;return c=="object"&&a!=null||c=="function"}function f(a,c,h){return a.call.apply(a.bind,arguments)}function y(a,c,h){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,g),a.apply(c,D)}}return function(){return a.apply(c,arguments)}}function _(a,c,h){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:y,_.apply(null,arguments)}function R(a,c){var h=Array.prototype.slice.call(arguments,1);return function(){var g=h.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function P(a,c){function h(){}h.prototype=c.prototype,a.aa=c.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(g,D,V){for(var W=Array(arguments.length-2),we=2;we<arguments.length;we++)W[we-2]=arguments[we];return c.prototype[D].apply(g,W)}}function b(a){const c=a.length;if(0<c){const h=Array(c);for(let g=0;g<c;g++)h[g]=a[g];return h}return[]}function L(a,c){for(let h=1;h<arguments.length;h++){const g=arguments[h];if(u(g)){const D=a.length||0,V=g.length||0;a.length=D+V;for(let W=0;W<V;W++)a[D+W]=g[W]}else a.push(g)}}class x{constructor(c,h){this.i=c,this.j=h,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function w(a){return/^[\s\xa0]*$/.test(a)}function C(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function N(a){return N[" "](a),a}N[" "]=function(){};var B=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function $(a,c,h){for(const g in a)c.call(h,a[g],g,a)}function T(a,c){for(const h in a)c.call(void 0,a[h],h,a)}function v(a){const c={};for(const h in a)c[h]=a[h];return c}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(a,c){let h,g;for(let D=1;D<arguments.length;D++){g=arguments[D];for(h in g)a[h]=g[h];for(let V=0;V<E.length;V++)h=E[V],Object.prototype.hasOwnProperty.call(g,h)&&(a[h]=g[h])}}function S(a){var c=1;a=a.split(":");const h=[];for(;0<c&&a.length;)h.push(a.shift()),c--;return a.length&&h.push(a.join(":")),h}function k(a){l.setTimeout(()=>{throw a},0)}function A(){var a=K;let c=null;return a.g&&(c=a.g,a.g=a.g.next,a.g||(a.h=null),c.next=null),c}class Ce{constructor(){this.h=this.g=null}add(c,h){const g=Ye.get();g.set(c,h),this.h?this.h.next=g:this.g=g,this.h=g}}var Ye=new x(()=>new Dt,a=>a.reset());class Dt{constructor(){this.next=this.g=this.h=null}set(c,h){this.h=c,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let He,H=!1,K=new Ce,q=()=>{const a=l.Promise.resolve(void 0);He=()=>{a.then(ie)}};var ie=()=>{for(var a;a=A();){try{a.h.call(a.g)}catch(h){k(h)}var c=Ye;c.j(a),100>c.h&&(c.h++,a.next=c.g,c.g=a)}H=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ne(a,c){this.type=a,this.g=this.target=c,this.defaultPrevented=!1}ne.prototype.h=function(){this.defaultPrevented=!0};var ae=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,c=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const h=()=>{};l.addEventListener("test",h,c),l.removeEventListener("test",h,c)}catch{}return a}();function Oe(a,c){if(ne.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=c,c=a.relatedTarget){if(B){e:{try{N(c.nodeName);var D=!0;break e}catch{}D=!1}D||(c=null)}}else h=="mouseover"?c=a.fromElement:h=="mouseout"&&(c=a.toElement);this.relatedTarget=c,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:st[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Oe.aa.h.call(this)}}P(Oe,ne);var st={2:"touch",3:"pen",4:"mouse"};Oe.prototype.h=function(){Oe.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var gt="closure_listenable_"+(1e6*Math.random()|0),_r=0;function Xi(a,c,h,g,D){this.listener=a,this.proxy=null,this.src=c,this.type=h,this.capture=!!g,this.ha=D,this.key=++_r,this.da=this.fa=!1}function bn(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Nn(a){this.src=a,this.g={},this.h=0}Nn.prototype.add=function(a,c,h,g,D){var V=a.toString();a=this.g[V],a||(a=this.g[V]=[],this.h++);var W=Vn(a,c,g,D);return-1<W?(c=a[W],h||(c.fa=!1)):(c=new Xi(c,this.src,V,!!g,D),c.fa=h,a.push(c)),c};function wr(a,c){var h=c.type;if(h in a.g){var g=a.g[h],D=Array.prototype.indexOf.call(g,c,void 0),V;(V=0<=D)&&Array.prototype.splice.call(g,D,1),V&&(bn(c),a.g[h].length==0&&(delete a.g[h],a.h--))}}function Vn(a,c,h,g){for(var D=0;D<a.length;++D){var V=a[D];if(!V.da&&V.listener==c&&V.capture==!!h&&V.ha==g)return D}return-1}var Er="closure_lm_"+(1e6*Math.random()|0),Ln={};function Tr(a,c,h,g,D){if(Array.isArray(c)){for(var V=0;V<c.length;V++)Tr(a,c[V],h,g,D);return null}return h=Xe(h),a&&a[gt]?a.K(c,h,d(g)?!!g.capture:!1,D):Ji(a,c,h,!1,g,D)}function Ji(a,c,h,g,D,V){if(!c)throw Error("Invalid event type");var W=d(D)?!!D.capture:!!D,we=Z(a);if(we||(a[Er]=we=new Nn(a)),h=we.add(c,h,g,W,V),h.proxy)return h;if(g=U(),h.proxy=g,g.src=a,g.listener=h,a.addEventListener)ae||(D=W),D===void 0&&(D=!1),a.addEventListener(c.toString(),g,D);else if(a.attachEvent)a.attachEvent(M(c.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return h}function U(){function a(h){return c.call(a.src,a.listener,h)}const c=G;return a}function J(a,c,h,g,D){if(Array.isArray(c))for(var V=0;V<c.length;V++)J(a,c[V],h,g,D);else g=d(g)?!!g.capture:!!g,h=Xe(h),a&&a[gt]?(a=a.i,c=String(c).toString(),c in a.g&&(V=a.g[c],h=Vn(V,h,g,D),-1<h&&(bn(V[h]),Array.prototype.splice.call(V,h,1),V.length==0&&(delete a.g[c],a.h--)))):a&&(a=Z(a))&&(c=a.g[c.toString()],a=-1,c&&(a=Vn(c,h,g,D)),(h=-1<a?c[a]:null)&&O(h))}function O(a){if(typeof a!="number"&&a&&!a.da){var c=a.src;if(c&&c[gt])wr(c.i,a);else{var h=a.type,g=a.proxy;c.removeEventListener?c.removeEventListener(h,g,a.capture):c.detachEvent?c.detachEvent(M(h),g):c.addListener&&c.removeListener&&c.removeListener(g),(h=Z(c))?(wr(h,a),h.h==0&&(h.src=null,c[Er]=null)):bn(a)}}}function M(a){return a in Ln?Ln[a]:Ln[a]="on"+a}function G(a,c){if(a.da)a=!0;else{c=new Oe(c,this);var h=a.listener,g=a.ha||a.src;a.fa&&O(a),a=h.call(g,c)}return a}function Z(a){return a=a[Er],a instanceof Nn?a:null}var he="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xe(a){return typeof a=="function"?a:(a[he]||(a[he]=function(c){return a.handleEvent(c)}),a[he])}function ye(){le.call(this),this.i=new Nn(this),this.M=this,this.F=null}P(ye,le),ye.prototype[gt]=!0,ye.prototype.removeEventListener=function(a,c,h,g){J(this,a,c,h,g)};function qe(a,c){var h,g=a.F;if(g)for(h=[];g;g=g.F)h.push(g);if(a=a.M,g=c.type||c,typeof c=="string")c=new ne(c,a);else if(c instanceof ne)c.target=c.target||a;else{var D=c;c=new ne(g,a),I(c,D)}if(D=!0,h)for(var V=h.length-1;0<=V;V--){var W=c.g=h[V];D=Ir(W,g,!0,c)&&D}if(W=c.g=a,D=Ir(W,g,!0,c)&&D,D=Ir(W,g,!1,c)&&D,h)for(V=0;V<h.length;V++)W=c.g=h[V],D=Ir(W,g,!1,c)&&D}ye.prototype.N=function(){if(ye.aa.N.call(this),this.i){var a=this.i,c;for(c in a.g){for(var h=a.g[c],g=0;g<h.length;g++)bn(h[g]);delete a.g[c],a.h--}}this.F=null},ye.prototype.K=function(a,c,h,g){return this.i.add(String(a),c,!1,h,g)},ye.prototype.L=function(a,c,h,g){return this.i.add(String(a),c,!0,h,g)};function Ir(a,c,h,g){if(c=a.i.g[String(c)],!c)return!0;c=c.concat();for(var D=!0,V=0;V<c.length;++V){var W=c[V];if(W&&!W.da&&W.capture==h){var we=W.listener,Je=W.ha||W.src;W.fa&&wr(a.i,W),D=we.call(Je,g)!==!1&&D}}return D&&!g.defaultPrevented}function Zi(a,c,h){if(typeof a=="function")h&&(a=_(a,h));else if(a&&typeof a.handleEvent=="function")a=_(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(a,c||0)}function eo(a){a.g=Zi(()=>{a.g=null,a.i&&(a.i=!1,eo(a))},a.l);const c=a.h;a.h=null,a.m.apply(null,c)}class Ps extends le{constructor(c,h){super(),this.m=c,this.l=h,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:eo(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function On(a){le.call(this),this.h=a,this.g={}}P(On,le);var mn=[];function jn(a){$(a.g,function(c,h){this.g.hasOwnProperty(h)&&O(c)},a),a.g={}}On.prototype.N=function(){On.aa.N.call(this),jn(this)},On.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gn=l.JSON.stringify,Ds=l.JSON.parse,d0=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Wl(){}Wl.prototype.h=null;function Kh(a){return a.h||(a.h=a.i())}function Qh(){}var to={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Hl(){ne.call(this,"d")}P(Hl,ne);function ql(){ne.call(this,"c")}P(ql,ne);var Sr={},Yh=null;function bs(){return Yh=Yh||new ye}Sr.La="serverreachability";function Xh(a){ne.call(this,Sr.La,a)}P(Xh,ne);function no(a){const c=bs();qe(c,new Xh(c))}Sr.STAT_EVENT="statevent";function Jh(a,c){ne.call(this,Sr.STAT_EVENT,a),this.stat=c}P(Jh,ne);function yt(a){const c=bs();qe(c,new Jh(c,a))}Sr.Ma="timingevent";function Zh(a,c){ne.call(this,Sr.Ma,a),this.size=c}P(Zh,ne);function ro(a,c){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},c)}function io(){this.g=!0}io.prototype.xa=function(){this.g=!1};function h0(a,c,h,g,D,V){a.info(function(){if(a.g)if(V)for(var W="",we=V.split("&"),Je=0;Je<we.length;Je++){var me=we[Je].split("=");if(1<me.length){var at=me[0];me=me[1];var lt=at.split("_");W=2<=lt.length&&lt[1]=="type"?W+(at+"="+me+"&"):W+(at+"=redacted&")}}else W=null;else W=V;return"XMLHTTP REQ ("+g+") [attempt "+D+"]: "+c+`
`+h+`
`+W})}function f0(a,c,h,g,D,V,W){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+D+"]: "+c+`
`+h+`
`+V+" "+W})}function ti(a,c,h,g){a.info(function(){return"XMLHTTP TEXT ("+c+"): "+m0(a,h)+(g?" "+g:"")})}function p0(a,c){a.info(function(){return"TIMEOUT: "+c})}io.prototype.info=function(){};function m0(a,c){if(!a.g)return c;if(!c)return null;try{var h=JSON.parse(c);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var g=h[a];if(!(2>g.length)){var D=g[1];if(Array.isArray(D)&&!(1>D.length)){var V=D[0];if(V!="noop"&&V!="stop"&&V!="close")for(var W=1;W<D.length;W++)D[W]=""}}}}return gn(h)}catch{return c}}var Ns={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ef={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Gl;function Vs(){}P(Vs,Wl),Vs.prototype.g=function(){return new XMLHttpRequest},Vs.prototype.i=function(){return{}},Gl=new Vs;function Mn(a,c,h,g){this.j=a,this.i=c,this.l=h,this.R=g||1,this.U=new On(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new tf}function tf(){this.i=null,this.g="",this.h=!1}var nf={},Kl={};function Ql(a,c,h){a.L=1,a.v=Ms(yn(c)),a.m=h,a.P=!0,rf(a,null)}function rf(a,c){a.F=Date.now(),Ls(a),a.A=yn(a.v);var h=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),vf(h.i,"t",g),a.C=0,h=a.j.J,a.h=new tf,a.g=Of(a.j,h?c:null,!a.m),0<a.O&&(a.M=new Ps(_(a.Y,a,a.g),a.O)),c=a.U,h=a.g,g=a.ca;var D="readystatechange";Array.isArray(D)||(D&&(mn[0]=D.toString()),D=mn);for(var V=0;V<D.length;V++){var W=Tr(h,D[V],g||c.handleEvent,!1,c.h||c);if(!W)break;c.g[W.key]=W}c=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,c)):(a.u="GET",a.g.ea(a.A,a.u,null,c)),no(),h0(a.i,a.u,a.A,a.l,a.R,a.m)}Mn.prototype.ca=function(a){a=a.target;const c=this.M;c&&vn(a)==3?c.j():this.Y(a)},Mn.prototype.Y=function(a){try{if(a==this.g)e:{const lt=vn(this.g);var c=this.g.Ba();const ii=this.g.Z();if(!(3>lt)&&(lt!=3||this.g&&(this.h.h||this.g.oa()||xf(this.g)))){this.J||lt!=4||c==7||(c==8||0>=ii?no(3):no(2)),Yl(this);var h=this.g.Z();this.X=h;t:if(of(this)){var g=xf(this.g);a="";var D=g.length,V=vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){xr(this),oo(this);var W="";break t}this.h.i=new l.TextDecoder}for(c=0;c<D;c++)this.h.h=!0,a+=this.h.i.decode(g[c],{stream:!(V&&c==D-1)});g.length=0,this.h.g+=a,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=h==200,f0(this.i,this.u,this.A,this.l,this.R,lt,h),this.o){if(this.T&&!this.K){t:{if(this.g){var we,Je=this.g;if((we=Je.g?Je.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(we)){var me=we;break t}}me=null}if(h=me)ti(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xl(this,h);else{this.o=!1,this.s=3,yt(12),xr(this),oo(this);break e}}if(this.P){h=!0;let Gt;for(;!this.J&&this.C<W.length;)if(Gt=g0(this,W),Gt==Kl){lt==4&&(this.s=4,yt(14),h=!1),ti(this.i,this.l,null,"[Incomplete Response]");break}else if(Gt==nf){this.s=4,yt(15),ti(this.i,this.l,W,"[Invalid Chunk]"),h=!1;break}else ti(this.i,this.l,Gt,null),Xl(this,Gt);if(of(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),lt!=4||W.length!=0||this.h.h||(this.s=1,yt(16),h=!1),this.o=this.o&&h,!h)ti(this.i,this.l,W,"[Invalid Chunked Response]"),xr(this),oo(this);else if(0<W.length&&!this.W){this.W=!0;var at=this.j;at.g==this&&at.ba&&!at.M&&(at.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),ru(at),at.M=!0,yt(11))}}else ti(this.i,this.l,W,null),Xl(this,W);lt==4&&xr(this),this.o&&!this.J&&(lt==4?bf(this.j,this):(this.o=!1,Ls(this)))}else N0(this.g),h==400&&0<W.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),xr(this),oo(this)}}}catch{}finally{}};function of(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function g0(a,c){var h=a.C,g=c.indexOf(`
`,h);return g==-1?Kl:(h=Number(c.substring(h,g)),isNaN(h)?nf:(g+=1,g+h>c.length?Kl:(c=c.slice(g,g+h),a.C=g+h,c)))}Mn.prototype.cancel=function(){this.J=!0,xr(this)};function Ls(a){a.S=Date.now()+a.I,sf(a,a.I)}function sf(a,c){if(a.B!=null)throw Error("WatchDog timer not null");a.B=ro(_(a.ba,a),c)}function Yl(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Mn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(p0(this.i,this.A),this.L!=2&&(no(),yt(17)),xr(this),this.s=2,oo(this)):sf(this,this.S-a)};function oo(a){a.j.G==0||a.J||bf(a.j,a)}function xr(a){Yl(a);var c=a.M;c&&typeof c.ma=="function"&&c.ma(),a.M=null,jn(a.U),a.g&&(c=a.g,a.g=null,c.abort(),c.ma())}function Xl(a,c){try{var h=a.j;if(h.G!=0&&(h.g==a||Jl(h.h,a))){if(!a.K&&Jl(h.h,a)&&h.G==3){try{var g=h.Da.g.parse(c)}catch{g=null}if(Array.isArray(g)&&g.length==3){var D=g;if(D[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)Ws(h),zs(h);else break e;nu(h),yt(18)}}else h.za=D[1],0<h.za-h.T&&37500>D[2]&&h.F&&h.v==0&&!h.C&&(h.C=ro(_(h.Za,h),6e3));if(1>=uf(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else Cr(h,11)}else if((a.K||h.g==a)&&Ws(h),!w(c))for(D=h.Da.g.parse(c),c=0;c<D.length;c++){let me=D[c];if(h.T=me[0],me=me[1],h.G==2)if(me[0]=="c"){h.K=me[1],h.ia=me[2];const at=me[3];at!=null&&(h.la=at,h.j.info("VER="+h.la));const lt=me[4];lt!=null&&(h.Aa=lt,h.j.info("SVER="+h.Aa));const ii=me[5];ii!=null&&typeof ii=="number"&&0<ii&&(g=1.5*ii,h.L=g,h.j.info("backChannelRequestTimeoutMs_="+g)),g=h;const Gt=a.g;if(Gt){const qs=Gt.g?Gt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qs){var V=g.h;V.g||qs.indexOf("spdy")==-1&&qs.indexOf("quic")==-1&&qs.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Zl(V,V.h),V.h=null))}if(g.D){const iu=Gt.g?Gt.g.getResponseHeader("X-HTTP-Session-Id"):null;iu&&(g.ya=iu,Te(g.I,g.D,iu))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),g=h;var W=a;if(g.qa=Lf(g,g.J?g.ia:null,g.W),W.K){cf(g.h,W);var we=W,Je=g.L;Je&&(we.I=Je),we.B&&(Yl(we),Ls(we)),g.g=W}else Pf(g);0<h.i.length&&$s(h)}else me[0]!="stop"&&me[0]!="close"||Cr(h,7);else h.G==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?Cr(h,7):tu(h):me[0]!="noop"&&h.l&&h.l.ta(me),h.v=0)}}no(4)}catch{}}var y0=class{constructor(a,c){this.g=a,this.map=c}};function af(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function lf(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function uf(a){return a.h?1:a.g?a.g.size:0}function Jl(a,c){return a.h?a.h==c:a.g?a.g.has(c):!1}function Zl(a,c){a.g?a.g.add(c):a.h=c}function cf(a,c){a.h&&a.h==c?a.h=null:a.g&&a.g.has(c)&&a.g.delete(c)}af.prototype.cancel=function(){if(this.i=df(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function df(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let c=a.i;for(const h of a.g.values())c=c.concat(h.D);return c}return b(a.i)}function v0(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var c=[],h=a.length,g=0;g<h;g++)c.push(a[g]);return c}c=[],h=0;for(g in a)c[h++]=a[g];return c}function _0(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var c=[];a=a.length;for(var h=0;h<a;h++)c.push(h);return c}c=[],h=0;for(const g in a)c[h++]=g;return c}}}function hf(a,c){if(a.forEach&&typeof a.forEach=="function")a.forEach(c,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,c,void 0);else for(var h=_0(a),g=v0(a),D=g.length,V=0;V<D;V++)c.call(void 0,g[V],h&&h[V],a)}var ff=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function w0(a,c){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var g=a[h].indexOf("="),D=null;if(0<=g){var V=a[h].substring(0,g);D=a[h].substring(g+1)}else V=a[h];c(V,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function Ar(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Ar){this.h=a.h,Os(this,a.j),this.o=a.o,this.g=a.g,js(this,a.s),this.l=a.l;var c=a.i,h=new lo;h.i=c.i,c.g&&(h.g=new Map(c.g),h.h=c.h),pf(this,h),this.m=a.m}else a&&(c=String(a).match(ff))?(this.h=!1,Os(this,c[1]||"",!0),this.o=so(c[2]||""),this.g=so(c[3]||"",!0),js(this,c[4]),this.l=so(c[5]||"",!0),pf(this,c[6]||"",!0),this.m=so(c[7]||"")):(this.h=!1,this.i=new lo(null,this.h))}Ar.prototype.toString=function(){var a=[],c=this.j;c&&a.push(ao(c,mf,!0),":");var h=this.g;return(h||c=="file")&&(a.push("//"),(c=this.o)&&a.push(ao(c,mf,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(ao(h,h.charAt(0)=="/"?I0:T0,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",ao(h,x0)),a.join("")};function yn(a){return new Ar(a)}function Os(a,c,h){a.j=h?so(c,!0):c,a.j&&(a.j=a.j.replace(/:$/,""))}function js(a,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);a.s=c}else a.s=null}function pf(a,c,h){c instanceof lo?(a.i=c,A0(a.i,a.h)):(h||(c=ao(c,S0)),a.i=new lo(c,a.h))}function Te(a,c,h){a.i.set(c,h)}function Ms(a){return Te(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function so(a,c){return a?c?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ao(a,c,h){return typeof a=="string"?(a=encodeURI(a).replace(c,E0),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function E0(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var mf=/[#\/\?@]/g,T0=/[#\?:]/g,I0=/[#\?]/g,S0=/[#\?@]/g,x0=/#/g;function lo(a,c){this.h=this.g=null,this.i=a||null,this.j=!!c}function Fn(a){a.g||(a.g=new Map,a.h=0,a.i&&w0(a.i,function(c,h){a.add(decodeURIComponent(c.replace(/\+/g," ")),h)}))}t=lo.prototype,t.add=function(a,c){Fn(this),this.i=null,a=ni(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(c),this.h+=1,this};function gf(a,c){Fn(a),c=ni(a,c),a.g.has(c)&&(a.i=null,a.h-=a.g.get(c).length,a.g.delete(c))}function yf(a,c){return Fn(a),c=ni(a,c),a.g.has(c)}t.forEach=function(a,c){Fn(this),this.g.forEach(function(h,g){h.forEach(function(D){a.call(c,D,g,this)},this)},this)},t.na=function(){Fn(this);const a=Array.from(this.g.values()),c=Array.from(this.g.keys()),h=[];for(let g=0;g<c.length;g++){const D=a[g];for(let V=0;V<D.length;V++)h.push(c[g])}return h},t.V=function(a){Fn(this);let c=[];if(typeof a=="string")yf(this,a)&&(c=c.concat(this.g.get(ni(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)c=c.concat(a[h])}return c},t.set=function(a,c){return Fn(this),this.i=null,a=ni(this,a),yf(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[c]),this.h+=1,this},t.get=function(a,c){return a?(a=this.V(a),0<a.length?String(a[0]):c):c};function vf(a,c,h){gf(a,c),0<h.length&&(a.i=null,a.g.set(ni(a,c),b(h)),a.h+=h.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],c=Array.from(this.g.keys());for(var h=0;h<c.length;h++){var g=c[h];const V=encodeURIComponent(String(g)),W=this.V(g);for(g=0;g<W.length;g++){var D=V;W[g]!==""&&(D+="="+encodeURIComponent(String(W[g]))),a.push(D)}}return this.i=a.join("&")};function ni(a,c){return c=String(c),a.j&&(c=c.toLowerCase()),c}function A0(a,c){c&&!a.j&&(Fn(a),a.i=null,a.g.forEach(function(h,g){var D=g.toLowerCase();g!=D&&(gf(this,g),vf(this,D,h))},a)),a.j=c}function C0(a,c){const h=new io;if(l.Image){const g=new Image;g.onload=R(Bn,h,"TestLoadImage: loaded",!0,c,g),g.onerror=R(Bn,h,"TestLoadImage: error",!1,c,g),g.onabort=R(Bn,h,"TestLoadImage: abort",!1,c,g),g.ontimeout=R(Bn,h,"TestLoadImage: timeout",!1,c,g),l.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else c(!1)}function R0(a,c){const h=new io,g=new AbortController,D=setTimeout(()=>{g.abort(),Bn(h,"TestPingServer: timeout",!1,c)},1e4);fetch(a,{signal:g.signal}).then(V=>{clearTimeout(D),V.ok?Bn(h,"TestPingServer: ok",!0,c):Bn(h,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(D),Bn(h,"TestPingServer: error",!1,c)})}function Bn(a,c,h,g,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),g(h)}catch{}}function k0(){this.g=new d0}function P0(a,c,h){const g=h||"";try{hf(a,function(D,V){let W=D;d(D)&&(W=gn(D)),c.push(g+V+"="+encodeURIComponent(W))})}catch(D){throw c.push(g+"type="+encodeURIComponent("_badmap")),D}}function Fs(a){this.l=a.Ub||null,this.j=a.eb||!1}P(Fs,Wl),Fs.prototype.g=function(){return new Bs(this.l,this.j)},Fs.prototype.i=function(a){return function(){return a}}({});function Bs(a,c){ye.call(this),this.D=a,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(Bs,ye),t=Bs.prototype,t.open=function(a,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=c,this.readyState=1,co(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(c.body=a),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,uo(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,co(this)),this.g&&(this.readyState=3,co(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_f(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function _f(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var c=a.value?a.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!a.done}))&&(this.response=this.responseText+=c)}a.done?uo(this):co(this),this.readyState==3&&_f(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,uo(this))},t.Qa=function(a){this.g&&(this.response=a,uo(this))},t.ga=function(){this.g&&uo(this)};function uo(a){a.readyState=4,a.l=null,a.j=null,a.v=null,co(a)}t.setRequestHeader=function(a,c){this.u.append(a,c)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],c=this.h.entries();for(var h=c.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=c.next();return a.join(`\r
`)};function co(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Bs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function wf(a){let c="";return $(a,function(h,g){c+=g,c+=":",c+=h,c+=`\r
`}),c}function eu(a,c,h){e:{for(g in h){var g=!1;break e}g=!0}g||(h=wf(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):Te(a,c,h))}function be(a){ye.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(be,ye);var D0=/^https?$/i,b0=["POST","PUT"];t=be.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,c,h,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);c=c?c.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Gl.g(),this.v=this.o?Kh(this.o):Kh(Gl),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(c,String(a),!0),this.B=!1}catch(V){Ef(this,V);return}if(a=h||"",h=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var D in g)h.set(D,g[D]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const V of g.keys())h.set(V,g.get(V));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(h.keys()).find(V=>V.toLowerCase()=="content-type"),D=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(b0,c,void 0))||g||D||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,W]of h)this.g.setRequestHeader(V,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Sf(this),this.u=!0,this.g.send(a),this.u=!1}catch(V){Ef(this,V)}};function Ef(a,c){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=c,a.m=5,Tf(a),Us(a)}function Tf(a){a.A||(a.A=!0,qe(a,"complete"),qe(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,qe(this,"complete"),qe(this,"abort"),Us(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Us(this,!0)),be.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?If(this):this.bb())},t.bb=function(){If(this)};function If(a){if(a.h&&typeof s<"u"&&(!a.v[1]||vn(a)!=4||a.Z()!=2)){if(a.u&&vn(a)==4)Zi(a.Ea,0,a);else if(qe(a,"readystatechange"),vn(a)==4){a.h=!1;try{const W=a.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var h;if(!(h=c)){var g;if(g=W===0){var D=String(a.D).match(ff)[1]||null;!D&&l.self&&l.self.location&&(D=l.self.location.protocol.slice(0,-1)),g=!D0.test(D?D.toLowerCase():"")}h=g}if(h)qe(a,"complete"),qe(a,"success");else{a.m=6;try{var V=2<vn(a)?a.g.statusText:""}catch{V=""}a.l=V+" ["+a.Z()+"]",Tf(a)}}finally{Us(a)}}}}function Us(a,c){if(a.g){Sf(a);const h=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,c||qe(a,"ready");try{h.onreadystatechange=g}catch{}}}function Sf(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function vn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<vn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var c=this.g.responseText;return a&&c.indexOf(a)==0&&(c=c.substring(a.length)),Ds(c)}};function xf(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function N0(a){const c={};a=(a.g&&2<=vn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(w(a[g]))continue;var h=S(a[g]);const D=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();const V=c[D]||[];c[D]=V,V.push(h)}T(c,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ho(a,c,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||c}function Af(a){this.Aa=0,this.i=[],this.j=new io,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ho("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ho("baseRetryDelayMs",5e3,a),this.cb=ho("retryDelaySeedMs",1e4,a),this.Wa=ho("forwardChannelMaxRetries",2,a),this.wa=ho("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new af(a&&a.concurrentRequestLimit),this.Da=new k0,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Af.prototype,t.la=8,t.G=1,t.connect=function(a,c,h,g){yt(0),this.W=a,this.H=c||{},h&&g!==void 0&&(this.H.OSID=h,this.H.OAID=g),this.F=this.X,this.I=Lf(this,null,this.W),$s(this)};function tu(a){if(Cf(a),a.G==3){var c=a.U++,h=yn(a.I);if(Te(h,"SID",a.K),Te(h,"RID",c),Te(h,"TYPE","terminate"),fo(a,h),c=new Mn(a,a.j,c),c.L=2,c.v=Ms(yn(h)),h=!1,l.navigator&&l.navigator.sendBeacon)try{h=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!h&&l.Image&&(new Image().src=c.v,h=!0),h||(c.g=Of(c.j,null),c.g.ea(c.v)),c.F=Date.now(),Ls(c)}Vf(a)}function zs(a){a.g&&(ru(a),a.g.cancel(),a.g=null)}function Cf(a){zs(a),a.u&&(l.clearTimeout(a.u),a.u=null),Ws(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function $s(a){if(!lf(a.h)&&!a.s){a.s=!0;var c=a.Ga;He||q(),H||(He(),H=!0),K.add(c,a),a.B=0}}function V0(a,c){return uf(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=c.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=ro(_(a.Ga,a,c),Nf(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const D=new Mn(this,this.j,a);let V=this.o;if(this.S&&(V?(V=v(V),I(V,this.S)):V=this.S),this.m!==null||this.O||(D.H=V,V=null),this.P)e:{for(var c=0,h=0;h<this.i.length;h++){t:{var g=this.i[h];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(c+=g,4096<c){c=h;break e}if(c===4096||h===this.i.length-1){c=h+1;break e}}c=1e3}else c=1e3;c=kf(this,D,c),h=yn(this.I),Te(h,"RID",a),Te(h,"CVER",22),this.D&&Te(h,"X-HTTP-Session-Id",this.D),fo(this,h),V&&(this.O?c="headers="+encodeURIComponent(String(wf(V)))+"&"+c:this.m&&eu(h,this.m,V)),Zl(this.h,D),this.Ua&&Te(h,"TYPE","init"),this.P?(Te(h,"$req",c),Te(h,"SID","null"),D.T=!0,Ql(D,h,null)):Ql(D,h,c),this.G=2}}else this.G==3&&(a?Rf(this,a):this.i.length==0||lf(this.h)||Rf(this))};function Rf(a,c){var h;c?h=c.l:h=a.U++;const g=yn(a.I);Te(g,"SID",a.K),Te(g,"RID",h),Te(g,"AID",a.T),fo(a,g),a.m&&a.o&&eu(g,a.m,a.o),h=new Mn(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),c&&(a.i=c.D.concat(a.i)),c=kf(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Zl(a.h,h),Ql(h,g,c)}function fo(a,c){a.H&&$(a.H,function(h,g){Te(c,g,h)}),a.l&&hf({},function(h,g){Te(c,g,h)})}function kf(a,c,h){h=Math.min(a.i.length,h);var g=a.l?_(a.l.Na,a.l,a):null;e:{var D=a.i;let V=-1;for(;;){const W=["count="+h];V==-1?0<h?(V=D[0].g,W.push("ofs="+V)):V=0:W.push("ofs="+V);let we=!0;for(let Je=0;Je<h;Je++){let me=D[Je].g;const at=D[Je].map;if(me-=V,0>me)V=Math.max(0,D[Je].g-100),we=!1;else try{P0(at,W,"req"+me+"_")}catch{g&&g(at)}}if(we){g=W.join("&");break e}}}return a=a.i.splice(0,h),c.D=a,g}function Pf(a){if(!a.g&&!a.u){a.Y=1;var c=a.Fa;He||q(),H||(He(),H=!0),K.add(c,a),a.v=0}}function nu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=ro(_(a.Fa,a),Nf(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Df(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=ro(_(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),zs(this),Df(this))};function ru(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Df(a){a.g=new Mn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var c=yn(a.qa);Te(c,"RID","rpc"),Te(c,"SID",a.K),Te(c,"AID",a.T),Te(c,"CI",a.F?"0":"1"),!a.F&&a.ja&&Te(c,"TO",a.ja),Te(c,"TYPE","xmlhttp"),fo(a,c),a.m&&a.o&&eu(c,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=Ms(yn(c)),h.m=null,h.P=!0,rf(h,a)}t.Za=function(){this.C!=null&&(this.C=null,zs(this),nu(this),yt(19))};function Ws(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function bf(a,c){var h=null;if(a.g==c){Ws(a),ru(a),a.g=null;var g=2}else if(Jl(a.h,c))h=c.D,cf(a.h,c),g=1;else return;if(a.G!=0){if(c.o)if(g==1){h=c.m?c.m.length:0,c=Date.now()-c.F;var D=a.B;g=bs(),qe(g,new Zh(g,h)),$s(a)}else Pf(a);else if(D=c.s,D==3||D==0&&0<c.X||!(g==1&&V0(a,c)||g==2&&nu(a)))switch(h&&0<h.length&&(c=a.h,c.i=c.i.concat(h)),D){case 1:Cr(a,5);break;case 4:Cr(a,10);break;case 3:Cr(a,6);break;default:Cr(a,2)}}}function Nf(a,c){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*c}function Cr(a,c){if(a.j.info("Error code "+c),c==2){var h=_(a.fb,a),g=a.Xa;const D=!g;g=new Ar(g||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Os(g,"https"),Ms(g),D?C0(g.toString(),h):R0(g.toString(),h)}else yt(2);a.G=0,a.l&&a.l.sa(c),Vf(a),Cf(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function Vf(a){if(a.G=0,a.ka=[],a.l){const c=df(a.h);(c.length!=0||a.i.length!=0)&&(L(a.ka,c),L(a.ka,a.i),a.h.i.length=0,b(a.i),a.i.length=0),a.l.ra()}}function Lf(a,c,h){var g=h instanceof Ar?yn(h):new Ar(h);if(g.g!="")c&&(g.g=c+"."+g.g),js(g,g.s);else{var D=l.location;g=D.protocol,c=c?c+"."+D.hostname:D.hostname,D=+D.port;var V=new Ar(null);g&&Os(V,g),c&&(V.g=c),D&&js(V,D),h&&(V.l=h),g=V}return h=a.D,c=a.ya,h&&c&&Te(g,h,c),Te(g,"VER",a.la),fo(a,g),g}function Of(a,c,h){if(c&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=a.Ca&&!a.pa?new be(new Fs({eb:h})):new be(a.pa),c.Ha(a.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function jf(){}t=jf.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Hs(){}Hs.prototype.g=function(a,c){return new bt(a,c)};function bt(a,c){ye.call(this),this.g=new Af(c),this.l=a,this.h=c&&c.messageUrlParams||null,a=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(a?a["X-WebChannel-Content-Type"]=c.messageContentType:a={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(a?a["X-WebChannel-Client-Profile"]=c.va:a={"X-WebChannel-Client-Profile":c.va}),this.g.S=a,(a=c&&c.Sb)&&!w(a)&&(this.g.m=a),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!w(c)&&(this.g.D=c,a=this.h,a!==null&&c in a&&(a=this.h,c in a&&delete a[c])),this.j=new ri(this)}P(bt,ye),bt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bt.prototype.close=function(){tu(this.g)},bt.prototype.o=function(a){var c=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=gn(a),a=h);c.i.push(new y0(c.Ya++,a)),c.G==3&&$s(c)},bt.prototype.N=function(){this.g.l=null,delete this.j,tu(this.g),delete this.g,bt.aa.N.call(this)};function Mf(a){Hl.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var c=a.__sm__;if(c){e:{for(const h in c){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,c=c!==null&&a in c?c[a]:void 0),this.data=c}else this.data=a}P(Mf,Hl);function Ff(){ql.call(this),this.status=1}P(Ff,ql);function ri(a){this.g=a}P(ri,jf),ri.prototype.ua=function(){qe(this.g,"a")},ri.prototype.ta=function(a){qe(this.g,new Mf(a))},ri.prototype.sa=function(a){qe(this.g,new Ff)},ri.prototype.ra=function(){qe(this.g,"b")},Hs.prototype.createWebChannel=Hs.prototype.g,bt.prototype.send=bt.prototype.o,bt.prototype.open=bt.prototype.m,bt.prototype.close=bt.prototype.close,Vv=function(){return new Hs},Nv=function(){return bs()},bv=Sr,Hc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ns.NO_ERROR=0,Ns.TIMEOUT=8,Ns.HTTP_ERROR=6,ka=Ns,ef.COMPLETE="complete",Dv=ef,Qh.EventType=to,to.OPEN="a",to.CLOSE="b",to.ERROR="c",to.MESSAGE="d",ye.prototype.listen=ye.prototype.K,Ro=Qh,be.prototype.listenOnce=be.prototype.L,be.prototype.getLastError=be.prototype.Ka,be.prototype.getLastErrorCode=be.prototype.Ba,be.prototype.getStatus=be.prototype.Z,be.prototype.getResponseJson=be.prototype.Oa,be.prototype.getResponseText=be.prototype.oa,be.prototype.send=be.prototype.ea,be.prototype.setWithCredentials=be.prototype.Ha,Pv=be}).apply(typeof ca<"u"?ca:typeof self<"u"?self:typeof window<"u"?window:{});const sm="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ht.UNAUTHENTICATED=new ht(null),ht.GOOGLE_CREDENTIALS=new ht("google-credentials-uid"),ht.FIRST_PARTY=new ht("first-party-uid"),ht.MOCK_USER=new ht("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gi="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr=new wv("@firebase/firestore");function To(){return Hr.logLevel}function X(t,...e){if(Hr.logLevel<=fe.DEBUG){const n=e.map(oh);Hr.debug(`Firestore (${Gi}): ${t}`,...n)}}function kn(t,...e){if(Hr.logLevel<=fe.ERROR){const n=e.map(oh);Hr.error(`Firestore (${Gi}): ${t}`,...n)}}function Oi(t,...e){if(Hr.logLevel<=fe.WARN){const n=e.map(oh);Hr.warn(`Firestore (${Gi}): ${t}`,...n)}}function oh(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(t="Unexpected state"){const e=`FIRESTORE (${Gi}) INTERNAL ASSERTION FAILED: `+t;throw kn(e),new Error(e)}function _e(t,e){t||re()}function se(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends Xr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class O1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ht.UNAUTHENTICATED))}shutdown(){}}class j1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class M1{constructor(e){this.t=e,this.currentUser=ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){_e(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let o=new Mr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Mr,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Mr)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_e(typeof r.accessToken=="string"),new Lv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string"),new ht(e)}}class F1{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ht.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class B1{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new F1(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ht.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class U1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class z1{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){_e(this.o===void 0);const r=o=>{o.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,X("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(_e(typeof n.token=="string"),this.R=n.token,new U1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=$1(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}}function ge(t,e){return t<e?-1:t>e?1:0}function ji(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Y(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return We.fromMillis(Date.now())}static fromDate(e){return We.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new We(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new oe(e)}static min(){return new oe(new We(0,0))}static max(){return new oe(new We(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,n,r){n===void 0?n=0:n>e.length&&re(),r===void 0?r=e.length-n:r>e.length-n&&re(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ds.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ds?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Se extends ds{construct(e,n,r){return new Se(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Se(n)}static emptyPath(){return new Se([])}}const W1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tt extends ds{construct(e,n,r){return new tt(e,n,r)}static isValidIdentifier(e){return W1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new tt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new Y(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new Y(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Y(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(s=!s,i++):l!=="."||s?(r+=l,i++):(o(),i++)}if(o(),s)throw new Y(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tt(n)}static emptyPath(){return new tt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.path=e}static fromPath(e){return new ee(Se.fromString(e))}static fromName(e){return new ee(Se.fromString(e).popFirst(5))}static empty(){return new ee(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Se.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ee(new Se(e.slice()))}}function H1(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=oe.fromTimestamp(r===1e9?new We(n+1,0):new We(n,r));return new hr(i,ee.empty(),e)}function q1(t){return new hr(t.readTime,t.key,-1)}class hr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new hr(oe.min(),ee.empty(),-1)}static max(){return new hr(oe.max(),ee.empty(),-1)}}function G1(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ee.comparator(t.documentKey,e.documentKey),n!==0?n:ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Q1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Is(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==K1)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let i=0,o=0,s=!1;e.forEach(l=>{++i,l.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(i=>i?F.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new F((r,i)=>{const o=e.length,s=new Array(o);let l=0;for(let u=0;u<o;u++){const d=u;n(e[d]).next(f=>{s[d]=f,++l,l===o&&r(s)},f=>i(f))}})}static doWhile(e,n){return new F((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function Y1(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ss(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}sh.oe=-1;function Pl(t){return t==null}function sl(t){return t===0&&1/t==-1/0}function X1(t){return typeof t=="number"&&Number.isInteger(t)&&!sl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Jr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function jv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,n){this.comparator=e,this.root=n||et.EMPTY}insert(e,n){return new De(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,et.BLACK,null,null))}remove(e){return new De(this.comparator,this.root.remove(e,this.comparator).copy(null,null,et.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new da(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new da(this.root,e,this.comparator,!1)}getReverseIterator(){return new da(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new da(this.root,e,this.comparator,!0)}}class da{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class et{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??et.RED,this.left=i??et.EMPTY,this.right=o??et.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new et(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return et.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return et.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,et.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,et.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw re();const e=this.left.check();if(e!==this.right.check())throw re();return e+(this.isRed()?0:1)}}et.EMPTY=null,et.RED=!0,et.BLACK=!1;et.EMPTY=new class{constructor(){this.size=0}get key(){throw re()}get value(){throw re()}get color(){throw re()}get left(){throw re()}get right(){throw re()}copy(e,n,r,i,o){return this}insert(e,n,r){return new et(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.comparator=e,this.data=new De(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new lm(this.data.getIterator())}getIteratorFrom(e){return new lm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof rt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new rt(this.comparator);return n.data=e,n}}class lm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.fields=e,e.sort(tt.comparator)}static empty(){return new Lt([])}unionWith(e){let n=new rt(tt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Lt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ji(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Mv("Invalid base64 string: "+o):o}}(e);return new ot(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ot.EMPTY_BYTE_STRING=new ot("");const J1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fr(t){if(_e(!!t),typeof t=="string"){let e=0;const n=J1.exec(t);if(_e(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:je(t.seconds),nanos:je(t.nanos)}}function je(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function qr(t){return typeof t=="string"?ot.fromBase64String(t):ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ah(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function lh(t){const e=t.mapValue.fields.__previous_value__;return ah(e)?lh(e):e}function hs(t){const e=fr(t.mapValue.fields.__local_write_time__.timestampValue);return new We(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,n,r,i,o,s,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d}}class fs{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new fs("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof fs&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha={mapValue:{}};function Gr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ah(t)?4:tI(t)?9007199254740991:eI(t)?10:11:re()}function pn(t,e){if(t===e)return!0;const n=Gr(t);if(n!==Gr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return hs(t).isEqual(hs(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=fr(i.timestampValue),l=fr(o.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return qr(i.bytesValue).isEqual(qr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return je(i.geoPointValue.latitude)===je(o.geoPointValue.latitude)&&je(i.geoPointValue.longitude)===je(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return je(i.integerValue)===je(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=je(i.doubleValue),l=je(o.doubleValue);return s===l?sl(s)===sl(l):isNaN(s)&&isNaN(l)}return!1}(t,e);case 9:return ji(t.arrayValue.values||[],e.arrayValue.values||[],pn);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},l=o.mapValue.fields||{};if(am(s)!==am(l))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(l[u]===void 0||!pn(s[u],l[u])))return!1;return!0}(t,e);default:return re()}}function ps(t,e){return(t.values||[]).find(n=>pn(n,e))!==void 0}function Mi(t,e){if(t===e)return 0;const n=Gr(t),r=Gr(e);if(n!==r)return ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return function(o,s){const l=je(o.integerValue||o.doubleValue),u=je(s.integerValue||s.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return um(t.timestampValue,e.timestampValue);case 4:return um(hs(t),hs(e));case 5:return ge(t.stringValue,e.stringValue);case 6:return function(o,s){const l=qr(o),u=qr(s);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const l=o.split("/"),u=s.split("/");for(let d=0;d<l.length&&d<u.length;d++){const f=ge(l[d],u[d]);if(f!==0)return f}return ge(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const l=ge(je(o.latitude),je(s.latitude));return l!==0?l:ge(je(o.longitude),je(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return cm(t.arrayValue,e.arrayValue);case 10:return function(o,s){var l,u,d,f;const y=o.fields||{},_=s.fields||{},R=(l=y.value)===null||l===void 0?void 0:l.arrayValue,P=(u=_.value)===null||u===void 0?void 0:u.arrayValue,b=ge(((d=R==null?void 0:R.values)===null||d===void 0?void 0:d.length)||0,((f=P==null?void 0:P.values)===null||f===void 0?void 0:f.length)||0);return b!==0?b:cm(R,P)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===ha.mapValue&&s===ha.mapValue)return 0;if(o===ha.mapValue)return 1;if(s===ha.mapValue)return-1;const l=o.fields||{},u=Object.keys(l),d=s.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let y=0;y<u.length&&y<f.length;++y){const _=ge(u[y],f[y]);if(_!==0)return _;const R=Mi(l[u[y]],d[f[y]]);if(R!==0)return R}return ge(u.length,f.length)}(t.mapValue,e.mapValue);default:throw re()}}function um(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);const n=fr(t),r=fr(e),i=ge(n.seconds,r.seconds);return i!==0?i:ge(n.nanos,r.nanos)}function cm(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=Mi(n[i],r[i]);if(o)return o}return ge(n.length,r.length)}function Fi(t){return qc(t)}function qc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=fr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return qr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ee.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=qc(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${qc(n.fields[s])}`;return i+"}"}(t.mapValue):re()}function dm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Gc(t){return!!t&&"integerValue"in t}function uh(t){return!!t&&"arrayValue"in t}function hm(t){return!!t&&"nullValue"in t}function fm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Pa(t){return!!t&&"mapValue"in t}function eI(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Uo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Jr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Uo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Uo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function tI(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.value=e}static empty(){return new xt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Pa(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Uo(n)}setAll(e){let n=tt.emptyPath(),r={},i=[];e.forEach((s,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}s?r[l.lastSegment()]=Uo(s):i.push(l.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());Pa(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return pn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Pa(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Jr(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new xt(Uo(this.value))}}function Fv(t){const e=[];return Jr(t.fields,(n,r)=>{const i=new tt([n]);if(Pa(r)){const o=Fv(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new Lt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n,r,i,o,s,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=l}static newInvalidDocument(e){return new pt(e,0,oe.min(),oe.min(),oe.min(),xt.empty(),0)}static newFoundDocument(e,n,r,i){return new pt(e,1,n,oe.min(),r,i,0)}static newNoDocument(e,n){return new pt(e,2,n,oe.min(),oe.min(),xt.empty(),0)}static newUnknownDocument(e,n){return new pt(e,3,n,oe.min(),oe.min(),xt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,n){this.position=e,this.inclusive=n}}function pm(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?r=ee.comparator(ee.fromName(s.referenceValue),n.key):r=Mi(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function mm(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!pn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,n="asc"){this.field=e,this.dir=n}}function nI(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{}class Ue extends Bv{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new iI(e,n,r):n==="array-contains"?new aI(e,r):n==="in"?new lI(e,r):n==="not-in"?new uI(e,r):n==="array-contains-any"?new cI(e,r):new Ue(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new oI(e,r):new sI(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Mi(n,this.value)):n!==null&&Gr(this.value)===Gr(n)&&this.matchesComparison(Mi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rn extends Bv{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new rn(e,n)}matches(e){return Uv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Uv(t){return t.op==="and"}function zv(t){return rI(t)&&Uv(t)}function rI(t){for(const e of t.filters)if(e instanceof rn)return!1;return!0}function Kc(t){if(t instanceof Ue)return t.field.canonicalString()+t.op.toString()+Fi(t.value);if(zv(t))return t.filters.map(e=>Kc(e)).join(",");{const e=t.filters.map(n=>Kc(n)).join(",");return`${t.op}(${e})`}}function $v(t,e){return t instanceof Ue?function(r,i){return i instanceof Ue&&r.op===i.op&&r.field.isEqual(i.field)&&pn(r.value,i.value)}(t,e):t instanceof rn?function(r,i){return i instanceof rn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,l)=>o&&$v(s,i.filters[l]),!0):!1}(t,e):void re()}function Wv(t){return t instanceof Ue?function(n){return`${n.field.canonicalString()} ${n.op} ${Fi(n.value)}`}(t):t instanceof rn?function(n){return n.op.toString()+" {"+n.getFilters().map(Wv).join(" ,")+"}"}(t):"Filter"}class iI extends Ue{constructor(e,n,r){super(e,n,r),this.key=ee.fromName(r.referenceValue)}matches(e){const n=ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class oI extends Ue{constructor(e,n){super(e,"in",n),this.keys=Hv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class sI extends Ue{constructor(e,n){super(e,"not-in",n),this.keys=Hv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Hv(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ee.fromName(r.referenceValue))}class aI extends Ue{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return uh(n)&&ps(n.arrayValue,this.value)}}class lI extends Ue{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ps(this.value.arrayValue,n)}}class uI extends Ue{constructor(e,n){super(e,"not-in",n)}matches(e){if(ps(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ps(this.value.arrayValue,n)}}class cI extends Ue{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!uh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ps(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e,n=null,r=[],i=[],o=null,s=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=l,this.ue=null}}function gm(t,e=null,n=[],r=[],i=null,o=null,s=null){return new dI(t,e,n,r,i,o,s)}function ch(t){const e=se(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Kc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Pl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Fi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Fi(r)).join(",")),e.ue=n}return e.ue}function dh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!nI(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!$v(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!mm(t.startAt,e.startAt)&&mm(t.endAt,e.endAt)}function Qc(t){return ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,n=null,r=[],i=[],o=null,s="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function hI(t,e,n,r,i,o,s,l){return new Ki(t,e,n,r,i,o,s,l)}function hh(t){return new Ki(t)}function ym(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function qv(t){return t.collectionGroup!==null}function zo(t){const e=se(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let l=new rt(tt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new ms(o,r))}),n.has(tt.keyField().canonicalString())||e.ce.push(new ms(tt.keyField(),r))}return e.ce}function hn(t){const e=se(t);return e.le||(e.le=fI(e,zo(t))),e.le}function fI(t,e){if(t.limitType==="F")return gm(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new ms(i.field,o)});const n=t.endAt?new al(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new al(t.startAt.position,t.startAt.inclusive):null;return gm(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Yc(t,e){const n=t.filters.concat([e]);return new Ki(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Xc(t,e,n){return new Ki(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Dl(t,e){return dh(hn(t),hn(e))&&t.limitType===e.limitType}function Gv(t){return`${ch(hn(t))}|lt:${t.limitType}`}function si(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Wv(i)).join(", ")}]`),Pl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Fi(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Fi(i)).join(",")),`Target(${r})`}(hn(t))}; limitType=${t.limitType})`}function bl(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ee.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of zo(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,l,u){const d=pm(s,l,u);return s.inclusive?d<=0:d<0}(r.startAt,zo(r),i)||r.endAt&&!function(s,l,u){const d=pm(s,l,u);return s.inclusive?d>=0:d>0}(r.endAt,zo(r),i))}(t,e)}function pI(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Kv(t){return(e,n)=>{let r=!1;for(const i of zo(t)){const o=mI(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function mI(t,e,n){const r=t.field.isKeyField()?ee.comparator(e.key,n.key):function(o,s,l){const u=s.data.field(o),d=l.data.field(o);return u!==null&&d!==null?Mi(u,d):re()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return re()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Jr(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return jv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=new De(ee.comparator);function Pn(){return gI}const Qv=new De(ee.comparator);function ko(...t){let e=Qv;for(const n of t)e=e.insert(n.key,n);return e}function Yv(t){let e=Qv;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Vr(){return $o()}function Xv(){return $o()}function $o(){return new Qi(t=>t.toString(),(t,e)=>t.isEqual(e))}const yI=new De(ee.comparator),vI=new rt(ee.comparator);function ce(...t){let e=vI;for(const n of t)e=e.add(n);return e}const _I=new rt(ge);function wI(){return _I}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fh(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sl(e)?"-0":e}}function Jv(t){return{integerValue:""+t}}function EI(t,e){return X1(e)?Jv(e):fh(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(){this._=void 0}}function TI(t,e,n){return t instanceof ll?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&ah(o)&&(o=lh(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof gs?e_(t,e):t instanceof ys?t_(t,e):function(i,o){const s=Zv(i,o),l=vm(s)+vm(i.Pe);return Gc(s)&&Gc(i.Pe)?Jv(l):fh(i.serializer,l)}(t,e)}function II(t,e,n){return t instanceof gs?e_(t,e):t instanceof ys?t_(t,e):n}function Zv(t,e){return t instanceof ul?function(r){return Gc(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class ll extends Nl{}class gs extends Nl{constructor(e){super(),this.elements=e}}function e_(t,e){const n=n_(e);for(const r of t.elements)n.some(i=>pn(i,r))||n.push(r);return{arrayValue:{values:n}}}class ys extends Nl{constructor(e){super(),this.elements=e}}function t_(t,e){let n=n_(e);for(const r of t.elements)n=n.filter(i=>!pn(i,r));return{arrayValue:{values:n}}}class ul extends Nl{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function vm(t){return je(t.integerValue||t.doubleValue)}function n_(t){return uh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function SI(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof gs&&i instanceof gs||r instanceof ys&&i instanceof ys?ji(r.elements,i.elements,pn):r instanceof ul&&i instanceof ul?pn(r.Pe,i.Pe):r instanceof ll&&i instanceof ll}(t.transform,e.transform)}class xI{constructor(e,n){this.version=e,this.transformResults=n}}class tn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new tn}static exists(e){return new tn(void 0,e)}static updateTime(e){return new tn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Da(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Vl{}function r_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ph(t.key,tn.none()):new xs(t.key,t.data,tn.none());{const n=t.data,r=xt.empty();let i=new rt(tt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new vr(t.key,r,new Lt(i.toArray()),tn.none())}}function AI(t,e,n){t instanceof xs?function(i,o,s){const l=i.value.clone(),u=wm(i.fieldTransforms,o,s.transformResults);l.setAll(u),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):t instanceof vr?function(i,o,s){if(!Da(i.precondition,o))return void o.convertToUnknownDocument(s.version);const l=wm(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(i_(i)),u.setAll(l),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Wo(t,e,n,r){return t instanceof xs?function(o,s,l,u){if(!Da(o.precondition,s))return l;const d=o.value.clone(),f=Em(o.fieldTransforms,u,s);return d.setAll(f),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof vr?function(o,s,l,u){if(!Da(o.precondition,s))return l;const d=Em(o.fieldTransforms,u,s),f=s.data;return f.setAll(i_(o)),f.setAll(d),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(t,e,n,r):function(o,s,l){return Da(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l}(t,e,n)}function CI(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=Zv(r.transform,i||null);o!=null&&(n===null&&(n=xt.empty()),n.set(r.field,o))}return n||null}function _m(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ji(r,i,(o,s)=>SI(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class xs extends Vl{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class vr extends Vl{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function i_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function wm(t,e,n){const r=new Map;_e(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,l=e.data.field(o.field);r.set(o.field,II(s,l,n[i]))}return r}function Em(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,TI(o,s,e))}return r}class ph extends Vl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RI extends Vl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&AI(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Wo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Wo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Xv();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let l=this.applyToLocalView(s,o.mutatedFields);l=n.has(i.key)?null:l;const u=r_(s,l);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(oe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&ji(this.mutations,e.mutations,(n,r)=>_m(n,r))&&ji(this.baseMutations,e.baseMutations,(n,r)=>_m(n,r))}}class mh{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){_e(e.mutations.length===r.length);let i=function(){return yI}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new mh(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe,de;function bI(t){switch(t){default:return re();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function o_(t){if(t===void 0)return kn("GRPC error has no .code"),j.UNKNOWN;switch(t){case Fe.OK:return j.OK;case Fe.CANCELLED:return j.CANCELLED;case Fe.UNKNOWN:return j.UNKNOWN;case Fe.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case Fe.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case Fe.INTERNAL:return j.INTERNAL;case Fe.UNAVAILABLE:return j.UNAVAILABLE;case Fe.UNAUTHENTICATED:return j.UNAUTHENTICATED;case Fe.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case Fe.NOT_FOUND:return j.NOT_FOUND;case Fe.ALREADY_EXISTS:return j.ALREADY_EXISTS;case Fe.PERMISSION_DENIED:return j.PERMISSION_DENIED;case Fe.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case Fe.ABORTED:return j.ABORTED;case Fe.OUT_OF_RANGE:return j.OUT_OF_RANGE;case Fe.UNIMPLEMENTED:return j.UNIMPLEMENTED;case Fe.DATA_LOSS:return j.DATA_LOSS;default:return re()}}(de=Fe||(Fe={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI=new jr([4294967295,4294967295],0);function Tm(t){const e=NI().encode(t),n=new kv;return n.update(e),new Uint8Array(n.digest())}function Im(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new jr([n,r],0),new jr([i,o],0)]}class gh{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Po(`Invalid padding: ${n}`);if(r<0)throw new Po(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Po(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Po(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=jr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(jr.fromNumber(r)));return i.compare(VI)===1&&(i=new jr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Tm(e),[r,i]=Im(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new gh(o,i,n);return r.forEach(l=>s.insert(l)),s}insert(e){if(this.Ie===0)return;const n=Tm(e),[r,i]=Im(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Po extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,As.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ll(oe.min(),i,new De(ge),Pn(),ce())}}class As{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new As(r,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class s_{constructor(e,n){this.targetId=e,this.me=n}}class a_{constructor(e,n,r=ot.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Sm{constructor(){this.fe=0,this.ge=Am(),this.pe=ot.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ce(),n=ce(),r=ce();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:re()}}),new As(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Am()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,_e(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class LI{constructor(e){this.Le=e,this.Be=new Map,this.ke=Pn(),this.qe=xm(),this.Qe=new De(ge)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:re()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const o=i.target;if(Qc(o))if(r===0){const s=new ee(o.path);this.Ue(n,s,pt.newNoDocument(s,oe.min()))}else _e(r===1);else{const s=this.Ye(n);if(s!==r){const l=this.Ze(e),u=l?this.Xe(l,e,s):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,l;try{s=qr(r).toUint8Array()}catch(u){if(u instanceof Mv)return Oi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new gh(s,i,o)}catch(u){return Oi(u instanceof Po?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Le.tt(),l=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,o,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((o,s)=>{const l=this.Je(s);if(l){if(o.current&&Qc(l.target)){const u=new ee(l.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,pt.newNoDocument(u,e))}o.be&&(n.set(s,o.ve()),o.Ce())}});let r=ce();this.qe.forEach((o,s)=>{let l=!0;s.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));const i=new Ll(e,n,this.Qe,this.ke,r);return this.ke=Pn(),this.qe=xm(),this.Qe=new De(ge),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Sm,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new rt(ge),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Sm),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function xm(){return new De(ee.comparator)}function Am(){return new De(ee.comparator)}const OI={asc:"ASCENDING",desc:"DESCENDING"},jI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MI={and:"AND",or:"OR"};class FI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Jc(t,e){return t.useProto3Json||Pl(e)?e:{value:e}}function cl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function l_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function BI(t,e){return cl(t,e.toTimestamp())}function fn(t){return _e(!!t),oe.fromTimestamp(function(n){const r=fr(n);return new We(r.seconds,r.nanos)}(t))}function yh(t,e){return Zc(t,e).canonicalString()}function Zc(t,e){const n=function(i){return new Se(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function u_(t){const e=Se.fromString(t);return _e(p_(e)),e}function ed(t,e){return yh(t.databaseId,e.path)}function Lu(t,e){const n=u_(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ee(d_(n))}function c_(t,e){return yh(t.databaseId,e)}function UI(t){const e=u_(t);return e.length===4?Se.emptyPath():d_(e)}function td(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function d_(t){return _e(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Cm(t,e,n){return{name:ed(t,e),fields:n.value.mapValue.fields}}function zI(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:re()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(d,f){return d.useProto3Json?(_e(f===void 0||typeof f=="string"),ot.fromBase64String(f||"")):(_e(f===void 0||f instanceof Buffer||f instanceof Uint8Array),ot.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,l=s&&function(d){const f=d.code===void 0?j.UNKNOWN:o_(d.code);return new Y(f,d.message||"")}(s);n=new a_(r,i,o,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Lu(t,r.document.name),o=fn(r.document.updateTime),s=r.document.createTime?fn(r.document.createTime):oe.min(),l=new xt({mapValue:{fields:r.document.fields}}),u=pt.newFoundDocument(i,o,s,l),d=r.targetIds||[],f=r.removedTargetIds||[];n=new ba(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Lu(t,r.document),o=r.readTime?fn(r.readTime):oe.min(),s=pt.newNoDocument(i,o),l=r.removedTargetIds||[];n=new ba([],l,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Lu(t,r.document),o=r.removedTargetIds||[];n=new ba([],o,i,null)}else{if(!("filter"in e))return re();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new DI(i,o),l=r.targetId;n=new s_(l,s)}}return n}function $I(t,e){let n;if(e instanceof xs)n={update:Cm(t,e.key,e.value)};else if(e instanceof ph)n={delete:ed(t,e.key)};else if(e instanceof vr)n={update:Cm(t,e.key,e.data),updateMask:JI(e.fieldMask)};else{if(!(e instanceof RI))return re();n={verify:ed(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const l=s.transform;if(l instanceof ll)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof gs)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ys)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ul)return{fieldPath:s.field.canonicalString(),increment:l.Pe};throw re()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:BI(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:re()}(t,e.precondition)),n}function WI(t,e){return t&&t.length>0?(_e(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?fn(i.updateTime):fn(o);return s.isEqual(oe.min())&&(s=fn(o)),new xI(s,i.transformResults||[])}(n,e))):[]}function HI(t,e){return{documents:[c_(t,e.path)]}}function qI(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=c_(t,i);const o=function(d){if(d.length!==0)return f_(rn.create(d,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(d){if(d.length!==0)return d.map(f=>function(_){return{field:ai(_.field),direction:QI(_.dir)}}(f))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const l=Jc(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:i}}function GI(t){let e=UI(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){_e(r===1);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];n.where&&(o=function(y){const _=h_(y);return _ instanceof rn&&zv(_)?_.getFilters():[_]}(n.where));let s=[];n.orderBy&&(s=function(y){return y.map(_=>function(P){return new ms(li(P.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(_))}(n.orderBy));let l=null;n.limit&&(l=function(y){let _;return _=typeof y=="object"?y.value:y,Pl(_)?null:_}(n.limit));let u=null;n.startAt&&(u=function(y){const _=!!y.before,R=y.values||[];return new al(R,_)}(n.startAt));let d=null;return n.endAt&&(d=function(y){const _=!y.before,R=y.values||[];return new al(R,_)}(n.endAt)),hI(e,i,s,o,l,"F",u,d)}function KI(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function h_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=li(n.unaryFilter.field);return Ue.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=li(n.unaryFilter.field);return Ue.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=li(n.unaryFilter.field);return Ue.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=li(n.unaryFilter.field);return Ue.create(s,"!=",{nullValue:"NULL_VALUE"});default:return re()}}(t):t.fieldFilter!==void 0?function(n){return Ue.create(li(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return re()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return rn.create(n.compositeFilter.filters.map(r=>h_(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return re()}}(n.compositeFilter.op))}(t):re()}function QI(t){return OI[t]}function YI(t){return jI[t]}function XI(t){return MI[t]}function ai(t){return{fieldPath:t.canonicalString()}}function li(t){return tt.fromServerFormat(t.fieldPath)}function f_(t){return t instanceof Ue?function(n){if(n.op==="=="){if(fm(n.value))return{unaryFilter:{field:ai(n.field),op:"IS_NAN"}};if(hm(n.value))return{unaryFilter:{field:ai(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(fm(n.value))return{unaryFilter:{field:ai(n.field),op:"IS_NOT_NAN"}};if(hm(n.value))return{unaryFilter:{field:ai(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ai(n.field),op:YI(n.op),value:n.value}}}(t):t instanceof rn?function(n){const r=n.getFilters().map(i=>f_(i));return r.length===1?r[0]:{compositeFilter:{op:XI(n.op),filters:r}}}(t):re()}function JI(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function p_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,n,r,i,o=oe.min(),s=oe.min(),l=ot.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Yn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Yn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Yn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Yn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e){this.ct=e}}function eS(t){const e=GI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Xc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(){this.un=new nS}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(hr.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(hr.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class nS{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new rt(Se.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new rt(Se.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Bi(0)}static kn(){return new Bi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(){this.changes=new Qi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,pt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Wo(r.mutation,i,Lt.empty(),We.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ce()){const i=Vr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=ko();return o.forEach((l,u)=>{s=s.insert(l,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=Vr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ce()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,l)=>{n.set(s,l)})})}computeViews(e,n,r,i){let o=Pn();const s=$o(),l=function(){return $o()}();return n.forEach((u,d)=>{const f=r.get(d.key);i.has(d.key)&&(f===void 0||f.mutation instanceof vr)?o=o.insert(d.key,d):f!==void 0?(s.set(d.key,f.mutation.getFieldMask()),Wo(f.mutation,d,f.mutation.getFieldMask(),We.now())):s.set(d.key,Lt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((d,f)=>s.set(d,f)),n.forEach((d,f)=>{var y;return l.set(d,new iS(f,(y=s.get(d))!==null&&y!==void 0?y:null))}),l))}recalculateAndSaveOverlays(e,n){const r=$o();let i=new De((s,l)=>s-l),o=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const l of s)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||Lt.empty();f=l.applyToLocalView(d,f),r.set(u,f);const y=(i.get(l.batchId)||ce()).add(u);i=i.insert(l.batchId,y)})}).next(()=>{const s=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,f=u.value,y=Xv();f.forEach(_=>{if(!o.has(_)){const R=r_(n.get(_),r.get(_));R!==null&&y.set(_,R),o=o.add(_)}}),s.push(this.documentOverlayCache.saveOverlays(e,d,y))}return F.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return ee.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):qv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):F.resolve(Vr());let l=-1,u=o;return s.next(d=>F.forEach(d,(f,y)=>(l<y.largestBatchId&&(l=y.largestBatchId),o.get(f)?F.resolve():this.remoteDocumentCache.getEntry(e,f).next(_=>{u=u.insert(f,_)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,u,d,ce())).next(f=>({batchId:l,changes:Yv(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ee(n)).next(r=>{let i=ko();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=ko();return this.indexManager.getCollectionParents(e,o).next(l=>F.forEach(l,u=>{const d=function(y,_){return new Ki(_,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((y,_)=>{s=s.insert(y,_)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,d)=>{const f=d.getKey();s.get(f)===null&&(s=s.insert(f,pt.newInvalidDocument(f)))});let l=ko();return s.forEach((u,d)=>{const f=o.get(u);f!==void 0&&Wo(f.mutation,d,Lt.empty(),We.now()),bl(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:fn(i.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:eS(i.bundledQuery),readTime:fn(i.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(){this.overlays=new De(ee.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Vr();return F.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const i=Vr(),o=n.length+1,s=new ee(n.child("")),l=this.overlays.getIteratorFrom(s);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return F.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new De((d,f)=>d-f);const s=this.overlays.getIterator();for(;s.hasNext();){const d=s.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=o.get(d.largestBatchId);f===null&&(f=Vr(),o=o.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const l=Vr(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>l.set(d,f)),!(l.size()>=i)););return F.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new PI(n,r));let o=this.Ir.get(n);o===void 0&&(o=ce(),this.Ir.set(n,o)),this.Ir.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(){this.sessionToken=ot.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(){this.Tr=new rt(Ge.Er),this.dr=new rt(Ge.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ge(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ge(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ee(new Se([])),r=new Ge(n,e),i=new Ge(n,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ee(new Se([])),r=new Ge(n,e),i=new Ge(n,e+1);let o=ce();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new Ge(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ge{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ee.comparator(e.key,n.key)||ge(e.wr,n.wr)}static Ar(e,n){return ge(e.wr,n.wr)||ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new rt(Ge.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new kI(o,n,r,i);this.mutationQueue.push(s);for(const l of i)this.br=this.br.add(new Ge(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return F.resolve(s)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),o=i<0?0:i;return F.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ge(n,0),i=new Ge(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{const l=this.Dr(s.wr);o.push(l)}),F.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new rt(ge);return n.forEach(i=>{const o=new Ge(i,0),s=new Ge(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],l=>{r=r.add(l.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;ee.isDocumentKey(o)||(o=o.child(""));const s=new Ge(new ee(o),0);let l=new rt(ge);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(l=l.add(u.wr)),!0)},s),F.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){_e(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,i=>{const o=new Ge(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ge(n,0),i=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e){this.Mr=e,this.docs=function(){return new De(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():pt.newInvalidDocument(n))}getEntries(e,n){let r=Pn();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():pt.newInvalidDocument(i))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Pn();const s=n.path,l=new ee(s.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!s.isPrefixOf(d.path))break;d.path.length>s.length+1||G1(q1(f),r)<=0||(i.has(f.key)||bl(n,f))&&(o=o.insert(f.key,f.mutableCopy()))}return F.resolve(o)}getAllFromCollectionGroup(e,n,r,i){re()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new dS(this)}getSize(e){return F.resolve(this.size)}}class dS extends rS{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e){this.persistence=e,this.Nr=new Qi(n=>ch(n),dh),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new vh,this.targetCount=0,this.kr=Bi.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Bi(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Nr.forEach((s,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),F.waitFor(o).next(()=>i)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),F.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e,n){this.qr={},this.overlays={},this.Qr=new sh(0),this.Kr=!1,this.Kr=!0,this.$r=new lS,this.referenceDelegate=e(this),this.Ur=new hS(this),this.indexManager=new tS,this.remoteDocumentCache=function(i){return new cS(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new ZI(n),this.Gr=new sS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new aS,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new uS(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const i=new pS(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class pS extends Q1{constructor(e){super(),this.currentSequenceNumber=e}}class _h{constructor(e){this.persistence=e,this.Jr=new vh,this.Yr=null}static Zr(e){return new _h(e)}get Xr(){if(this.Yr)return this.Yr;throw re()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const i=ee.fromPath(r);return this.ei(e,i).next(o=>{o||n.removeEntry(i,oe.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ce(),i=ce();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new wh(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return ET()?8:Y1(_T())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.Yi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new mS;return this.Xi(e,n,s).next(l=>{if(o.result=l,this.zi)return this.es(e,n,s,l.size)})}).next(()=>o.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(To()<=fe.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",si(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(To()<=fe.DEBUG&&X("QueryEngine","Query:",si(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(To()<=fe.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",si(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hn(n))):F.resolve())}Yi(e,n){if(ym(n))return F.resolve(null);let r=hn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Xc(n,null,"F"),r=hn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=ce(...o);return this.Ji.getDocuments(e,s).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,l);return this.ns(n,d,s,u.readTime)?this.Yi(e,Xc(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,i){return ym(n)||i.isEqual(oe.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(o=>{const s=this.ts(n,o);return this.ns(n,s,r,i)?F.resolve(null):(To()<=fe.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),si(n)),this.rs(e,s,n,H1(i,-1)).next(l=>l))})}ts(e,n){let r=new rt(Kv(e));return n.forEach((i,o)=>{bl(e,o)&&(r=r.add(o))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,n,r){return To()<=fe.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",si(n)),this.Ji.getDocumentsMatchingQuery(e,n,hr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new De(ge),this._s=new Qi(o=>ch(o),dh),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new oS(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function vS(t,e,n,r){return new yS(t,e,n,r)}async function m_(t,e){const n=se(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],l=[];let u=ce();for(const d of i){s.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of o){l.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:s,addedBatchIds:l}))})})}function _S(t,e){const n=se(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,f){const y=d.batch,_=y.keys();let R=F.resolve();return _.forEach(P=>{R=R.next(()=>f.getEntry(u,P)).next(b=>{const L=d.docVersions.get(P);_e(L!==null),b.version.compareTo(L)<0&&(y.applyToRemoteDocument(b,d),b.isValidDocument()&&(b.setReadTime(d.commitVersion),f.addEntry(b)))})}),R.next(()=>l.mutationQueue.removeMutationBatch(u,y))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ce();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function g_(t){const e=se(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function wS(t,e){const n=se(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const l=[];e.targetChanges.forEach((f,y)=>{const _=i.get(y);if(!_)return;l.push(n.Ur.removeMatchingKeys(o,f.removedDocuments,y).next(()=>n.Ur.addMatchingKeys(o,f.addedDocuments,y)));let R=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?R=R.withResumeToken(ot.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):f.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(f.resumeToken,r)),i=i.insert(y,R),function(b,L,x){return b.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(_,R,f)&&l.push(n.Ur.updateTargetData(o,R))});let u=Pn(),d=ce();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(o,f))}),l.push(ES(o,s,e.documentUpdates).next(f=>{u=f.Ps,d=f.Is})),!r.isEqual(oe.min())){const f=n.Ur.getLastRemoteSnapshotVersion(o).next(y=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));l.push(f)}return F.waitFor(l).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,d)).next(()=>u)}).then(o=>(n.os=i,o))}function ES(t,e,n){let r=ce(),i=ce();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Pn();return n.forEach((l,u)=>{const d=o.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(oe.min())?(e.removeEntry(l,u.readTime),s=s.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),s=s.insert(l,u)):X("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function TS(t,e){const n=se(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function IS(t,e){const n=se(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(o=>o?(i=o,F.resolve(i)):n.Ur.allocateTargetId(r).next(s=>(i=new Yn(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function nd(t,e,n){const r=se(t),i=r.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!Ss(s))throw s;X("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Rm(t,e,n){const r=se(t);let i=oe.min(),o=ce();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,d,f){const y=se(u),_=y._s.get(f);return _!==void 0?F.resolve(y.os.get(_)):y.Ur.getTargetData(d,f)}(r,s,hn(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,l.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,n?i:oe.min(),n?o:ce())).next(l=>(SS(r,pI(e),l),{documents:l,Ts:o})))}function SS(t,e,n){let r=t.us.get(e)||oe.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.us.set(e,r)}class km{constructor(){this.activeTargetIds=wI()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xS{constructor(){this.so=new km,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new km,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){X("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){X("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fa=null;function Ou(){return fa===null?fa=function(){return 268435456+Math.round(2147483648*Math.random())}():fa++,"0x"+fa.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt="WebChannelConnection";class kS extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(n,r,i,o,s){const l=Ou(),u=this.xo(n,r.toUriEncodedString());X("RestConnection",`Sending RPC '${n}' ${l}:`,u,i);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,o,s),this.No(n,u,d,i).then(f=>(X("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw Oi("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",u,"request:",i),f})}Lo(n,r,i,o,s,l){return this.Mo(n,r,i,o,s)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Gi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}xo(n,r){const i=CS[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const o=Ou();return new Promise((s,l)=>{const u=new Pv;u.setWithCredentials(!0),u.listenOnce(Dv.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ka.NO_ERROR:const f=u.getResponseJson();X(dt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),s(f);break;case ka.TIMEOUT:X(dt,`RPC '${e}' ${o} timed out`),l(new Y(j.DEADLINE_EXCEEDED,"Request time out"));break;case ka.HTTP_ERROR:const y=u.getStatus();if(X(dt,`RPC '${e}' ${o} failed with status:`,y,"response text:",u.getResponseText()),y>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);const R=_==null?void 0:_.error;if(R&&R.status&&R.message){const P=function(L){const x=L.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(x)>=0?x:j.UNKNOWN}(R.status);l(new Y(P,R.message))}else l(new Y(j.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Y(j.UNAVAILABLE,"Connection failed."));break;default:re()}}finally{X(dt,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(i);X(dt,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const i=Ou(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Vv(),l=Nv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=o.join("");X(dt,`Creating RPC '${e}' stream ${i}: ${f}`,u);const y=s.createWebChannel(f,u);let _=!1,R=!1;const P=new RS({Io:L=>{R?X(dt,`Not sending because RPC '${e}' stream ${i} is closed:`,L):(_||(X(dt,`Opening RPC '${e}' stream ${i} transport.`),y.open(),_=!0),X(dt,`RPC '${e}' stream ${i} sending:`,L),y.send(L))},To:()=>y.close()}),b=(L,x,w)=>{L.listen(x,C=>{try{w(C)}catch(N){setTimeout(()=>{throw N},0)}})};return b(y,Ro.EventType.OPEN,()=>{R||(X(dt,`RPC '${e}' stream ${i} transport opened.`),P.yo())}),b(y,Ro.EventType.CLOSE,()=>{R||(R=!0,X(dt,`RPC '${e}' stream ${i} transport closed`),P.So())}),b(y,Ro.EventType.ERROR,L=>{R||(R=!0,Oi(dt,`RPC '${e}' stream ${i} transport errored:`,L),P.So(new Y(j.UNAVAILABLE,"The operation could not be completed")))}),b(y,Ro.EventType.MESSAGE,L=>{var x;if(!R){const w=L.data[0];_e(!!w);const C=w,N=C.error||((x=C[0])===null||x===void 0?void 0:x.error);if(N){X(dt,`RPC '${e}' stream ${i} received error:`,N);const B=N.status;let $=function(E){const I=Fe[E];if(I!==void 0)return o_(I)}(B),T=N.message;$===void 0&&($=j.INTERNAL,T="Unknown error status: "+B+" with message "+N.message),R=!0,P.So(new Y($,T)),y.close()}else X(dt,`RPC '${e}' stream ${i} received:`,w),P.bo(w)}}),b(l,bv.STAT_EVENT,L=>{L.stat===Hc.PROXY?X(dt,`RPC '${e}' stream ${i} detected buffering proxy`):L.stat===Hc.NOPROXY&&X(dt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{P.wo()},0),P}}function ju(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ol(t){return new FI(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(e,n,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&X("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e,n,r,i,o,s,l,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new y_(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(kn(n.toString()),kn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new Y(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return X("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(X("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class PS extends v_{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=zI(this.serializer,e),r=function(o){if(!("targetChange"in o))return oe.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?oe.min():s.readTime?fn(s.readTime):oe.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=td(this.serializer),n.addTarget=function(o,s){let l;const u=s.target;if(l=Qc(u)?{documents:HI(o,u)}:{query:qI(o,u)._t},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){l.resumeToken=l_(o,s.resumeToken);const d=Jc(o,s.expectedCount);d!==null&&(l.expectedCount=d)}else if(s.snapshotVersion.compareTo(oe.min())>0){l.readTime=cl(o,s.snapshotVersion.toTimestamp());const d=Jc(o,s.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=KI(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=td(this.serializer),n.removeTarget=e,this.a_(n)}}class DS extends v_{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return _e(!!e.streamToken),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){_e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=WI(e.writeResults,e.commitTime),r=fn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=td(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>$I(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Y(j.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,Zc(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(j.UNKNOWN,o.toString())})}Lo(e,n,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.connection.Lo(e,Zc(n,r),i,s,l,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Y(j.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class NS{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(kn(n),this.D_=!1):X("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(async()=>{Zr(this)&&(X("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=se(u);d.L_.add(4),await Cs(d),d.q_.set("Unknown"),d.L_.delete(4),await jl(d)}(this))})}),this.q_=new NS(r,i)}}async function jl(t){if(Zr(t))for(const e of t.B_)await e(!0)}async function Cs(t){for(const e of t.B_)await e(!1)}function __(t,e){const n=se(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Sh(n)?Ih(n):Yi(n).r_()&&Th(n,e))}function Eh(t,e){const n=se(t),r=Yi(n);n.N_.delete(e),r.r_()&&w_(n,e),n.N_.size===0&&(r.r_()?r.o_():Zr(n)&&n.q_.set("Unknown"))}function Th(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Yi(t).A_(e)}function w_(t,e){t.Q_.xe(e),Yi(t).R_(e)}function Ih(t){t.Q_=new LI({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Yi(t).start(),t.q_.v_()}function Sh(t){return Zr(t)&&!Yi(t).n_()&&t.N_.size>0}function Zr(t){return se(t).L_.size===0}function E_(t){t.Q_=void 0}async function LS(t){t.q_.set("Online")}async function OS(t){t.N_.forEach((e,n)=>{Th(t,e)})}async function jS(t,e){E_(t),Sh(t)?(t.q_.M_(e),Ih(t)):t.q_.set("Unknown")}async function MS(t,e,n){if(t.q_.set("Online"),e instanceof a_&&e.state===2&&e.cause)try{await async function(i,o){const s=o.cause;for(const l of o.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,s),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(r){X("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await dl(t,r)}else if(e instanceof ba?t.Q_.Ke(e):e instanceof s_?t.Q_.He(e):t.Q_.We(e),!n.isEqual(oe.min()))try{const r=await g_(t.localStore);n.compareTo(r)>=0&&await function(o,s){const l=o.Q_.rt(s);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=o.N_.get(d);f&&o.N_.set(d,f.withResumeToken(u.resumeToken,s))}}),l.targetMismatches.forEach((u,d)=>{const f=o.N_.get(u);if(!f)return;o.N_.set(u,f.withResumeToken(ot.EMPTY_BYTE_STRING,f.snapshotVersion)),w_(o,u);const y=new Yn(f.target,u,d,f.sequenceNumber);Th(o,y)}),o.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){X("RemoteStore","Failed to raise snapshot:",r),await dl(t,r)}}async function dl(t,e,n){if(!Ss(e))throw e;t.L_.add(1),await Cs(t),t.q_.set("Offline"),n||(n=()=>g_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await jl(t)})}function T_(t,e){return e().catch(n=>dl(t,n,e))}async function Ml(t){const e=se(t),n=pr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;FS(e);)try{const i=await TS(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,BS(e,i)}catch(i){await dl(e,i)}I_(e)&&S_(e)}function FS(t){return Zr(t)&&t.O_.length<10}function BS(t,e){t.O_.push(e);const n=pr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function I_(t){return Zr(t)&&!pr(t).n_()&&t.O_.length>0}function S_(t){pr(t).start()}async function US(t){pr(t).p_()}async function zS(t){const e=pr(t);for(const n of t.O_)e.m_(n.mutations)}async function $S(t,e,n){const r=t.O_.shift(),i=mh.from(r,e,n);await T_(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Ml(t)}async function WS(t,e){e&&pr(t).V_&&await async function(r,i){if(function(s){return bI(s)&&s!==j.ABORTED}(i.code)){const o=r.O_.shift();pr(r).s_(),await T_(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Ml(r)}}(t,e),I_(t)&&S_(t)}async function Dm(t,e){const n=se(t);n.asyncQueue.verifyOperationInProgress(),X("RemoteStore","RemoteStore received new credentials");const r=Zr(n);n.L_.add(3),await Cs(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await jl(n)}async function HS(t,e){const n=se(t);e?(n.L_.delete(2),await jl(n)):e||(n.L_.add(2),await Cs(n),n.q_.set("Unknown"))}function Yi(t){return t.K_||(t.K_=function(n,r,i){const o=se(n);return o.w_(),new PS(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:LS.bind(null,t),Ro:OS.bind(null,t),mo:jS.bind(null,t),d_:MS.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Sh(t)?Ih(t):t.q_.set("Unknown")):(await t.K_.stop(),E_(t))})),t.K_}function pr(t){return t.U_||(t.U_=function(n,r,i){const o=se(n);return o.w_(),new DS(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:US.bind(null,t),mo:WS.bind(null,t),f_:zS.bind(null,t),g_:$S.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Ml(t)):(await t.U_.stop(),t.O_.length>0&&(X("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,l=new xh(e,n,s,i,o);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ah(t,e){if(kn("AsyncQueue",`${e}: ${t}`),Ss(t))return new Y(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ee.comparator(n.key,r.key):(n,r)=>ee.comparator(n.key,r.key),this.keyedMap=ko(),this.sortedSet=new De(this.comparator)}static emptySet(e){return new Ci(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ci)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ci;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(){this.W_=new De(ee.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):re():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ui{constructor(e,n,r,i,o,s,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(l=>{s.push({type:0,doc:l})}),new Ui(e,n,Ci.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class GS{constructor(){this.queries=Nm(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=se(n),o=i.queries;i.queries=Nm(),o.forEach((s,l)=>{for(const u of l.j_)u.onError(r)})})(this,new Y(j.ABORTED,"Firestore shutting down"))}}function Nm(){return new Qi(t=>Gv(t),Dl)}async function KS(t,e){const n=se(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new qS,r=e.J_()?0:1);try{switch(r){case 0:o.z_=await n.onListen(i,!0);break;case 1:o.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const l=Ah(s,`Initialization of query '${si(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&Ch(n)}async function QS(t,e){const n=se(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function YS(t,e){const n=se(t);let r=!1;for(const i of e){const o=i.query,s=n.queries.get(o);if(s){for(const l of s.j_)l.X_(i)&&(r=!0);s.z_=i}}r&&Ch(n)}function XS(t,e,n){const r=se(t),i=r.queries.get(e);if(i)for(const o of i.j_)o.onError(n);r.queries.delete(e)}function Ch(t){t.Y_.forEach(e=>{e.next()})}var rd,Vm;(Vm=rd||(rd={})).ea="default",Vm.Cache="cache";class JS{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ui(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ui.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==rd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e){this.key=e}}class A_{constructor(e){this.key=e}}class ZS{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ce(),this.mutatedKeys=ce(),this.Aa=Kv(e),this.Ra=new Ci(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new bm,i=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,y)=>{const _=i.get(f),R=bl(this.query,y)?y:null,P=!!_&&this.mutatedKeys.has(_.key),b=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let L=!1;_&&R?_.data.isEqual(R.data)?P!==b&&(r.track({type:3,doc:R}),L=!0):this.ga(_,R)||(r.track({type:2,doc:R}),L=!0,(u&&this.Aa(R,u)>0||d&&this.Aa(R,d)<0)&&(l=!0)):!_&&R?(r.track({type:0,doc:R}),L=!0):_&&!R&&(r.track({type:1,doc:_}),L=!0,(u||d)&&(l=!0)),L&&(R?(s=s.add(R),o=b?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{Ra:s,fa:r,ns:l,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort((f,y)=>function(R,P){const b=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re()}};return b(R)-b(P)}(f.type,y.type)||this.Aa(f.doc,y.doc)),this.pa(r),i=i!=null&&i;const l=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,d=u!==this.Ea;return this.Ea=u,s.length!==0||d?{snapshot:new Ui(this.query,e.Ra,o,s,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new bm,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ce(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new A_(r))}),this.da.forEach(r=>{e.has(r)||n.push(new x_(r))}),n}ba(e){this.Ta=e.Ts,this.da=ce();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ui.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class ex{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class tx{constructor(e){this.key=e,this.va=!1}}class nx{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Qi(l=>Gv(l),Dl),this.Ma=new Map,this.xa=new Set,this.Oa=new De(ee.comparator),this.Na=new Map,this.La=new vh,this.Ba={},this.ka=new Map,this.qa=Bi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function rx(t,e,n=!0){const r=b_(t);let i;const o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=await C_(r,e,n,!0),i}async function ix(t,e){const n=b_(t);await C_(n,e,!0,!1)}async function C_(t,e,n,r){const i=await IS(t.localStore,hn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let l;return r&&(l=await ox(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&__(t.remoteStore,i),l}async function ox(t,e,n,r,i){t.Ka=(y,_,R)=>async function(b,L,x,w){let C=L.view.ma(x);C.ns&&(C=await Rm(b.localStore,L.query,!1).then(({documents:T})=>L.view.ma(T,C)));const N=w&&w.targetChanges.get(L.targetId),B=w&&w.targetMismatches.get(L.targetId)!=null,$=L.view.applyChanges(C,b.isPrimaryClient,N,B);return Om(b,L.targetId,$.wa),$.snapshot}(t,y,_,R);const o=await Rm(t.localStore,e,!0),s=new ZS(e,o.Ts),l=s.ma(o.documents),u=As.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=s.applyChanges(l,t.isPrimaryClient,u);Om(t,n,d.wa);const f=new ex(e,n,s);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function sx(t,e,n){const r=se(t),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Dl(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await nd(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Eh(r.remoteStore,i.targetId),id(r,i.targetId)}).catch(Is)):(id(r,i.targetId),await nd(r.localStore,i.targetId,!0))}async function ax(t,e){const n=se(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Eh(n.remoteStore,r.targetId))}async function lx(t,e,n){const r=mx(t);try{const i=await function(s,l){const u=se(s),d=We.now(),f=l.reduce((R,P)=>R.add(P.key),ce());let y,_;return u.persistence.runTransaction("Locally write mutations","readwrite",R=>{let P=Pn(),b=ce();return u.cs.getEntries(R,f).next(L=>{P=L,P.forEach((x,w)=>{w.isValidDocument()||(b=b.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(R,P)).next(L=>{y=L;const x=[];for(const w of l){const C=CI(w,y.get(w.key).overlayedDocument);C!=null&&x.push(new vr(w.key,C,Fv(C.value.mapValue),tn.exists(!0)))}return u.mutationQueue.addMutationBatch(R,d,x,l)}).next(L=>{_=L;const x=L.applyToLocalDocumentSet(y,b);return u.documentOverlayCache.saveOverlays(R,L.batchId,x)})}).then(()=>({batchId:_.batchId,changes:Yv(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,l,u){let d=s.Ba[s.currentUser.toKey()];d||(d=new De(ge)),d=d.insert(l,u),s.Ba[s.currentUser.toKey()]=d}(r,i.batchId,n),await Rs(r,i.changes),await Ml(r.remoteStore)}catch(i){const o=Ah(i,"Failed to persist write");n.reject(o)}}async function R_(t,e){const n=se(t);try{const r=await wS(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Na.get(o);s&&(_e(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?_e(s.va):i.removedDocuments.size>0&&(_e(s.va),s.va=!1))}),await Rs(n,r,e)}catch(r){await Is(r)}}function Lm(t,e,n){const r=se(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((o,s)=>{const l=s.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(s,l){const u=se(s);u.onlineState=l;let d=!1;u.queries.forEach((f,y)=>{for(const _ of y.j_)_.Z_(l)&&(d=!0)}),d&&Ch(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ux(t,e,n){const r=se(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),o=i&&i.key;if(o){let s=new De(ee.comparator);s=s.insert(o,pt.newNoDocument(o,oe.min()));const l=ce().add(o),u=new Ll(oe.min(),new Map,new De(ge),s,l);await R_(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),Rh(r)}else await nd(r.localStore,e,!1).then(()=>id(r,e,n)).catch(Is)}async function cx(t,e){const n=se(t),r=e.batch.batchId;try{const i=await _S(n.localStore,e);P_(n,r,null),k_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Rs(n,i)}catch(i){await Is(i)}}async function dx(t,e,n){const r=se(t);try{const i=await function(s,l){const u=se(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,l).next(y=>(_e(y!==null),f=y.keys(),u.mutationQueue.removeMutationBatch(d,y))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);P_(r,e,n),k_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Rs(r,i)}catch(i){await Is(i)}}function k_(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function P_(t,e,n){const r=se(t);let i=r.Ba[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function id(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||D_(t,r)})}function D_(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Eh(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Rh(t))}function Om(t,e,n){for(const r of n)r instanceof x_?(t.La.addReference(r.key,e),hx(t,r)):r instanceof A_?(X("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||D_(t,r.key)):re()}function hx(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(X("SyncEngine","New document in limbo: "+n),t.xa.add(r),Rh(t))}function Rh(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ee(Se.fromString(e)),r=t.qa.next();t.Na.set(r,new tx(n)),t.Oa=t.Oa.insert(n,r),__(t.remoteStore,new Yn(hn(hh(n.path)),r,"TargetPurposeLimboResolution",sh.oe))}}async function Rs(t,e,n){const r=se(t),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{s.push(r.Ka(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const y=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,y?"current":"not-current")}if(d){i.push(d);const y=wh.Wi(u.targetId,d);o.push(y)}}))}),await Promise.all(s),r.Ca.d_(i),await async function(u,d){const f=se(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>F.forEach(d,_=>F.forEach(_.$i,R=>f.persistence.referenceDelegate.addReference(y,_.targetId,R)).next(()=>F.forEach(_.Ui,R=>f.persistence.referenceDelegate.removeReference(y,_.targetId,R)))))}catch(y){if(!Ss(y))throw y;X("LocalStore","Failed to update sequence numbers: "+y)}for(const y of d){const _=y.targetId;if(!y.fromCache){const R=f.os.get(_),P=R.snapshotVersion,b=R.withLastLimboFreeSnapshotVersion(P);f.os=f.os.insert(_,b)}}}(r.localStore,o))}async function fx(t,e){const n=se(t);if(!n.currentUser.isEqual(e)){X("SyncEngine","User change. New user:",e.toKey());const r=await m_(n.localStore,e);n.currentUser=e,function(o,s){o.ka.forEach(l=>{l.forEach(u=>{u.reject(new Y(j.CANCELLED,s))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Rs(n,r.hs)}}function px(t,e){const n=se(t),r=n.Na.get(e);if(r&&r.va)return ce().add(r.key);{let i=ce();const o=n.Ma.get(e);if(!o)return i;for(const s of o){const l=n.Fa.get(s);i=i.unionWith(l.view.Va)}return i}}function b_(t){const e=se(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=R_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=px.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ux.bind(null,e),e.Ca.d_=YS.bind(null,e.eventManager),e.Ca.$a=XS.bind(null,e.eventManager),e}function mx(t){const e=se(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cx.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dx.bind(null,e),e}class hl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ol(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return vS(this.persistence,new gS,e.initialUser,this.serializer)}Ga(e){return new fS(_h.Zr,this.serializer)}Wa(e){return new xS}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}hl.provider={build:()=>new hl};class od{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Lm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=fx.bind(null,this.syncEngine),await HS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new GS}()}createDatastore(e){const n=Ol(e.databaseInfo.databaseId),r=function(o){return new kS(o)}(e.databaseInfo);return function(o,s,l,u){return new bS(o,s,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,l){return new VS(r,i,o,s,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Lm(this.syncEngine,n,0),function(){return Pm.D()?new Pm:new AS}())}createSyncEngine(e,n){return function(i,o,s,l,u,d,f){const y=new nx(i,o,s,l,u,d);return f&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=se(i);X("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await Cs(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}od.provider={build:()=>new od};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):kn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ht.UNAUTHENTICATED,this.clientId=Ov.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{X("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(X("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ah(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Mu(t,e){t.asyncQueue.verifyOperationInProgress(),X("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await m_(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function jm(t,e){t.asyncQueue.verifyOperationInProgress();const n=await vx(t);X("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Dm(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Dm(e.remoteStore,i)),t._onlineComponents=e}async function vx(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X("FirestoreClient","Using user provided OfflineComponentProvider");try{await Mu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===j.FAILED_PRECONDITION||i.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Oi("Error using user provided cache. Falling back to memory cache: "+n),await Mu(t,new hl)}}else X("FirestoreClient","Using default OfflineComponentProvider"),await Mu(t,new hl);return t._offlineComponents}async function N_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X("FirestoreClient","Using user provided OnlineComponentProvider"),await jm(t,t._uninitializedComponentsProvider._online)):(X("FirestoreClient","Using default OnlineComponentProvider"),await jm(t,new od))),t._onlineComponents}function _x(t){return N_(t).then(e=>e.syncEngine)}async function Mm(t){const e=await N_(t),n=e.eventManager;return n.onListen=rx.bind(null,e.syncEngine),n.onUnlisten=sx.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ix.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ax.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L_(t,e,n){if(!n)throw new Y(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function wx(t,e,n,r){if(e===!0&&r===!0)throw new Y(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Bm(t){if(!ee.isDocumentKey(t))throw new Y(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Um(t){if(ee.isDocumentKey(t))throw new Y(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Fl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":re()}function lr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Fl(t);throw new Y(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Y(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=V_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Y(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Y(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Y(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bl{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zm({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zm(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new O1;switch(r.type){case"firstParty":return new B1(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Fm.get(n);r&&(X("ComponentProvider","Removing Datastore"),Fm.delete(n),r.terminate())}(this),Promise.resolve()}}function Ex(t,e,n,r={}){var i;const o=(t=lr(t,Bl))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Oi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=ht.MOCK_USER;else{l=vv(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new Y(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ht(d)}t._authCredentials=new j1(new Lv(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ei(this.firestore,e,this._query)}}class Pt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ur(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pt(this.firestore,e,this._key)}}class ur extends ei{constructor(e,n,r){super(e,n,hh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pt(this.firestore,null,new ee(e))}withConverter(e){return new ur(this.firestore,e,this._path)}}function $m(t,e,...n){if(t=Et(t),L_("collection","path",e),t instanceof Bl){const r=Se.fromString(e,...n);return Um(r),new ur(t,null,r)}{if(!(t instanceof Pt||t instanceof ur))throw new Y(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return Um(r),new ur(t.firestore,null,r)}}function sn(t,e,...n){if(t=Et(t),arguments.length===1&&(e=Ov.newId()),L_("doc","path",e),t instanceof Bl){const r=Se.fromString(e,...n);return Bm(r),new Pt(t,null,new ee(r))}{if(!(t instanceof Pt||t instanceof ur))throw new Y(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return Bm(r),new Pt(t.firestore,t instanceof ur?t.converter:null,new ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new y_(this,"async_queue_retry"),this.Vu=()=>{const r=ju();r&&X("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=ju();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=ju();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Mr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ss(e))throw e;X("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(s){let l=s.message||"";return s.stack&&(l=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),l}(r);throw kn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=xh.createAndSchedule(this,e,n,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&re()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Hm(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}class zi extends Bl{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Wm,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Wm(e),this._firestoreClient=void 0,await e}}}function Tx(t,e){const n=typeof t=="object"?t:Av(),r=typeof t=="string"?t:"(default)",i=Iv(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=gv("firestore");o&&Ex(i,...o)}return i}function O_(t){if(t._terminated)throw new Y(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Ix(t),t._firestoreClient}function Ix(t){var e,n,r;const i=t._freezeSettings(),o=function(l,u,d,f){return new Z1(l,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,V_(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new yx(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $i(ot.fromBase64String(e))}catch(n){throw new Y(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new $i(ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx=/^__.*__$/;class xx{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new vr(e,this.data,this.fieldMask,n,this.fieldTransforms):new xs(e,this.data,n,this.fieldTransforms)}}class j_{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new vr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function M_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re()}}class bh{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new bh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return fl(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(M_(this.Cu)&&Sx.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Ax{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ol(e)}Qu(e,n,r,i=!1){return new bh({Cu:e,methodName:n,qu:r,path:tt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nh(t){const e=t._freezeSettings(),n=Ol(t._databaseId);return new Ax(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Cx(t,e,n,r,i,o={}){const s=t.Qu(o.merge||o.mergeFields?2:0,e,n,i);Vh("Data must be an object, but it was:",s,r);const l=F_(r,s);let u,d;if(o.merge)u=new Lt(s.fieldMask),d=s.fieldTransforms;else if(o.mergeFields){const f=[];for(const y of o.mergeFields){const _=sd(e,y,n);if(!s.contains(_))throw new Y(j.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);U_(f,_)||f.push(_)}u=new Lt(f),d=s.fieldTransforms.filter(y=>u.covers(y.field))}else u=null,d=s.fieldTransforms;return new xx(new xt(l),u,d)}class zl extends kh{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zl}}function Rx(t,e,n,r){const i=t.Qu(1,e,n);Vh("Data must be an object, but it was:",i,r);const o=[],s=xt.empty();Jr(r,(u,d)=>{const f=Lh(e,u,n);d=Et(d);const y=i.Nu(f);if(d instanceof zl)o.push(f);else{const _=ks(d,y);_!=null&&(o.push(f),s.set(f,_))}});const l=new Lt(o);return new j_(s,l,i.fieldTransforms)}function kx(t,e,n,r,i,o){const s=t.Qu(1,e,n),l=[sd(e,r,n)],u=[i];if(o.length%2!=0)throw new Y(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)l.push(sd(e,o[_])),u.push(o[_+1]);const d=[],f=xt.empty();for(let _=l.length-1;_>=0;--_)if(!U_(d,l[_])){const R=l[_];let P=u[_];P=Et(P);const b=s.Nu(R);if(P instanceof zl)d.push(R);else{const L=ks(P,b);L!=null&&(d.push(R),f.set(R,L))}}const y=new Lt(d);return new j_(f,y,s.fieldTransforms)}function Px(t,e,n,r=!1){return ks(n,t.Qu(r?4:3,e))}function ks(t,e){if(B_(t=Et(t)))return Vh("Unsupported field value:",e,t),F_(t,e);if(t instanceof kh)return function(r,i){if(!M_(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const l of r){let u=ks(l,i.Lu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=Et(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return EI(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=We.fromDate(r);return{timestampValue:cl(i.serializer,o)}}if(r instanceof We){const o=new We(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:cl(i.serializer,o)}}if(r instanceof Ph)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $i)return{bytesValue:l_(i.serializer,r._byteString)};if(r instanceof Pt){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:yh(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Dh)return function(s,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return fh(l.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Fl(r)}`)}(t,e)}function F_(t,e){const n={};return jv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jr(t,(r,i)=>{const o=ks(i,e.Mu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function B_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof We||t instanceof Ph||t instanceof $i||t instanceof Pt||t instanceof kh||t instanceof Dh)}function Vh(t,e,n){if(!B_(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Fl(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function sd(t,e,n){if((e=Et(e))instanceof Ul)return e._internalPath;if(typeof e=="string")return Lh(t,e);throw fl("Field path arguments must be of type string or ",t,!1,void 0,n)}const Dx=new RegExp("[~\\*/\\[\\]]");function Lh(t,e,n){if(e.search(Dx)>=0)throw fl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ul(...e.split("."))._internalPath}catch{throw fl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function fl(t,e,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new Y(j.INVALID_ARGUMENT,l+t+u)}function U_(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new bx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Oh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class bx extends z_{data(){return super.data()}}function Oh(t,e){return typeof e=="string"?Lh(t,e):e instanceof Ul?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jh{}class $_ extends jh{}function Vx(t,e,...n){let r=[];e instanceof jh&&r.push(e),r=r.concat(n),function(o){const s=o.filter(u=>u instanceof Fh).length,l=o.filter(u=>u instanceof Mh).length;if(s>1||s>0&&l>0)throw new Y(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Mh extends $_{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Mh(e,n,r)}_apply(e){const n=this._parse(e);return W_(e._query,n),new ei(e.firestore,e.converter,Yc(e._query,n))}_parse(e){const n=Nh(e.firestore);return function(o,s,l,u,d,f,y){let _;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Y(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Gm(y,f);const R=[];for(const P of y)R.push(qm(u,o,P));_={arrayValue:{values:R}}}else _=qm(u,o,y)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Gm(y,f),_=Px(l,s,y,f==="in"||f==="not-in");return Ue.create(d,f,_)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Fh extends jh{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Fh(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:rn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i;const l=o.getFlattenedFilters();for(const u of l)W_(s,u),s=Yc(s,u)}(e._query,n),new ei(e.firestore,e.converter,Yc(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Bh extends $_{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Bh(e,n)}_apply(e){const n=function(i,o,s){if(i.startAt!==null)throw new Y(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Y(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ms(o,s)}(e._query,this._field,this._direction);return new ei(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new Ki(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Lx(t,e="asc"){const n=e,r=Oh("orderBy",t);return Bh._create(r,n)}function qm(t,e,n){if(typeof(n=Et(n))=="string"){if(n==="")throw new Y(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qv(e)&&n.indexOf("/")!==-1)throw new Y(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Se.fromString(n));if(!ee.isDocumentKey(r))throw new Y(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return dm(t,new ee(r))}if(n instanceof Pt)return dm(t,n._key);throw new Y(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fl(n)}.`)}function Gm(t,e){if(!Array.isArray(t)||t.length===0)throw new Y(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function W_(t,e){const n=function(i,o){for(const s of i)for(const l of s.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Y(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Ox{convertValue(e,n="none"){switch(Gr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(qr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw re()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Jr(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>je(s.doubleValue));return new Dh(o)}convertGeoPoint(e){return new Ph(je(e.latitude),je(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=lh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(hs(e));default:return null}}convertTimestamp(e){const n=fr(e);return new We(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Se.fromString(e);_e(p_(r));const i=new fs(r.get(1),r.get(3)),o=new ee(r.popFirst(5));return i.isEqual(n)||kn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jx(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class H_ extends z_{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Na(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Oh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Na extends H_{data(e={}){return super.data(e)}}class Mx{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Do(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Na(this._firestore,this._userDataWriter,r.key,r,new Do(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(l=>{const u=new Na(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Do(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>o||l.type!==3).map(l=>{const u=new Na(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Do(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,f=-1;return l.type!==0&&(d=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),l.type!==1&&(s=s.add(l.doc),f=s.indexOf(l.doc.key)),{type:Fx(l.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Fx(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re()}}class q_ extends Ox{constructor(e){super(),this.firestore=e}convertBytes(e){return new $i(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pt(this.firestore,null,n)}}function zn(t,e,n,...r){t=lr(t,Pt);const i=lr(t.firestore,zi),o=Nh(i);let s;return s=typeof(e=Et(e))=="string"||e instanceof Ul?kx(o,"updateDoc",t._key,e,n,r):Rx(o,"updateDoc",t._key,e),Uh(i,[s.toMutation(t._key,tn.exists(!0))])}function Bx(t){return Uh(lr(t.firestore,zi),[new ph(t._key,tn.none())])}function Ux(t,e){const n=lr(t.firestore,zi),r=sn(t),i=jx(t.converter,e);return Uh(n,[Cx(Nh(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,tn.exists(!1))]).then(()=>r)}function zx(t,...e){var n,r,i;t=Et(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Hm(e[s])||(o=e[s],s++);const l={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Hm(e[s])){const y=e[s];e[s]=(n=y.next)===null||n===void 0?void 0:n.bind(y),e[s+1]=(r=y.error)===null||r===void 0?void 0:r.bind(y),e[s+2]=(i=y.complete)===null||i===void 0?void 0:i.bind(y)}let u,d,f;if(t instanceof Pt)d=lr(t.firestore,zi),f=hh(t._key.path),u={next:y=>{e[s]&&e[s]($x(d,t,y))},error:e[s+1],complete:e[s+2]};else{const y=lr(t,ei);d=lr(y.firestore,zi),f=y._query;const _=new q_(d);u={next:R=>{e[s]&&e[s](new Mx(d,_,y,R))},error:e[s+1],complete:e[s+2]},Nx(t._query)}return function(_,R,P,b){const L=new gx(b),x=new JS(R,L,P);return _.asyncQueue.enqueueAndForget(async()=>KS(await Mm(_),x)),()=>{L.Za(),_.asyncQueue.enqueueAndForget(async()=>QS(await Mm(_),x))}}(O_(d),f,l,u)}function Uh(t,e){return function(r,i){const o=new Mr;return r.asyncQueue.enqueueAndForget(async()=>lx(await _x(r),i,o)),o.promise}(O_(t),e)}function $x(t,e,n){const r=n.docs.get(e._key),i=new q_(t);return new H_(t,i,e._key,r,new Do(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Gi=i})(Sv),us(new Li("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),l=new zi(new M1(r.getProvider("auth-internal")),new z1(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Y(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fs(d.options.projectId,f)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),ar(sm,"4.7.3",e),ar(sm,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_="firebasestorage.googleapis.com",K_="storageBucket",Wx=2*60*1e3,Hx=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le extends Xr{constructor(e,n,r=0){super(Fu(e),`Firebase Storage: ${n} (${Fu(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Le.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Fu(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ve;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ve||(Ve={}));function Fu(t){return"storage/"+t}function zh(){const t="An unknown error occurred, please check the error payload for server response.";return new Le(Ve.UNKNOWN,t)}function qx(t){return new Le(Ve.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Gx(t){return new Le(Ve.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Kx(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Le(Ve.UNAUTHENTICATED,t)}function Qx(){return new Le(Ve.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Yx(t){return new Le(Ve.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Xx(){return new Le(Ve.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Jx(){return new Le(Ve.CANCELED,"User canceled the upload/download.")}function Zx(t){return new Le(Ve.INVALID_URL,"Invalid URL '"+t+"'.")}function eA(t){return new Le(Ve.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function tA(){return new Le(Ve.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+K_+"' property when initializing the app?")}function nA(){return new Le(Ve.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function rA(){return new Le(Ve.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function iA(t){return new Le(Ve.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function ad(t){return new Le(Ve.INVALID_ARGUMENT,t)}function Q_(){return new Le(Ve.APP_DELETED,"The Firebase app was deleted.")}function oA(t){return new Le(Ve.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ho(t,e){return new Le(Ve.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Io(t){throw new Le(Ve.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Ot.makeFromUrl(e,n)}catch{return new Ot(e,"")}if(r.path==="")return r;throw eA(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(N){N.path.charAt(N.path.length-1)==="/"&&(N.path_=N.path_.slice(0,-1))}const s="(/(.*))?$",l=new RegExp("^gs://"+i+s,"i"),u={bucket:1,path:3};function d(N){N.path_=decodeURIComponent(N.path)}const f="v[A-Za-z0-9_]+",y=n.replace(/[.]/g,"\\."),_="(/([^?#]*).*)?$",R=new RegExp(`^https?://${y}/${f}/b/${i}/o${_}`,"i"),P={bucket:1,path:3},b=n===G_?"(?:storage.googleapis.com|storage.cloud.google.com)":n,L="([^?#]*)",x=new RegExp(`^https?://${b}/${i}/${L}`,"i"),C=[{regex:l,indices:u,postModify:o},{regex:R,indices:P,postModify:d},{regex:x,indices:{bucket:1,path:2},postModify:d}];for(let N=0;N<C.length;N++){const B=C[N],$=B.regex.exec(e);if($){const T=$[B.indices.bucket];let v=$[B.indices.path];v||(v=""),r=new Ot(T,v),B.postModify(r);break}}if(r==null)throw Zx(e);return r}}class sA{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(t,e,n){let r=1,i=null,o=null,s=!1,l=0;function u(){return l===2}let d=!1;function f(...L){d||(d=!0,e.apply(null,L))}function y(L){i=setTimeout(()=>{i=null,t(R,u())},L)}function _(){o&&clearTimeout(o)}function R(L,...x){if(d){_();return}if(L){_(),f.call(null,L,...x);return}if(u()||s){_(),f.call(null,L,...x);return}r<64&&(r*=2);let C;l===1?(l=2,C=0):C=(r+Math.random())*1e3,y(C)}let P=!1;function b(L){P||(P=!0,_(),!d&&(i!==null?(L||(l=2),clearTimeout(i),y(0)):L||(l=1)))}return y(0),o=setTimeout(()=>{s=!0,b(!0)},n),b}function lA(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(t){return t!==void 0}function cA(t){return typeof t=="object"&&!Array.isArray(t)}function $h(t){return typeof t=="string"||t instanceof String}function Km(t){return Wh()&&t instanceof Blob}function Wh(){return typeof Blob<"u"}function Qm(t,e,n,r){if(r<e)throw ad(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw ad(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $l(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Y_(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Fr;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Fr||(Fr={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e,n,r,i,o,s,l,u,d,f,y,_=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=l,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=y,this.retry=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,P)=>{this.resolve_=R,this.reject_=P,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new pa(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const s=l=>{const u=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const l=o.getErrorCode()===Fr.NO_ERROR,u=o.getStatus();if(!l||dA(u,this.additionalRetryCodes_)&&this.retry){const f=o.getErrorCode()===Fr.ABORT;r(!1,new pa(!1,null,f));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new pa(d,o))})},n=(r,i)=>{const o=this.resolve_,s=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());uA(u)?o(u):o()}catch(u){s(u)}else if(l!==null){const u=zh();u.serverResponse=l.getErrorText(),this.errorCallback_?s(this.errorCallback_(l,u)):s(u)}else if(i.canceled){const u=this.appDelete_?Q_():Jx();s(u)}else{const u=Xx();s(u)}};this.canceled_?n(!1,new pa(!1,null,!0)):this.backoffId_=aA(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&lA(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class pa{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function fA(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function pA(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function mA(t,e){e&&(t["X-Firebase-GMPID"]=e)}function gA(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function yA(t,e,n,r,i,o,s=!0){const l=Y_(t.urlParams),u=t.url+l,d=Object.assign({},t.headers);return mA(d,e),fA(d,n),pA(d,o),gA(d,r),new hA(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function _A(...t){const e=vA();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Wh())return new Blob(t);throw new Le(Ve.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function wA(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(t){if(typeof atob>"u")throw iA("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Bu{constructor(e,n){this.data=e,this.contentType=n||null}}function TA(t,e){switch(t){case un.RAW:return new Bu(X_(e));case un.BASE64:case un.BASE64URL:return new Bu(J_(t,e));case un.DATA_URL:return new Bu(SA(e),xA(e))}throw zh()}function X_(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=r,s=t.charCodeAt(++n);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function IA(t){let e;try{e=decodeURIComponent(t)}catch{throw Ho(un.DATA_URL,"Malformed data URL.")}return X_(e)}function J_(t,e){switch(t){case un.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw Ho(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case un.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw Ho(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=EA(e)}catch(i){throw i.message.includes("polyfill")?i:Ho(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class Z_{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Ho(un.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=AA(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function SA(t){const e=new Z_(t);return e.base64?J_(un.BASE64,e.rest):IA(e.rest)}function xA(t){return new Z_(t).contentType}function AA(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e,n){let r=0,i="";Km(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(Km(this.data_)){const r=this.data_,i=wA(r,e,n);return i===null?null:new Gn(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Gn(r,!0)}}static getBlob(...e){if(Wh()){const n=e.map(r=>r instanceof Gn?r.data_:r);return new Gn(_A.apply(null,n))}else{const n=e.map(s=>$h(s)?TA(un.RAW,s).data:s.data_);let r=0;n.forEach(s=>{r+=s.byteLength});const i=new Uint8Array(r);let o=0;return n.forEach(s=>{for(let l=0;l<s.length;l++)i[o++]=s[l]}),new Gn(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e0(t){let e;try{e=JSON.parse(t)}catch{return null}return cA(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CA(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function RA(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function t0(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(t,e){return e}class vt{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||kA}}let ma=null;function PA(t){return!$h(t)||t.length<2?t:t0(t)}function n0(){if(ma)return ma;const t=[];t.push(new vt("bucket")),t.push(new vt("generation")),t.push(new vt("metageneration")),t.push(new vt("name","fullPath",!0));function e(o,s){return PA(s)}const n=new vt("name");n.xform=e,t.push(n);function r(o,s){return s!==void 0?Number(s):s}const i=new vt("size");return i.xform=r,t.push(i),t.push(new vt("timeCreated")),t.push(new vt("updated")),t.push(new vt("md5Hash",null,!0)),t.push(new vt("cacheControl",null,!0)),t.push(new vt("contentDisposition",null,!0)),t.push(new vt("contentEncoding",null,!0)),t.push(new vt("contentLanguage",null,!0)),t.push(new vt("contentType",null,!0)),t.push(new vt("metadata","customMetadata",!0)),ma=t,ma}function DA(t,e){function n(){const r=t.bucket,i=t.fullPath,o=new Ot(r,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function bA(t,e,n){const r={};r.type="file";const i=n.length;for(let o=0;o<i;o++){const s=n[o];r[s.local]=s.xform(r,e[s.server])}return DA(r,t),r}function r0(t,e,n){const r=e0(e);return r===null?null:bA(t,r,n)}function NA(t,e,n,r){const i=e0(e);if(i===null||!$h(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const s=encodeURIComponent;return o.split(",").map(d=>{const f=t.bucket,y=t.fullPath,_="/b/"+s(f)+"/o/"+s(y),R=$l(_,n,r),P=Y_({alt:"media",token:d});return R+P})[0]}function VA(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class Hh{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(t){if(!t)throw zh()}function LA(t,e){function n(r,i){const o=r0(t,i,e);return i0(o!==null),o}return n}function OA(t,e){function n(r,i){const o=r0(t,i,e);return i0(o!==null),NA(o,i,t.host,t._protocol)}return n}function o0(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=Qx():i=Kx():n.getStatus()===402?i=Gx(t.bucket):n.getStatus()===403?i=Yx(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function s0(t){const e=o0(t);function n(r,i){let o=e(r,i);return r.getStatus()===404&&(o=qx(t.path)),o.serverResponse=i.serverResponse,o}return n}function jA(t,e,n){const r=e.fullServerUrl(),i=$l(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,l=new Hh(i,o,OA(t,n),s);return l.errorHandler=s0(e),l}function MA(t,e){const n=e.fullServerUrl(),r=$l(n,t.host,t._protocol),i="DELETE",o=t.maxOperationRetryTime;function s(u,d){}const l=new Hh(r,i,s,o);return l.successCodes=[200,204],l.errorHandler=s0(e),l}function FA(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function BA(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=FA(null,e)),r}function UA(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function l(){let C="";for(let N=0;N<2;N++)C=C+Math.random().toString().slice(2);return C}const u=l();s["Content-Type"]="multipart/related; boundary="+u;const d=BA(e,r,i),f=VA(d,n),y="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,_=`\r
--`+u+"--",R=Gn.getBlob(y,r,_);if(R===null)throw nA();const P={name:d.fullPath},b=$l(o,t.host,t._protocol),L="POST",x=t.maxUploadRetryTime,w=new Hh(b,L,LA(t,n),x);return w.urlParams=P,w.headers=s,w.body=R.uploadData(),w.errorHandler=o0(e),w}class zA{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Fr.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Fr.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Fr.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Io("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Io("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Io("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Io("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Io("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class $A extends zA{initXhr(){this.xhr_.responseType="text"}}function qh(){return new $A}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,n){this._service=e,n instanceof Ot?this._location=n:this._location=Ot.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Kr(e,n)}get root(){const e=new Ot(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return t0(this._location.path)}get storage(){return this._service}get parent(){const e=CA(this._location.path);if(e===null)return null;const n=new Ot(this._location.bucket,e);return new Kr(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw oA(e)}}function WA(t,e,n){t._throwIfRoot("uploadBytes");const r=UA(t.storage,t._location,n0(),new Gn(e,!0),n);return t.storage.makeRequestWithTokens(r,qh).then(i=>({metadata:i,ref:t}))}function HA(t){t._throwIfRoot("getDownloadURL");const e=jA(t.storage,t._location,n0());return t.storage.makeRequestWithTokens(e,qh).then(n=>{if(n===null)throw rA();return n})}function qA(t){t._throwIfRoot("deleteObject");const e=MA(t.storage,t._location);return t.storage.makeRequestWithTokens(e,qh)}function GA(t,e){const n=RA(t._location.path,e),r=new Ot(t._location.bucket,n);return new Kr(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(t){return/^[A-Za-z]+:\/\//.test(t)}function QA(t,e){return new Kr(t,e)}function a0(t,e){if(t instanceof Gh){const n=t;if(n._bucket==null)throw tA();const r=new Kr(n,n._bucket);return e!=null?a0(r,e):r}else return e!==void 0?GA(t,e):t}function YA(t,e){if(e&&KA(e)){if(t instanceof Gh)return QA(t,e);throw ad("To use ref(service, url), the first argument must be a Storage instance.")}else return a0(t,e)}function Ym(t,e){const n=e==null?void 0:e[K_];return n==null?null:Ot.makeFromBucketSpec(n,t)}function XA(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:vv(i,t.app.options.projectId))}class Gh{constructor(e,n,r,i,o){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=G_,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Wx,this._maxUploadRetryTime=Hx,this._requests=new Set,i!=null?this._bucket=Ot.makeFromBucketSpec(i,this._host):this._bucket=Ym(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ot.makeFromBucketSpec(this._url,e):this._bucket=Ym(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Qm("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Qm("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Kr(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new sA(Q_());{const s=yA(e,this._appId,r,i,n,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const Xm="@firebase/storage",Jm="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0="storage";function JA(t,e,n){return t=Et(t),WA(t,e,n)}function ZA(t){return t=Et(t),HA(t)}function Zm(t){return t=Et(t),qA(t)}function Uu(t,e){return t=Et(t),YA(t,e)}function eC(t=Av(),e){t=Et(t);const r=Iv(t,l0).getImmediate({identifier:e}),i=gv("storage");return i&&tC(r,...i),r}function tC(t,e,n,r={}){XA(t,e,n,r)}function nC(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Gh(n,r,i,e,Sv)}function rC(){us(new Li(l0,nC,"PUBLIC").setMultipleInstances(!0)),ar(Xm,Jm,""),ar(Xm,Jm,"esm2017")}rC();const iC={apiKey:"AIzaSyA0ZCgyjVAqKBDbR9-iiUb8bVyH7UijiDo",authDomain:"bever-family-recipes.firebaseapp.com",projectId:"bever-family-recipes",storageBucket:"bever-family-recipes.firebasestorage.app",messagingSenderId:"609429863508",appId:"1:609429863508:web:aee0811bd4c8757d2501c1"},u0=xv(iC),Qt=Tx(u0),zu=eC(u0),eg=(t,e)=>{try{const n=localStorage.getItem(t);return n?JSON.parse(n):e}catch{return e}},$u=(t,e)=>{try{localStorage.setItem(t,JSON.stringify(e))}catch{}},oC="bluestar",sC=[{id:"all",name:"All Recipes",icon:""},{id:"breakfast",name:"Breakfast",icon:""},{id:"main-course",name:"Main Course",icon:""},{id:"side-dish",name:"Sides",icon:""},{id:"dessert",name:"Desserts",icon:""},{id:"pasta",name:"Pasta",icon:""},{id:"soup",name:"Soups",icon:""},{id:"salad",name:"Salads",icon:""},{id:"appetizer",name:"Appetizers",icon:""},{id:"bread",name:"Breads",icon:""},{id:"beverage",name:"Beverages",icon:""},{id:"other",name:"Other",icon:""}],aC=[{id:"newest",name:"Newest First"},{id:"oldest",name:"Oldest First"},{id:"a-z",name:"A  Z"},{id:"z-a",name:"Z  A"},{id:"category",name:"By Category"}],lC=["cup","cups","Tbsp","tsp","oz","lb","g","kg","ml","liter","pint","quart","gallon","piece","slice","clove","can","package","stick","pinch","dash","sprig","large","medium","small","whole","bunch","head"],uC={id:"",title:"",category:"",author:"",authorIsFamily:!0,servings:"",prepTime:"",cookTime:"",ingredients:[{qty:"",unit:"",ingredient:""}],instructions:[""],notes:"",story:"",imageUrl:"",imageCaption:"",handwrittenImageUrl:"",handwrittenImageCaption:"",dateAdded:"",trashedAt:null,comments:[],madeIt:[]},ld={tablespoons:"Tbsp",tablespoon:"Tbsp",tbsps:"Tbsp",tbs:"Tbsp",T:"Tbsp",tbsp:"Tbsp",teaspoons:"tsp",teaspoon:"tsp",tsps:"tsp",t:"tsp","t.":"tsp",cups:"cup",c:"cup",C:"cup","c.":"cup",ounces:"oz",ounce:"oz",ozs:"oz","fluid ounces":"fl oz","fluid ounce":"fl oz","fl. oz.":"fl oz","fl. oz":"fl oz",pints:"pint",pt:"pint",pts:"pint",quarts:"quart",qt:"quart",qts:"quart",gallons:"gallon",gal:"gallon",gals:"gallon",milliliters:"ml",milliliter:"ml",mls:"ml",mL:"ml",liters:"liter",litre:"liter",litres:"liter",l:"liter",L:"liter",pounds:"lb",pound:"lb",lbs:"lb","lb.":"lb",grams:"g",gram:"g",gr:"g",kilograms:"kg",kilogram:"kg",kgs:"kg",pieces:"piece",pcs:"piece",pc:"piece",slices:"slice",cloves:"clove",heads:"head",bunches:"bunch",cans:"can",packages:"package",pkgs:"package",pkg:"package",sticks:"stick",pinches:"pinch",dashes:"dash",sprigs:"sprig",stalks:"stalk",leaves:"leaf",large:"large",lg:"large",medium:"medium",med:"medium",small:"small",sm:"small"},cC=t=>{if(!t)return"";const e=t.trim().toLowerCase();return ld[e]||ld[t.trim()]||t.trim()},ga={"":.5,"":.333,"":.667,"":.25,"":.75,"":.2,"":.4,"":.6,"":.8,"":.167,"":.833,"":.125,"":.375,"":.625,"":.875,"1/2":.5,"1/3":.333,"2/3":.667,"1/4":.25,"3/4":.75,"1/8":.125,"3/8":.375,"5/8":.625,"7/8":.875},dC=["tablespoons?","tbsps?","tbs","T","teaspoons?","tsps?","t","cups?","c","ounces?","ozs?","oz","fluid ounces?","fl\\.? ?oz\\.?","pints?","pts?","quarts?","qts?","gallons?","gals?","milliliters?","mls?","mL","liters?","litres?","L","l","pounds?","lbs?\\.?","grams?","g","gr","kilograms?","kgs?","kg","pieces?","pcs?","pc","slices?","cloves?","heads?","bunches?","bunch","cans?","packages?","pkgs?","pkg","sticks?","pinch(?:es)?","dash(?:es)?","sprigs?","stalks?","leaves?","leaf","large","lg","medium","med","small","sm"].join("|"),tg=t=>{if(!t||typeof t!="string")return{quantity:"",unit:"",item:t||""};let n=t.trim(),r="",i="",o="";const s=n.match(/^(\d+)\s+([1-9]\/[1-9])\s*/),l=n.match(/^(\d+)([\u00BC-\u00BE\u2150-\u215E])\s*/),u=n.match(/^([1-9]\/[1-9])\s*/),d=n.match(/^([\u00BC-\u00BE\u2150-\u215E])\s*/),f=n.match(/^(\d+(?:\.\d+)?)\s*/);if(s){const R=parseFloat(s[1]),P=ga[s[2]]||0;r=R+P,n=n.slice(s[0].length).trim()}else if(l){const R=parseFloat(l[1]),P=ga[l[2]]||0;r=R+P,n=n.slice(l[0].length).trim()}else u?(r=ga[u[1]]||u[1],n=n.slice(u[0].length).trim()):d?(r=ga[d[1]]||d[1],n=n.slice(d[0].length).trim()):f&&(r=parseFloat(f[1]),n=n.slice(f[0].length).trim());const y=new RegExp(`^(${dC})\\.?\\s*`,"i"),_=n.match(y);return _&&(i=cC(_[1]),n=n.slice(_[0].length).trim()),o=n,{quantity:r.toString(),unit:i,item:o}},hC=[/(?:bake|cook|roast|simmer|boil|fry|saut|grill|broil|steam)\s+(?:for\s+)?(?:about\s+)?(\d+)\s*(?:to|-)\s*(\d+)\s*(minutes?|mins?|hours?|hrs?)/i,/(?:bake|cook|roast|simmer|boil|fry|saut|grill|broil|steam)\s+(?:for\s+)?(?:about\s+)?(\d+)\s*(minutes?|mins?|hours?|hrs?)/i,/(\d+)\s*(?:to|-)\s*(\d+)\s*(minutes?|mins?|hours?|hrs?)\s+(?:or\s+)?(?:until)/i,/(\d+)\s*(minutes?|mins?|hours?|hrs?)\s+(?:or\s+)?(?:until)/i,/(?:for\s+)(\d+)\s*(?:to|-)\s*(\d+)\s*(minutes?|mins?|hours?|hrs?)/i,/(?:for\s+)(\d+)\s*(minutes?|mins?|hours?|hrs?)/i],fC=t=>{if(!t||!Array.isArray(t))return null;const e=t.join(" ");for(const n of hC){const r=e.match(n);if(r){const i=/hours?|hrs?/i.test(r[r.length-1]);if(r[2]&&!isNaN(r[2])&&r[1]&&!isNaN(r[1])){const o=Math.round((parseInt(r[1])+parseInt(r[2]))/2);return i?`${o} hours`:`${o} min`}else if(r[1]&&!isNaN(r[1])){const o=parseInt(r[1]);return i?`${o} hour${o>1?"s":""}`:`${o} min`}}}return null},c0=(t,e)=>t?e!==!1?`From ${t}'s Kitchen`:`Recipe from ${t}`:"",pC=(t,e)=>{if(!t)return t;const n=t.match(/^([\d.\/]+)/);if(!n)return t;let r=n[1];if(r.includes("/")){const[s,l]=r.split("/").map(Number);r=s/l}else r=parseFloat(r);if(isNaN(r))return t;const i=r*e;let o;return i===Math.floor(i)?o=i.toString():Math.abs(i-.25)<.01?o="1/4":Math.abs(i-.333)<.01?o="1/3":Math.abs(i-.5)<.01?o="1/2":Math.abs(i-.667)<.01?o="2/3":Math.abs(i-.75)<.01?o="3/4":o=i.toFixed(2).replace(/\.?0+$/,""),t.replace(n[1],o)},mC=t=>{if(!t&&t!==0)return"";const e=parseFloat(t);if(isNaN(e))return t.toString();if(e===Math.floor(e))return e.toString();const n=Math.floor(e),r=e-n,i=[{val:.125,str:""},{val:.167,str:""},{val:.2,str:""},{val:.25,str:""},{val:.333,str:""},{val:.375,str:""},{val:.4,str:""},{val:.5,str:""},{val:.6,str:""},{val:.625,str:""},{val:.667,str:""},{val:.75,str:""},{val:.8,str:""},{val:.833,str:""},{val:.875,str:""}];for(const o of i)if(Math.abs(r-o.val)<.02)return n>0?`${n} ${o.str}`:o.str;return e.toFixed(2).replace(/\.?0+$/,"")},Wu=t=>t?mC(t):"",Hu=async(t,e)=>{const n=await fetch("/.netlify/functions/recipe-ai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:t,...e})});if(!n.ok){const r=await n.json();throw new Error(r.error||"AI request failed")}return n.json()};function gC(){const[t,e]=te.useState([]),[n]=te.useState(sC),[r,i]=te.useState("home"),[o,s]=te.useState(null),[l,u]=te.useState("all"),[d,f]=te.useState("all"),[y,_]=te.useState(""),[R,P]=te.useState("newest"),[b,L]=te.useState(!1),[x,w]=te.useState(null),[C,N]=te.useState(!0),[B,$]=te.useState(()=>eg("bfr-favorites",[])),[T,v]=te.useState(!1),[E,I]=te.useState(!1),[S,k]=te.useState(()=>eg("bfr-family-auth",!1)),[A,Ce]=te.useState(!1),[Ye,Dt]=te.useState(""),He=["all",...new Set(t.filter(O=>O.authorIsFamily!==!1&&O.author&&!O.trashedAt).map(O=>O.author))],H=t.filter(O=>!O.trashedAt),K=t.filter(O=>O.trashedAt),q=()=>{Ye.toLowerCase()===oC.toLowerCase()?(k(!0),$u("bfr-family-auth",!0),Ce(!1),Dt(""),ae("Welcome to the family kitchen!")):ae("Incorrect family code","error")},ie=()=>{k(!1),$u("bfr-family-auth",!1),ae("Logged out")};te.useEffect(()=>{const O=Vx($m(Qt,"recipes"),Lx("dateAdded","desc")),M=zx(O,G=>{const Z=G.docs.map(he=>({id:he.id,...he.data()}));e(Z),N(!1)},G=>{console.error("Firestore error:",G),N(!1)});return()=>M()},[]),te.useEffect(()=>{const O=window.location.hash;if(O&&O.startsWith("#recipe-")){const M=O.replace("#recipe-",""),G=t.find(Z=>Z.id===M);G&&(s(G),i("view"))}},[t]),te.useEffect(()=>{$u("bfr-favorites",B)},[B]);const le=O=>{$(M=>M.includes(O)?M.filter(G=>G!==O):[...M,O])},ne=(O,M=null)=>{O!=="home"&&(_(""),f("all")),s(M),i(O),I(!1),O==="view"&&M?window.history.pushState(null,"",`#recipe-${M.id}`):window.history.pushState(null,"",window.location.pathname)},ae=(O,M="success")=>{w({message:O,type:M}),setTimeout(()=>w(null),3e3)},Oe=O=>{const M=`${window.location.origin}${window.location.pathname}#recipe-${O}`;navigator.clipboard.writeText(M).then(()=>{ae("Link copied to clipboard!")}).catch(()=>{ae("Could not copy link","error")})},st=O=>{const M={...O};if(Array.isArray(M.ingredients)&&(M.ingredients=M.ingredients.map(G=>{if(typeof G=="string"){const Z=tg(G);return{amount:`${Z.quantity} ${Z.unit}`.trim(),ingredient:Z.item}}else if(G.amount!==void 0&&G.ingredient!==void 0){let Z=G.amount||"";return Z=Z.replace(/(\d)\s*\/\s*(\d)/g,"$1/$2"),Object.entries(ld).forEach(([he,Xe])=>{const ye=new RegExp(`\\b${he}\\b\\.?`,"gi");Z=Z.replace(ye,Xe)}),Z=Z.replace(/\bc\.(?!\w)/gi,"cup"),Z=Z.replace(/\bt\.(?!\w)/gi,"tsp"),Z=Z.replace(/\s+/g," ").trim(),{amount:Z,ingredient:G.ingredient}}return G})),!M.cookTime&&Array.isArray(M.instructions)){const G=fC(M.instructions);G&&(M.cookTime=G)}return M},gt=async O=>{try{const{id:M,...G}=st(O);if(M)await zn(sn(Qt,"recipes",M),G),ae("Recipe updated");else{const Z={...G,dateAdded:new Date().toISOString()};await Ux($m(Qt,"recipes"),Z),ae("Recipe saved")}ne("home")}catch(M){console.error("Save error:",M),ae("Error saving recipe: "+M.message,"error")}},_r=async()=>{if(!confirm("This will normalize all existing recipe data (units, ingredients). Continue?"))return;L(!0);let O=0;try{for(const M of t){const G=st(M),{id:Z,...he}=G;JSON.stringify(M)!==JSON.stringify(G)&&Z&&(await zn(sn(Qt,"recipes",Z),he),O++)}ae(`Normalized ${O} recipes`)}catch(M){console.error("Normalize error:",M),ae("Error normalizing recipes","error")}finally{L(!1)}},Xi=async()=>{if(!confirm("This will convert all ingredients to the new format (qty, unit, ingredient). Continue?"))return;L(!0);let O=0;try{for(const M of t){if(!M.ingredients||M.ingredients.length===0||!M.ingredients.some(he=>he.amount!==void 0&&he.qty===void 0))continue;const Z=M.ingredients.map(he=>{if(he.qty!==void 0)return he;const Xe=he.amount||"",ye=tg(Xe+" "+(he.ingredient||""));return{qty:ye.quantity||"",unit:ye.unit||"",ingredient:ye.item||he.ingredient||""}});await zn(sn(Qt,"recipes",M.id),{ingredients:Z}),O++}ae(`Migrated ${O} recipes to new format`)}catch(M){console.error("Migration error:",M),ae("Error migrating recipes","error")}finally{L(!1)}},bn=async(O,M)=>{try{const G=t.find(Xe=>Xe.id===O);if(!G)return;const Z={id:Date.now().toString(),text:M.text,author:M.author,date:new Date().toISOString()},he=[...G.comments||[],Z];await zn(sn(Qt,"recipes",O),{comments:he}),ae("Comment added")}catch(G){console.error("Comment error:",G),ae("Error adding comment","error")}},Nn=async(O,M)=>{try{const G=t.find(he=>he.id===O);if(!G)return;const Z=(G.comments||[]).filter(he=>he.id!==M);await zn(sn(Qt,"recipes",O),{comments:Z}),ae("Comment removed")}catch(G){console.error("Delete comment error:",G),ae("Error removing comment","error")}},wr=async(O,M)=>{try{const G=t.find(Xe=>Xe.id===O);if(!G)return;const Z={id:Date.now().toString(),name:M||"Someone",date:new Date().toISOString()},he=[...G.madeIt||[],Z];await zn(sn(Qt,"recipes",O),{madeIt:he}),ae(`${M||"You"} made it! `)}catch(G){console.error("Made it error:",G),ae("Error recording","error")}},Vn=async O=>{try{await zn(sn(Qt,"recipes",O),{trashedAt:new Date().toISOString()}),ae("Recipe moved to trash"),ne("home")}catch(M){console.error("Trash error:",M),ae("Error moving to trash","error")}},Er=async O=>{try{await zn(sn(Qt,"recipes",O),{trashedAt:null}),ae("Recipe restored")}catch(M){console.error("Restore error:",M),ae("Error restoring recipe","error")}},Ln=async(O,M,G)=>{try{if(M&&M.includes("firebasestorage"))try{const Z=Uu(zu,M);await Zm(Z)}catch{console.log("Image deletion skipped")}if(G&&G.includes("firebasestorage"))try{const Z=Uu(zu,G);await Zm(Z)}catch{console.log("Handwritten image deletion skipped")}await Bx(sn(Qt,"recipes",O)),ae("Recipe permanently deleted")}catch(Z){console.error("Delete error:",Z),ae("Error deleting recipe","error")}},Tr=async()=>{if(confirm(`Permanently delete ${K.length} recipe(s) from trash? This cannot be undone.`)){L(!0);try{for(const O of K)await Ln(O.id,O.imageUrl,O.handwrittenImageUrl);ae("Trash emptied")}catch(O){console.error("Empty trash error:",O),ae("Error emptying trash","error")}finally{L(!1)}}},Ji=async(O,M="recipes")=>{if(!O)return null;try{const G=`${M}/${Date.now()}_${O.name}`,Z=Uu(zu,G);return await JA(Z,O),await ZA(Z)}catch(G){throw console.error("Upload error:",G),G}},U=()=>{const O=JSON.stringify(t,null,2),M=new Blob([O],{type:"application/json"}),G=URL.createObjectURL(M),Z=document.createElement("a");Z.href=G,Z.download="bever-family-recipes.json",Z.click(),URL.revokeObjectURL(G),ae("Recipes exported!")},J=H.filter(O=>{var qe,Ir,Zi,eo,Ps,On;const M=y.toLowerCase(),G=(qe=O.ingredients)==null?void 0:qe.some(mn=>{var jn,gn,Ds;return((jn=mn.ingredient)==null?void 0:jn.toLowerCase().includes(M))||((gn=mn.amount)==null?void 0:gn.toLowerCase().includes(M))||((Ds=mn.unit)==null?void 0:Ds.toLowerCase().includes(M))}),Z=!y||((Ir=O.title)==null?void 0:Ir.toLowerCase().includes(M))||G||((Zi=O.author)==null?void 0:Zi.toLowerCase().includes(M))||((eo=O.notes)==null?void 0:eo.toLowerCase().includes(M))||((Ps=O.story)==null?void 0:Ps.toLowerCase().includes(M))||((On=O.comments)==null?void 0:On.some(mn=>{var jn,gn;return((jn=mn.text)==null?void 0:jn.toLowerCase().includes(M))||((gn=mn.author)==null?void 0:gn.toLowerCase().includes(M))})),he=l==="all"||O.category===l,Xe=d==="all"||O.author===d,ye=!T||B.includes(O.id);return Z&&he&&Xe&&ye}).sort((O,M)=>{switch(R){case"oldest":return new Date(O.dateAdded)-new Date(M.dateAdded);case"newest":return new Date(M.dateAdded)-new Date(O.dateAdded);case"a-z":return(O.title||"").localeCompare(M.title||"");case"z-a":return(M.title||"").localeCompare(O.title||"");case"category":return(O.category||"").localeCompare(M.category||"")||(O.title||"").localeCompare(M.title||"");default:return 0}});return C?p.jsx("div",{style:m.loadingScreen,children:p.jsxs("div",{style:m.loadingContent,children:[p.jsx("div",{style:m.loadingLogo,children:"BF"}),p.jsx("p",{style:m.loadingText,children:"Loading recipes..."})]})}):p.jsxs("div",{style:m.app,children:[x&&p.jsx("div",{style:{...m.notification,backgroundColor:x.type==="success"?"#5c6d5e":"#9b6b5b"},children:x.message}),A&&p.jsx("div",{style:m.modal,onClick:()=>Ce(!1),children:p.jsxs("div",{style:m.familyLoginModal,onClick:O=>O.stopPropagation(),children:[p.jsx("button",{style:m.modalClose,onClick:()=>Ce(!1),children:""}),p.jsx("h2",{style:m.familyLoginTitle,children:"Family Access"}),p.jsx("p",{style:m.familyLoginText,children:"Enter the family code to add and edit recipes."}),p.jsx("input",{type:"password",value:Ye,onChange:O=>Dt(O.target.value),onKeyDown:O=>O.key==="Enter"&&q(),placeholder:"Family code",style:m.familyCodeInput,autoFocus:!0}),p.jsx("button",{onClick:q,style:m.familyLoginBtn,children:"Enter Kitchen"})]})}),p.jsxs("header",{style:m.header,className:"no-print",children:[p.jsxs("div",{style:m.headerInner,children:[p.jsxs("div",{style:m.logo,onClick:()=>{ne("home"),u("all")},children:[p.jsx("span",{style:m.logoMark,children:"BF"}),p.jsxs("div",{style:m.logoText,children:[p.jsx("span",{style:m.logoTitle,children:"Bever Family"}),p.jsx("span",{style:m.logoSubtitle,children:"R E C I P E S"})]})]}),p.jsxs("nav",{style:m.nav,className:"desktop-nav",children:[p.jsx("button",{style:r==="home"?m.navLinkActive:m.navLink,onClick:()=>ne("home"),children:"Recipes"}),S&&p.jsxs(p.Fragment,{children:[p.jsx("button",{style:r==="add"?m.navLinkActive:m.navLink,onClick:()=>ne("add"),children:"Add New"}),p.jsxs("button",{style:r==="trash"?m.navLinkActive:m.navLink,onClick:()=>ne("trash"),children:["Trash ",K.length>0&&`(${K.length})`]})]}),p.jsx("button",{style:m.navLink,onClick:U,title:"Export all recipes as JSON",children:"Export"}),S?p.jsx("button",{style:m.navLink,onClick:ie,title:"Log out of family access",children:"Log Out"}):p.jsx("button",{style:m.familyBtn,onClick:()=>Ce(!0),children:"Family Login"})]}),p.jsx("button",{style:m.mobileMenuBtn,className:"mobile-menu-btn",onClick:()=>I(!E),children:E?"":""})]}),E&&p.jsxs("nav",{style:m.mobileNav,className:"mobile-nav",children:[p.jsx("button",{style:m.mobileNavLink,onClick:()=>ne("home"),children:"All Recipes"}),S&&p.jsxs(p.Fragment,{children:[p.jsx("button",{style:m.mobileNavLink,onClick:()=>ne("add"),children:"Add New Recipe"}),p.jsxs("button",{style:m.mobileNavLink,onClick:()=>ne("trash"),children:["Trash ",K.length>0&&`(${K.length})`]})]}),p.jsx("button",{style:m.mobileNavLink,onClick:()=>{U(),I(!1)},children:"Export Recipes"}),S?p.jsx("button",{style:m.mobileNavLink,onClick:()=>{ie(),I(!1)},children:"Log Out"}):p.jsx("button",{style:m.mobileNavLink,onClick:()=>{Ce(!0),I(!1)},children:"Family Login"})]})]}),p.jsxs("main",{style:m.main,children:[r==="home"&&p.jsx(yC,{recipes:H,filteredRecipes:J,categories:n,selectedCategory:l,setSelectedCategory:u,familyAuthors:He,selectedAuthor:d,setSelectedAuthor:f,searchQuery:y,setSearchQuery:_,sortBy:R,setSortBy:P,setSelectedRecipe:O=>ne("view",O),setView:ne,onNormalizeAll:_r,onMigrateIngredients:Xi,onEmptyTrash:Tr,trashedCount:K.length,isProcessing:b,favorites:B,toggleFavorite:le,showFavoritesOnly:T,setShowFavoritesOnly:v,isFamily:S}),r==="trash"&&S&&p.jsx(_C,{trashedRecipes:K,categories:n,onRestore:Er,onPermanentDelete:Ln,onEmptyTrash:Tr,onBack:()=>ne("home"),isProcessing:b}),(r==="add"||r==="edit")&&S&&p.jsx(EC,{recipe:o,categories:n.filter(O=>O.id!=="all"),onSave:gt,onCancel:()=>ne(o?"view":"home",o),isProcessing:b,setIsProcessing:L,showNotification:ae,uploadImage:Ji}),r==="view"&&o&&p.jsx(TC,{recipe:t.find(O=>O.id===o.id)||o,categories:n,onEdit:()=>ne("edit",o),onDelete:()=>{confirm("Move this recipe to trash?")&&Vn(o.id)},onBack:()=>ne("home"),onAddComment:O=>bn(o.id,O),onDeleteComment:O=>Nn(o.id,O),onShare:()=>Oe(o.id),onMadeIt:O=>wr(o.id,O),isFavorite:B.includes(o.id),onToggleFavorite:()=>le(o.id),isFamily:S})]}),p.jsx("footer",{style:m.footer,className:"no-print",children:p.jsxs("div",{style:m.footerContent,children:[p.jsx("span",{style:m.footerLogo,children:"BF"}),p.jsx("p",{style:m.footerText,children:"Bever Family Recipes"}),p.jsx("p",{style:m.footerTagline,children:"Gathering around the table, one recipe at a time"})]})})]})}function yC({recipes:t,filteredRecipes:e,categories:n,selectedCategory:r,setSelectedCategory:i,familyAuthors:o,selectedAuthor:s,setSelectedAuthor:l,searchQuery:u,setSearchQuery:d,sortBy:f,setSortBy:y,setSelectedRecipe:_,setView:R,onNormalizeAll:P,onMigrateIngredients:b,onEmptyTrash:L,trashedCount:x,isProcessing:w,favorites:C,toggleFavorite:N,showFavoritesOnly:B,setShowFavoritesOnly:$,isFamily:T}){var I;const[v,E]=te.useState(!1);return p.jsxs("div",{children:[p.jsx("section",{style:m.hero,className:"no-print",children:p.jsxs("div",{style:m.heroContent,children:[p.jsx("p",{style:m.heroWelcome,children:"Welcome to the"}),p.jsx("h1",{style:m.heroTitle,children:"Bever Family Recipes"}),p.jsxs("div",{style:m.heroDivider,children:[p.jsx("span",{style:m.heroDividerLine}),p.jsx("span",{style:m.heroDividerIcon,children:""}),p.jsx("span",{style:m.heroDividerLine})]}),p.jsxs("p",{style:m.heroSubtitle,children:["A collection of treasured recipes passed down through generations.",p.jsx("br",{}),"From our kitchen to yours."]}),p.jsxs("div",{style:m.searchContainer,children:[p.jsx("input",{type:"text",placeholder:"Search recipes, ingredients, stories...",value:u,onChange:S=>d(S.target.value),style:m.searchInput}),u&&p.jsx("button",{style:m.clearSearch,onClick:()=>d(""),children:""})]}),p.jsxs("div",{style:m.filterRow,children:[o.length>2&&p.jsxs("div",{style:m.filterGroup,children:[p.jsx("label",{style:m.filterLabel,children:"From:"}),p.jsxs("select",{value:s,onChange:S=>l(S.target.value),style:m.filterSelect,children:[p.jsx("option",{value:"all",children:"All Family"}),o.filter(S=>S!=="all").map(S=>p.jsx("option",{value:S,children:S},S))]})]}),p.jsxs("div",{style:m.filterGroup,children:[p.jsx("label",{style:m.filterLabel,children:"Sort:"}),p.jsx("select",{value:f,onChange:S=>y(S.target.value),style:m.filterSelect,children:aC.map(S=>p.jsx("option",{value:S.id,children:S.name},S.id))})]}),p.jsxs("button",{style:{...m.favoritesToggle,backgroundColor:B?"#5c6d5e":"transparent",color:B?"white":"#5a5a5a"},onClick:()=>$(!B),children:[" Favorites ",B&&`(${C.length})`]})]})]})}),p.jsx("section",{style:m.categorySection,className:"no-print",children:p.jsx("div",{style:m.categoryPills,children:n.map(S=>p.jsx("button",{style:r===S.id?m.categoryPillActive:m.categoryPill,onClick:()=>i(S.id),children:S.name},S.id))})}),p.jsxs("section",{style:m.recipeSection,children:[p.jsxs("div",{style:m.sectionHeader,children:[p.jsxs("h2",{style:m.sectionTitle,children:[B?"Favorites":r==="all"?"All Recipes":(I=n.find(S=>S.id===r))==null?void 0:I.name,s!=="all"&&` from ${s}`]}),p.jsxs("span",{style:m.recipeCount,children:[e.length," ",e.length===1?"recipe":"recipes"]})]}),e.length>0?p.jsx("div",{style:m.recipeGrid,children:e.map(S=>p.jsx(vC,{recipe:S,categories:n,onClick:()=>_(S),isFavorite:C.includes(S.id),onToggleFavorite:k=>{k.stopPropagation(),N(S.id)}},S.id))}):p.jsxs("div",{style:m.emptyState,children:[p.jsx("div",{style:m.emptyIcon,children:""}),p.jsx("h3",{style:m.emptyTitle,children:"No recipes found"}),p.jsx("p",{style:m.emptyText,children:u||s!=="all"||B?"Try adjusting your search or filters.":"Start your family's collection by adding the first recipe."}),!u&&s==="all"&&!B&&T&&p.jsx("button",{style:m.emptyButton,onClick:()=>R("add"),children:"Add a Recipe"})]}),T&&p.jsxs("div",{style:{textAlign:"center",marginTop:32},children:[p.jsx("button",{onClick:()=>E(!v),style:{background:"none",border:"none",color:"#c9c4bc",fontSize:11,cursor:"pointer",letterSpacing:1},children:v?" Hide Tools":" Admin Tools"}),v&&p.jsxs("div",{style:{marginTop:16,padding:20,background:"#f5f3ef",borderRadius:4},children:[p.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:12,justifyContent:"center",marginBottom:12},children:[p.jsx("button",{onClick:b,disabled:w,style:m.adminToolBtn,children:w?"Processing...":"Split Qty/Unit"}),x>0&&p.jsxs("button",{onClick:L,disabled:w,style:{...m.adminToolBtn,backgroundColor:"#9b6b5b"},children:["Empty Trash (",x,")"]})]}),p.jsx("p",{style:{fontSize:11,color:"#7a7a7a",margin:0},children:'Split Qty/Unit: Fix old scanned recipes where "4 cup" is in one column'})]})]})]})]})}function vC({recipe:t,categories:e,onClick:n,isFavorite:r,onToggleFavorite:i}){var d,f;const o=e.find(y=>y.id===t.category),[s,l]=te.useState(!1);(d=t.comments)!=null&&d.length;const u=((f=t.madeIt)==null?void 0:f.length)||0;return p.jsxs("div",{style:m.recipeCard,onClick:n,children:[p.jsxs("div",{style:m.cardImageContainer,children:[t.imageUrl&&!s?p.jsx("img",{src:t.imageUrl,alt:t.title,style:m.cardImage,onError:()=>l(!0)}):p.jsx("div",{style:m.cardImagePlaceholder,children:p.jsx("span",{style:m.placeholderIcon,children:""})}),p.jsx("button",{style:{...m.favoriteBtn,color:r?"#c75050":"white"},onClick:i,title:r?"Remove from favorites":"Add to favorites",children:r?"":""})]}),p.jsxs("div",{style:m.cardContent,children:[o&&p.jsx("span",{style:m.cardCategory,children:o.name}),p.jsx("h3",{style:m.cardTitle,children:t.title}),t.author&&p.jsx("p",{style:m.cardAuthor,children:c0(t.author,t.authorIsFamily)}),p.jsxs("div",{style:m.cardMeta,children:[t.prepTime&&p.jsx("span",{children:t.prepTime}),t.prepTime&&t.servings&&p.jsx("span",{style:m.cardMetaDot,children:""}),t.servings&&p.jsxs("span",{children:["Serves ",t.servings]}),u>0&&p.jsxs(p.Fragment,{children:[p.jsx("span",{style:m.cardMetaDot,children:""}),p.jsxs("span",{children:[" ",u," made"]})]})]})]})]})}function _C({trashedRecipes:t,categories:e,onRestore:n,onPermanentDelete:r,onEmptyTrash:i,onBack:o,isProcessing:s}){const l=u=>u?new Date(u).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"";return p.jsxs("div",{style:m.trashPage,children:[p.jsxs("div",{style:m.trashHeader,children:[p.jsx("button",{onClick:o,style:m.backBtn,children:" Back to Recipes"}),p.jsx("h1",{style:m.trashTitle,children:"Trash"}),p.jsxs("p",{style:m.trashSubtitle,children:[t.length," ",t.length===1?"recipe":"recipes"," in trash"]})]}),t.length>0?p.jsxs(p.Fragment,{children:[p.jsxs("div",{style:m.trashActions,children:[p.jsx("button",{onClick:i,disabled:s,style:m.emptyTrashBtn,children:s?"Deleting...":"Empty Trash"}),p.jsx("p",{style:m.trashWarning,children:" Emptying trash permanently deletes all recipes and cannot be undone."})]}),p.jsx("div",{style:m.trashList,children:t.map(u=>{const d=e.find(f=>f.id===u.category);return p.jsxs("div",{style:m.trashItem,children:[p.jsxs("div",{style:m.trashItemInfo,children:[p.jsx("h3",{style:m.trashItemTitle,children:u.title}),p.jsxs("p",{style:m.trashItemMeta,children:[d&&`${d.name}  `,u.author&&`${u.author}  `,"Deleted ",l(u.trashedAt)]})]}),p.jsxs("div",{style:m.trashItemActions,children:[p.jsx("button",{onClick:()=>n(u.id),style:m.restoreBtn,children:"Restore"}),p.jsx("button",{onClick:()=>{confirm(`Permanently delete "${u.title}"? This cannot be undone.`)&&r(u.id,u.imageUrl,u.handwrittenImageUrl)},style:m.permanentDeleteBtn,children:"Delete Forever"})]})]},u.id)})})]}):p.jsxs("div",{style:m.emptyTrash,children:[p.jsx("div",{style:m.emptyIcon,children:""}),p.jsx("h3",{style:m.emptyTitle,children:"Trash is empty"}),p.jsx("p",{style:m.emptyText,children:"Deleted recipes will appear here."})]})]})}function wC({ingredient:t,index:e,onUpdate:n,onRemove:r,canRemove:i}){const[o,s]=te.useState(!1),[l,u]=te.useState([]),d=t.qty!==void 0?t.qty:"",f=t.unit!==void 0?t.unit:"",y=t.ingredient||"",_=t.amount!==void 0&&t.qty===void 0,R=b=>{if(n(e,"unit",b),b){const L=lC.filter(x=>x.toLowerCase().startsWith(b.toLowerCase())).slice(0,5);u(L),s(L.length>0)}else s(!1)},P=b=>{n(e,"unit",b),s(!1)};return p.jsxs("div",{style:m.ingredientRow,children:[p.jsx("input",{type:"text",value:_?t.amount:d,onChange:b=>n(e,_?"amount":"qty",b.target.value),placeholder:"1",style:m.qtyInput}),p.jsxs("div",{style:m.unitInputWrapper,children:[p.jsx("input",{type:"text",value:_?"":f,onChange:b=>R(b.target.value),onFocus:()=>{f&&R(f)},onBlur:()=>setTimeout(()=>s(!1),150),placeholder:"cup",style:m.unitInput}),o&&l.length>0&&p.jsx("div",{style:m.unitSuggestions,children:l.map((b,L)=>p.jsx("button",{type:"button",style:m.unitSuggestion,onMouseDown:()=>P(b),children:b},L))})]}),p.jsx("input",{type:"text",value:y,onChange:b=>n(e,"ingredient",b.target.value),placeholder:"all-purpose flour",style:m.ingredientInput}),p.jsx("button",{type:"button",onClick:r,style:m.removeBtn,disabled:!i,children:""})]})}function EC({recipe:t,categories:e,onSave:n,onCancel:r,isProcessing:i,setIsProcessing:o,showNotification:s,uploadImage:l}){const[u,d]=te.useState("manual"),[f,y]=te.useState(t||uC),[_,R]=te.useState(null),[P,b]=te.useState(null),[L,x]=te.useState((t==null?void 0:t.imageUrl)||null),[w,C]=te.useState((t==null?void 0:t.handwrittenImageUrl)||null),[N,B]=te.useState(null),[$,T]=te.useState(null),[v,E]=te.useState(!1),[I,S]=te.useState(""),[k,A]=te.useState(""),[Ce,Ye]=te.useState(!1),Dt=te.useRef(null),He=te.useRef(null),H=te.useRef(null),K=(U,J)=>{y(O=>({...O,[U]:J}))},q=(U,J,O)=>{y(M=>({...M,ingredients:M.ingredients.map((G,Z)=>Z===U?{...G,[J]:O}:G)}))},ie=()=>{y(U=>({...U,ingredients:[...U.ingredients,{qty:"",unit:"",ingredient:""}]}))},le=U=>{f.ingredients.length>1&&y(J=>({...J,ingredients:J.ingredients.filter((O,M)=>M!==U)}))},ne=(U,J)=>{y(O=>({...O,instructions:O.instructions.map((M,G)=>G===U?J:M)}))},ae=()=>{y(U=>({...U,instructions:[...U.instructions,""]}))},Oe=U=>{f.instructions.length>1&&y(J=>({...J,instructions:J.instructions.filter((O,M)=>M!==U)}))},st=U=>{const J=U.target.files[0];if(J){if(!J.type.startsWith("image/")){s("Please select an image file","error");return}x(URL.createObjectURL(J)),B(J)}},gt=U=>{const J=U.target.files[0];if(J){if(!J.type.startsWith("image/")){s("Please select an image file","error");return}C(URL.createObjectURL(J)),T(J)}},_r=()=>{x(null),B(null),K("imageUrl","")},Xi=()=>{C(null),T(null),K("handwrittenImageUrl","")},bn=U=>{U.preventDefault(),Ye(!0)},Nn=U=>{U.preventDefault(),Ye(!1)},wr=U=>{U.preventDefault(),Ye(!1);const J=U.dataTransfer.files[0];J&&Vn(J)},Vn=async U=>{const J=U.type==="application/pdf",O=U.type.startsWith("image/");if(!J&&!O){s("Please select an image or PDF file","error");return}o(!0),O?(R(URL.createObjectURL(U)),b(null)):(R(null),b(U.name));try{const M=await new Promise((he,Xe)=>{const ye=new FileReader;ye.onload=()=>he(ye.result.split(",")[1]),ye.onerror=Xe,ye.readAsDataURL(U)}),Z=(await Hu(J?"scan-pdf":"scan-image",{imageData:M,imageType:U.type})).content[0].text.match(/\{[\s\S]*\}/);if(Z){const he=JSON.parse(Z[0]);y(Xe=>({...Xe,...he})),s("Recipe extracted! Review the details below."),d("manual")}}catch(M){console.error("Error:",M),s("Could not read recipe. Try entering it manually.","error")}finally{o(!1)}},Er=async U=>{const J=U.target.files[0];J&&Vn(J)},Ln=async()=>{const U=k.trim();if(!U){s("Please paste the recipe content from the website","error");return}o(!0);try{const O=(await Hu("extract-website",{content:U})).content[0].text.match(/\{[\s\S]*\}/);if(O){const M=JSON.parse(O[0]);y(G=>({...G,...M,authorIsFamily:!1})),s("Recipe imported! Review the details below."),d("manual")}}catch(J){console.error("Error:",J),s("Could not extract recipe. Try copying just the recipe text.","error")}finally{o(!1)}},Tr=async()=>{const U=I.trim();if(!U){s("Please enter a recipe URL","error");return}if(!U.startsWith("http://")&&!U.startsWith("https://")){s("Please enter a valid URL starting with http:// or https://","error");return}o(!0);try{const J=await Hu("fetch-url",{url:U});if(J.error){s(J.error,"error");return}const O=J.content[0].text.match(/\{[\s\S]*\}/);if(O){const M=JSON.parse(O[0]);y(G=>({...G,...M,authorIsFamily:!1})),s("Recipe imported! Review the details below."),d("manual")}}catch(J){console.error("Error:",J),s("Could not fetch recipe. Some sites block this - try pasting the content instead.","error")}finally{o(!1)}},Ji=async U=>{if(U.preventDefault(),!f.title.trim()){s("Please enter a recipe title","error");return}E(!0);try{let J=f.imageUrl||"",O=f.handwrittenImageUrl||"";N&&(s("Uploading photo..."),J=await l(N,"recipes")),$&&(s("Uploading handwritten recipe..."),O=await l($,"handwritten"));const M={...f,imageUrl:J,imageCaption:f.imageCaption||"",handwrittenImageUrl:O,handwrittenImageCaption:f.handwrittenImageCaption||"",ingredients:Array.isArray(f.ingredients)?f.ingredients.filter(G=>G.amount||G.ingredient||G.qty):[],instructions:Array.isArray(f.instructions)?f.instructions.filter(G=>G&&G.trim()):[],comments:f.comments||[],madeIt:f.madeIt||[]};await n(M)}catch(J){console.error("Submit error:",J),s("Error saving recipe: "+J.message,"error"),E(!1)}};return p.jsxs("div",{style:m.addPage,children:[p.jsxs("div",{style:m.addPageHeader,children:[p.jsx("h1",{style:m.addPageTitle,children:t?"Edit Recipe":"Add New Recipe"}),p.jsx("p",{style:m.addPageSubtitle,children:"Share a treasured family recipe"})]}),!t&&p.jsxs("div",{style:m.tabs,children:[p.jsx("button",{style:u==="manual"?m.tabActive:m.tab,onClick:()=>d("manual"),children:"Write it out"}),p.jsx("button",{style:u==="scan"?m.tabActive:m.tab,onClick:()=>d("scan"),children:"Scan file"}),p.jsx("button",{style:u==="website"?m.tabActive:m.tab,onClick:()=>d("website"),children:"From website or document"})]}),u==="scan"&&!t&&p.jsxs("div",{style:m.scanSection,children:[p.jsxs("div",{style:{...m.uploadZone,borderColor:Ce?"#8a9a8e":"#d9d6d0",backgroundColor:Ce?"#f0f5f1":"#faf9f7"},onClick:()=>{var U;return(U=Dt.current)==null?void 0:U.click()},onDragOver:bn,onDragLeave:Nn,onDrop:wr,children:[_?p.jsx("img",{src:_,alt:"Uploaded",style:m.uploadedImage}):P?p.jsxs("div",{style:m.pdfPreview,children:[p.jsx("div",{style:m.pdfIcon,children:"PDF"}),p.jsx("p",{style:m.pdfFileName,children:P})]}):p.jsxs(p.Fragment,{children:[p.jsx("div",{style:m.scanIcon,children:""}),p.jsx("h3",{style:m.scanTitle,children:"Scan a Recipe"}),p.jsxs("p",{style:m.scanText,children:["Drag & drop a photo or PDF here, or click to browse.",p.jsx("br",{}),"We'll convert it to text for you."]}),p.jsx("button",{type:"button",style:m.uploadButton,children:"Choose File"}),p.jsx("p",{style:m.fileTypes,children:"Supports: JPG, PNG, PDF"})]}),i&&p.jsxs("div",{style:m.processingOverlay,children:[p.jsx("div",{style:m.spinner}),p.jsx("p",{children:"Reading recipe..."})]})]}),p.jsx("input",{ref:Dt,type:"file",accept:"image/*,.pdf,application/pdf",onChange:Er,style:{display:"none"}})]}),u==="website"&&!t&&p.jsx("div",{style:m.websiteSection,children:p.jsxs("div",{style:m.websiteBox,children:[p.jsx("div",{style:m.scanIcon,children:""}),p.jsx("h3",{style:m.scanTitle,children:"Import from Website"}),p.jsxs("p",{style:m.scanText,children:["Found a recipe online? Enter the URL and we'll grab it for you,",p.jsx("br",{}),"or paste the recipe content directly."]}),p.jsxs("div",{style:m.websiteInputGroup,children:[p.jsx("label",{style:m.label,children:"Option 1: Fetch from URL"}),p.jsxs("div",{style:m.urlFetchRow,children:[p.jsx("input",{type:"text",value:I,onChange:U=>S(U.target.value),placeholder:"https://www.allrecipes.com/recipe/...",style:m.urlInput}),p.jsx("button",{type:"button",onClick:Tr,style:m.fetchButton,disabled:i,children:i?"Fetching...":"Fetch"})]}),p.jsx("p",{style:m.websiteHint,children:"Works with most recipe sites. Some sites may block this."})]}),p.jsxs("div",{style:m.orDivider,children:[p.jsx("span",{style:m.orLine}),p.jsx("span",{style:m.orText,children:"or"}),p.jsx("span",{style:m.orLine})]}),p.jsxs("div",{style:m.websiteInputGroup,children:[p.jsx("label",{style:m.label,children:"Option 2: Paste Recipe Content"}),p.jsx("p",{style:m.websiteHint,children:"Copy the recipe from the website and paste it here"}),p.jsx("textarea",{value:k,onChange:U=>A(U.target.value),placeholder:"Paste the recipe content here...",style:m.websiteTextarea,rows:10}),p.jsx("button",{type:"button",onClick:Ln,style:m.uploadButton,disabled:i||!k.trim(),children:i?"Extracting...":"Extract Recipe"})]}),i&&p.jsxs("div",{style:m.processingOverlay,children:[p.jsx("div",{style:m.spinner}),p.jsx("p",{children:"Reading recipe..."})]})]})}),(u==="manual"||t)&&p.jsxs("form",{onSubmit:Ji,style:m.form,children:[p.jsxs("div",{style:m.formSection,children:[p.jsx("h3",{style:m.formSectionTitle,children:"Basic Information"}),p.jsxs("div",{style:m.formRow,children:[p.jsxs("div",{style:m.formGroup,children:[p.jsx("label",{style:m.label,children:"Recipe Title"}),p.jsx("input",{type:"text",value:f.title,onChange:U=>K("title",U.target.value),placeholder:"Grandma's Apple Pie",style:m.input})]}),p.jsxs("div",{style:m.formGroup,children:[p.jsx("label",{style:m.label,children:"Category"}),p.jsxs("select",{value:f.category,onChange:U=>K("category",U.target.value),style:m.select,children:[p.jsx("option",{value:"",children:"Select one..."}),e.map(U=>p.jsx("option",{value:U.id,children:U.name},U.id))]})]})]}),p.jsxs("div",{style:m.formRow3,children:[p.jsxs("div",{style:m.formGroup,children:[p.jsx("label",{style:m.label,children:"Prep Time"}),p.jsx("input",{type:"text",value:f.prepTime,onChange:U=>K("prepTime",U.target.value),placeholder:"20 min",style:m.input})]}),p.jsxs("div",{style:m.formGroup,children:[p.jsx("label",{style:m.label,children:"Cook Time"}),p.jsx("input",{type:"text",value:f.cookTime,onChange:U=>K("cookTime",U.target.value),placeholder:"1 hour",style:m.input})]}),p.jsxs("div",{style:m.formGroup,children:[p.jsx("label",{style:m.label,children:"Servings"}),p.jsx("input",{type:"text",value:f.servings,onChange:U=>K("servings",U.target.value),placeholder:"6-8",style:m.input})]})]}),p.jsxs("div",{style:m.formRow,children:[p.jsxs("div",{style:m.formGroup,children:[p.jsx("label",{style:m.label,children:"Recipe from"}),p.jsx("input",{type:"text",value:f.author,onChange:U=>K("author",U.target.value),placeholder:"Grandma Bever, Mom, etc.",style:m.input})]}),p.jsxs("div",{style:m.formGroup,children:[p.jsx("label",{style:m.label,children:"Source Type"}),p.jsxs("div",{style:m.radioGroup,children:[p.jsxs("label",{style:m.radioLabel,children:[p.jsx("input",{type:"radio",name:"authorIsFamily",checked:f.authorIsFamily!==!1,onChange:()=>K("authorIsFamily",!0),style:m.radio}),p.jsx("span",{children:"Family Member"}),p.jsx("span",{style:m.radioHint,children:"(shows in filter)"})]}),p.jsxs("label",{style:m.radioLabel,children:[p.jsx("input",{type:"radio",name:"authorIsFamily",checked:f.authorIsFamily===!1,onChange:()=>K("authorIsFamily",!1),style:m.radio}),p.jsx("span",{children:"Website / Cookbook / Friend"}),p.jsx("span",{style:m.radioHint,children:"(not in filter)"})]})]})]})]})]}),p.jsxs("div",{style:m.formSection,children:[p.jsx("h3",{style:m.formSectionTitle,children:"Photos"}),p.jsx("p",{style:m.fieldHint,children:"Add photos and optional captions for the future cookbook"}),p.jsxs("div",{style:m.photoGrid,children:[p.jsxs("div",{style:m.photoUploadArea,children:[p.jsx("label",{style:m.photoLabel,children:"Finished Dish"}),L?p.jsxs("div",{style:m.photoPreviewContainer,children:[p.jsx("img",{src:L,alt:"Recipe",style:m.photoPreview}),p.jsxs("div",{style:m.photoActions,children:[p.jsx("button",{type:"button",onClick:()=>{var U;return(U=He.current)==null?void 0:U.click()},style:m.photoChangeBtn,children:"Change"}),p.jsx("button",{type:"button",onClick:_r,style:m.photoRemoveBtn,children:"Remove"})]})]}):p.jsxs("div",{style:m.photoDropzone,onClick:()=>{var U;return(U=He.current)==null?void 0:U.click()},children:[p.jsx("span",{style:m.photoIcon,children:""}),p.jsx("p",{style:m.photoText,children:"Add photo of the dish"})]}),p.jsx("input",{ref:He,type:"file",accept:"image/*",onChange:st,style:{display:"none"}}),p.jsx("input",{type:"text",value:f.imageCaption||"",onChange:U=>K("imageCaption",U.target.value),placeholder:"Caption (e.g., Christmas 2023)",style:{...m.input,marginTop:8,fontSize:13}})]}),p.jsxs("div",{style:m.photoUploadArea,children:[p.jsx("label",{style:m.photoLabel,children:"Original Recipe Card"}),w?p.jsxs("div",{style:m.photoPreviewContainer,children:[p.jsx("img",{src:w,alt:"Handwritten",style:m.photoPreview}),p.jsxs("div",{style:m.photoActions,children:[p.jsx("button",{type:"button",onClick:()=>{var U;return(U=H.current)==null?void 0:U.click()},style:m.photoChangeBtn,children:"Change"}),p.jsx("button",{type:"button",onClick:Xi,style:m.photoRemoveBtn,children:"Remove"})]})]}):p.jsxs("div",{style:m.photoDropzone,onClick:()=>{var U;return(U=H.current)==null?void 0:U.click()},children:[p.jsx("span",{style:m.photoIcon,children:""}),p.jsx("p",{style:m.photoText,children:"Add handwritten recipe"})]}),p.jsx("input",{ref:H,type:"file",accept:"image/*",onChange:gt,style:{display:"none"}}),p.jsx("input",{type:"text",value:f.handwrittenImageCaption||"",onChange:U=>K("handwrittenImageCaption",U.target.value),placeholder:"Caption (e.g., Grandma's original 1965 card)",style:{...m.input,marginTop:8,fontSize:13}})]})]})]}),p.jsxs("div",{style:m.formSection,children:[p.jsx("h3",{style:m.formSectionTitle,children:"The Story"}),p.jsx("p",{style:m.fieldHint,children:"Share the history or special memories behind this recipe"}),p.jsx("textarea",{value:f.story,onChange:U=>K("story",U.target.value),placeholder:"This recipe has been in our family since... Grandma used to make this every Christmas... The secret ingredient is...",style:m.storyInput,rows:4})]}),p.jsxs("div",{style:m.formSection,children:[p.jsx("h3",{style:m.formSectionTitle,children:"Ingredients"}),f.ingredients.map((U,J)=>p.jsx(wC,{ingredient:U,index:J,onUpdate:q,onRemove:()=>le(J),canRemove:f.ingredients.length>1},J)),p.jsx("button",{type:"button",onClick:ie,style:m.addItemBtn,children:"+ Add ingredient"})]}),p.jsxs("div",{style:m.formSection,children:[p.jsx("h3",{style:m.formSectionTitle,children:"Instructions"}),f.instructions.map((U,J)=>p.jsxs("div",{style:m.instructionRow,children:[p.jsx("span",{style:m.stepNum,children:J+1}),p.jsx("textarea",{value:U,onChange:O=>ne(J,O.target.value),placeholder:"Describe this step...",style:m.instructionInput,rows:2}),p.jsx("button",{type:"button",onClick:()=>Oe(J),style:m.removeBtn,children:""})]},J)),p.jsx("button",{type:"button",onClick:ae,style:m.addItemBtn,children:"+ Add step"})]}),p.jsxs("div",{style:m.formSection,children:[p.jsx("h3",{style:m.formSectionTitle,children:"Tips & Notes"}),p.jsx("textarea",{value:f.notes,onChange:U=>K("notes",U.target.value),placeholder:"Any tips, variations, or substitutions...",style:m.notesInput,rows:3})]}),p.jsxs("div",{style:m.formActions,children:[p.jsx("button",{type:"button",onClick:r,style:m.cancelBtn,children:"Cancel"}),p.jsx("button",{type:"submit",style:m.saveBtn,disabled:v,children:v?"Saving...":"Save Recipe"})]})]})]})}function TC({recipe:t,categories:e,onEdit:n,onDelete:r,onBack:i,onAddComment:o,onDeleteComment:s,onShare:l,onMadeIt:u,isFavorite:d,onToggleFavorite:f,isFamily:y}){var He,H,K;const _=e.find(q=>q.id===t.category),[R,P]=te.useState(!1),[b,L]=te.useState(!1),[x,w]=te.useState({author:"",text:""}),[C,N]=te.useState(!1),[B,$]=te.useState(!1),[T,v]=te.useState(""),[E,I]=te.useState(1),[S,k]=te.useState(!1),A=()=>{x.text.trim()&&(x.author.trim()||(x.author="Anonymous"),o(x),w({author:"",text:""}),N(!1))},Ce=()=>{u(T.trim()||"Someone"),v(""),$(!1)},Ye=q=>q?new Date(q).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"",Dt=(q,ie=1)=>{if(q.qty!==void 0){let le="";const ne=String(q.qty||"").trim(),ae=/^\d+\s*(-|to)\s*\d+$/.test(ne);if(ae&&ie===1)le=ne;else if(ae&&ie!==1){const Oe=ne.match(/^(\d+)\s*(-|to)\s*(\d+)$/);if(Oe){const st=parseFloat(Oe[1])*ie,gt=Oe[2],_r=parseFloat(Oe[3])*ie;le=`${Wu(st)}${gt}${Wu(_r)}`}}else if(ne){const Oe=parseFloat(ne)*ie;le=isNaN(Oe)?ne:Wu(Oe)}return{amount:`${le} ${q.unit||""}`.trim(),ingredient:q.ingredient||""}}return{amount:pC(q.amount,ie),ingredient:q.ingredient||""}};return p.jsxs("div",{style:m.detailPage,children:[p.jsxs("div",{style:m.detailNav,className:"no-print",children:[p.jsx("button",{onClick:i,style:m.backBtn,children:" Back"}),p.jsxs("div",{style:m.detailActions,children:[p.jsx("button",{onClick:f,style:{...m.actionBtn,color:d?"#c75050":"#5a5a5a"},children:d?"":""}),p.jsx("button",{onClick:l,style:m.actionBtn,children:"Share"}),p.jsx("button",{onClick:()=>{I(1),setTimeout(()=>window.print(),100)},style:m.actionBtn,children:"Print"}),y&&p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:n,style:m.actionBtn,children:"Edit"}),p.jsx("button",{onClick:r,style:m.deleteBtn,children:"Delete"})]})]})]}),p.jsxs("article",{style:m.recipeDetail,className:"print-recipe",children:[t.imageUrl&&!R&&p.jsxs("div",{style:m.detailImageWrap,className:"print-image",children:[p.jsx("img",{src:t.imageUrl,alt:t.title,style:m.detailImage,onError:()=>P(!0)}),t.imageCaption&&p.jsx("p",{style:m.imageCaption,children:t.imageCaption})]}),p.jsxs("div",{style:m.detailContent,children:[p.jsxs("header",{style:m.detailHeader,children:[_&&p.jsx("span",{style:m.detailCategory,children:_.name}),p.jsx("h1",{style:m.detailTitle,children:t.title}),t.author&&p.jsx("p",{style:m.detailAuthor,children:c0(t.author,t.authorIsFamily)}),p.jsxs("div",{style:m.detailMeta,children:[t.prepTime&&p.jsxs("span",{children:["Prep: ",t.prepTime]}),t.cookTime&&p.jsxs("span",{children:["Cook: ",t.cookTime]}),t.servings&&p.jsxs("span",{children:["Serves ",t.servings]}),t.dateAdded&&p.jsxs("span",{children:["Added: ",Ye(t.dateAdded)]})]}),y&&p.jsxs("div",{style:m.madeItSection,className:"no-print",children:[t.madeIt&&t.madeIt.length>0&&p.jsxs("p",{style:m.madeItList,children:[" Made by: ",t.madeIt.map(q=>q.name).join(", ")]}),B?p.jsxs("div",{style:m.madeItForm,children:[p.jsx("input",{type:"text",value:T,onChange:q=>v(q.target.value),placeholder:"Your name",style:m.madeItInput,autoFocus:!0}),p.jsx("button",{onClick:Ce,style:m.madeItSubmit,children:"Add"}),p.jsx("button",{onClick:()=>$(!1),style:m.madeItCancel,children:""})]}):p.jsx("button",{onClick:()=>$(!0),style:m.madeItBtn,children:" I Made This!"})]}),!y&&t.madeIt&&t.madeIt.length>0&&p.jsx("div",{style:m.madeItSection,className:"no-print",children:p.jsxs("p",{style:m.madeItList,children:[" Made by: ",t.madeIt.map(q=>q.name).join(", ")]})})]}),t.story&&p.jsxs("section",{style:m.storyBox,children:[p.jsx("h3",{style:m.storyTitle,children:"The Story"}),p.jsx("p",{style:m.storyContent,children:t.story})]}),p.jsxs("div",{style:m.detailDivider,children:[p.jsx("span",{style:m.dividerLine}),p.jsx("span",{style:m.dividerIcon,children:""}),p.jsx("span",{style:m.dividerLine})]}),p.jsxs("div",{style:m.scalerRow,className:"no-print",children:[p.jsx("span",{style:m.scalerLabel,children:"Adjust servings:"}),p.jsxs("div",{style:m.scalerButtons,children:[p.jsx("button",{style:{...m.scalerBtn,...E===.5?m.scalerBtnActive:{}},onClick:()=>I(.5),children:""}),p.jsx("button",{style:{...m.scalerBtn,...E===1?m.scalerBtnActive:{}},onClick:()=>I(1),children:"1"}),p.jsx("button",{style:{...m.scalerBtn,...E===2?m.scalerBtnActive:{}},onClick:()=>I(2),children:"2"}),p.jsx("button",{style:{...m.scalerBtn,...E===3?m.scalerBtnActive:{}},onClick:()=>I(3),children:"3"})]})]}),p.jsxs("div",{style:m.detailBody,children:[p.jsxs("section",{style:m.ingredientsCol,children:[p.jsx("h2",{style:m.colTitle,children:"Ingredients"}),p.jsx("ul",{style:m.ingredientsList,children:(He=t.ingredients)==null?void 0:He.map((q,ie)=>{const le=Dt(q,E);return p.jsxs("li",{style:m.ingredientItem,children:[p.jsx("strong",{children:le.amount})," ",le.ingredient]},ie)})})]}),p.jsxs("section",{style:m.instructionsCol,children:[p.jsx("h2",{style:m.colTitle,children:"Instructions"}),p.jsx("ol",{style:m.instructionsList,children:(H=t.instructions)==null?void 0:H.map((q,ie)=>p.jsx("li",{style:m.instructionItem,children:q},ie))})]})]}),t.notes&&p.jsxs("section",{style:m.notesBox,children:[p.jsx("h3",{style:m.notesTitle,children:"Tips & Notes"}),p.jsx("p",{style:m.notesContent,children:t.notes})]}),t.handwrittenImageUrl&&!b&&p.jsxs("section",{style:m.handwrittenSection,children:[p.jsx("h3",{style:m.handwrittenTitle,children:"Original Recipe Card"}),p.jsx("img",{src:t.handwrittenImageUrl,alt:"Original handwritten recipe",style:m.handwrittenThumb,onClick:()=>k(!0),onError:()=>L(!0)}),t.handwrittenImageCaption&&p.jsx("p",{style:m.handwrittenCaption,children:t.handwrittenImageCaption}),p.jsx("p",{style:m.handwrittenHint,className:"no-print",children:"Click to enlarge"})]}),S&&p.jsx("div",{style:m.modal,onClick:()=>k(!1),children:p.jsxs("div",{style:m.modalContent,onClick:q=>q.stopPropagation(),children:[p.jsx("button",{style:m.modalClose,onClick:()=>k(!1),children:""}),p.jsx("img",{src:t.handwrittenImageUrl,alt:"Original handwritten recipe",style:m.modalImage})]})}),p.jsxs("section",{style:m.commentsSection,className:"no-print",children:[p.jsxs("div",{style:m.commentsSectionHeader,children:[p.jsxs("h3",{style:m.commentsTitle,children:["Family Notes & Reviews (",((K=t.comments)==null?void 0:K.length)||0,")"]}),!C&&p.jsx("button",{onClick:()=>N(!0),style:m.addCommentBtn,children:"+ Add Note"})]}),C&&p.jsxs("div",{style:m.commentForm,children:[p.jsx("input",{type:"text",value:x.author,onChange:q=>w(ie=>({...ie,author:q.target.value})),placeholder:"Your name",style:m.commentAuthorInput}),p.jsx("textarea",{value:x.text,onChange:q=>w(ie=>({...ie,text:q.target.value})),placeholder:"Share your experience with this recipe, any changes you made, or tips for others...",style:m.commentTextInput,rows:3}),p.jsxs("div",{style:m.commentFormActions,children:[p.jsx("button",{type:"button",onClick:()=>N(!1),style:m.cancelBtn,children:"Cancel"}),p.jsx("button",{type:"button",onClick:A,style:m.saveBtn,disabled:!x.text.trim(),children:"Add Note"})]})]}),t.comments&&t.comments.length>0?p.jsx("div",{style:m.commentsList,children:t.comments.map(q=>p.jsxs("div",{style:m.commentItem,children:[p.jsxs("div",{style:m.commentHeader,children:[p.jsx("span",{style:m.commentAuthor,children:q.author}),p.jsx("span",{style:m.commentDate,children:Ye(q.date)})]}),p.jsx("p",{style:m.commentText,children:q.text}),p.jsx("button",{onClick:()=>{confirm("Remove this note?")&&s(q.id)},style:m.deleteCommentBtn,children:"Remove"})]},q.id))}):!C&&p.jsx("p",{style:m.noComments,children:"No notes yet. Be the first to share your experience with this recipe!"})]})]})]})]})}const m={app:{minHeight:"100vh",backgroundColor:"#fdfcfa",fontFamily:"'Montserrat', -apple-system, BlinkMacSystemFont, sans-serif",color:"#2d2d2d"},loadingScreen:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f5f3ef"},loadingContent:{textAlign:"center"},loadingLogo:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:48,color:"#8a9a8e",letterSpacing:4,marginBottom:16},loadingText:{color:"#5a5a5a",fontSize:14,letterSpacing:2},notification:{position:"fixed",top:20,right:20,padding:"14px 28px",borderRadius:2,color:"white",fontSize:13,fontWeight:500,letterSpacing:.5,zIndex:1e3,boxShadow:"0 4px 20px rgba(0,0,0,0.15)"},header:{backgroundColor:"#fdfcfa",borderBottom:"1px solid #e8e6e2",padding:"20px 40px"},headerInner:{maxWidth:1200,margin:"0 auto",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:16},logo:{display:"flex",alignItems:"center",gap:16,cursor:"pointer"},logoMark:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:28,color:"#8a9a8e",letterSpacing:3},logoText:{display:"flex",flexDirection:"column"},logoTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:20,fontWeight:600,color:"#2d2d2d",lineHeight:1.1},logoSubtitle:{fontSize:10,letterSpacing:3,color:"#8a9a8e"},nav:{display:"flex",gap:24},navLink:{background:"none",border:"none",fontSize:13,fontWeight:500,color:"#5a5a5a",cursor:"pointer",letterSpacing:1,textTransform:"uppercase",padding:"8px 0",borderBottom:"2px solid transparent"},navLinkActive:{background:"none",border:"none",fontSize:13,fontWeight:500,color:"#2d2d2d",cursor:"pointer",letterSpacing:1,textTransform:"uppercase",padding:"8px 0",borderBottom:"2px solid #8a9a8e"},mobileMenuBtn:{display:"none",background:"none",border:"1px solid #d9d6d0",borderRadius:4,padding:"8px 12px",fontSize:18,cursor:"pointer",color:"#5a5a5a"},mobileNav:{display:"none",flexDirection:"column",gap:0,padding:"16px 0",borderTop:"1px solid #e8e6e2",marginTop:16},mobileNavLink:{background:"none",border:"none",padding:"12px 16px",fontSize:14,color:"#2d2d2d",cursor:"pointer",textAlign:"left",borderBottom:"1px solid #f0ede8"},hero:{backgroundColor:"#f5f3ef",padding:"60px 40px",textAlign:"center"},heroContent:{maxWidth:700,margin:"0 auto"},heroWelcome:{fontSize:13,letterSpacing:3,textTransform:"uppercase",color:"#8a9a8e",marginBottom:12},heroTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:48,fontWeight:400,color:"#2d2d2d",marginBottom:24,lineHeight:1.1},heroDivider:{display:"flex",alignItems:"center",justifyContent:"center",gap:16,marginBottom:24},heroDividerLine:{width:60,height:1,backgroundColor:"#c9c4bc"},heroDividerIcon:{color:"#8a9a8e",fontSize:12},heroSubtitle:{fontSize:15,color:"#5a5a5a",lineHeight:1.8,marginBottom:32},searchContainer:{maxWidth:400,margin:"0 auto",position:"relative"},searchInput:{width:"100%",padding:"16px 48px 16px 24px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,backgroundColor:"white",outline:"none",textAlign:"center",letterSpacing:.5,color:"#2d2d2d"},clearSearch:{position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",background:"none",border:"none",fontSize:20,color:"#7a7a7a",cursor:"pointer",padding:4},filterRow:{marginTop:24,display:"flex",alignItems:"center",justifyContent:"center",gap:16,flexWrap:"wrap"},filterGroup:{display:"flex",alignItems:"center",gap:8},filterLabel:{fontSize:13,color:"#5a5a5a"},filterSelect:{padding:"10px 16px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,backgroundColor:"white",outline:"none",cursor:"pointer",minWidth:130,color:"#2d2d2d"},favoritesToggle:{padding:"10px 16px",fontSize:13,border:"1px solid #d9d6d0",borderRadius:2,cursor:"pointer",fontWeight:500},categorySection:{padding:"24px 40px",borderBottom:"1px solid #e8e6e2",backgroundColor:"#fdfcfa",overflowX:"auto"},categoryPills:{display:"flex",justifyContent:"center",flexWrap:"wrap",gap:10,maxWidth:1e3,margin:"0 auto"},categoryPill:{padding:"8px 16px",background:"transparent",border:"1px solid #d9d6d0",borderRadius:2,fontSize:11,fontWeight:500,color:"#5a5a5a",cursor:"pointer",letterSpacing:1,textTransform:"uppercase",whiteSpace:"nowrap"},categoryPillActive:{padding:"8px 16px",background:"#5c6d5e",border:"1px solid #5c6d5e",borderRadius:2,fontSize:11,fontWeight:500,color:"white",cursor:"pointer",letterSpacing:1,textTransform:"uppercase",whiteSpace:"nowrap"},recipeSection:{padding:"48px 40px",maxWidth:1200,margin:"0 auto"},sectionHeader:{display:"flex",justifyContent:"space-between",alignItems:"baseline",marginBottom:32,paddingBottom:16,borderBottom:"1px solid #e8e6e2",flexWrap:"wrap",gap:8},sectionTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:28,fontWeight:400,color:"#2d2d2d"},recipeCount:{fontSize:13,color:"#7a7a7a",letterSpacing:.5},recipeGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:32},recipeCard:{background:"white",border:"1px solid #e8e6e2",borderRadius:2,overflow:"hidden",cursor:"pointer",textAlign:"left",transition:"box-shadow 0.2s"},cardImageContainer:{height:200,overflow:"hidden",backgroundColor:"#f5f3ef",position:"relative"},cardImage:{width:"100%",height:"100%",objectFit:"cover"},cardImagePlaceholder:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f5f3ef"},placeholderIcon:{fontSize:32,color:"#c9c4bc"},favoriteBtn:{position:"absolute",top:12,right:12,background:"rgba(0,0,0,0.3)",border:"none",borderRadius:"50%",width:36,height:36,fontSize:18,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},cardContent:{padding:20},cardCategory:{fontSize:10,letterSpacing:2,textTransform:"uppercase",color:"#8a9a8e",marginBottom:6,display:"block"},cardTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:20,fontWeight:400,color:"#2d2d2d",marginBottom:6,lineHeight:1.3},cardAuthor:{fontSize:12,color:"#6a6a6a",fontStyle:"italic",marginBottom:10},cardMeta:{fontSize:11,color:"#6a6a6a",display:"flex",alignItems:"center",flexWrap:"wrap"},cardMetaDot:{margin:"0 6px"},emptyState:{textAlign:"center",padding:"60px 20px"},emptyIcon:{fontSize:32,color:"#c9c4bc",marginBottom:24},emptyTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:28,color:"#2d2d2d",marginBottom:12},emptyText:{color:"#5a5a5a",marginBottom:32,fontSize:15},emptyButton:{padding:"14px 32px",background:"#5c6d5e",color:"white",border:"none",borderRadius:2,fontSize:12,fontWeight:500,letterSpacing:1,textTransform:"uppercase",cursor:"pointer"},footer:{backgroundColor:"#f5f3ef",padding:"48px 40px",textAlign:"center",borderTop:"1px solid #e8e6e2"},footerContent:{maxWidth:400,margin:"0 auto"},footerLogo:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:32,color:"#8a9a8e",letterSpacing:4,marginBottom:16,display:"block"},footerText:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:20,color:"#2d2d2d",marginBottom:8},footerTagline:{fontSize:13,color:"#6a6a6a",fontStyle:"italic"},addPage:{maxWidth:700,margin:"0 auto",padding:"48px 24px"},addPageHeader:{textAlign:"center",marginBottom:40},addPageTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:36,color:"#2d2d2d",marginBottom:8},addPageSubtitle:{color:"#6a6a6a",fontSize:14},tabs:{display:"flex",marginBottom:32,border:"1px solid #d9d6d0",borderRadius:2,overflow:"hidden"},tab:{flex:1,padding:"14px 16px",background:"white",border:"none",fontSize:12,fontWeight:500,color:"#5a5a5a",cursor:"pointer",letterSpacing:.5},tabActive:{flex:1,padding:"14px 16px",background:"#5c6d5e",border:"none",fontSize:12,fontWeight:500,color:"white",cursor:"pointer",letterSpacing:.5},scanSection:{marginBottom:32},uploadZone:{border:"2px dashed #d9d6d0",borderRadius:2,padding:"60px 40px",textAlign:"center",cursor:"pointer",backgroundColor:"#faf9f7",position:"relative",transition:"all 0.2s"},scanIcon:{fontSize:32,color:"#8a9a8e",marginBottom:16},scanTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:24,color:"#2d2d2d",marginBottom:12},scanText:{color:"#5a5a5a",fontSize:14,marginBottom:24,lineHeight:1.7},uploadButton:{padding:"14px 28px",background:"#5c6d5e",color:"white",border:"none",borderRadius:2,fontSize:12,fontWeight:500,letterSpacing:1,textTransform:"uppercase",cursor:"pointer"},uploadedImage:{maxWidth:"100%",maxHeight:300,borderRadius:2},pdfPreview:{display:"flex",flexDirection:"column",alignItems:"center",gap:12},pdfIcon:{width:80,height:100,background:"#e8e6e2",borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",fontSize:18,fontWeight:600,color:"#5a5a5a",letterSpacing:1},pdfFileName:{fontSize:14,color:"#4a4a4a",fontWeight:500},fileTypes:{fontSize:12,color:"#7a7a7a",marginTop:16},processingOverlay:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(253,252,250,0.95)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",borderRadius:2},spinner:{width:40,height:40,border:"3px solid #e8e6e2",borderTopColor:"#8a9a8e",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:16},websiteSection:{marginBottom:32},websiteBox:{border:"1px solid #d9d6d0",borderRadius:2,padding:40,backgroundColor:"#faf9f7",position:"relative",textAlign:"center"},websiteInputGroup:{marginTop:24,textAlign:"left"},websiteHint:{fontSize:12,color:"#6a6a6a",marginBottom:8,fontStyle:"italic"},websiteTextarea:{width:"100%",padding:"14px 16px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",fontFamily:"inherit",resize:"vertical",backgroundColor:"white",marginBottom:16,color:"#2d2d2d"},urlFetchRow:{display:"flex",gap:12,marginBottom:8},urlInput:{flex:1,padding:"14px 16px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",fontFamily:"inherit",color:"#2d2d2d"},fetchButton:{padding:"14px 24px",background:"#5c6d5e",color:"white",border:"none",borderRadius:2,fontSize:12,fontWeight:500,letterSpacing:1,textTransform:"uppercase",cursor:"pointer",whiteSpace:"nowrap"},orDivider:{display:"flex",alignItems:"center",justifyContent:"center",gap:16,margin:"32px 0"},orLine:{flex:1,height:1,backgroundColor:"#d9d6d0"},orText:{fontSize:12,color:"#7a7a7a",textTransform:"uppercase",letterSpacing:2},form:{background:"white",border:"1px solid #e8e6e2",padding:40},formSection:{marginBottom:40},formSectionTitle:{fontSize:11,fontWeight:600,letterSpacing:2,textTransform:"uppercase",color:"#8a9a8e",marginBottom:20,paddingBottom:12,borderBottom:"1px solid #e8e6e2"},fieldHint:{fontSize:13,color:"#6a6a6a",marginBottom:12,fontStyle:"italic"},formRow:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:20,marginBottom:20},formRow3:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:20,marginBottom:20},formGroup:{marginBottom:20},label:{display:"block",fontSize:12,fontWeight:500,color:"#4a4a4a",marginBottom:8,letterSpacing:.5},input:{width:"100%",padding:"14px 16px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",fontFamily:"inherit",color:"#2d2d2d"},select:{width:"100%",padding:"14px 16px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",background:"white",cursor:"pointer",fontFamily:"inherit",color:"#2d2d2d"},radioGroup:{display:"flex",flexDirection:"column",gap:10,marginTop:8},radioLabel:{display:"flex",alignItems:"center",gap:8,fontSize:14,color:"#3d3d3d",cursor:"pointer"},radio:{accentColor:"#5c6d5e"},radioHint:{fontSize:11,color:"#8a8a8a",marginLeft:4},photoGrid:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:20},photoUploadArea:{},photoLabel:{display:"block",fontSize:12,fontWeight:500,color:"#4a4a4a",marginBottom:10},photoPreviewContainer:{position:"relative"},photoPreview:{width:"100%",height:180,objectFit:"cover",borderRadius:2},photoActions:{position:"absolute",bottom:12,left:12,display:"flex",gap:8},photoChangeBtn:{padding:"8px 16px",background:"white",border:"none",borderRadius:2,fontSize:12,fontWeight:500,cursor:"pointer"},photoRemoveBtn:{padding:"8px 16px",background:"white",border:"none",borderRadius:2,fontSize:12,fontWeight:500,cursor:"pointer",color:"#9b6b5b"},photoDropzone:{border:"2px dashed #d9d6d0",borderRadius:2,padding:"30px 20px",textAlign:"center",cursor:"pointer",height:180,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},photoIcon:{fontSize:28,display:"block",marginBottom:8},photoText:{fontSize:12,color:"#6a6a6a"},storyInput:{width:"100%",padding:"14px 16px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",fontFamily:"inherit",resize:"vertical",lineHeight:1.7,color:"#2d2d2d"},ingredientRow:{display:"flex",gap:12,marginBottom:12},ingredientInput:{flex:1,padding:"12px 14px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",fontFamily:"inherit",color:"#2d2d2d"},removeBtn:{width:40,height:40,background:"transparent",border:"1px solid #d9d6d0",borderRadius:2,cursor:"pointer",fontSize:18,color:"#7a7a7a",display:"flex",alignItems:"center",justifyContent:"center"},addItemBtn:{padding:"12px 20px",background:"transparent",border:"1px solid #d9d6d0",borderRadius:2,fontSize:13,color:"#5a5a5a",cursor:"pointer",fontFamily:"inherit"},instructionRow:{display:"flex",gap:12,marginBottom:12,alignItems:"flex-start"},stepNum:{width:32,height:32,background:"#f5f3ef",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:13,fontWeight:500,color:"#5a5a5a",flexShrink:0,marginTop:4},instructionInput:{flex:1,padding:"12px 14px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",fontFamily:"inherit",resize:"vertical",color:"#2d2d2d"},notesInput:{width:"100%",padding:"14px 16px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",fontFamily:"inherit",resize:"vertical",color:"#2d2d2d"},formActions:{display:"flex",justifyContent:"flex-end",gap:12,paddingTop:24,borderTop:"1px solid #e8e6e2",marginTop:20},cancelBtn:{padding:"14px 28px",background:"transparent",border:"1px solid #d9d6d0",borderRadius:2,fontSize:12,fontWeight:500,letterSpacing:1,textTransform:"uppercase",cursor:"pointer",color:"#5a5a5a"},saveBtn:{padding:"14px 32px",background:"#5c6d5e",border:"none",borderRadius:2,fontSize:12,fontWeight:500,letterSpacing:1,textTransform:"uppercase",cursor:"pointer",color:"white"},detailPage:{maxWidth:900,margin:"0 auto",padding:"40px 24px"},detailNav:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:32,flexWrap:"wrap",gap:12},backBtn:{padding:"10px 20px",background:"transparent",border:"1px solid #d9d6d0",borderRadius:2,fontSize:13,color:"#5a5a5a",cursor:"pointer"},detailActions:{display:"flex",gap:8,flexWrap:"wrap"},actionBtn:{padding:"10px 16px",background:"white",border:"1px solid #d9d6d0",borderRadius:2,fontSize:12,color:"#5a5a5a",cursor:"pointer",letterSpacing:.5},deleteBtn:{padding:"10px 16px",background:"white",border:"1px solid #c9a89a",borderRadius:2,fontSize:12,color:"#9b6b5b",cursor:"pointer",letterSpacing:.5},recipeDetail:{background:"white",border:"1px solid #e8e6e2",overflow:"hidden"},detailImageWrap:{height:400,overflow:"hidden",position:"relative"},detailImage:{width:"100%",height:"100%",objectFit:"cover"},imageCaption:{position:"absolute",bottom:0,left:0,right:0,padding:"8px 16px",background:"rgba(0,0,0,0.5)",color:"white",fontSize:13,fontStyle:"italic",textAlign:"center"},detailContent:{padding:48},detailHeader:{textAlign:"center",marginBottom:32},detailCategory:{fontSize:11,letterSpacing:2,textTransform:"uppercase",color:"#8a9a8e",marginBottom:12,display:"block"},detailTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:42,fontWeight:400,color:"#2d2d2d",marginBottom:12,lineHeight:1.2},detailAuthor:{fontSize:15,color:"#6a6a6a",fontStyle:"italic",marginBottom:24},detailMeta:{display:"flex",justifyContent:"center",gap:32,fontSize:13,color:"#5a5a5a",flexWrap:"wrap"},madeItSection:{marginTop:24,paddingTop:20,borderTop:"1px solid #f0ede8"},madeItList:{fontSize:13,color:"#5c6d5e",marginBottom:12,fontWeight:500},madeItBtn:{padding:"10px 20px",background:"#f5f3ef",border:"1px solid #d9d6d0",borderRadius:2,fontSize:13,color:"#5c6d5e",cursor:"pointer",fontWeight:500},madeItForm:{display:"flex",gap:8,alignItems:"center",justifyContent:"center"},madeItInput:{padding:"10px 14px",border:"1px solid #d9d6d0",borderRadius:2,fontSize:14,width:150,outline:"none"},madeItSubmit:{padding:"10px 16px",background:"#5c6d5e",color:"white",border:"none",borderRadius:2,fontSize:12,cursor:"pointer"},madeItCancel:{padding:"10px 12px",background:"transparent",border:"1px solid #d9d6d0",borderRadius:2,fontSize:14,cursor:"pointer",color:"#7a7a7a"},storyBox:{padding:28,background:"#faf9f7",borderLeft:"3px solid #c9b896",marginBottom:24},storyTitle:{fontSize:11,fontWeight:600,letterSpacing:2,textTransform:"uppercase",color:"#a89968",marginBottom:12},storyContent:{fontSize:15,color:"#4a4a4a",lineHeight:1.8,fontStyle:"italic"},detailDivider:{display:"flex",alignItems:"center",justifyContent:"center",gap:16,margin:"32px 0"},dividerLine:{width:60,height:1,backgroundColor:"#e8e6e2"},dividerIcon:{color:"#c9c4bc",fontSize:12},scalerRow:{display:"flex",alignItems:"center",justifyContent:"center",gap:12,marginBottom:24,flexWrap:"wrap"},scalerLabel:{fontSize:13,color:"#5a5a5a"},scalerButtons:{display:"flex",gap:6},scalerBtn:{padding:"8px 14px",background:"white",border:"1px solid #d9d6d0",borderRadius:2,fontSize:13,color:"#5a5a5a",cursor:"pointer"},scalerBtnActive:{background:"#5c6d5e",borderColor:"#5c6d5e",color:"white"},detailBody:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:48},ingredientsCol:{},instructionsCol:{},colTitle:{fontSize:11,fontWeight:600,letterSpacing:2,textTransform:"uppercase",color:"#8a9a8e",marginBottom:20,paddingBottom:12,borderBottom:"1px solid #e8e6e2"},ingredientsList:{listStyle:"none"},ingredientItem:{padding:"10px 0",borderBottom:"1px dotted #e8e6e2",fontSize:14,color:"#3d3d3d"},instructionsList:{paddingLeft:20},instructionItem:{padding:"12px 0",fontSize:14,color:"#3d3d3d",lineHeight:1.8},notesBox:{marginTop:40,padding:28,background:"#f9f8f6",borderLeft:"3px solid #8a9a8e"},notesTitle:{fontSize:11,fontWeight:600,letterSpacing:2,textTransform:"uppercase",color:"#8a9a8e",marginBottom:12},notesContent:{fontSize:14,color:"#4a4a4a",lineHeight:1.8,fontStyle:"italic"},handwrittenSection:{marginTop:40,textAlign:"center"},handwrittenTitle:{fontSize:11,fontWeight:600,letterSpacing:2,textTransform:"uppercase",color:"#a89968",marginBottom:16},handwrittenThumb:{maxWidth:300,maxHeight:200,objectFit:"cover",borderRadius:4,border:"1px solid #e8e6e2",cursor:"pointer",transition:"transform 0.2s"},handwrittenHint:{fontSize:11,color:"#8a8a8a",marginTop:8},handwrittenCaption:{fontSize:13,color:"#5a5a5a",fontStyle:"italic",marginTop:8,textAlign:"center"},modal:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:20},modalContent:{position:"relative",maxWidth:"90vw",maxHeight:"90vh"},modalClose:{position:"absolute",top:-40,right:0,background:"none",border:"none",color:"white",fontSize:24,cursor:"pointer"},modalImage:{maxWidth:"100%",maxHeight:"85vh",objectFit:"contain",borderRadius:4},commentsSection:{marginTop:48,paddingTop:32,borderTop:"1px solid #e8e6e2"},commentsSectionHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24,flexWrap:"wrap",gap:12},commentsTitle:{fontSize:11,fontWeight:600,letterSpacing:2,textTransform:"uppercase",color:"#8a9a8e"},addCommentBtn:{padding:"10px 20px",background:"transparent",border:"1px solid #8a9a8e",borderRadius:2,fontSize:12,fontWeight:500,color:"#5c6d5e",cursor:"pointer",letterSpacing:.5},commentForm:{background:"#f9f8f6",padding:24,marginBottom:24,borderRadius:2},commentAuthorInput:{width:"100%",maxWidth:300,padding:"12px 16px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",fontFamily:"inherit",marginBottom:12,color:"#2d2d2d"},commentTextInput:{width:"100%",padding:"12px 16px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",fontFamily:"inherit",resize:"vertical",marginBottom:16,color:"#2d2d2d"},commentFormActions:{display:"flex",justifyContent:"flex-end",gap:12},commentsList:{},commentItem:{padding:"20px 0",borderBottom:"1px solid #e8e6e2",position:"relative"},commentHeader:{display:"flex",alignItems:"baseline",gap:12,marginBottom:8},commentAuthor:{fontWeight:600,fontSize:14,color:"#2d2d2d"},commentDate:{fontSize:12,color:"#7a7a7a"},commentText:{fontSize:14,color:"#4a4a4a",lineHeight:1.7},deleteCommentBtn:{position:"absolute",top:20,right:0,background:"none",border:"none",fontSize:12,color:"#c9a89a",cursor:"pointer"},noComments:{fontSize:14,color:"#7a7a7a",fontStyle:"italic",textAlign:"center",padding:"24px 0"},familyLoginModal:{background:"white",padding:40,borderRadius:4,maxWidth:400,width:"90%",textAlign:"center",position:"relative"},familyLoginTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:28,color:"#2d2d2d",marginBottom:12},familyLoginText:{fontSize:14,color:"#6a6a6a",marginBottom:24},familyCodeInput:{width:"100%",padding:"14px 16px",fontSize:16,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",textAlign:"center",marginBottom:16},familyLoginBtn:{width:"100%",padding:"14px 32px",background:"#5c6d5e",color:"white",border:"none",borderRadius:2,fontSize:14,fontWeight:500,cursor:"pointer"},familyBtn:{background:"none",border:"1px solid #8a9a8e",padding:"8px 16px",fontSize:12,color:"#5c6d5e",cursor:"pointer",borderRadius:2,fontWeight:500,letterSpacing:.5},adminToolBtn:{padding:"12px 24px",background:"#5c6d5e",color:"white",border:"none",borderRadius:2,fontSize:12,cursor:"pointer"},trashPage:{maxWidth:800,margin:"0 auto",padding:"40px 24px"},trashHeader:{marginBottom:32},trashTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:36,color:"#2d2d2d",marginBottom:8,marginTop:24},trashSubtitle:{fontSize:14,color:"#7a7a7a"},trashActions:{marginBottom:32,padding:20,background:"#faf5f3",borderRadius:4,border:"1px solid #e8d8d0"},emptyTrashBtn:{padding:"12px 24px",background:"#9b6b5b",color:"white",border:"none",borderRadius:2,fontSize:12,fontWeight:500,cursor:"pointer",marginBottom:12},trashWarning:{fontSize:12,color:"#9b6b5b",margin:0},trashList:{},trashItem:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px 0",borderBottom:"1px solid #e8e6e2",flexWrap:"wrap",gap:16},trashItemInfo:{flex:1,minWidth:200},trashItemTitle:{fontSize:16,fontWeight:500,color:"#2d2d2d",marginBottom:4},trashItemMeta:{fontSize:12,color:"#7a7a7a",margin:0},trashItemActions:{display:"flex",gap:8},restoreBtn:{padding:"8px 16px",background:"#5c6d5e",color:"white",border:"none",borderRadius:2,fontSize:12,cursor:"pointer"},permanentDeleteBtn:{padding:"8px 16px",background:"transparent",color:"#9b6b5b",border:"1px solid #c9a89a",borderRadius:2,fontSize:12,cursor:"pointer"},emptyTrash:{textAlign:"center",padding:"60px 20px"},qtyInput:{width:60,padding:"12px 10px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",textAlign:"center"},unitInputWrapper:{position:"relative",width:80},unitInput:{width:"100%",padding:"12px 10px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none"},unitSuggestions:{position:"absolute",top:"100%",left:0,right:0,background:"white",border:"1px solid #d9d6d0",borderTop:"none",borderRadius:"0 0 2px 2px",zIndex:10,boxShadow:"0 4px 8px rgba(0,0,0,0.1)"},unitSuggestion:{display:"block",width:"100%",padding:"8px 10px",background:"white",border:"none",textAlign:"left",fontSize:13,cursor:"pointer",color:"#4a4a4a"}};if(typeof window<"u"){const t=document.createElement("style");t.textContent=`
    /* Animations */
    @keyframes spin { to { transform: rotate(360deg); } }
    
    /* Mobile menu visibility */
    @media (min-width: 769px) {
      .mobile-menu-btn { display: none !important; }
      .mobile-nav { display: none !important; }
      .desktop-nav { display: flex !important; }
    }
    
    @media (max-width: 768px) {
      .mobile-menu-btn { display: block !important; }
      .mobile-nav { display: flex !important; }
      .desktop-nav { display: none !important; }
    }
    
    /* Mobile Styles */
    @media (max-width: 768px) {
      header > div {
        padding: 16px 20px !important;
      }
      
      section[style*="hero"] {
        padding: 40px 20px !important;
      }
      
      section[style*="hero"] h1 {
        font-size: 32px !important;
      }
      
      section[style*="categorySection"] {
        padding: 16px 12px !important;
      }
      
      section[style*="categorySection"] > div {
        justify-content: flex-start !important;
        flex-wrap: nowrap !important;
        overflow-x: auto !important;
        -webkit-overflow-scrolling: touch;
        padding-bottom: 8px;
      }
      
      section[style*="recipeSection"] {
        padding: 24px 16px !important;
      }
      
      /* Single column on mobile */
      div[style*="recipeGrid"] {
        grid-template-columns: 1fr !important;
        gap: 20px !important;
      }
      
      div[style*="formRow"], div[style*="formRow3"] {
        grid-template-columns: 1fr !important;
      }
      
      div[style*="photoGrid"] {
        grid-template-columns: 1fr !important;
      }
      
      div[style*="detailBody"] {
        grid-template-columns: 1fr !important;
        gap: 32px !important;
      }
      
      div[style*="detailContent"] {
        padding: 24px 16px !important;
      }
      
      h1[style*="detailTitle"] {
        font-size: 28px !important;
      }
      
      div[style*="detailImageWrap"] {
        height: 250px !important;
      }
      
      form[style*="form"] {
        padding: 24px 16px !important;
      }
      
      div[style*="addPage"] {
        padding: 24px 16px !important;
      }
      
      footer {
        padding: 32px 20px !important;
      }
      
      div[style*="ingredientRow"] {
        flex-wrap: wrap;
      }
      
      input[style*="amountInput"] {
        width: 80px !important;
        flex-shrink: 0;
      }
      
      div[style*="filterRow"] {
        flex-direction: column;
        gap: 12px !important;
      }
      
      div[style*="detailActions"] {
        width: 100%;
        justify-content: center;
      }
    }
    
    /* Print Styles */
    @media print {
      body {
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
      }
      
      .no-print {
        display: none !important;
      }
      
      .print-recipe {
        border: none !important;
        box-shadow: none !important;
        max-width: 100% !important;
      }
      
      .print-image {
        height: 200px !important;
        page-break-inside: avoid;
      }
      
      div[style*="detailPage"] {
        padding: 0 !important;
        max-width: 100% !important;
      }
      
      div[style*="detailContent"] {
        padding: 20px !important;
      }
      
      div[style*="detailBody"] {
        display: block !important;
      }
      
      section[style*="ingredientsCol"] {
        margin-bottom: 24px;
        page-break-inside: avoid;
      }
      
      section[style*="instructionsCol"] {
        page-break-inside: avoid;
      }
      
      h1[style*="detailTitle"] {
        font-size: 24px !important;
        margin-bottom: 8px !important;
      }
      
      div[style*="detailMeta"] {
        margin-bottom: 16px;
      }
      
      section[style*="notesBox"], section[style*="storyBox"] {
        margin-top: 24px !important;
        padding: 16px !important;
        page-break-inside: avoid;
      }
      
      li[style*="ingredientItem"] {
        padding: 4px 0 !important;
        font-size: 12px !important;
      }
      
      li[style*="instructionItem"] {
        padding: 6px 0 !important;
        font-size: 12px !important;
        line-height: 1.5 !important;
      }
      
      h2[style*="colTitle"] {
        font-size: 10px !important;
        margin-bottom: 12px !important;
        padding-bottom: 8px !important;
      }
      
      /* Hide divider on print */
      div[style*="detailDivider"] {
        margin: 16px 0 !important;
      }
      
      /* Handwritten recipe card print styles */
      section[style*="handwrittenSection"] {
        margin-top: 24px !important;
        page-break-inside: avoid;
        text-align: center;
      }
      
      section[style*="handwrittenSection"] img {
        max-width: 250px !important;
        max-height: 180px !important;
      }
      
      /* Image captions */
      p[style*="imageCaption"] {
        position: static !important;
        background: none !important;
        color: #5a5a5a !important;
        padding: 4px 0 !important;
        font-size: 11px !important;
      }
      
      /* Ensure single page fit */
      @page {
        margin: 0.5in;
        size: letter;
      }
    }
  `,document.head.appendChild(t)}qu.createRoot(document.getElementById("root")).render(p.jsx(X0.StrictMode,{children:p.jsx(gC,{})}));
