(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function C0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var qm={exports:{}},Ya={},Gm={exports:{}},ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var no=Symbol.for("react.element"),x0=Symbol.for("react.portal"),k0=Symbol.for("react.fragment"),P0=Symbol.for("react.strict_mode"),D0=Symbol.for("react.profiler"),N0=Symbol.for("react.provider"),V0=Symbol.for("react.context"),O0=Symbol.for("react.forward_ref"),L0=Symbol.for("react.suspense"),b0=Symbol.for("react.memo"),M0=Symbol.for("react.lazy"),Df=Symbol.iterator;function F0(t){return t===null||typeof t!="object"?null:(t=Df&&t[Df]||t["@@iterator"],typeof t=="function"?t:null)}var Km={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Qm=Object.assign,Xm={};function ki(t,e,n){this.props=t,this.context=e,this.refs=Xm,this.updater=n||Km}ki.prototype.isReactComponent={};ki.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ki.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ym(){}Ym.prototype=ki.prototype;function Kc(t,e,n){this.props=t,this.context=e,this.refs=Xm,this.updater=n||Km}var Qc=Kc.prototype=new Ym;Qc.constructor=Kc;Qm(Qc,ki.prototype);Qc.isPureReactComponent=!0;var Nf=Array.isArray,Jm=Object.prototype.hasOwnProperty,Xc={current:null},Zm={key:!0,ref:!0,__self:!0,__source:!0};function eg(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)Jm.call(e,r)&&!Zm.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:no,type:t,key:s,ref:a,props:i,_owner:Xc.current}}function j0(t,e){return{$$typeof:no,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Yc(t){return typeof t=="object"&&t!==null&&t.$$typeof===no}function U0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Vf=/\/+/g;function Kl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?U0(""+t.key):e.toString(36)}function ea(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case no:case x0:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+Kl(a,0):r,Nf(i)?(n="",t!=null&&(n=t.replace(Vf,"$&/")+"/"),ea(i,e,n,"",function(h){return h})):i!=null&&(Yc(i)&&(i=j0(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Vf,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",Nf(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+Kl(s,l);a+=ea(s,e,n,u,i)}else if(u=F0(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+Kl(s,l++),a+=ea(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Do(t,e,n){if(t==null)return t;var r=[],i=0;return ea(t,r,"","",function(s){return e.call(n,s,i++)}),r}function B0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var mt={current:null},ta={transition:null},z0={ReactCurrentDispatcher:mt,ReactCurrentBatchConfig:ta,ReactCurrentOwner:Xc};function tg(){throw Error("act(...) is not supported in production builds of React.")}ne.Children={map:Do,forEach:function(t,e,n){Do(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Do(t,function(){e++}),e},toArray:function(t){return Do(t,function(e){return e})||[]},only:function(t){if(!Yc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ne.Component=ki;ne.Fragment=k0;ne.Profiler=D0;ne.PureComponent=Kc;ne.StrictMode=P0;ne.Suspense=L0;ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z0;ne.act=tg;ne.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Qm({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=Xc.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Jm.call(e,u)&&!Zm.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:no,type:t.type,key:i,ref:s,props:r,_owner:a}};ne.createContext=function(t){return t={$$typeof:V0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:N0,_context:t},t.Consumer=t};ne.createElement=eg;ne.createFactory=function(t){var e=eg.bind(null,t);return e.type=t,e};ne.createRef=function(){return{current:null}};ne.forwardRef=function(t){return{$$typeof:O0,render:t}};ne.isValidElement=Yc;ne.lazy=function(t){return{$$typeof:M0,_payload:{_status:-1,_result:t},_init:B0}};ne.memo=function(t,e){return{$$typeof:b0,type:t,compare:e===void 0?null:e}};ne.startTransition=function(t){var e=ta.transition;ta.transition={};try{t()}finally{ta.transition=e}};ne.unstable_act=tg;ne.useCallback=function(t,e){return mt.current.useCallback(t,e)};ne.useContext=function(t){return mt.current.useContext(t)};ne.useDebugValue=function(){};ne.useDeferredValue=function(t){return mt.current.useDeferredValue(t)};ne.useEffect=function(t,e){return mt.current.useEffect(t,e)};ne.useId=function(){return mt.current.useId()};ne.useImperativeHandle=function(t,e,n){return mt.current.useImperativeHandle(t,e,n)};ne.useInsertionEffect=function(t,e){return mt.current.useInsertionEffect(t,e)};ne.useLayoutEffect=function(t,e){return mt.current.useLayoutEffect(t,e)};ne.useMemo=function(t,e){return mt.current.useMemo(t,e)};ne.useReducer=function(t,e,n){return mt.current.useReducer(t,e,n)};ne.useRef=function(t){return mt.current.useRef(t)};ne.useState=function(t){return mt.current.useState(t)};ne.useSyncExternalStore=function(t,e,n){return mt.current.useSyncExternalStore(t,e,n)};ne.useTransition=function(){return mt.current.useTransition()};ne.version="18.3.1";Gm.exports=ne;var ue=Gm.exports;const $0=C0(ue);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W0=ue,H0=Symbol.for("react.element"),q0=Symbol.for("react.fragment"),G0=Object.prototype.hasOwnProperty,K0=W0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Q0={key:!0,ref:!0,__self:!0,__source:!0};function ng(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)G0.call(e,r)&&!Q0.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:H0,type:t,key:s,ref:a,props:i,_owner:K0.current}}Ya.Fragment=q0;Ya.jsx=ng;Ya.jsxs=ng;qm.exports=Ya;var w=qm.exports,Nu={},rg={exports:{}},Nt={},ig={exports:{}},sg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,X){var J=$.length;$.push(X);e:for(;0<J;){var pe=J-1>>>1,ce=$[pe];if(0<i(ce,X))$[pe]=X,$[J]=ce,J=pe;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var X=$[0],J=$.pop();if(J!==X){$[0]=J;e:for(var pe=0,ce=$.length,Se=ce>>>1;pe<Se;){var Bt=2*(pe+1)-1,zt=$[Bt],Ot=Bt+1,$t=$[Ot];if(0>i(zt,J))Ot<ce&&0>i($t,zt)?($[pe]=$t,$[Ot]=J,pe=Ot):($[pe]=zt,$[Bt]=J,pe=Bt);else if(Ot<ce&&0>i($t,J))$[pe]=$t,$[Ot]=J,pe=Ot;else break e}}return X}function i($,X){var J=$.sortIndex-X.sortIndex;return J!==0?J:$.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],h=[],f=1,m=null,y=3,A=!1,D=!1,V=!1,L=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I($){for(var X=n(h);X!==null;){if(X.callback===null)r(h);else if(X.startTime<=$)r(h),X.sortIndex=X.expirationTime,e(u,X);else break;X=n(h)}}function N($){if(V=!1,I($),!D)if(n(u)!==null)D=!0,Ve(F);else{var X=n(h);X!==null&&Ie(N,X.startTime-$)}}function F($,X){D=!1,V&&(V=!1,C(g),g=-1),A=!0;var J=y;try{for(I(X),m=n(u);m!==null&&(!(m.expirationTime>X)||$&&!x());){var pe=m.callback;if(typeof pe=="function"){m.callback=null,y=m.priorityLevel;var ce=pe(m.expirationTime<=X);X=t.unstable_now(),typeof ce=="function"?m.callback=ce:m===n(u)&&r(u),I(X)}else r(u);m=n(u)}if(m!==null)var Se=!0;else{var Bt=n(h);Bt!==null&&Ie(N,Bt.startTime-X),Se=!1}return Se}finally{m=null,y=J,A=!1}}var U=!1,T=null,g=-1,E=5,S=-1;function x(){return!(t.unstable_now()-S<E)}function k(){if(T!==null){var $=t.unstable_now();S=$;var X=!0;try{X=T(!0,$)}finally{X?_():(U=!1,T=null)}}else U=!1}var _;if(typeof v=="function")_=function(){v(k)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,te=Q.port2;Q.port1.onmessage=k,_=function(){te.postMessage(null)}}else _=function(){L(k,0)};function Ve($){T=$,U||(U=!0,_())}function Ie($,X){g=L(function(){$(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){D||A||(D=!0,Ve(F))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function($){switch(y){case 1:case 2:case 3:var X=3;break;default:X=y}var J=y;y=X;try{return $()}finally{y=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,X){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var J=y;y=$;try{return X()}finally{y=J}},t.unstable_scheduleCallback=function($,X,J){var pe=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?pe+J:pe):J=pe,$){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=J+ce,$={id:f++,callback:X,priorityLevel:$,startTime:J,expirationTime:ce,sortIndex:-1},J>pe?($.sortIndex=J,e(h,$),n(u)===null&&$===n(h)&&(V?(C(g),g=-1):V=!0,Ie(N,J-pe))):($.sortIndex=ce,e(u,$),D||A||(D=!0,Ve(F))),$},t.unstable_shouldYield=x,t.unstable_wrapCallback=function($){var X=y;return function(){var J=y;y=X;try{return $.apply(this,arguments)}finally{y=J}}}})(sg);ig.exports=sg;var X0=ig.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y0=ue,Dt=X0;function j(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var og=new Set,Ps={};function Nr(t,e){fi(t,e),fi(t+"Capture",e)}function fi(t,e){for(Ps[t]=e,t=0;t<e.length;t++)og.add(e[t])}var yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vu=Object.prototype.hasOwnProperty,J0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Of={},Lf={};function Z0(t){return Vu.call(Lf,t)?!0:Vu.call(Of,t)?!1:J0.test(t)?Lf[t]=!0:(Of[t]=!0,!1)}function ew(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function tw(t,e,n,r){if(e===null||typeof e>"u"||ew(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gt(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Ye={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ye[t]=new gt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ye[e]=new gt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ye[t]=new gt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ye[t]=new gt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ye[t]=new gt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ye[t]=new gt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ye[t]=new gt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ye[t]=new gt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ye[t]=new gt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Jc=/[\-:]([a-z])/g;function Zc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Jc,Zc);Ye[e]=new gt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Jc,Zc);Ye[e]=new gt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Jc,Zc);Ye[e]=new gt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ye[t]=new gt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ye.xlinkHref=new gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ye[t]=new gt(t,1,!1,t.toLowerCase(),null,!0,!0)});function eh(t,e,n,r){var i=Ye.hasOwnProperty(e)?Ye[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(tw(e,n,i,r)&&(n=null),r||i===null?Z0(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Sn=Y0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,No=Symbol.for("react.element"),Kr=Symbol.for("react.portal"),Qr=Symbol.for("react.fragment"),th=Symbol.for("react.strict_mode"),Ou=Symbol.for("react.profiler"),ag=Symbol.for("react.provider"),lg=Symbol.for("react.context"),nh=Symbol.for("react.forward_ref"),Lu=Symbol.for("react.suspense"),bu=Symbol.for("react.suspense_list"),rh=Symbol.for("react.memo"),kn=Symbol.for("react.lazy"),ug=Symbol.for("react.offscreen"),bf=Symbol.iterator;function Yi(t){return t===null||typeof t!="object"?null:(t=bf&&t[bf]||t["@@iterator"],typeof t=="function"?t:null)}var Ce=Object.assign,Ql;function as(t){if(Ql===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ql=e&&e[1]||""}return`
`+Ql+t}var Xl=!1;function Yl(t,e){if(!t||Xl)return"";Xl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,l=s.length-1;1<=a&&0<=l&&i[a]!==s[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==s[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==s[l]){var u=`
`+i[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=l);break}}}finally{Xl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?as(t):""}function nw(t){switch(t.tag){case 5:return as(t.type);case 16:return as("Lazy");case 13:return as("Suspense");case 19:return as("SuspenseList");case 0:case 2:case 15:return t=Yl(t.type,!1),t;case 11:return t=Yl(t.type.render,!1),t;case 1:return t=Yl(t.type,!0),t;default:return""}}function Mu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Qr:return"Fragment";case Kr:return"Portal";case Ou:return"Profiler";case th:return"StrictMode";case Lu:return"Suspense";case bu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case lg:return(t.displayName||"Context")+".Consumer";case ag:return(t._context.displayName||"Context")+".Provider";case nh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case rh:return e=t.displayName||null,e!==null?e:Mu(t.type)||"Memo";case kn:e=t._payload,t=t._init;try{return Mu(t(e))}catch{}}return null}function rw(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Mu(e);case 8:return e===th?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Xn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function cg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function iw(t){var e=cg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Vo(t){t._valueTracker||(t._valueTracker=iw(t))}function hg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=cg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ya(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Fu(t,e){var n=e.checked;return Ce({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Mf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Xn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function dg(t,e){e=e.checked,e!=null&&eh(t,"checked",e,!1)}function ju(t,e){dg(t,e);var n=Xn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Uu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Uu(t,e.type,Xn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ff(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Uu(t,e,n){(e!=="number"||ya(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ls=Array.isArray;function oi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Xn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Bu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(j(91));return Ce({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function jf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(j(92));if(ls(n)){if(1<n.length)throw Error(j(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Xn(n)}}function fg(t,e){var n=Xn(e.value),r=Xn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Uf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function pg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?pg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Oo,mg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Oo=Oo||document.createElement("div"),Oo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Oo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ds(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var gs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sw=["Webkit","ms","Moz","O"];Object.keys(gs).forEach(function(t){sw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),gs[e]=gs[t]})});function gg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||gs.hasOwnProperty(t)&&gs[t]?(""+e).trim():e+"px"}function yg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=gg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var ow=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $u(t,e){if(e){if(ow[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(j(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(j(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(j(61))}if(e.style!=null&&typeof e.style!="object")throw Error(j(62))}}function Wu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hu=null;function ih(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qu=null,ai=null,li=null;function Bf(t){if(t=so(t)){if(typeof qu!="function")throw Error(j(280));var e=t.stateNode;e&&(e=nl(e),qu(t.stateNode,t.type,e))}}function _g(t){ai?li?li.push(t):li=[t]:ai=t}function vg(){if(ai){var t=ai,e=li;if(li=ai=null,Bf(t),e)for(t=0;t<e.length;t++)Bf(e[t])}}function wg(t,e){return t(e)}function Eg(){}var Jl=!1;function Tg(t,e,n){if(Jl)return t(e,n);Jl=!0;try{return wg(t,e,n)}finally{Jl=!1,(ai!==null||li!==null)&&(Eg(),vg())}}function Ns(t,e){var n=t.stateNode;if(n===null)return null;var r=nl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(j(231,e,typeof n));return n}var Gu=!1;if(yn)try{var Ji={};Object.defineProperty(Ji,"passive",{get:function(){Gu=!0}}),window.addEventListener("test",Ji,Ji),window.removeEventListener("test",Ji,Ji)}catch{Gu=!1}function aw(t,e,n,r,i,s,a,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(f){this.onError(f)}}var ys=!1,_a=null,va=!1,Ku=null,lw={onError:function(t){ys=!0,_a=t}};function uw(t,e,n,r,i,s,a,l,u){ys=!1,_a=null,aw.apply(lw,arguments)}function cw(t,e,n,r,i,s,a,l,u){if(uw.apply(this,arguments),ys){if(ys){var h=_a;ys=!1,_a=null}else throw Error(j(198));va||(va=!0,Ku=h)}}function Vr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ig(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function zf(t){if(Vr(t)!==t)throw Error(j(188))}function hw(t){var e=t.alternate;if(!e){if(e=Vr(t),e===null)throw Error(j(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return zf(i),t;if(s===r)return zf(i),e;s=s.sibling}throw Error(j(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(j(189))}}if(n.alternate!==r)throw Error(j(190))}if(n.tag!==3)throw Error(j(188));return n.stateNode.current===n?t:e}function Sg(t){return t=hw(t),t!==null?Ag(t):null}function Ag(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ag(t);if(e!==null)return e;t=t.sibling}return null}var Rg=Dt.unstable_scheduleCallback,$f=Dt.unstable_cancelCallback,dw=Dt.unstable_shouldYield,fw=Dt.unstable_requestPaint,Le=Dt.unstable_now,pw=Dt.unstable_getCurrentPriorityLevel,sh=Dt.unstable_ImmediatePriority,Cg=Dt.unstable_UserBlockingPriority,wa=Dt.unstable_NormalPriority,mw=Dt.unstable_LowPriority,xg=Dt.unstable_IdlePriority,Ja=null,sn=null;function gw(t){if(sn&&typeof sn.onCommitFiberRoot=="function")try{sn.onCommitFiberRoot(Ja,t,void 0,(t.current.flags&128)===128)}catch{}}var Qt=Math.clz32?Math.clz32:vw,yw=Math.log,_w=Math.LN2;function vw(t){return t>>>=0,t===0?32:31-(yw(t)/_w|0)|0}var Lo=64,bo=4194304;function us(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ea(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~i;l!==0?r=us(l):(s&=a,s!==0&&(r=us(s)))}else a=n&~i,a!==0?r=us(a):s!==0&&(r=us(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Qt(e),i=1<<n,r|=t[n],e&=~i;return r}function ww(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ew(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-Qt(s),l=1<<a,u=i[a];u===-1?(!(l&n)||l&r)&&(i[a]=ww(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function Qu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function kg(){var t=Lo;return Lo<<=1,!(Lo&4194240)&&(Lo=64),t}function Zl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ro(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Qt(e),t[e]=n}function Tw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Qt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function oh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Qt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var de=0;function Pg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Dg,ah,Ng,Vg,Og,Xu=!1,Mo=[],Mn=null,Fn=null,jn=null,Vs=new Map,Os=new Map,Dn=[],Iw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wf(t,e){switch(t){case"focusin":case"focusout":Mn=null;break;case"dragenter":case"dragleave":Fn=null;break;case"mouseover":case"mouseout":jn=null;break;case"pointerover":case"pointerout":Vs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Os.delete(e.pointerId)}}function Zi(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=so(e),e!==null&&ah(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Sw(t,e,n,r,i){switch(e){case"focusin":return Mn=Zi(Mn,t,e,n,r,i),!0;case"dragenter":return Fn=Zi(Fn,t,e,n,r,i),!0;case"mouseover":return jn=Zi(jn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Vs.set(s,Zi(Vs.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Os.set(s,Zi(Os.get(s)||null,t,e,n,r,i)),!0}return!1}function Lg(t){var e=pr(t.target);if(e!==null){var n=Vr(e);if(n!==null){if(e=n.tag,e===13){if(e=Ig(n),e!==null){t.blockedOn=e,Og(t.priority,function(){Ng(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function na(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Yu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Hu=r,n.target.dispatchEvent(r),Hu=null}else return e=so(n),e!==null&&ah(e),t.blockedOn=n,!1;e.shift()}return!0}function Hf(t,e,n){na(t)&&n.delete(e)}function Aw(){Xu=!1,Mn!==null&&na(Mn)&&(Mn=null),Fn!==null&&na(Fn)&&(Fn=null),jn!==null&&na(jn)&&(jn=null),Vs.forEach(Hf),Os.forEach(Hf)}function es(t,e){t.blockedOn===e&&(t.blockedOn=null,Xu||(Xu=!0,Dt.unstable_scheduleCallback(Dt.unstable_NormalPriority,Aw)))}function Ls(t){function e(i){return es(i,t)}if(0<Mo.length){es(Mo[0],t);for(var n=1;n<Mo.length;n++){var r=Mo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Mn!==null&&es(Mn,t),Fn!==null&&es(Fn,t),jn!==null&&es(jn,t),Vs.forEach(e),Os.forEach(e),n=0;n<Dn.length;n++)r=Dn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Dn.length&&(n=Dn[0],n.blockedOn===null);)Lg(n),n.blockedOn===null&&Dn.shift()}var ui=Sn.ReactCurrentBatchConfig,Ta=!0;function Rw(t,e,n,r){var i=de,s=ui.transition;ui.transition=null;try{de=1,lh(t,e,n,r)}finally{de=i,ui.transition=s}}function Cw(t,e,n,r){var i=de,s=ui.transition;ui.transition=null;try{de=4,lh(t,e,n,r)}finally{de=i,ui.transition=s}}function lh(t,e,n,r){if(Ta){var i=Yu(t,e,n,r);if(i===null)uu(t,e,r,Ia,n),Wf(t,r);else if(Sw(i,t,e,n,r))r.stopPropagation();else if(Wf(t,r),e&4&&-1<Iw.indexOf(t)){for(;i!==null;){var s=so(i);if(s!==null&&Dg(s),s=Yu(t,e,n,r),s===null&&uu(t,e,r,Ia,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else uu(t,e,r,null,n)}}var Ia=null;function Yu(t,e,n,r){if(Ia=null,t=ih(r),t=pr(t),t!==null)if(e=Vr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ig(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ia=t,null}function bg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pw()){case sh:return 1;case Cg:return 4;case wa:case mw:return 16;case xg:return 536870912;default:return 16}default:return 16}}var On=null,uh=null,ra=null;function Mg(){if(ra)return ra;var t,e=uh,n=e.length,r,i="value"in On?On.value:On.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return ra=i.slice(t,1<r?1-r:void 0)}function ia(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Fo(){return!0}function qf(){return!1}function Vt(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Fo:qf,this.isPropagationStopped=qf,this}return Ce(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Fo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Fo)},persist:function(){},isPersistent:Fo}),e}var Pi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ch=Vt(Pi),io=Ce({},Pi,{view:0,detail:0}),xw=Vt(io),eu,tu,ts,Za=Ce({},io,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ts&&(ts&&t.type==="mousemove"?(eu=t.screenX-ts.screenX,tu=t.screenY-ts.screenY):tu=eu=0,ts=t),eu)},movementY:function(t){return"movementY"in t?t.movementY:tu}}),Gf=Vt(Za),kw=Ce({},Za,{dataTransfer:0}),Pw=Vt(kw),Dw=Ce({},io,{relatedTarget:0}),nu=Vt(Dw),Nw=Ce({},Pi,{animationName:0,elapsedTime:0,pseudoElement:0}),Vw=Vt(Nw),Ow=Ce({},Pi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Lw=Vt(Ow),bw=Ce({},Pi,{data:0}),Kf=Vt(bw),Mw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Uw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=jw[t])?!!e[t]:!1}function hh(){return Uw}var Bw=Ce({},io,{key:function(t){if(t.key){var e=Mw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ia(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Fw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hh,charCode:function(t){return t.type==="keypress"?ia(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ia(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),zw=Vt(Bw),$w=Ce({},Za,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qf=Vt($w),Ww=Ce({},io,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hh}),Hw=Vt(Ww),qw=Ce({},Pi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gw=Vt(qw),Kw=Ce({},Za,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Qw=Vt(Kw),Xw=[9,13,27,32],dh=yn&&"CompositionEvent"in window,_s=null;yn&&"documentMode"in document&&(_s=document.documentMode);var Yw=yn&&"TextEvent"in window&&!_s,Fg=yn&&(!dh||_s&&8<_s&&11>=_s),Xf=" ",Yf=!1;function jg(t,e){switch(t){case"keyup":return Xw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ug(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Xr=!1;function Jw(t,e){switch(t){case"compositionend":return Ug(e);case"keypress":return e.which!==32?null:(Yf=!0,Xf);case"textInput":return t=e.data,t===Xf&&Yf?null:t;default:return null}}function Zw(t,e){if(Xr)return t==="compositionend"||!dh&&jg(t,e)?(t=Mg(),ra=uh=On=null,Xr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Fg&&e.locale!=="ko"?null:e.data;default:return null}}var eE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!eE[t.type]:e==="textarea"}function Bg(t,e,n,r){_g(r),e=Sa(e,"onChange"),0<e.length&&(n=new ch("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var vs=null,bs=null;function tE(t){Jg(t,0)}function el(t){var e=Zr(t);if(hg(e))return t}function nE(t,e){if(t==="change")return e}var zg=!1;if(yn){var ru;if(yn){var iu="oninput"in document;if(!iu){var Zf=document.createElement("div");Zf.setAttribute("oninput","return;"),iu=typeof Zf.oninput=="function"}ru=iu}else ru=!1;zg=ru&&(!document.documentMode||9<document.documentMode)}function ep(){vs&&(vs.detachEvent("onpropertychange",$g),bs=vs=null)}function $g(t){if(t.propertyName==="value"&&el(bs)){var e=[];Bg(e,bs,t,ih(t)),Tg(tE,e)}}function rE(t,e,n){t==="focusin"?(ep(),vs=e,bs=n,vs.attachEvent("onpropertychange",$g)):t==="focusout"&&ep()}function iE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return el(bs)}function sE(t,e){if(t==="click")return el(e)}function oE(t,e){if(t==="input"||t==="change")return el(e)}function aE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Jt=typeof Object.is=="function"?Object.is:aE;function Ms(t,e){if(Jt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Vu.call(e,i)||!Jt(t[i],e[i]))return!1}return!0}function tp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function np(t,e){var n=tp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=tp(n)}}function Wg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Wg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Hg(){for(var t=window,e=ya();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ya(t.document)}return e}function fh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function lE(t){var e=Hg(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Wg(n.ownerDocument.documentElement,n)){if(r!==null&&fh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=np(n,s);var a=np(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var uE=yn&&"documentMode"in document&&11>=document.documentMode,Yr=null,Ju=null,ws=null,Zu=!1;function rp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Zu||Yr==null||Yr!==ya(r)||(r=Yr,"selectionStart"in r&&fh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ws&&Ms(ws,r)||(ws=r,r=Sa(Ju,"onSelect"),0<r.length&&(e=new ch("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Yr)))}function jo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Jr={animationend:jo("Animation","AnimationEnd"),animationiteration:jo("Animation","AnimationIteration"),animationstart:jo("Animation","AnimationStart"),transitionend:jo("Transition","TransitionEnd")},su={},qg={};yn&&(qg=document.createElement("div").style,"AnimationEvent"in window||(delete Jr.animationend.animation,delete Jr.animationiteration.animation,delete Jr.animationstart.animation),"TransitionEvent"in window||delete Jr.transitionend.transition);function tl(t){if(su[t])return su[t];if(!Jr[t])return t;var e=Jr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in qg)return su[t]=e[n];return t}var Gg=tl("animationend"),Kg=tl("animationiteration"),Qg=tl("animationstart"),Xg=tl("transitionend"),Yg=new Map,ip="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tr(t,e){Yg.set(t,e),Nr(e,[t])}for(var ou=0;ou<ip.length;ou++){var au=ip[ou],cE=au.toLowerCase(),hE=au[0].toUpperCase()+au.slice(1);tr(cE,"on"+hE)}tr(Gg,"onAnimationEnd");tr(Kg,"onAnimationIteration");tr(Qg,"onAnimationStart");tr("dblclick","onDoubleClick");tr("focusin","onFocus");tr("focusout","onBlur");tr(Xg,"onTransitionEnd");fi("onMouseEnter",["mouseout","mouseover"]);fi("onMouseLeave",["mouseout","mouseover"]);fi("onPointerEnter",["pointerout","pointerover"]);fi("onPointerLeave",["pointerout","pointerover"]);Nr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Nr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Nr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Nr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Nr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Nr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dE=new Set("cancel close invalid load scroll toggle".split(" ").concat(cs));function sp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,cw(r,e,void 0,t),t.currentTarget=null}function Jg(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;sp(i,l,h),s=u}else for(a=0;a<r.length;a++){if(l=r[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;sp(i,l,h),s=u}}}if(va)throw t=Ku,va=!1,Ku=null,t}function ve(t,e){var n=e[ic];n===void 0&&(n=e[ic]=new Set);var r=t+"__bubble";n.has(r)||(Zg(e,t,2,!1),n.add(r))}function lu(t,e,n){var r=0;e&&(r|=4),Zg(n,t,r,e)}var Uo="_reactListening"+Math.random().toString(36).slice(2);function Fs(t){if(!t[Uo]){t[Uo]=!0,og.forEach(function(n){n!=="selectionchange"&&(dE.has(n)||lu(n,!1,t),lu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Uo]||(e[Uo]=!0,lu("selectionchange",!1,e))}}function Zg(t,e,n,r){switch(bg(e)){case 1:var i=Rw;break;case 4:i=Cw;break;default:i=lh}n=i.bind(null,e,n,t),i=void 0,!Gu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function uu(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;a=a.return}for(;l!==null;){if(a=pr(l),a===null)return;if(u=a.tag,u===5||u===6){r=s=a;continue e}l=l.parentNode}}r=r.return}Tg(function(){var h=s,f=ih(n),m=[];e:{var y=Yg.get(t);if(y!==void 0){var A=ch,D=t;switch(t){case"keypress":if(ia(n)===0)break e;case"keydown":case"keyup":A=zw;break;case"focusin":D="focus",A=nu;break;case"focusout":D="blur",A=nu;break;case"beforeblur":case"afterblur":A=nu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=Gf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=Pw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=Hw;break;case Gg:case Kg:case Qg:A=Vw;break;case Xg:A=Gw;break;case"scroll":A=xw;break;case"wheel":A=Qw;break;case"copy":case"cut":case"paste":A=Lw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=Qf}var V=(e&4)!==0,L=!V&&t==="scroll",C=V?y!==null?y+"Capture":null:y;V=[];for(var v=h,I;v!==null;){I=v;var N=I.stateNode;if(I.tag===5&&N!==null&&(I=N,C!==null&&(N=Ns(v,C),N!=null&&V.push(js(v,N,I)))),L)break;v=v.return}0<V.length&&(y=new A(y,D,null,n,f),m.push({event:y,listeners:V}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",A=t==="mouseout"||t==="pointerout",y&&n!==Hu&&(D=n.relatedTarget||n.fromElement)&&(pr(D)||D[_n]))break e;if((A||y)&&(y=f.window===f?f:(y=f.ownerDocument)?y.defaultView||y.parentWindow:window,A?(D=n.relatedTarget||n.toElement,A=h,D=D?pr(D):null,D!==null&&(L=Vr(D),D!==L||D.tag!==5&&D.tag!==6)&&(D=null)):(A=null,D=h),A!==D)){if(V=Gf,N="onMouseLeave",C="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(V=Qf,N="onPointerLeave",C="onPointerEnter",v="pointer"),L=A==null?y:Zr(A),I=D==null?y:Zr(D),y=new V(N,v+"leave",A,n,f),y.target=L,y.relatedTarget=I,N=null,pr(f)===h&&(V=new V(C,v+"enter",D,n,f),V.target=I,V.relatedTarget=L,N=V),L=N,A&&D)t:{for(V=A,C=D,v=0,I=V;I;I=$r(I))v++;for(I=0,N=C;N;N=$r(N))I++;for(;0<v-I;)V=$r(V),v--;for(;0<I-v;)C=$r(C),I--;for(;v--;){if(V===C||C!==null&&V===C.alternate)break t;V=$r(V),C=$r(C)}V=null}else V=null;A!==null&&op(m,y,A,V,!1),D!==null&&L!==null&&op(m,L,D,V,!0)}}e:{if(y=h?Zr(h):window,A=y.nodeName&&y.nodeName.toLowerCase(),A==="select"||A==="input"&&y.type==="file")var F=nE;else if(Jf(y))if(zg)F=oE;else{F=iE;var U=rE}else(A=y.nodeName)&&A.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(F=sE);if(F&&(F=F(t,h))){Bg(m,F,n,f);break e}U&&U(t,y,h),t==="focusout"&&(U=y._wrapperState)&&U.controlled&&y.type==="number"&&Uu(y,"number",y.value)}switch(U=h?Zr(h):window,t){case"focusin":(Jf(U)||U.contentEditable==="true")&&(Yr=U,Ju=h,ws=null);break;case"focusout":ws=Ju=Yr=null;break;case"mousedown":Zu=!0;break;case"contextmenu":case"mouseup":case"dragend":Zu=!1,rp(m,n,f);break;case"selectionchange":if(uE)break;case"keydown":case"keyup":rp(m,n,f)}var T;if(dh)e:{switch(t){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else Xr?jg(t,n)&&(g="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(g="onCompositionStart");g&&(Fg&&n.locale!=="ko"&&(Xr||g!=="onCompositionStart"?g==="onCompositionEnd"&&Xr&&(T=Mg()):(On=f,uh="value"in On?On.value:On.textContent,Xr=!0)),U=Sa(h,g),0<U.length&&(g=new Kf(g,t,null,n,f),m.push({event:g,listeners:U}),T?g.data=T:(T=Ug(n),T!==null&&(g.data=T)))),(T=Yw?Jw(t,n):Zw(t,n))&&(h=Sa(h,"onBeforeInput"),0<h.length&&(f=new Kf("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:h}),f.data=T))}Jg(m,e)})}function js(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Sa(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ns(t,n),s!=null&&r.unshift(js(t,s,i)),s=Ns(t,e),s!=null&&r.push(js(t,s,i))),t=t.return}return r}function $r(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function op(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,i?(u=Ns(n,s),u!=null&&a.unshift(js(n,u,l))):i||(u=Ns(n,s),u!=null&&a.push(js(n,u,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var fE=/\r\n?/g,pE=/\u0000|\uFFFD/g;function ap(t){return(typeof t=="string"?t:""+t).replace(fE,`
`).replace(pE,"")}function Bo(t,e,n){if(e=ap(e),ap(t)!==e&&n)throw Error(j(425))}function Aa(){}var ec=null,tc=null;function nc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var rc=typeof setTimeout=="function"?setTimeout:void 0,mE=typeof clearTimeout=="function"?clearTimeout:void 0,lp=typeof Promise=="function"?Promise:void 0,gE=typeof queueMicrotask=="function"?queueMicrotask:typeof lp<"u"?function(t){return lp.resolve(null).then(t).catch(yE)}:rc;function yE(t){setTimeout(function(){throw t})}function cu(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ls(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ls(e)}function Un(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function up(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Di=Math.random().toString(36).slice(2),nn="__reactFiber$"+Di,Us="__reactProps$"+Di,_n="__reactContainer$"+Di,ic="__reactEvents$"+Di,_E="__reactListeners$"+Di,vE="__reactHandles$"+Di;function pr(t){var e=t[nn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[_n]||n[nn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=up(t);t!==null;){if(n=t[nn])return n;t=up(t)}return e}t=n,n=t.parentNode}return null}function so(t){return t=t[nn]||t[_n],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Zr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(j(33))}function nl(t){return t[Us]||null}var sc=[],ei=-1;function nr(t){return{current:t}}function Ee(t){0>ei||(t.current=sc[ei],sc[ei]=null,ei--)}function ye(t,e){ei++,sc[ei]=t.current,t.current=e}var Yn={},lt=nr(Yn),wt=nr(!1),Ir=Yn;function pi(t,e){var n=t.type.contextTypes;if(!n)return Yn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Et(t){return t=t.childContextTypes,t!=null}function Ra(){Ee(wt),Ee(lt)}function cp(t,e,n){if(lt.current!==Yn)throw Error(j(168));ye(lt,e),ye(wt,n)}function ey(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(j(108,rw(t)||"Unknown",i));return Ce({},n,r)}function Ca(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Yn,Ir=lt.current,ye(lt,t),ye(wt,wt.current),!0}function hp(t,e,n){var r=t.stateNode;if(!r)throw Error(j(169));n?(t=ey(t,e,Ir),r.__reactInternalMemoizedMergedChildContext=t,Ee(wt),Ee(lt),ye(lt,t)):Ee(wt),ye(wt,n)}var fn=null,rl=!1,hu=!1;function ty(t){fn===null?fn=[t]:fn.push(t)}function wE(t){rl=!0,ty(t)}function rr(){if(!hu&&fn!==null){hu=!0;var t=0,e=de;try{var n=fn;for(de=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}fn=null,rl=!1}catch(i){throw fn!==null&&(fn=fn.slice(t+1)),Rg(sh,rr),i}finally{de=e,hu=!1}}return null}var ti=[],ni=0,xa=null,ka=0,Lt=[],bt=0,Sr=null,pn=1,mn="";function hr(t,e){ti[ni++]=ka,ti[ni++]=xa,xa=t,ka=e}function ny(t,e,n){Lt[bt++]=pn,Lt[bt++]=mn,Lt[bt++]=Sr,Sr=t;var r=pn;t=mn;var i=32-Qt(r)-1;r&=~(1<<i),n+=1;var s=32-Qt(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,pn=1<<32-Qt(e)+i|n<<i|r,mn=s+t}else pn=1<<s|n<<i|r,mn=t}function ph(t){t.return!==null&&(hr(t,1),ny(t,1,0))}function mh(t){for(;t===xa;)xa=ti[--ni],ti[ni]=null,ka=ti[--ni],ti[ni]=null;for(;t===Sr;)Sr=Lt[--bt],Lt[bt]=null,mn=Lt[--bt],Lt[bt]=null,pn=Lt[--bt],Lt[bt]=null}var Pt=null,Ct=null,Te=!1,Kt=null;function ry(t,e){var n=Mt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function dp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Pt=t,Ct=Un(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Pt=t,Ct=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Sr!==null?{id:pn,overflow:mn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Mt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Pt=t,Ct=null,!0):!1;default:return!1}}function oc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ac(t){if(Te){var e=Ct;if(e){var n=e;if(!dp(t,e)){if(oc(t))throw Error(j(418));e=Un(n.nextSibling);var r=Pt;e&&dp(t,e)?ry(r,n):(t.flags=t.flags&-4097|2,Te=!1,Pt=t)}}else{if(oc(t))throw Error(j(418));t.flags=t.flags&-4097|2,Te=!1,Pt=t}}}function fp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pt=t}function zo(t){if(t!==Pt)return!1;if(!Te)return fp(t),Te=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!nc(t.type,t.memoizedProps)),e&&(e=Ct)){if(oc(t))throw iy(),Error(j(418));for(;e;)ry(t,e),e=Un(e.nextSibling)}if(fp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(j(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ct=Un(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ct=null}}else Ct=Pt?Un(t.stateNode.nextSibling):null;return!0}function iy(){for(var t=Ct;t;)t=Un(t.nextSibling)}function mi(){Ct=Pt=null,Te=!1}function gh(t){Kt===null?Kt=[t]:Kt.push(t)}var EE=Sn.ReactCurrentBatchConfig;function ns(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(j(309));var r=n.stateNode}if(!r)throw Error(j(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var l=i.refs;a===null?delete l[s]:l[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(j(284));if(!n._owner)throw Error(j(290,t))}return t}function $o(t,e){throw t=Object.prototype.toString.call(e),Error(j(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function pp(t){var e=t._init;return e(t._payload)}function sy(t){function e(C,v){if(t){var I=C.deletions;I===null?(C.deletions=[v],C.flags|=16):I.push(v)}}function n(C,v){if(!t)return null;for(;v!==null;)e(C,v),v=v.sibling;return null}function r(C,v){for(C=new Map;v!==null;)v.key!==null?C.set(v.key,v):C.set(v.index,v),v=v.sibling;return C}function i(C,v){return C=Wn(C,v),C.index=0,C.sibling=null,C}function s(C,v,I){return C.index=I,t?(I=C.alternate,I!==null?(I=I.index,I<v?(C.flags|=2,v):I):(C.flags|=2,v)):(C.flags|=1048576,v)}function a(C){return t&&C.alternate===null&&(C.flags|=2),C}function l(C,v,I,N){return v===null||v.tag!==6?(v=_u(I,C.mode,N),v.return=C,v):(v=i(v,I),v.return=C,v)}function u(C,v,I,N){var F=I.type;return F===Qr?f(C,v,I.props.children,N,I.key):v!==null&&(v.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===kn&&pp(F)===v.type)?(N=i(v,I.props),N.ref=ns(C,v,I),N.return=C,N):(N=ha(I.type,I.key,I.props,null,C.mode,N),N.ref=ns(C,v,I),N.return=C,N)}function h(C,v,I,N){return v===null||v.tag!==4||v.stateNode.containerInfo!==I.containerInfo||v.stateNode.implementation!==I.implementation?(v=vu(I,C.mode,N),v.return=C,v):(v=i(v,I.children||[]),v.return=C,v)}function f(C,v,I,N,F){return v===null||v.tag!==7?(v=vr(I,C.mode,N,F),v.return=C,v):(v=i(v,I),v.return=C,v)}function m(C,v,I){if(typeof v=="string"&&v!==""||typeof v=="number")return v=_u(""+v,C.mode,I),v.return=C,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case No:return I=ha(v.type,v.key,v.props,null,C.mode,I),I.ref=ns(C,null,v),I.return=C,I;case Kr:return v=vu(v,C.mode,I),v.return=C,v;case kn:var N=v._init;return m(C,N(v._payload),I)}if(ls(v)||Yi(v))return v=vr(v,C.mode,I,null),v.return=C,v;$o(C,v)}return null}function y(C,v,I,N){var F=v!==null?v.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return F!==null?null:l(C,v,""+I,N);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case No:return I.key===F?u(C,v,I,N):null;case Kr:return I.key===F?h(C,v,I,N):null;case kn:return F=I._init,y(C,v,F(I._payload),N)}if(ls(I)||Yi(I))return F!==null?null:f(C,v,I,N,null);$o(C,I)}return null}function A(C,v,I,N,F){if(typeof N=="string"&&N!==""||typeof N=="number")return C=C.get(I)||null,l(v,C,""+N,F);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case No:return C=C.get(N.key===null?I:N.key)||null,u(v,C,N,F);case Kr:return C=C.get(N.key===null?I:N.key)||null,h(v,C,N,F);case kn:var U=N._init;return A(C,v,I,U(N._payload),F)}if(ls(N)||Yi(N))return C=C.get(I)||null,f(v,C,N,F,null);$o(v,N)}return null}function D(C,v,I,N){for(var F=null,U=null,T=v,g=v=0,E=null;T!==null&&g<I.length;g++){T.index>g?(E=T,T=null):E=T.sibling;var S=y(C,T,I[g],N);if(S===null){T===null&&(T=E);break}t&&T&&S.alternate===null&&e(C,T),v=s(S,v,g),U===null?F=S:U.sibling=S,U=S,T=E}if(g===I.length)return n(C,T),Te&&hr(C,g),F;if(T===null){for(;g<I.length;g++)T=m(C,I[g],N),T!==null&&(v=s(T,v,g),U===null?F=T:U.sibling=T,U=T);return Te&&hr(C,g),F}for(T=r(C,T);g<I.length;g++)E=A(T,C,g,I[g],N),E!==null&&(t&&E.alternate!==null&&T.delete(E.key===null?g:E.key),v=s(E,v,g),U===null?F=E:U.sibling=E,U=E);return t&&T.forEach(function(x){return e(C,x)}),Te&&hr(C,g),F}function V(C,v,I,N){var F=Yi(I);if(typeof F!="function")throw Error(j(150));if(I=F.call(I),I==null)throw Error(j(151));for(var U=F=null,T=v,g=v=0,E=null,S=I.next();T!==null&&!S.done;g++,S=I.next()){T.index>g?(E=T,T=null):E=T.sibling;var x=y(C,T,S.value,N);if(x===null){T===null&&(T=E);break}t&&T&&x.alternate===null&&e(C,T),v=s(x,v,g),U===null?F=x:U.sibling=x,U=x,T=E}if(S.done)return n(C,T),Te&&hr(C,g),F;if(T===null){for(;!S.done;g++,S=I.next())S=m(C,S.value,N),S!==null&&(v=s(S,v,g),U===null?F=S:U.sibling=S,U=S);return Te&&hr(C,g),F}for(T=r(C,T);!S.done;g++,S=I.next())S=A(T,C,g,S.value,N),S!==null&&(t&&S.alternate!==null&&T.delete(S.key===null?g:S.key),v=s(S,v,g),U===null?F=S:U.sibling=S,U=S);return t&&T.forEach(function(k){return e(C,k)}),Te&&hr(C,g),F}function L(C,v,I,N){if(typeof I=="object"&&I!==null&&I.type===Qr&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case No:e:{for(var F=I.key,U=v;U!==null;){if(U.key===F){if(F=I.type,F===Qr){if(U.tag===7){n(C,U.sibling),v=i(U,I.props.children),v.return=C,C=v;break e}}else if(U.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===kn&&pp(F)===U.type){n(C,U.sibling),v=i(U,I.props),v.ref=ns(C,U,I),v.return=C,C=v;break e}n(C,U);break}else e(C,U);U=U.sibling}I.type===Qr?(v=vr(I.props.children,C.mode,N,I.key),v.return=C,C=v):(N=ha(I.type,I.key,I.props,null,C.mode,N),N.ref=ns(C,v,I),N.return=C,C=N)}return a(C);case Kr:e:{for(U=I.key;v!==null;){if(v.key===U)if(v.tag===4&&v.stateNode.containerInfo===I.containerInfo&&v.stateNode.implementation===I.implementation){n(C,v.sibling),v=i(v,I.children||[]),v.return=C,C=v;break e}else{n(C,v);break}else e(C,v);v=v.sibling}v=vu(I,C.mode,N),v.return=C,C=v}return a(C);case kn:return U=I._init,L(C,v,U(I._payload),N)}if(ls(I))return D(C,v,I,N);if(Yi(I))return V(C,v,I,N);$o(C,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,v!==null&&v.tag===6?(n(C,v.sibling),v=i(v,I),v.return=C,C=v):(n(C,v),v=_u(I,C.mode,N),v.return=C,C=v),a(C)):n(C,v)}return L}var gi=sy(!0),oy=sy(!1),Pa=nr(null),Da=null,ri=null,yh=null;function _h(){yh=ri=Da=null}function vh(t){var e=Pa.current;Ee(Pa),t._currentValue=e}function lc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ci(t,e){Da=t,yh=ri=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(vt=!0),t.firstContext=null)}function jt(t){var e=t._currentValue;if(yh!==t)if(t={context:t,memoizedValue:e,next:null},ri===null){if(Da===null)throw Error(j(308));ri=t,Da.dependencies={lanes:0,firstContext:t}}else ri=ri.next=t;return e}var mr=null;function wh(t){mr===null?mr=[t]:mr.push(t)}function ay(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,wh(e)):(n.next=i.next,i.next=n),e.interleaved=n,vn(t,r)}function vn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Pn=!1;function Eh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ly(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function gn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Bn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,oe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,vn(t,n)}return i=r.interleaved,i===null?(e.next=e,wh(r)):(e.next=i.next,i.next=e),r.interleaved=e,vn(t,n)}function sa(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,oh(t,n)}}function mp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Na(t,e,n,r){var i=t.updateQueue;Pn=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?s=h:a.next=h,a=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==a&&(l===null?f.firstBaseUpdate=h:l.next=h,f.lastBaseUpdate=u))}if(s!==null){var m=i.baseState;a=0,f=h=u=null,l=s;do{var y=l.lane,A=l.eventTime;if((r&y)===y){f!==null&&(f=f.next={eventTime:A,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var D=t,V=l;switch(y=e,A=n,V.tag){case 1:if(D=V.payload,typeof D=="function"){m=D.call(A,m,y);break e}m=D;break e;case 3:D.flags=D.flags&-65537|128;case 0:if(D=V.payload,y=typeof D=="function"?D.call(A,m,y):D,y==null)break e;m=Ce({},m,y);break e;case 2:Pn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,y=i.effects,y===null?i.effects=[l]:y.push(l))}else A={eventTime:A,lane:y,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(h=f=A,u=m):f=f.next=A,a|=y;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;y=l,l=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(!0);if(f===null&&(u=m),i.baseState=u,i.firstBaseUpdate=h,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Rr|=a,t.lanes=a,t.memoizedState=m}}function gp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(j(191,i));i.call(r)}}}var oo={},on=nr(oo),Bs=nr(oo),zs=nr(oo);function gr(t){if(t===oo)throw Error(j(174));return t}function Th(t,e){switch(ye(zs,e),ye(Bs,t),ye(on,oo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:zu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=zu(e,t)}Ee(on),ye(on,e)}function yi(){Ee(on),Ee(Bs),Ee(zs)}function uy(t){gr(zs.current);var e=gr(on.current),n=zu(e,t.type);e!==n&&(ye(Bs,t),ye(on,n))}function Ih(t){Bs.current===t&&(Ee(on),Ee(Bs))}var Ae=nr(0);function Va(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var du=[];function Sh(){for(var t=0;t<du.length;t++)du[t]._workInProgressVersionPrimary=null;du.length=0}var oa=Sn.ReactCurrentDispatcher,fu=Sn.ReactCurrentBatchConfig,Ar=0,Re=null,je=null,$e=null,Oa=!1,Es=!1,$s=0,TE=0;function nt(){throw Error(j(321))}function Ah(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Jt(t[n],e[n]))return!1;return!0}function Rh(t,e,n,r,i,s){if(Ar=s,Re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,oa.current=t===null||t.memoizedState===null?RE:CE,t=n(r,i),Es){s=0;do{if(Es=!1,$s=0,25<=s)throw Error(j(301));s+=1,$e=je=null,e.updateQueue=null,oa.current=xE,t=n(r,i)}while(Es)}if(oa.current=La,e=je!==null&&je.next!==null,Ar=0,$e=je=Re=null,Oa=!1,e)throw Error(j(300));return t}function Ch(){var t=$s!==0;return $s=0,t}function tn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $e===null?Re.memoizedState=$e=t:$e=$e.next=t,$e}function Ut(){if(je===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=je.next;var e=$e===null?Re.memoizedState:$e.next;if(e!==null)$e=e,je=t;else{if(t===null)throw Error(j(310));je=t,t={memoizedState:je.memoizedState,baseState:je.baseState,baseQueue:je.baseQueue,queue:je.queue,next:null},$e===null?Re.memoizedState=$e=t:$e=$e.next=t}return $e}function Ws(t,e){return typeof e=="function"?e(t):e}function pu(t){var e=Ut(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var r=je,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=a=null,u=null,h=s;do{var f=h.lane;if((Ar&f)===f)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=m,a=r):u=u.next=m,Re.lanes|=f,Rr|=f}h=h.next}while(h!==null&&h!==s);u===null?a=r:u.next=l,Jt(r,e.memoizedState)||(vt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Re.lanes|=s,Rr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function mu(t){var e=Ut(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);Jt(s,e.memoizedState)||(vt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function cy(){}function hy(t,e){var n=Re,r=Ut(),i=e(),s=!Jt(r.memoizedState,i);if(s&&(r.memoizedState=i,vt=!0),r=r.queue,xh(py.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||$e!==null&&$e.memoizedState.tag&1){if(n.flags|=2048,Hs(9,fy.bind(null,n,r,i,e),void 0,null),We===null)throw Error(j(349));Ar&30||dy(n,e,i)}return i}function dy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function fy(t,e,n,r){e.value=n,e.getSnapshot=r,my(e)&&gy(t)}function py(t,e,n){return n(function(){my(e)&&gy(t)})}function my(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Jt(t,n)}catch{return!0}}function gy(t){var e=vn(t,1);e!==null&&Xt(e,t,1,-1)}function yp(t){var e=tn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:t},e.queue=t,t=t.dispatch=AE.bind(null,Re,t),[e.memoizedState,t]}function Hs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function yy(){return Ut().memoizedState}function aa(t,e,n,r){var i=tn();Re.flags|=t,i.memoizedState=Hs(1|e,n,void 0,r===void 0?null:r)}function il(t,e,n,r){var i=Ut();r=r===void 0?null:r;var s=void 0;if(je!==null){var a=je.memoizedState;if(s=a.destroy,r!==null&&Ah(r,a.deps)){i.memoizedState=Hs(e,n,s,r);return}}Re.flags|=t,i.memoizedState=Hs(1|e,n,s,r)}function _p(t,e){return aa(8390656,8,t,e)}function xh(t,e){return il(2048,8,t,e)}function _y(t,e){return il(4,2,t,e)}function vy(t,e){return il(4,4,t,e)}function wy(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ey(t,e,n){return n=n!=null?n.concat([t]):null,il(4,4,wy.bind(null,e,t),n)}function kh(){}function Ty(t,e){var n=Ut();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ah(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Iy(t,e){var n=Ut();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ah(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Sy(t,e,n){return Ar&21?(Jt(n,e)||(n=kg(),Re.lanes|=n,Rr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,vt=!0),t.memoizedState=n)}function IE(t,e){var n=de;de=n!==0&&4>n?n:4,t(!0);var r=fu.transition;fu.transition={};try{t(!1),e()}finally{de=n,fu.transition=r}}function Ay(){return Ut().memoizedState}function SE(t,e,n){var r=$n(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ry(t))Cy(e,n);else if(n=ay(t,e,n,r),n!==null){var i=ft();Xt(n,t,r,i),xy(n,e,r)}}function AE(t,e,n){var r=$n(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ry(t))Cy(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,l=s(a,n);if(i.hasEagerState=!0,i.eagerState=l,Jt(l,a)){var u=e.interleaved;u===null?(i.next=i,wh(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=ay(t,e,i,r),n!==null&&(i=ft(),Xt(n,t,r,i),xy(n,e,r))}}function Ry(t){var e=t.alternate;return t===Re||e!==null&&e===Re}function Cy(t,e){Es=Oa=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function xy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,oh(t,n)}}var La={readContext:jt,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useInsertionEffect:nt,useLayoutEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useMutableSource:nt,useSyncExternalStore:nt,useId:nt,unstable_isNewReconciler:!1},RE={readContext:jt,useCallback:function(t,e){return tn().memoizedState=[t,e===void 0?null:e],t},useContext:jt,useEffect:_p,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,aa(4194308,4,wy.bind(null,e,t),n)},useLayoutEffect:function(t,e){return aa(4194308,4,t,e)},useInsertionEffect:function(t,e){return aa(4,2,t,e)},useMemo:function(t,e){var n=tn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=tn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=SE.bind(null,Re,t),[r.memoizedState,t]},useRef:function(t){var e=tn();return t={current:t},e.memoizedState=t},useState:yp,useDebugValue:kh,useDeferredValue:function(t){return tn().memoizedState=t},useTransition:function(){var t=yp(!1),e=t[0];return t=IE.bind(null,t[1]),tn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Re,i=tn();if(Te){if(n===void 0)throw Error(j(407));n=n()}else{if(n=e(),We===null)throw Error(j(349));Ar&30||dy(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,_p(py.bind(null,r,s,t),[t]),r.flags|=2048,Hs(9,fy.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=tn(),e=We.identifierPrefix;if(Te){var n=mn,r=pn;n=(r&~(1<<32-Qt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=$s++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=TE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},CE={readContext:jt,useCallback:Ty,useContext:jt,useEffect:xh,useImperativeHandle:Ey,useInsertionEffect:_y,useLayoutEffect:vy,useMemo:Iy,useReducer:pu,useRef:yy,useState:function(){return pu(Ws)},useDebugValue:kh,useDeferredValue:function(t){var e=Ut();return Sy(e,je.memoizedState,t)},useTransition:function(){var t=pu(Ws)[0],e=Ut().memoizedState;return[t,e]},useMutableSource:cy,useSyncExternalStore:hy,useId:Ay,unstable_isNewReconciler:!1},xE={readContext:jt,useCallback:Ty,useContext:jt,useEffect:xh,useImperativeHandle:Ey,useInsertionEffect:_y,useLayoutEffect:vy,useMemo:Iy,useReducer:mu,useRef:yy,useState:function(){return mu(Ws)},useDebugValue:kh,useDeferredValue:function(t){var e=Ut();return je===null?e.memoizedState=t:Sy(e,je.memoizedState,t)},useTransition:function(){var t=mu(Ws)[0],e=Ut().memoizedState;return[t,e]},useMutableSource:cy,useSyncExternalStore:hy,useId:Ay,unstable_isNewReconciler:!1};function qt(t,e){if(t&&t.defaultProps){e=Ce({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function uc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ce({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var sl={isMounted:function(t){return(t=t._reactInternals)?Vr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ft(),i=$n(t),s=gn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Bn(t,s,i),e!==null&&(Xt(e,t,i,r),sa(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ft(),i=$n(t),s=gn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Bn(t,s,i),e!==null&&(Xt(e,t,i,r),sa(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ft(),r=$n(t),i=gn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Bn(t,i,r),e!==null&&(Xt(e,t,r,n),sa(e,t,r))}};function vp(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!Ms(n,r)||!Ms(i,s):!0}function ky(t,e,n){var r=!1,i=Yn,s=e.contextType;return typeof s=="object"&&s!==null?s=jt(s):(i=Et(e)?Ir:lt.current,r=e.contextTypes,s=(r=r!=null)?pi(t,i):Yn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=sl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function wp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&sl.enqueueReplaceState(e,e.state,null)}function cc(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Eh(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=jt(s):(s=Et(e)?Ir:lt.current,i.context=pi(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(uc(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&sl.enqueueReplaceState(i,i.state,null),Na(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function _i(t,e){try{var n="",r=e;do n+=nw(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function gu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function hc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var kE=typeof WeakMap=="function"?WeakMap:Map;function Py(t,e,n){n=gn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ma||(Ma=!0,Ec=r),hc(t,e)},n}function Dy(t,e,n){n=gn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){hc(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){hc(t,e),typeof r!="function"&&(zn===null?zn=new Set([this]):zn.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Ep(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new kE;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=$E.bind(null,t,e,n),e.then(t,t))}function Tp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ip(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=gn(-1,1),e.tag=2,Bn(n,e,1))),n.lanes|=1),t)}var PE=Sn.ReactCurrentOwner,vt=!1;function dt(t,e,n,r){e.child=t===null?oy(e,null,n,r):gi(e,t.child,n,r)}function Sp(t,e,n,r,i){n=n.render;var s=e.ref;return ci(e,i),r=Rh(t,e,n,r,s,i),n=Ch(),t!==null&&!vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,wn(t,e,i)):(Te&&n&&ph(e),e.flags|=1,dt(t,e,r,i),e.child)}function Ap(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Mh(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Ny(t,e,s,r,i)):(t=ha(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ms,n(a,r)&&t.ref===e.ref)return wn(t,e,i)}return e.flags|=1,t=Wn(s,r),t.ref=e.ref,t.return=e,e.child=t}function Ny(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ms(s,r)&&t.ref===e.ref)if(vt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(vt=!0);else return e.lanes=t.lanes,wn(t,e,i)}return dc(t,e,n,r,i)}function Vy(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ye(si,Rt),Rt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ye(si,Rt),Rt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ye(si,Rt),Rt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ye(si,Rt),Rt|=r;return dt(t,e,i,n),e.child}function Oy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function dc(t,e,n,r,i){var s=Et(n)?Ir:lt.current;return s=pi(e,s),ci(e,i),n=Rh(t,e,n,r,s,i),r=Ch(),t!==null&&!vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,wn(t,e,i)):(Te&&r&&ph(e),e.flags|=1,dt(t,e,n,i),e.child)}function Rp(t,e,n,r,i){if(Et(n)){var s=!0;Ca(e)}else s=!1;if(ci(e,i),e.stateNode===null)la(t,e),ky(e,n,r),cc(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var u=a.context,h=n.contextType;typeof h=="object"&&h!==null?h=jt(h):(h=Et(n)?Ir:lt.current,h=pi(e,h));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||u!==h)&&wp(e,a,r,h),Pn=!1;var y=e.memoizedState;a.state=y,Na(e,r,a,i),u=e.memoizedState,l!==r||y!==u||wt.current||Pn?(typeof f=="function"&&(uc(e,n,f,r),u=e.memoizedState),(l=Pn||vp(e,n,l,r,y,u,h))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=h,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,ly(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:qt(e.type,l),a.props=h,m=e.pendingProps,y=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=jt(u):(u=Et(n)?Ir:lt.current,u=pi(e,u));var A=n.getDerivedStateFromProps;(f=typeof A=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==m||y!==u)&&wp(e,a,r,u),Pn=!1,y=e.memoizedState,a.state=y,Na(e,r,a,i);var D=e.memoizedState;l!==m||y!==D||wt.current||Pn?(typeof A=="function"&&(uc(e,n,A,r),D=e.memoizedState),(h=Pn||vp(e,n,h,r,y,D,u)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,D,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,D,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=D),a.props=r,a.state=D,a.context=u,r=h):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return fc(t,e,n,r,s,i)}function fc(t,e,n,r,i,s){Oy(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&hp(e,n,!1),wn(t,e,s);r=e.stateNode,PE.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=gi(e,t.child,null,s),e.child=gi(e,null,l,s)):dt(t,e,l,s),e.memoizedState=r.state,i&&hp(e,n,!0),e.child}function Ly(t){var e=t.stateNode;e.pendingContext?cp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&cp(t,e.context,!1),Th(t,e.containerInfo)}function Cp(t,e,n,r,i){return mi(),gh(i),e.flags|=256,dt(t,e,n,r),e.child}var pc={dehydrated:null,treeContext:null,retryLane:0};function mc(t){return{baseLanes:t,cachePool:null,transitions:null}}function by(t,e,n){var r=e.pendingProps,i=Ae.current,s=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ye(Ae,i&1),t===null)return ac(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=ll(a,r,0,null),t=vr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=mc(n),e.memoizedState=pc,t):Ph(e,a));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return DE(t,e,a,r,l,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Wn(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Wn(l,s):(s=vr(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?mc(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=pc,r}return s=t.child,t=s.sibling,r=Wn(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ph(t,e){return e=ll({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Wo(t,e,n,r){return r!==null&&gh(r),gi(e,t.child,null,n),t=Ph(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function DE(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=gu(Error(j(422))),Wo(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=ll({mode:"visible",children:r.children},i,0,null),s=vr(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&gi(e,t.child,null,a),e.child.memoizedState=mc(a),e.memoizedState=pc,s);if(!(e.mode&1))return Wo(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(j(419)),r=gu(s,r,void 0),Wo(t,e,a,r)}if(l=(a&t.childLanes)!==0,vt||l){if(r=We,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,vn(t,i),Xt(r,t,i,-1))}return bh(),r=gu(Error(j(421))),Wo(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=WE.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Ct=Un(i.nextSibling),Pt=e,Te=!0,Kt=null,t!==null&&(Lt[bt++]=pn,Lt[bt++]=mn,Lt[bt++]=Sr,pn=t.id,mn=t.overflow,Sr=e),e=Ph(e,r.children),e.flags|=4096,e)}function xp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),lc(t.return,e,n)}function yu(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function My(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(dt(t,e,r.children,n),r=Ae.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&xp(t,n,e);else if(t.tag===19)xp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ye(Ae,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Va(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),yu(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Va(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}yu(e,!0,n,null,s);break;case"together":yu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function la(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function wn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Rr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(j(153));if(e.child!==null){for(t=e.child,n=Wn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Wn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function NE(t,e,n){switch(e.tag){case 3:Ly(e),mi();break;case 5:uy(e);break;case 1:Et(e.type)&&Ca(e);break;case 4:Th(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ye(Pa,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ye(Ae,Ae.current&1),e.flags|=128,null):n&e.child.childLanes?by(t,e,n):(ye(Ae,Ae.current&1),t=wn(t,e,n),t!==null?t.sibling:null);ye(Ae,Ae.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return My(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ye(Ae,Ae.current),r)break;return null;case 22:case 23:return e.lanes=0,Vy(t,e,n)}return wn(t,e,n)}var Fy,gc,jy,Uy;Fy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};gc=function(){};jy=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,gr(on.current);var s=null;switch(n){case"input":i=Fu(t,i),r=Fu(t,r),s=[];break;case"select":i=Ce({},i,{value:void 0}),r=Ce({},r,{value:void 0}),s=[];break;case"textarea":i=Bu(t,i),r=Bu(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Aa)}$u(n,r);var a;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var l=i[h];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Ps.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var u=r[h];if(l=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(s||(s=[]),s.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Ps.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&ve("scroll",t),s||l===u||(s=[])):(s=s||[]).push(h,u))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};Uy=function(t,e,n,r){n!==r&&(e.flags|=4)};function rs(t,e){if(!Te)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function rt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function VE(t,e,n){var r=e.pendingProps;switch(mh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(e),null;case 1:return Et(e.type)&&Ra(),rt(e),null;case 3:return r=e.stateNode,yi(),Ee(wt),Ee(lt),Sh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(zo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Kt!==null&&(Sc(Kt),Kt=null))),gc(t,e),rt(e),null;case 5:Ih(e);var i=gr(zs.current);if(n=e.type,t!==null&&e.stateNode!=null)jy(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(j(166));return rt(e),null}if(t=gr(on.current),zo(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[nn]=e,r[Us]=s,t=(e.mode&1)!==0,n){case"dialog":ve("cancel",r),ve("close",r);break;case"iframe":case"object":case"embed":ve("load",r);break;case"video":case"audio":for(i=0;i<cs.length;i++)ve(cs[i],r);break;case"source":ve("error",r);break;case"img":case"image":case"link":ve("error",r),ve("load",r);break;case"details":ve("toggle",r);break;case"input":Mf(r,s),ve("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ve("invalid",r);break;case"textarea":jf(r,s),ve("invalid",r)}$u(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Bo(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Bo(r.textContent,l,t),i=["children",""+l]):Ps.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&ve("scroll",r)}switch(n){case"input":Vo(r),Ff(r,s,!0);break;case"textarea":Vo(r),Uf(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Aa)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=pg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[nn]=e,t[Us]=r,Fy(t,e,!1,!1),e.stateNode=t;e:{switch(a=Wu(n,r),n){case"dialog":ve("cancel",t),ve("close",t),i=r;break;case"iframe":case"object":case"embed":ve("load",t),i=r;break;case"video":case"audio":for(i=0;i<cs.length;i++)ve(cs[i],t);i=r;break;case"source":ve("error",t),i=r;break;case"img":case"image":case"link":ve("error",t),ve("load",t),i=r;break;case"details":ve("toggle",t),i=r;break;case"input":Mf(t,r),i=Fu(t,r),ve("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ce({},r,{value:void 0}),ve("invalid",t);break;case"textarea":jf(t,r),i=Bu(t,r),ve("invalid",t);break;default:i=r}$u(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?yg(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&mg(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ds(t,u):typeof u=="number"&&Ds(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ps.hasOwnProperty(s)?u!=null&&s==="onScroll"&&ve("scroll",t):u!=null&&eh(t,s,u,a))}switch(n){case"input":Vo(t),Ff(t,r,!1);break;case"textarea":Vo(t),Uf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Xn(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?oi(t,!!r.multiple,s,!1):r.defaultValue!=null&&oi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Aa)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return rt(e),null;case 6:if(t&&e.stateNode!=null)Uy(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(j(166));if(n=gr(zs.current),gr(on.current),zo(e)){if(r=e.stateNode,n=e.memoizedProps,r[nn]=e,(s=r.nodeValue!==n)&&(t=Pt,t!==null))switch(t.tag){case 3:Bo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Bo(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[nn]=e,e.stateNode=r}return rt(e),null;case 13:if(Ee(Ae),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Te&&Ct!==null&&e.mode&1&&!(e.flags&128))iy(),mi(),e.flags|=98560,s=!1;else if(s=zo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(j(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(j(317));s[nn]=e}else mi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;rt(e),s=!1}else Kt!==null&&(Sc(Kt),Kt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ae.current&1?Ue===0&&(Ue=3):bh())),e.updateQueue!==null&&(e.flags|=4),rt(e),null);case 4:return yi(),gc(t,e),t===null&&Fs(e.stateNode.containerInfo),rt(e),null;case 10:return vh(e.type._context),rt(e),null;case 17:return Et(e.type)&&Ra(),rt(e),null;case 19:if(Ee(Ae),s=e.memoizedState,s===null)return rt(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)rs(s,!1);else{if(Ue!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Va(t),a!==null){for(e.flags|=128,rs(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ye(Ae,Ae.current&1|2),e.child}t=t.sibling}s.tail!==null&&Le()>vi&&(e.flags|=128,r=!0,rs(s,!1),e.lanes=4194304)}else{if(!r)if(t=Va(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),rs(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Te)return rt(e),null}else 2*Le()-s.renderingStartTime>vi&&n!==1073741824&&(e.flags|=128,r=!0,rs(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Le(),e.sibling=null,n=Ae.current,ye(Ae,r?n&1|2:n&1),e):(rt(e),null);case 22:case 23:return Lh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Rt&1073741824&&(rt(e),e.subtreeFlags&6&&(e.flags|=8192)):rt(e),null;case 24:return null;case 25:return null}throw Error(j(156,e.tag))}function OE(t,e){switch(mh(e),e.tag){case 1:return Et(e.type)&&Ra(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return yi(),Ee(wt),Ee(lt),Sh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ih(e),null;case 13:if(Ee(Ae),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(j(340));mi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ee(Ae),null;case 4:return yi(),null;case 10:return vh(e.type._context),null;case 22:case 23:return Lh(),null;case 24:return null;default:return null}}var Ho=!1,ot=!1,LE=typeof WeakSet=="function"?WeakSet:Set,W=null;function ii(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Pe(t,e,r)}else n.current=null}function yc(t,e,n){try{n()}catch(r){Pe(t,e,r)}}var kp=!1;function bE(t,e){if(ec=Ta,t=Hg(),fh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,h=0,f=0,m=t,y=null;t:for(;;){for(var A;m!==n||i!==0&&m.nodeType!==3||(l=a+i),m!==s||r!==0&&m.nodeType!==3||(u=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(A=m.firstChild)!==null;)y=m,m=A;for(;;){if(m===t)break t;if(y===n&&++h===i&&(l=a),y===s&&++f===r&&(u=a),(A=m.nextSibling)!==null)break;m=y,y=m.parentNode}m=A}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(tc={focusedElem:t,selectionRange:n},Ta=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var D=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(D!==null){var V=D.memoizedProps,L=D.memoizedState,C=e.stateNode,v=C.getSnapshotBeforeUpdate(e.elementType===e.type?V:qt(e.type,V),L);C.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(j(163))}}catch(N){Pe(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return D=kp,kp=!1,D}function Ts(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&yc(e,n,s)}i=i.next}while(i!==r)}}function ol(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function _c(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function By(t){var e=t.alternate;e!==null&&(t.alternate=null,By(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[nn],delete e[Us],delete e[ic],delete e[_E],delete e[vE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function zy(t){return t.tag===5||t.tag===3||t.tag===4}function Pp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||zy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Aa));else if(r!==4&&(t=t.child,t!==null))for(vc(t,e,n),t=t.sibling;t!==null;)vc(t,e,n),t=t.sibling}function wc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(wc(t,e,n),t=t.sibling;t!==null;)wc(t,e,n),t=t.sibling}var qe=null,Gt=!1;function xn(t,e,n){for(n=n.child;n!==null;)$y(t,e,n),n=n.sibling}function $y(t,e,n){if(sn&&typeof sn.onCommitFiberUnmount=="function")try{sn.onCommitFiberUnmount(Ja,n)}catch{}switch(n.tag){case 5:ot||ii(n,e);case 6:var r=qe,i=Gt;qe=null,xn(t,e,n),qe=r,Gt=i,qe!==null&&(Gt?(t=qe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):qe.removeChild(n.stateNode));break;case 18:qe!==null&&(Gt?(t=qe,n=n.stateNode,t.nodeType===8?cu(t.parentNode,n):t.nodeType===1&&cu(t,n),Ls(t)):cu(qe,n.stateNode));break;case 4:r=qe,i=Gt,qe=n.stateNode.containerInfo,Gt=!0,xn(t,e,n),qe=r,Gt=i;break;case 0:case 11:case 14:case 15:if(!ot&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&yc(n,e,a),i=i.next}while(i!==r)}xn(t,e,n);break;case 1:if(!ot&&(ii(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Pe(n,e,l)}xn(t,e,n);break;case 21:xn(t,e,n);break;case 22:n.mode&1?(ot=(r=ot)||n.memoizedState!==null,xn(t,e,n),ot=r):xn(t,e,n);break;default:xn(t,e,n)}}function Dp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new LE),e.forEach(function(r){var i=HE.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ht(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:qe=l.stateNode,Gt=!1;break e;case 3:qe=l.stateNode.containerInfo,Gt=!0;break e;case 4:qe=l.stateNode.containerInfo,Gt=!0;break e}l=l.return}if(qe===null)throw Error(j(160));$y(s,a,i),qe=null,Gt=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(h){Pe(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Wy(e,t),e=e.sibling}function Wy(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ht(e,t),en(t),r&4){try{Ts(3,t,t.return),ol(3,t)}catch(V){Pe(t,t.return,V)}try{Ts(5,t,t.return)}catch(V){Pe(t,t.return,V)}}break;case 1:Ht(e,t),en(t),r&512&&n!==null&&ii(n,n.return);break;case 5:if(Ht(e,t),en(t),r&512&&n!==null&&ii(n,n.return),t.flags&32){var i=t.stateNode;try{Ds(i,"")}catch(V){Pe(t,t.return,V)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&dg(i,s),Wu(l,a);var h=Wu(l,s);for(a=0;a<u.length;a+=2){var f=u[a],m=u[a+1];f==="style"?yg(i,m):f==="dangerouslySetInnerHTML"?mg(i,m):f==="children"?Ds(i,m):eh(i,f,m,h)}switch(l){case"input":ju(i,s);break;case"textarea":fg(i,s);break;case"select":var y=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var A=s.value;A!=null?oi(i,!!s.multiple,A,!1):y!==!!s.multiple&&(s.defaultValue!=null?oi(i,!!s.multiple,s.defaultValue,!0):oi(i,!!s.multiple,s.multiple?[]:"",!1))}i[Us]=s}catch(V){Pe(t,t.return,V)}}break;case 6:if(Ht(e,t),en(t),r&4){if(t.stateNode===null)throw Error(j(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(V){Pe(t,t.return,V)}}break;case 3:if(Ht(e,t),en(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ls(e.containerInfo)}catch(V){Pe(t,t.return,V)}break;case 4:Ht(e,t),en(t);break;case 13:Ht(e,t),en(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Vh=Le())),r&4&&Dp(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(ot=(h=ot)||f,Ht(e,t),ot=h):Ht(e,t),en(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!f&&t.mode&1)for(W=t,f=t.child;f!==null;){for(m=W=f;W!==null;){switch(y=W,A=y.child,y.tag){case 0:case 11:case 14:case 15:Ts(4,y,y.return);break;case 1:ii(y,y.return);var D=y.stateNode;if(typeof D.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,D.props=e.memoizedProps,D.state=e.memoizedState,D.componentWillUnmount()}catch(V){Pe(r,n,V)}}break;case 5:ii(y,y.return);break;case 22:if(y.memoizedState!==null){Vp(m);continue}}A!==null?(A.return=y,W=A):Vp(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{i=m.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=m.stateNode,u=m.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=gg("display",a))}catch(V){Pe(t,t.return,V)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(V){Pe(t,t.return,V)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Ht(e,t),en(t),r&4&&Dp(t);break;case 21:break;default:Ht(e,t),en(t)}}function en(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(zy(n)){var r=n;break e}n=n.return}throw Error(j(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ds(i,""),r.flags&=-33);var s=Pp(t);wc(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Pp(t);vc(t,l,a);break;default:throw Error(j(161))}}catch(u){Pe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ME(t,e,n){W=t,Hy(t)}function Hy(t,e,n){for(var r=(t.mode&1)!==0;W!==null;){var i=W,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Ho;if(!a){var l=i.alternate,u=l!==null&&l.memoizedState!==null||ot;l=Ho;var h=ot;if(Ho=a,(ot=u)&&!h)for(W=i;W!==null;)a=W,u=a.child,a.tag===22&&a.memoizedState!==null?Op(i):u!==null?(u.return=a,W=u):Op(i);for(;s!==null;)W=s,Hy(s),s=s.sibling;W=i,Ho=l,ot=h}Np(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,W=s):Np(t)}}function Np(t){for(;W!==null;){var e=W;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ot||ol(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ot)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:qt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&gp(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}gp(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&Ls(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(j(163))}ot||e.flags&512&&_c(e)}catch(y){Pe(e,e.return,y)}}if(e===t){W=null;break}if(n=e.sibling,n!==null){n.return=e.return,W=n;break}W=e.return}}function Vp(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var n=e.sibling;if(n!==null){n.return=e.return,W=n;break}W=e.return}}function Op(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ol(4,e)}catch(u){Pe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Pe(e,i,u)}}var s=e.return;try{_c(e)}catch(u){Pe(e,s,u)}break;case 5:var a=e.return;try{_c(e)}catch(u){Pe(e,a,u)}}}catch(u){Pe(e,e.return,u)}if(e===t){W=null;break}var l=e.sibling;if(l!==null){l.return=e.return,W=l;break}W=e.return}}var FE=Math.ceil,ba=Sn.ReactCurrentDispatcher,Dh=Sn.ReactCurrentOwner,Ft=Sn.ReactCurrentBatchConfig,oe=0,We=null,Me=null,Qe=0,Rt=0,si=nr(0),Ue=0,qs=null,Rr=0,al=0,Nh=0,Is=null,yt=null,Vh=0,vi=1/0,dn=null,Ma=!1,Ec=null,zn=null,qo=!1,Ln=null,Fa=0,Ss=0,Tc=null,ua=-1,ca=0;function ft(){return oe&6?Le():ua!==-1?ua:ua=Le()}function $n(t){return t.mode&1?oe&2&&Qe!==0?Qe&-Qe:EE.transition!==null?(ca===0&&(ca=kg()),ca):(t=de,t!==0||(t=window.event,t=t===void 0?16:bg(t.type)),t):1}function Xt(t,e,n,r){if(50<Ss)throw Ss=0,Tc=null,Error(j(185));ro(t,n,r),(!(oe&2)||t!==We)&&(t===We&&(!(oe&2)&&(al|=n),Ue===4&&Nn(t,Qe)),Tt(t,r),n===1&&oe===0&&!(e.mode&1)&&(vi=Le()+500,rl&&rr()))}function Tt(t,e){var n=t.callbackNode;Ew(t,e);var r=Ea(t,t===We?Qe:0);if(r===0)n!==null&&$f(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&$f(n),e===1)t.tag===0?wE(Lp.bind(null,t)):ty(Lp.bind(null,t)),gE(function(){!(oe&6)&&rr()}),n=null;else{switch(Pg(r)){case 1:n=sh;break;case 4:n=Cg;break;case 16:n=wa;break;case 536870912:n=xg;break;default:n=wa}n=Zy(n,qy.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function qy(t,e){if(ua=-1,ca=0,oe&6)throw Error(j(327));var n=t.callbackNode;if(hi()&&t.callbackNode!==n)return null;var r=Ea(t,t===We?Qe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ja(t,r);else{e=r;var i=oe;oe|=2;var s=Ky();(We!==t||Qe!==e)&&(dn=null,vi=Le()+500,_r(t,e));do try{BE();break}catch(l){Gy(t,l)}while(!0);_h(),ba.current=s,oe=i,Me!==null?e=0:(We=null,Qe=0,e=Ue)}if(e!==0){if(e===2&&(i=Qu(t),i!==0&&(r=i,e=Ic(t,i))),e===1)throw n=qs,_r(t,0),Nn(t,r),Tt(t,Le()),n;if(e===6)Nn(t,r);else{if(i=t.current.alternate,!(r&30)&&!jE(i)&&(e=ja(t,r),e===2&&(s=Qu(t),s!==0&&(r=s,e=Ic(t,s))),e===1))throw n=qs,_r(t,0),Nn(t,r),Tt(t,Le()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(j(345));case 2:dr(t,yt,dn);break;case 3:if(Nn(t,r),(r&130023424)===r&&(e=Vh+500-Le(),10<e)){if(Ea(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ft(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=rc(dr.bind(null,t,yt,dn),e);break}dr(t,yt,dn);break;case 4:if(Nn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-Qt(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=Le()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*FE(r/1960))-r,10<r){t.timeoutHandle=rc(dr.bind(null,t,yt,dn),r);break}dr(t,yt,dn);break;case 5:dr(t,yt,dn);break;default:throw Error(j(329))}}}return Tt(t,Le()),t.callbackNode===n?qy.bind(null,t):null}function Ic(t,e){var n=Is;return t.current.memoizedState.isDehydrated&&(_r(t,e).flags|=256),t=ja(t,e),t!==2&&(e=yt,yt=n,e!==null&&Sc(e)),t}function Sc(t){yt===null?yt=t:yt.push.apply(yt,t)}function jE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Jt(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Nn(t,e){for(e&=~Nh,e&=~al,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Qt(e),r=1<<n;t[n]=-1,e&=~r}}function Lp(t){if(oe&6)throw Error(j(327));hi();var e=Ea(t,0);if(!(e&1))return Tt(t,Le()),null;var n=ja(t,e);if(t.tag!==0&&n===2){var r=Qu(t);r!==0&&(e=r,n=Ic(t,r))}if(n===1)throw n=qs,_r(t,0),Nn(t,e),Tt(t,Le()),n;if(n===6)throw Error(j(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,dr(t,yt,dn),Tt(t,Le()),null}function Oh(t,e){var n=oe;oe|=1;try{return t(e)}finally{oe=n,oe===0&&(vi=Le()+500,rl&&rr())}}function Cr(t){Ln!==null&&Ln.tag===0&&!(oe&6)&&hi();var e=oe;oe|=1;var n=Ft.transition,r=de;try{if(Ft.transition=null,de=1,t)return t()}finally{de=r,Ft.transition=n,oe=e,!(oe&6)&&rr()}}function Lh(){Rt=si.current,Ee(si)}function _r(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,mE(n)),Me!==null)for(n=Me.return;n!==null;){var r=n;switch(mh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ra();break;case 3:yi(),Ee(wt),Ee(lt),Sh();break;case 5:Ih(r);break;case 4:yi();break;case 13:Ee(Ae);break;case 19:Ee(Ae);break;case 10:vh(r.type._context);break;case 22:case 23:Lh()}n=n.return}if(We=t,Me=t=Wn(t.current,null),Qe=Rt=e,Ue=0,qs=null,Nh=al=Rr=0,yt=Is=null,mr!==null){for(e=0;e<mr.length;e++)if(n=mr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}mr=null}return t}function Gy(t,e){do{var n=Me;try{if(_h(),oa.current=La,Oa){for(var r=Re.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Oa=!1}if(Ar=0,$e=je=Re=null,Es=!1,$s=0,Dh.current=null,n===null||n.return===null){Ue=1,qs=e,Me=null;break}e:{var s=t,a=n.return,l=n,u=e;if(e=Qe,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,f=l,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var y=f.alternate;y?(f.updateQueue=y.updateQueue,f.memoizedState=y.memoizedState,f.lanes=y.lanes):(f.updateQueue=null,f.memoizedState=null)}var A=Tp(a);if(A!==null){A.flags&=-257,Ip(A,a,l,s,e),A.mode&1&&Ep(s,h,e),e=A,u=h;var D=e.updateQueue;if(D===null){var V=new Set;V.add(u),e.updateQueue=V}else D.add(u);break e}else{if(!(e&1)){Ep(s,h,e),bh();break e}u=Error(j(426))}}else if(Te&&l.mode&1){var L=Tp(a);if(L!==null){!(L.flags&65536)&&(L.flags|=256),Ip(L,a,l,s,e),gh(_i(u,l));break e}}s=u=_i(u,l),Ue!==4&&(Ue=2),Is===null?Is=[s]:Is.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var C=Py(s,u,e);mp(s,C);break e;case 1:l=u;var v=s.type,I=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(zn===null||!zn.has(I)))){s.flags|=65536,e&=-e,s.lanes|=e;var N=Dy(s,l,e);mp(s,N);break e}}s=s.return}while(s!==null)}Xy(n)}catch(F){e=F,Me===n&&n!==null&&(Me=n=n.return);continue}break}while(!0)}function Ky(){var t=ba.current;return ba.current=La,t===null?La:t}function bh(){(Ue===0||Ue===3||Ue===2)&&(Ue=4),We===null||!(Rr&268435455)&&!(al&268435455)||Nn(We,Qe)}function ja(t,e){var n=oe;oe|=2;var r=Ky();(We!==t||Qe!==e)&&(dn=null,_r(t,e));do try{UE();break}catch(i){Gy(t,i)}while(!0);if(_h(),oe=n,ba.current=r,Me!==null)throw Error(j(261));return We=null,Qe=0,Ue}function UE(){for(;Me!==null;)Qy(Me)}function BE(){for(;Me!==null&&!dw();)Qy(Me)}function Qy(t){var e=Jy(t.alternate,t,Rt);t.memoizedProps=t.pendingProps,e===null?Xy(t):Me=e,Dh.current=null}function Xy(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=OE(n,e),n!==null){n.flags&=32767,Me=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ue=6,Me=null;return}}else if(n=VE(n,e,Rt),n!==null){Me=n;return}if(e=e.sibling,e!==null){Me=e;return}Me=e=t}while(e!==null);Ue===0&&(Ue=5)}function dr(t,e,n){var r=de,i=Ft.transition;try{Ft.transition=null,de=1,zE(t,e,n,r)}finally{Ft.transition=i,de=r}return null}function zE(t,e,n,r){do hi();while(Ln!==null);if(oe&6)throw Error(j(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(j(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Tw(t,s),t===We&&(Me=We=null,Qe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||qo||(qo=!0,Zy(wa,function(){return hi(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ft.transition,Ft.transition=null;var a=de;de=1;var l=oe;oe|=4,Dh.current=null,bE(t,n),Wy(n,t),lE(tc),Ta=!!ec,tc=ec=null,t.current=n,ME(n),fw(),oe=l,de=a,Ft.transition=s}else t.current=n;if(qo&&(qo=!1,Ln=t,Fa=i),s=t.pendingLanes,s===0&&(zn=null),gw(n.stateNode),Tt(t,Le()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ma)throw Ma=!1,t=Ec,Ec=null,t;return Fa&1&&t.tag!==0&&hi(),s=t.pendingLanes,s&1?t===Tc?Ss++:(Ss=0,Tc=t):Ss=0,rr(),null}function hi(){if(Ln!==null){var t=Pg(Fa),e=Ft.transition,n=de;try{if(Ft.transition=null,de=16>t?16:t,Ln===null)var r=!1;else{if(t=Ln,Ln=null,Fa=0,oe&6)throw Error(j(331));var i=oe;for(oe|=4,W=t.current;W!==null;){var s=W,a=s.child;if(W.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(W=h;W!==null;){var f=W;switch(f.tag){case 0:case 11:case 15:Ts(8,f,s)}var m=f.child;if(m!==null)m.return=f,W=m;else for(;W!==null;){f=W;var y=f.sibling,A=f.return;if(By(f),f===h){W=null;break}if(y!==null){y.return=A,W=y;break}W=A}}}var D=s.alternate;if(D!==null){var V=D.child;if(V!==null){D.child=null;do{var L=V.sibling;V.sibling=null,V=L}while(V!==null)}}W=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,W=a;else e:for(;W!==null;){if(s=W,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ts(9,s,s.return)}var C=s.sibling;if(C!==null){C.return=s.return,W=C;break e}W=s.return}}var v=t.current;for(W=v;W!==null;){a=W;var I=a.child;if(a.subtreeFlags&2064&&I!==null)I.return=a,W=I;else e:for(a=v;W!==null;){if(l=W,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ol(9,l)}}catch(F){Pe(l,l.return,F)}if(l===a){W=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,W=N;break e}W=l.return}}if(oe=i,rr(),sn&&typeof sn.onPostCommitFiberRoot=="function")try{sn.onPostCommitFiberRoot(Ja,t)}catch{}r=!0}return r}finally{de=n,Ft.transition=e}}return!1}function bp(t,e,n){e=_i(n,e),e=Py(t,e,1),t=Bn(t,e,1),e=ft(),t!==null&&(ro(t,1,e),Tt(t,e))}function Pe(t,e,n){if(t.tag===3)bp(t,t,n);else for(;e!==null;){if(e.tag===3){bp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(zn===null||!zn.has(r))){t=_i(n,t),t=Dy(e,t,1),e=Bn(e,t,1),t=ft(),e!==null&&(ro(e,1,t),Tt(e,t));break}}e=e.return}}function $E(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ft(),t.pingedLanes|=t.suspendedLanes&n,We===t&&(Qe&n)===n&&(Ue===4||Ue===3&&(Qe&130023424)===Qe&&500>Le()-Vh?_r(t,0):Nh|=n),Tt(t,e)}function Yy(t,e){e===0&&(t.mode&1?(e=bo,bo<<=1,!(bo&130023424)&&(bo=4194304)):e=1);var n=ft();t=vn(t,e),t!==null&&(ro(t,e,n),Tt(t,n))}function WE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Yy(t,n)}function HE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(j(314))}r!==null&&r.delete(e),Yy(t,n)}var Jy;Jy=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||wt.current)vt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return vt=!1,NE(t,e,n);vt=!!(t.flags&131072)}else vt=!1,Te&&e.flags&1048576&&ny(e,ka,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;la(t,e),t=e.pendingProps;var i=pi(e,lt.current);ci(e,n),i=Rh(null,e,r,t,i,n);var s=Ch();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Et(r)?(s=!0,Ca(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Eh(e),i.updater=sl,e.stateNode=i,i._reactInternals=e,cc(e,r,t,n),e=fc(null,e,r,!0,s,n)):(e.tag=0,Te&&s&&ph(e),dt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(la(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=GE(r),t=qt(r,t),i){case 0:e=dc(null,e,r,t,n);break e;case 1:e=Rp(null,e,r,t,n);break e;case 11:e=Sp(null,e,r,t,n);break e;case 14:e=Ap(null,e,r,qt(r.type,t),n);break e}throw Error(j(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qt(r,i),dc(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qt(r,i),Rp(t,e,r,i,n);case 3:e:{if(Ly(e),t===null)throw Error(j(387));r=e.pendingProps,s=e.memoizedState,i=s.element,ly(t,e),Na(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=_i(Error(j(423)),e),e=Cp(t,e,r,n,i);break e}else if(r!==i){i=_i(Error(j(424)),e),e=Cp(t,e,r,n,i);break e}else for(Ct=Un(e.stateNode.containerInfo.firstChild),Pt=e,Te=!0,Kt=null,n=oy(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(mi(),r===i){e=wn(t,e,n);break e}dt(t,e,r,n)}e=e.child}return e;case 5:return uy(e),t===null&&ac(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,nc(r,i)?a=null:s!==null&&nc(r,s)&&(e.flags|=32),Oy(t,e),dt(t,e,a,n),e.child;case 6:return t===null&&ac(e),null;case 13:return by(t,e,n);case 4:return Th(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=gi(e,null,r,n):dt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qt(r,i),Sp(t,e,r,i,n);case 7:return dt(t,e,e.pendingProps,n),e.child;case 8:return dt(t,e,e.pendingProps.children,n),e.child;case 12:return dt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,ye(Pa,r._currentValue),r._currentValue=a,s!==null)if(Jt(s.value,a)){if(s.children===i.children&&!wt.current){e=wn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){a=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=gn(-1,n&-n),u.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?u.next=u:(u.next=f.next,f.next=u),h.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),lc(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(j(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),lc(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}dt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ci(e,n),i=jt(i),r=r(i),e.flags|=1,dt(t,e,r,n),e.child;case 14:return r=e.type,i=qt(r,e.pendingProps),i=qt(r.type,i),Ap(t,e,r,i,n);case 15:return Ny(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qt(r,i),la(t,e),e.tag=1,Et(r)?(t=!0,Ca(e)):t=!1,ci(e,n),ky(e,r,i),cc(e,r,i,n),fc(null,e,r,!0,t,n);case 19:return My(t,e,n);case 22:return Vy(t,e,n)}throw Error(j(156,e.tag))};function Zy(t,e){return Rg(t,e)}function qE(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mt(t,e,n,r){return new qE(t,e,n,r)}function Mh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function GE(t){if(typeof t=="function")return Mh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===nh)return 11;if(t===rh)return 14}return 2}function Wn(t,e){var n=t.alternate;return n===null?(n=Mt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ha(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")Mh(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Qr:return vr(n.children,i,s,e);case th:a=8,i|=8;break;case Ou:return t=Mt(12,n,e,i|2),t.elementType=Ou,t.lanes=s,t;case Lu:return t=Mt(13,n,e,i),t.elementType=Lu,t.lanes=s,t;case bu:return t=Mt(19,n,e,i),t.elementType=bu,t.lanes=s,t;case ug:return ll(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ag:a=10;break e;case lg:a=9;break e;case nh:a=11;break e;case rh:a=14;break e;case kn:a=16,r=null;break e}throw Error(j(130,t==null?t:typeof t,""))}return e=Mt(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function vr(t,e,n,r){return t=Mt(7,t,r,e),t.lanes=n,t}function ll(t,e,n,r){return t=Mt(22,t,r,e),t.elementType=ug,t.lanes=n,t.stateNode={isHidden:!1},t}function _u(t,e,n){return t=Mt(6,t,null,e),t.lanes=n,t}function vu(t,e,n){return e=Mt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function KE(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zl(0),this.expirationTimes=Zl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zl(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Fh(t,e,n,r,i,s,a,l,u){return t=new KE(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Mt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Eh(s),t}function QE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Kr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function e_(t){if(!t)return Yn;t=t._reactInternals;e:{if(Vr(t)!==t||t.tag!==1)throw Error(j(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Et(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(j(171))}if(t.tag===1){var n=t.type;if(Et(n))return ey(t,n,e)}return e}function t_(t,e,n,r,i,s,a,l,u){return t=Fh(n,r,!0,t,i,s,a,l,u),t.context=e_(null),n=t.current,r=ft(),i=$n(n),s=gn(r,i),s.callback=e??null,Bn(n,s,i),t.current.lanes=i,ro(t,i,r),Tt(t,r),t}function ul(t,e,n,r){var i=e.current,s=ft(),a=$n(i);return n=e_(n),e.context===null?e.context=n:e.pendingContext=n,e=gn(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Bn(i,e,a),t!==null&&(Xt(t,i,a,s),sa(t,i,a)),a}function Ua(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Mp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function jh(t,e){Mp(t,e),(t=t.alternate)&&Mp(t,e)}function XE(){return null}var n_=typeof reportError=="function"?reportError:function(t){console.error(t)};function Uh(t){this._internalRoot=t}cl.prototype.render=Uh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(j(409));ul(t,e,null,null)};cl.prototype.unmount=Uh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Cr(function(){ul(null,t,null,null)}),e[_n]=null}};function cl(t){this._internalRoot=t}cl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Vg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Dn.length&&e!==0&&e<Dn[n].priority;n++);Dn.splice(n,0,t),n===0&&Lg(t)}};function Bh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function hl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Fp(){}function YE(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=Ua(a);s.call(h)}}var a=t_(e,r,t,0,null,!1,!1,"",Fp);return t._reactRootContainer=a,t[_n]=a.current,Fs(t.nodeType===8?t.parentNode:t),Cr(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var h=Ua(u);l.call(h)}}var u=Fh(t,0,!1,null,null,!1,!1,"",Fp);return t._reactRootContainer=u,t[_n]=u.current,Fs(t.nodeType===8?t.parentNode:t),Cr(function(){ul(e,u,n,r)}),u}function dl(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var l=i;i=function(){var u=Ua(a);l.call(u)}}ul(e,a,t,i)}else a=YE(n,e,t,i,r);return Ua(a)}Dg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=us(e.pendingLanes);n!==0&&(oh(e,n|1),Tt(e,Le()),!(oe&6)&&(vi=Le()+500,rr()))}break;case 13:Cr(function(){var r=vn(t,1);if(r!==null){var i=ft();Xt(r,t,1,i)}}),jh(t,1)}};ah=function(t){if(t.tag===13){var e=vn(t,134217728);if(e!==null){var n=ft();Xt(e,t,134217728,n)}jh(t,134217728)}};Ng=function(t){if(t.tag===13){var e=$n(t),n=vn(t,e);if(n!==null){var r=ft();Xt(n,t,e,r)}jh(t,e)}};Vg=function(){return de};Og=function(t,e){var n=de;try{return de=t,e()}finally{de=n}};qu=function(t,e,n){switch(e){case"input":if(ju(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=nl(r);if(!i)throw Error(j(90));hg(r),ju(r,i)}}}break;case"textarea":fg(t,n);break;case"select":e=n.value,e!=null&&oi(t,!!n.multiple,e,!1)}};wg=Oh;Eg=Cr;var JE={usingClientEntryPoint:!1,Events:[so,Zr,nl,_g,vg,Oh]},is={findFiberByHostInstance:pr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ZE={bundleType:is.bundleType,version:is.version,rendererPackageName:is.rendererPackageName,rendererConfig:is.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Sn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Sg(t),t===null?null:t.stateNode},findFiberByHostInstance:is.findFiberByHostInstance||XE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Go=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Go.isDisabled&&Go.supportsFiber)try{Ja=Go.inject(ZE),sn=Go}catch{}}Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JE;Nt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bh(e))throw Error(j(200));return QE(t,e,null,n)};Nt.createRoot=function(t,e){if(!Bh(t))throw Error(j(299));var n=!1,r="",i=n_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Fh(t,1,!1,null,null,n,!1,r,i),t[_n]=e.current,Fs(t.nodeType===8?t.parentNode:t),new Uh(e)};Nt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(j(188)):(t=Object.keys(t).join(","),Error(j(268,t)));return t=Sg(e),t=t===null?null:t.stateNode,t};Nt.flushSync=function(t){return Cr(t)};Nt.hydrate=function(t,e,n){if(!hl(e))throw Error(j(200));return dl(null,t,e,!0,n)};Nt.hydrateRoot=function(t,e,n){if(!Bh(t))throw Error(j(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=n_;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=t_(e,null,t,1,n??null,i,!1,s,a),t[_n]=e.current,Fs(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new cl(e)};Nt.render=function(t,e,n){if(!hl(e))throw Error(j(200));return dl(null,t,e,!1,n)};Nt.unmountComponentAtNode=function(t){if(!hl(t))throw Error(j(40));return t._reactRootContainer?(Cr(function(){dl(null,null,t,!1,function(){t._reactRootContainer=null,t[_n]=null})}),!0):!1};Nt.unstable_batchedUpdates=Oh;Nt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!hl(n))throw Error(j(200));if(t==null||t._reactInternals===void 0)throw Error(j(38));return dl(t,e,n,!1,r)};Nt.version="18.3.1-next-f1338f8080-20240426";function r_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r_)}catch(t){console.error(t)}}r_(),rg.exports=Nt;var eT=rg.exports,jp=eT;Nu.createRoot=jp.createRoot,Nu.hydrateRoot=jp.hydrateRoot;var Up={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},tT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},s_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,l=a?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,f=s>>2,m=(s&3)<<4|l>>4;let y=(l&15)<<2|h>>6,A=h&63;u||(A=64,a||(y=64)),r.push(n[f],n[m],n[y],n[A])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(i_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):tT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||h==null||m==null)throw new nT;const y=s<<2|l>>4;if(r.push(y),h!==64){const A=l<<4&240|h>>2;if(r.push(A),m!==64){const D=h<<6&192|m;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class nT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rT=function(t){const e=i_(t);return s_.encodeByteArray(e,!0)},Ba=function(t){return rT(t).replace(/\./g,"")},iT=function(t){try{return s_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT=()=>sT().__FIREBASE_DEFAULTS__,aT=()=>{if(typeof process>"u"||typeof Up>"u")return;const t=Up.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},lT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&iT(t[1]);return e&&JSON.parse(e)},zh=()=>{try{return oT()||aT()||lT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},uT=t=>{var e,n;return(n=(e=zh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},o_=t=>{const e=uT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},a_=()=>{var t;return(t=zh())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ba(JSON.stringify(n)),Ba(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dT(){var t;const e=(t=zh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fT(){return!dT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pT(){try{return typeof indexedDB=="object"}catch{return!1}}function mT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="FirebaseError";class Or extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=gT,Object.setPrototypeOf(this,Or.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,u_.prototype.create)}}class u_{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?yT(s,r):"Error",l=`${this.serviceName}: ${a} (${i}).`;return new Or(i,l,r)}}function yT(t,e){return t.replace(_T,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const _T=/\{\$([^}]+)}/g;function Ac(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(Bp(s)&&Bp(a)){if(!Ac(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Bp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(t){return t&&t._delegate?t._delegate:t}class wi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new cT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ET(e))try{this.getOrInitializeService({instanceIdentifier:fr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=fr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fr){return this.instances.has(e)}getOptions(e=fr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&a.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:wT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=fr){return this.component?this.component.multipleInstances?e:fr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function wT(t){return t===fr?void 0:t}function ET(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new vT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(se||(se={}));const IT={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},ST=se.INFO,AT={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},RT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=AT[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class c_{constructor(e){this.name=e,this._logLevel=ST,this._logHandler=RT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?IT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...e),this._logHandler(this,se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...e),this._logHandler(this,se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,se.INFO,...e),this._logHandler(this,se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,se.WARN,...e),this._logHandler(this,se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...e),this._logHandler(this,se.ERROR,...e)}}const CT=(t,e)=>e.some(n=>t instanceof n);let zp,$p;function xT(){return zp||(zp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kT(){return $p||($p=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const h_=new WeakMap,Rc=new WeakMap,d_=new WeakMap,wu=new WeakMap,$h=new WeakMap;function PT(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Hn(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&h_.set(n,t)}).catch(()=>{}),$h.set(e,t),e}function DT(t){if(Rc.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});Rc.set(t,e)}let Cc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Rc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||d_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Hn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function NT(t){Cc=t(Cc)}function VT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Eu(this),e,...n);return d_.set(r,e.sort?e.sort():[e]),Hn(r)}:kT().includes(t)?function(...e){return t.apply(Eu(this),e),Hn(h_.get(this))}:function(...e){return Hn(t.apply(Eu(this),e))}}function OT(t){return typeof t=="function"?VT(t):(t instanceof IDBTransaction&&DT(t),CT(t,xT())?new Proxy(t,Cc):t)}function Hn(t){if(t instanceof IDBRequest)return PT(t);if(wu.has(t))return wu.get(t);const e=OT(t);return e!==t&&(wu.set(t,e),$h.set(e,t)),e}const Eu=t=>$h.get(t);function LT(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),l=Hn(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Hn(a.result),u.oldVersion,u.newVersion,Hn(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const bT=["get","getKey","getAll","getAllKeys","count"],MT=["put","add","delete","clear"],Tu=new Map;function Wp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Tu.get(e))return Tu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=MT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||bT.includes(n)))return;const s=async function(a,...l){const u=this.transaction(a,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),i&&u.done]))[0]};return Tu.set(e,s),s}NT(t=>({...t,get:(e,n,r)=>Wp(e,n)||t.get(e,n,r),has:(e,n)=>!!Wp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(jT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function jT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xc="@firebase/app",Hp="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const En=new c_("@firebase/app"),UT="@firebase/app-compat",BT="@firebase/analytics-compat",zT="@firebase/analytics",$T="@firebase/app-check-compat",WT="@firebase/app-check",HT="@firebase/auth",qT="@firebase/auth-compat",GT="@firebase/database",KT="@firebase/data-connect",QT="@firebase/database-compat",XT="@firebase/functions",YT="@firebase/functions-compat",JT="@firebase/installations",ZT="@firebase/installations-compat",e1="@firebase/messaging",t1="@firebase/messaging-compat",n1="@firebase/performance",r1="@firebase/performance-compat",i1="@firebase/remote-config",s1="@firebase/remote-config-compat",o1="@firebase/storage",a1="@firebase/storage-compat",l1="@firebase/firestore",u1="@firebase/vertexai-preview",c1="@firebase/firestore-compat",h1="firebase",d1="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc="[DEFAULT]",f1={[xc]:"fire-core",[UT]:"fire-core-compat",[zT]:"fire-analytics",[BT]:"fire-analytics-compat",[WT]:"fire-app-check",[$T]:"fire-app-check-compat",[HT]:"fire-auth",[qT]:"fire-auth-compat",[GT]:"fire-rtdb",[KT]:"fire-data-connect",[QT]:"fire-rtdb-compat",[XT]:"fire-fn",[YT]:"fire-fn-compat",[JT]:"fire-iid",[ZT]:"fire-iid-compat",[e1]:"fire-fcm",[t1]:"fire-fcm-compat",[n1]:"fire-perf",[r1]:"fire-perf-compat",[i1]:"fire-rc",[s1]:"fire-rc-compat",[o1]:"fire-gcs",[a1]:"fire-gcs-compat",[l1]:"fire-fst",[c1]:"fire-fst-compat",[u1]:"fire-vertex","fire-js":"fire-js",[h1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const za=new Map,p1=new Map,Pc=new Map;function qp(t,e){try{t.container.addComponent(e)}catch(n){En.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Gs(t){const e=t.name;if(Pc.has(e))return En.debug(`There were multiple attempts to register component ${e}.`),!1;Pc.set(e,t);for(const n of za.values())qp(n,t);for(const n of p1.values())qp(n,t);return!0}function f_(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qn=new u_("app","Firebase",m1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new wi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_=d1;function m_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:kc,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw qn.create("bad-app-name",{appName:String(i)});if(n||(n=a_()),!n)throw qn.create("no-options");const s=za.get(i);if(s){if(Ac(n,s.options)&&Ac(r,s.config))return s;throw qn.create("duplicate-app",{appName:i})}const a=new TT(i);for(const u of Pc.values())a.addComponent(u);const l=new g1(n,r,a);return za.set(i,l),l}function g_(t=kc){const e=za.get(t);if(!e&&t===kc&&a_())return m_();if(!e)throw qn.create("no-app",{appName:t});return e}function Gn(t,e,n){var r;let i=(r=f1[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),En.warn(l.join(" "));return}Gs(new wi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1="firebase-heartbeat-database",_1=1,Ks="firebase-heartbeat-store";let Iu=null;function y_(){return Iu||(Iu=LT(y1,_1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ks)}catch(n){console.warn(n)}}}}).catch(t=>{throw qn.create("idb-open",{originalErrorMessage:t.message})})),Iu}async function v1(t){try{const n=(await y_()).transaction(Ks),r=await n.objectStore(Ks).get(__(t));return await n.done,r}catch(e){if(e instanceof Or)En.warn(e.message);else{const n=qn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});En.warn(n.message)}}}async function Gp(t,e){try{const r=(await y_()).transaction(Ks,"readwrite");await r.objectStore(Ks).put(e,__(t)),await r.done}catch(n){if(n instanceof Or)En.warn(n.message);else{const r=qn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});En.warn(r.message)}}}function __(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1=1024,E1=30*24*60*60*1e3;class T1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new S1(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Kp();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=E1}),this._storage.overwrite(this._heartbeatsCache))}catch(r){En.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Kp(),{heartbeatsToSend:r,unsentEntries:i}=I1(this._heartbeatsCache.heartbeats),s=Ba(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return En.warn(n),""}}}function Kp(){return new Date().toISOString().substring(0,10)}function I1(t,e=w1){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),Qp(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Qp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class S1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pT()?mT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await v1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Gp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Gp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Qp(t){return Ba(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(t){Gs(new wi("platform-logger",e=>new FT(e),"PRIVATE")),Gs(new wi("heartbeat",e=>new T1(e),"PRIVATE")),Gn(xc,Hp,t),Gn(xc,Hp,"esm2017"),Gn("fire-js","")}A1("");var R1="firebase",C1="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gn(R1,C1,"app");var Xp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wr,v_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,g){function E(){}E.prototype=g.prototype,T.D=g.prototype,T.prototype=new E,T.prototype.constructor=T,T.C=function(S,x,k){for(var _=Array(arguments.length-2),Q=2;Q<arguments.length;Q++)_[Q-2]=arguments[Q];return g.prototype[x].apply(S,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,g,E){E||(E=0);var S=Array(16);if(typeof g=="string")for(var x=0;16>x;++x)S[x]=g.charCodeAt(E++)|g.charCodeAt(E++)<<8|g.charCodeAt(E++)<<16|g.charCodeAt(E++)<<24;else for(x=0;16>x;++x)S[x]=g[E++]|g[E++]<<8|g[E++]<<16|g[E++]<<24;g=T.g[0],E=T.g[1],x=T.g[2];var k=T.g[3],_=g+(k^E&(x^k))+S[0]+3614090360&4294967295;g=E+(_<<7&4294967295|_>>>25),_=k+(x^g&(E^x))+S[1]+3905402710&4294967295,k=g+(_<<12&4294967295|_>>>20),_=x+(E^k&(g^E))+S[2]+606105819&4294967295,x=k+(_<<17&4294967295|_>>>15),_=E+(g^x&(k^g))+S[3]+3250441966&4294967295,E=x+(_<<22&4294967295|_>>>10),_=g+(k^E&(x^k))+S[4]+4118548399&4294967295,g=E+(_<<7&4294967295|_>>>25),_=k+(x^g&(E^x))+S[5]+1200080426&4294967295,k=g+(_<<12&4294967295|_>>>20),_=x+(E^k&(g^E))+S[6]+2821735955&4294967295,x=k+(_<<17&4294967295|_>>>15),_=E+(g^x&(k^g))+S[7]+4249261313&4294967295,E=x+(_<<22&4294967295|_>>>10),_=g+(k^E&(x^k))+S[8]+1770035416&4294967295,g=E+(_<<7&4294967295|_>>>25),_=k+(x^g&(E^x))+S[9]+2336552879&4294967295,k=g+(_<<12&4294967295|_>>>20),_=x+(E^k&(g^E))+S[10]+4294925233&4294967295,x=k+(_<<17&4294967295|_>>>15),_=E+(g^x&(k^g))+S[11]+2304563134&4294967295,E=x+(_<<22&4294967295|_>>>10),_=g+(k^E&(x^k))+S[12]+1804603682&4294967295,g=E+(_<<7&4294967295|_>>>25),_=k+(x^g&(E^x))+S[13]+4254626195&4294967295,k=g+(_<<12&4294967295|_>>>20),_=x+(E^k&(g^E))+S[14]+2792965006&4294967295,x=k+(_<<17&4294967295|_>>>15),_=E+(g^x&(k^g))+S[15]+1236535329&4294967295,E=x+(_<<22&4294967295|_>>>10),_=g+(x^k&(E^x))+S[1]+4129170786&4294967295,g=E+(_<<5&4294967295|_>>>27),_=k+(E^x&(g^E))+S[6]+3225465664&4294967295,k=g+(_<<9&4294967295|_>>>23),_=x+(g^E&(k^g))+S[11]+643717713&4294967295,x=k+(_<<14&4294967295|_>>>18),_=E+(k^g&(x^k))+S[0]+3921069994&4294967295,E=x+(_<<20&4294967295|_>>>12),_=g+(x^k&(E^x))+S[5]+3593408605&4294967295,g=E+(_<<5&4294967295|_>>>27),_=k+(E^x&(g^E))+S[10]+38016083&4294967295,k=g+(_<<9&4294967295|_>>>23),_=x+(g^E&(k^g))+S[15]+3634488961&4294967295,x=k+(_<<14&4294967295|_>>>18),_=E+(k^g&(x^k))+S[4]+3889429448&4294967295,E=x+(_<<20&4294967295|_>>>12),_=g+(x^k&(E^x))+S[9]+568446438&4294967295,g=E+(_<<5&4294967295|_>>>27),_=k+(E^x&(g^E))+S[14]+3275163606&4294967295,k=g+(_<<9&4294967295|_>>>23),_=x+(g^E&(k^g))+S[3]+4107603335&4294967295,x=k+(_<<14&4294967295|_>>>18),_=E+(k^g&(x^k))+S[8]+1163531501&4294967295,E=x+(_<<20&4294967295|_>>>12),_=g+(x^k&(E^x))+S[13]+2850285829&4294967295,g=E+(_<<5&4294967295|_>>>27),_=k+(E^x&(g^E))+S[2]+4243563512&4294967295,k=g+(_<<9&4294967295|_>>>23),_=x+(g^E&(k^g))+S[7]+1735328473&4294967295,x=k+(_<<14&4294967295|_>>>18),_=E+(k^g&(x^k))+S[12]+2368359562&4294967295,E=x+(_<<20&4294967295|_>>>12),_=g+(E^x^k)+S[5]+4294588738&4294967295,g=E+(_<<4&4294967295|_>>>28),_=k+(g^E^x)+S[8]+2272392833&4294967295,k=g+(_<<11&4294967295|_>>>21),_=x+(k^g^E)+S[11]+1839030562&4294967295,x=k+(_<<16&4294967295|_>>>16),_=E+(x^k^g)+S[14]+4259657740&4294967295,E=x+(_<<23&4294967295|_>>>9),_=g+(E^x^k)+S[1]+2763975236&4294967295,g=E+(_<<4&4294967295|_>>>28),_=k+(g^E^x)+S[4]+1272893353&4294967295,k=g+(_<<11&4294967295|_>>>21),_=x+(k^g^E)+S[7]+4139469664&4294967295,x=k+(_<<16&4294967295|_>>>16),_=E+(x^k^g)+S[10]+3200236656&4294967295,E=x+(_<<23&4294967295|_>>>9),_=g+(E^x^k)+S[13]+681279174&4294967295,g=E+(_<<4&4294967295|_>>>28),_=k+(g^E^x)+S[0]+3936430074&4294967295,k=g+(_<<11&4294967295|_>>>21),_=x+(k^g^E)+S[3]+3572445317&4294967295,x=k+(_<<16&4294967295|_>>>16),_=E+(x^k^g)+S[6]+76029189&4294967295,E=x+(_<<23&4294967295|_>>>9),_=g+(E^x^k)+S[9]+3654602809&4294967295,g=E+(_<<4&4294967295|_>>>28),_=k+(g^E^x)+S[12]+3873151461&4294967295,k=g+(_<<11&4294967295|_>>>21),_=x+(k^g^E)+S[15]+530742520&4294967295,x=k+(_<<16&4294967295|_>>>16),_=E+(x^k^g)+S[2]+3299628645&4294967295,E=x+(_<<23&4294967295|_>>>9),_=g+(x^(E|~k))+S[0]+4096336452&4294967295,g=E+(_<<6&4294967295|_>>>26),_=k+(E^(g|~x))+S[7]+1126891415&4294967295,k=g+(_<<10&4294967295|_>>>22),_=x+(g^(k|~E))+S[14]+2878612391&4294967295,x=k+(_<<15&4294967295|_>>>17),_=E+(k^(x|~g))+S[5]+4237533241&4294967295,E=x+(_<<21&4294967295|_>>>11),_=g+(x^(E|~k))+S[12]+1700485571&4294967295,g=E+(_<<6&4294967295|_>>>26),_=k+(E^(g|~x))+S[3]+2399980690&4294967295,k=g+(_<<10&4294967295|_>>>22),_=x+(g^(k|~E))+S[10]+4293915773&4294967295,x=k+(_<<15&4294967295|_>>>17),_=E+(k^(x|~g))+S[1]+2240044497&4294967295,E=x+(_<<21&4294967295|_>>>11),_=g+(x^(E|~k))+S[8]+1873313359&4294967295,g=E+(_<<6&4294967295|_>>>26),_=k+(E^(g|~x))+S[15]+4264355552&4294967295,k=g+(_<<10&4294967295|_>>>22),_=x+(g^(k|~E))+S[6]+2734768916&4294967295,x=k+(_<<15&4294967295|_>>>17),_=E+(k^(x|~g))+S[13]+1309151649&4294967295,E=x+(_<<21&4294967295|_>>>11),_=g+(x^(E|~k))+S[4]+4149444226&4294967295,g=E+(_<<6&4294967295|_>>>26),_=k+(E^(g|~x))+S[11]+3174756917&4294967295,k=g+(_<<10&4294967295|_>>>22),_=x+(g^(k|~E))+S[2]+718787259&4294967295,x=k+(_<<15&4294967295|_>>>17),_=E+(k^(x|~g))+S[9]+3951481745&4294967295,T.g[0]=T.g[0]+g&4294967295,T.g[1]=T.g[1]+(x+(_<<21&4294967295|_>>>11))&4294967295,T.g[2]=T.g[2]+x&4294967295,T.g[3]=T.g[3]+k&4294967295}r.prototype.u=function(T,g){g===void 0&&(g=T.length);for(var E=g-this.blockSize,S=this.B,x=this.h,k=0;k<g;){if(x==0)for(;k<=E;)i(this,T,k),k+=this.blockSize;if(typeof T=="string"){for(;k<g;)if(S[x++]=T.charCodeAt(k++),x==this.blockSize){i(this,S),x=0;break}}else for(;k<g;)if(S[x++]=T[k++],x==this.blockSize){i(this,S),x=0;break}}this.h=x,this.o+=g},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var g=1;g<T.length-8;++g)T[g]=0;var E=8*this.o;for(g=T.length-8;g<T.length;++g)T[g]=E&255,E/=256;for(this.u(T),T=Array(16),g=E=0;4>g;++g)for(var S=0;32>S;S+=8)T[E++]=this.g[g]>>>S&255;return T};function s(T,g){var E=l;return Object.prototype.hasOwnProperty.call(E,T)?E[T]:E[T]=g(T)}function a(T,g){this.h=g;for(var E=[],S=!0,x=T.length-1;0<=x;x--){var k=T[x]|0;S&&k==g||(E[x]=k,S=!1)}this.g=E}var l={};function u(T){return-128<=T&&128>T?s(T,function(g){return new a([g|0],0>g?-1:0)}):new a([T|0],0>T?-1:0)}function h(T){if(isNaN(T)||!isFinite(T))return m;if(0>T)return L(h(-T));for(var g=[],E=1,S=0;T>=E;S++)g[S]=T/E|0,E*=4294967296;return new a(g,0)}function f(T,g){if(T.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(T.charAt(0)=="-")return L(f(T.substring(1),g));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=h(Math.pow(g,8)),S=m,x=0;x<T.length;x+=8){var k=Math.min(8,T.length-x),_=parseInt(T.substring(x,x+k),g);8>k?(k=h(Math.pow(g,k)),S=S.j(k).add(h(_))):(S=S.j(E),S=S.add(h(_)))}return S}var m=u(0),y=u(1),A=u(16777216);t=a.prototype,t.m=function(){if(V(this))return-L(this).m();for(var T=0,g=1,E=0;E<this.g.length;E++){var S=this.i(E);T+=(0<=S?S:4294967296+S)*g,g*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(D(this))return"0";if(V(this))return"-"+L(this).toString(T);for(var g=h(Math.pow(T,6)),E=this,S="";;){var x=N(E,g).g;E=C(E,x.j(g));var k=((0<E.g.length?E.g[0]:E.h)>>>0).toString(T);if(E=x,D(E))return k+S;for(;6>k.length;)k="0"+k;S=k+S}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function D(T){if(T.h!=0)return!1;for(var g=0;g<T.g.length;g++)if(T.g[g]!=0)return!1;return!0}function V(T){return T.h==-1}t.l=function(T){return T=C(this,T),V(T)?-1:D(T)?0:1};function L(T){for(var g=T.g.length,E=[],S=0;S<g;S++)E[S]=~T.g[S];return new a(E,~T.h).add(y)}t.abs=function(){return V(this)?L(this):this},t.add=function(T){for(var g=Math.max(this.g.length,T.g.length),E=[],S=0,x=0;x<=g;x++){var k=S+(this.i(x)&65535)+(T.i(x)&65535),_=(k>>>16)+(this.i(x)>>>16)+(T.i(x)>>>16);S=_>>>16,k&=65535,_&=65535,E[x]=_<<16|k}return new a(E,E[E.length-1]&-2147483648?-1:0)};function C(T,g){return T.add(L(g))}t.j=function(T){if(D(this)||D(T))return m;if(V(this))return V(T)?L(this).j(L(T)):L(L(this).j(T));if(V(T))return L(this.j(L(T)));if(0>this.l(A)&&0>T.l(A))return h(this.m()*T.m());for(var g=this.g.length+T.g.length,E=[],S=0;S<2*g;S++)E[S]=0;for(S=0;S<this.g.length;S++)for(var x=0;x<T.g.length;x++){var k=this.i(S)>>>16,_=this.i(S)&65535,Q=T.i(x)>>>16,te=T.i(x)&65535;E[2*S+2*x]+=_*te,v(E,2*S+2*x),E[2*S+2*x+1]+=k*te,v(E,2*S+2*x+1),E[2*S+2*x+1]+=_*Q,v(E,2*S+2*x+1),E[2*S+2*x+2]+=k*Q,v(E,2*S+2*x+2)}for(S=0;S<g;S++)E[S]=E[2*S+1]<<16|E[2*S];for(S=g;S<2*g;S++)E[S]=0;return new a(E,0)};function v(T,g){for(;(T[g]&65535)!=T[g];)T[g+1]+=T[g]>>>16,T[g]&=65535,g++}function I(T,g){this.g=T,this.h=g}function N(T,g){if(D(g))throw Error("division by zero");if(D(T))return new I(m,m);if(V(T))return g=N(L(T),g),new I(L(g.g),L(g.h));if(V(g))return g=N(T,L(g)),new I(L(g.g),g.h);if(30<T.g.length){if(V(T)||V(g))throw Error("slowDivide_ only works with positive integers.");for(var E=y,S=g;0>=S.l(T);)E=F(E),S=F(S);var x=U(E,1),k=U(S,1);for(S=U(S,2),E=U(E,2);!D(S);){var _=k.add(S);0>=_.l(T)&&(x=x.add(E),k=_),S=U(S,1),E=U(E,1)}return g=C(T,x.j(g)),new I(x,g)}for(x=m;0<=T.l(g);){for(E=Math.max(1,Math.floor(T.m()/g.m())),S=Math.ceil(Math.log(E)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),k=h(E),_=k.j(g);V(_)||0<_.l(T);)E-=S,k=h(E),_=k.j(g);D(k)&&(k=y),x=x.add(k),T=C(T,_)}return new I(x,T)}t.A=function(T){return N(this,T).h},t.and=function(T){for(var g=Math.max(this.g.length,T.g.length),E=[],S=0;S<g;S++)E[S]=this.i(S)&T.i(S);return new a(E,this.h&T.h)},t.or=function(T){for(var g=Math.max(this.g.length,T.g.length),E=[],S=0;S<g;S++)E[S]=this.i(S)|T.i(S);return new a(E,this.h|T.h)},t.xor=function(T){for(var g=Math.max(this.g.length,T.g.length),E=[],S=0;S<g;S++)E[S]=this.i(S)^T.i(S);return new a(E,this.h^T.h)};function F(T){for(var g=T.g.length+1,E=[],S=0;S<g;S++)E[S]=T.i(S)<<1|T.i(S-1)>>>31;return new a(E,T.h)}function U(T,g){var E=g>>5;g%=32;for(var S=T.g.length-E,x=[],k=0;k<S;k++)x[k]=0<g?T.i(k+E)>>>g|T.i(k+E+1)<<32-g:T.i(k+E);return new a(x,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,v_=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=f,wr=a}).apply(typeof Xp<"u"?Xp:typeof self<"u"?self:typeof window<"u"?window:{});var Ko=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var w_,hs,E_,da,Dc,T_,I_,S_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,d){return o==Array.prototype||o==Object.prototype||(o[c]=d.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ko=="object"&&Ko];for(var c=0;c<o.length;++c){var d=o[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function i(o,c){if(c)e:{var d=r;o=o.split(".");for(var p=0;p<o.length-1;p++){var P=o[p];if(!(P in d))break e;d=d[P]}o=o[o.length-1],p=d[o],c=c(p),c!=p&&c!=null&&e(d,o,{configurable:!0,writable:!0,value:c})}}function s(o,c){o instanceof String&&(o+="");var d=0,p=!1,P={next:function(){if(!p&&d<o.length){var O=d++;return{value:c(O,o[O]),done:!1}}return p=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}i("Array.prototype.values",function(o){return o||function(){return s(this,function(c,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function h(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function f(o,c,d){return o.call.apply(o.bind,arguments)}function m(o,c,d){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,p),o.apply(c,P)}}return function(){return o.apply(c,arguments)}}function y(o,c,d){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,y.apply(null,arguments)}function A(o,c){var d=Array.prototype.slice.call(arguments,1);return function(){var p=d.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function D(o,c){function d(){}d.prototype=c.prototype,o.aa=c.prototype,o.prototype=new d,o.prototype.constructor=o,o.Qb=function(p,P,O){for(var z=Array(arguments.length-2),me=2;me<arguments.length;me++)z[me-2]=arguments[me];return c.prototype[P].apply(p,z)}}function V(o){const c=o.length;if(0<c){const d=Array(c);for(let p=0;p<c;p++)d[p]=o[p];return d}return[]}function L(o,c){for(let d=1;d<arguments.length;d++){const p=arguments[d];if(u(p)){const P=o.length||0,O=p.length||0;o.length=P+O;for(let z=0;z<O;z++)o[P+z]=p[z]}else o.push(p)}}class C{constructor(c,d){this.i=c,this.j=d,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function v(o){return/^[\s\xa0]*$/.test(o)}function I(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function N(o){return N[" "](o),o}N[" "]=function(){};var F=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function U(o,c,d){for(const p in o)c.call(d,o[p],p,o)}function T(o,c){for(const d in o)c.call(void 0,o[d],d,o)}function g(o){const c={};for(const d in o)c[d]=o[d];return c}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(o,c){let d,p;for(let P=1;P<arguments.length;P++){p=arguments[P];for(d in p)o[d]=p[d];for(let O=0;O<E.length;O++)d=E[O],Object.prototype.hasOwnProperty.call(p,d)&&(o[d]=p[d])}}function x(o){var c=1;o=o.split(":");const d=[];for(;0<c&&o.length;)d.push(o.shift()),c--;return o.length&&d.push(o.join(":")),d}function k(o){l.setTimeout(()=>{throw o},0)}function _(){var o=X;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class Q{constructor(){this.h=this.g=null}add(c,d){const p=te.get();p.set(c,d),this.h?this.h.next=p:this.g=p,this.h=p}}var te=new C(()=>new Ve,o=>o.reset());class Ve{constructor(){this.next=this.g=this.h=null}set(c,d){this.h=c,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let Ie,$=!1,X=new Q,J=()=>{const o=l.Promise.resolve(void 0);Ie=()=>{o.then(pe)}};var pe=()=>{for(var o;o=_();){try{o.h.call(o.g)}catch(d){k(d)}var c=te;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}$=!1};function ce(){this.s=this.s,this.C=this.C}ce.prototype.s=!1,ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Se(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}Se.prototype.h=function(){this.defaultPrevented=!0};var Bt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const d=()=>{};l.addEventListener("test",d,c),l.removeEventListener("test",d,c)}catch{}return o}();function zt(o,c){if(Se.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var d=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(F){e:{try{N(c.nodeName);var P=!0;break e}catch{}P=!1}P||(c=null)}}else d=="mouseover"?c=o.fromElement:d=="mouseout"&&(c=o.toElement);this.relatedTarget=c,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Ot[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&zt.aa.h.call(this)}}D(zt,Se);var Ot={2:"touch",3:"pen",4:"mouse"};zt.prototype.h=function(){zt.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var $t="closure_listenable_"+(1e6*Math.random()|0),Cl=0;function xl(o,c,d,p,P){this.listener=o,this.proxy=null,this.src=c,this.type=d,this.capture=!!p,this.ha=P,this.key=++Cl,this.da=this.fa=!1}function Fr(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function B(o){this.src=o,this.g={},this.h=0}B.prototype.add=function(o,c,d,p,P){var O=o.toString();o=this.g[O],o||(o=this.g[O]=[],this.h++);var z=he(o,c,p,P);return-1<z?(c=o[z],d||(c.fa=!1)):(c=new xl(c,this.src,O,!!p,P),c.fa=d,o.push(c)),c};function G(o,c){var d=c.type;if(d in o.g){var p=o.g[d],P=Array.prototype.indexOf.call(p,c,void 0),O;(O=0<=P)&&Array.prototype.splice.call(p,P,1),O&&(Fr(c),o.g[d].length==0&&(delete o.g[d],o.h--))}}function he(o,c,d,p){for(var P=0;P<o.length;++P){var O=o[P];if(!O.da&&O.listener==c&&O.capture==!!d&&O.ha==p)return P}return-1}var ge="closure_lm_"+(1e6*Math.random()|0),St={};function sr(o,c,d,p,P){if(Array.isArray(c)){for(var O=0;O<c.length;O++)sr(o,c[O],d,p,P);return null}return d=Od(d),o&&o[$t]?o.K(c,d,h(p)?!!p.capture:!1,P):bi(o,c,d,!1,p,P)}function bi(o,c,d,p,P,O){if(!c)throw Error("Invalid event type");var z=h(P)?!!P.capture:!!P,me=Pl(o);if(me||(o[ge]=me=new B(o)),d=me.add(c,d,p,z,O),d.proxy)return d;if(p=Mi(),d.proxy=p,p.src=o,p.listener=d,o.addEventListener)Bt||(P=z),P===void 0&&(P=!1),o.addEventListener(c.toString(),p,P);else if(o.attachEvent)o.attachEvent(Vd(c.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Mi(){function o(d){return c.call(o.src,o.listener,d)}const c=e0;return o}function or(o,c,d,p,P){if(Array.isArray(c))for(var O=0;O<c.length;O++)or(o,c[O],d,p,P);else p=h(p)?!!p.capture:!!p,d=Od(d),o&&o[$t]?(o=o.i,c=String(c).toString(),c in o.g&&(O=o.g[c],d=he(O,d,p,P),-1<d&&(Fr(O[d]),Array.prototype.splice.call(O,d,1),O.length==0&&(delete o.g[c],o.h--)))):o&&(o=Pl(o))&&(c=o.g[c.toString()],o=-1,c&&(o=he(c,d,p,P)),(d=-1<o?c[o]:null)&&kl(d))}function kl(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[$t])G(c.i,o);else{var d=o.type,p=o.proxy;c.removeEventListener?c.removeEventListener(d,p,o.capture):c.detachEvent?c.detachEvent(Vd(d),p):c.addListener&&c.removeListener&&c.removeListener(p),(d=Pl(c))?(G(d,o),d.h==0&&(d.src=null,c[ge]=null)):Fr(o)}}}function Vd(o){return o in St?St[o]:St[o]="on"+o}function e0(o,c){if(o.da)o=!0;else{c=new zt(c,this);var d=o.listener,p=o.ha||o.src;o.fa&&kl(o),o=d.call(p,c)}return o}function Pl(o){return o=o[ge],o instanceof B?o:null}var Dl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Od(o){return typeof o=="function"?o:(o[Dl]||(o[Dl]=function(c){return o.handleEvent(c)}),o[Dl])}function Ze(){ce.call(this),this.i=new B(this),this.M=this,this.F=null}D(Ze,ce),Ze.prototype[$t]=!0,Ze.prototype.removeEventListener=function(o,c,d,p){or(this,o,c,d,p)};function ut(o,c){var d,p=o.F;if(p)for(d=[];p;p=p.F)d.push(p);if(o=o.M,p=c.type||c,typeof c=="string")c=new Se(c,o);else if(c instanceof Se)c.target=c.target||o;else{var P=c;c=new Se(p,o),S(c,P)}if(P=!0,d)for(var O=d.length-1;0<=O;O--){var z=c.g=d[O];P=mo(z,p,!0,c)&&P}if(z=c.g=o,P=mo(z,p,!0,c)&&P,P=mo(z,p,!1,c)&&P,d)for(O=0;O<d.length;O++)z=c.g=d[O],P=mo(z,p,!1,c)&&P}Ze.prototype.N=function(){if(Ze.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var d=o.g[c],p=0;p<d.length;p++)Fr(d[p]);delete o.g[c],o.h--}}this.F=null},Ze.prototype.K=function(o,c,d,p){return this.i.add(String(o),c,!1,d,p)},Ze.prototype.L=function(o,c,d,p){return this.i.add(String(o),c,!0,d,p)};function mo(o,c,d,p){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var P=!0,O=0;O<c.length;++O){var z=c[O];if(z&&!z.da&&z.capture==d){var me=z.listener,He=z.ha||z.src;z.fa&&G(o.i,z),P=me.call(He,p)!==!1&&P}}return P&&!p.defaultPrevented}function Ld(o,c,d){if(typeof o=="function")d&&(o=y(o,d));else if(o&&typeof o.handleEvent=="function")o=y(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function bd(o){o.g=Ld(()=>{o.g=null,o.i&&(o.i=!1,bd(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class t0 extends ce{constructor(c,d){super(),this.m=c,this.l=d,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:bd(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fi(o){ce.call(this),this.h=o,this.g={}}D(Fi,ce);var Md=[];function Fd(o){U(o.g,function(c,d){this.g.hasOwnProperty(d)&&kl(c)},o),o.g={}}Fi.prototype.N=function(){Fi.aa.N.call(this),Fd(this)},Fi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Nl=l.JSON.stringify,n0=l.JSON.parse,r0=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function Vl(){}Vl.prototype.h=null;function jd(o){return o.h||(o.h=o.i())}function Ud(){}var ji={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ol(){Se.call(this,"d")}D(Ol,Se);function Ll(){Se.call(this,"c")}D(Ll,Se);var ar={},Bd=null;function go(){return Bd=Bd||new Ze}ar.La="serverreachability";function zd(o){Se.call(this,ar.La,o)}D(zd,Se);function Ui(o){const c=go();ut(c,new zd(c))}ar.STAT_EVENT="statevent";function $d(o,c){Se.call(this,ar.STAT_EVENT,o),this.stat=c}D($d,Se);function ct(o){const c=go();ut(c,new $d(c,o))}ar.Ma="timingevent";function Wd(o,c){Se.call(this,ar.Ma,o),this.size=c}D(Wd,Se);function Bi(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function zi(){this.g=!0}zi.prototype.xa=function(){this.g=!1};function i0(o,c,d,p,P,O){o.info(function(){if(o.g)if(O)for(var z="",me=O.split("&"),He=0;He<me.length;He++){var ae=me[He].split("=");if(1<ae.length){var et=ae[0];ae=ae[1];var tt=et.split("_");z=2<=tt.length&&tt[1]=="type"?z+(et+"="+ae+"&"):z+(et+"=redacted&")}}else z=null;else z=O;return"XMLHTTP REQ ("+p+") [attempt "+P+"]: "+c+`
`+d+`
`+z})}function s0(o,c,d,p,P,O,z){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+P+"]: "+c+`
`+d+`
`+O+" "+z})}function jr(o,c,d,p){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+a0(o,d)+(p?" "+p:"")})}function o0(o,c){o.info(function(){return"TIMEOUT: "+c})}zi.prototype.info=function(){};function a0(o,c){if(!o.g)return c;if(!c)return null;try{var d=JSON.parse(c);if(d){for(o=0;o<d.length;o++)if(Array.isArray(d[o])){var p=d[o];if(!(2>p.length)){var P=p[1];if(Array.isArray(P)&&!(1>P.length)){var O=P[0];if(O!="noop"&&O!="stop"&&O!="close")for(var z=1;z<P.length;z++)P[z]=""}}}}return Nl(d)}catch{return c}}var yo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Hd={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},bl;function _o(){}D(_o,Vl),_o.prototype.g=function(){return new XMLHttpRequest},_o.prototype.i=function(){return{}},bl=new _o;function An(o,c,d,p){this.j=o,this.i=c,this.l=d,this.R=p||1,this.U=new Fi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new qd}function qd(){this.i=null,this.g="",this.h=!1}var Gd={},Ml={};function Fl(o,c,d){o.L=1,o.v=To(cn(c)),o.m=d,o.P=!0,Kd(o,null)}function Kd(o,c){o.F=Date.now(),vo(o),o.A=cn(o.v);var d=o.A,p=o.R;Array.isArray(p)||(p=[String(p)]),uf(d.i,"t",p),o.C=0,d=o.j.J,o.h=new qd,o.g=Cf(o.j,d?c:null,!o.m),0<o.O&&(o.M=new t0(y(o.Y,o,o.g),o.O)),c=o.U,d=o.g,p=o.ca;var P="readystatechange";Array.isArray(P)||(P&&(Md[0]=P.toString()),P=Md);for(var O=0;O<P.length;O++){var z=sr(d,P[O],p||c.handleEvent,!1,c.h||c);if(!z)break;c.g[z.key]=z}c=o.H?g(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),Ui(),i0(o.i,o.u,o.A,o.l,o.R,o.m)}An.prototype.ca=function(o){o=o.target;const c=this.M;c&&hn(o)==3?c.j():this.Y(o)},An.prototype.Y=function(o){try{if(o==this.g)e:{const tt=hn(this.g);var c=this.g.Ba();const zr=this.g.Z();if(!(3>tt)&&(tt!=3||this.g&&(this.h.h||this.g.oa()||gf(this.g)))){this.J||tt!=4||c==7||(c==8||0>=zr?Ui(3):Ui(2)),jl(this);var d=this.g.Z();this.X=d;t:if(Qd(this)){var p=gf(this.g);o="";var P=p.length,O=hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){lr(this),$i(this);var z="";break t}this.h.i=new l.TextDecoder}for(c=0;c<P;c++)this.h.h=!0,o+=this.h.i.decode(p[c],{stream:!(O&&c==P-1)});p.length=0,this.h.g+=o,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=d==200,s0(this.i,this.u,this.A,this.l,this.R,tt,d),this.o){if(this.T&&!this.K){t:{if(this.g){var me,He=this.g;if((me=He.g?He.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(me)){var ae=me;break t}}ae=null}if(d=ae)jr(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ul(this,d);else{this.o=!1,this.s=3,ct(12),lr(this),$i(this);break e}}if(this.P){d=!0;let Wt;for(;!this.J&&this.C<z.length;)if(Wt=l0(this,z),Wt==Ml){tt==4&&(this.s=4,ct(14),d=!1),jr(this.i,this.l,null,"[Incomplete Response]");break}else if(Wt==Gd){this.s=4,ct(15),jr(this.i,this.l,z,"[Invalid Chunk]"),d=!1;break}else jr(this.i,this.l,Wt,null),Ul(this,Wt);if(Qd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),tt!=4||z.length!=0||this.h.h||(this.s=1,ct(16),d=!1),this.o=this.o&&d,!d)jr(this.i,this.l,z,"[Invalid Chunked Response]"),lr(this),$i(this);else if(0<z.length&&!this.W){this.W=!0;var et=this.j;et.g==this&&et.ba&&!et.M&&(et.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),ql(et),et.M=!0,ct(11))}}else jr(this.i,this.l,z,null),Ul(this,z);tt==4&&lr(this),this.o&&!this.J&&(tt==4?If(this.j,this):(this.o=!1,vo(this)))}else A0(this.g),d==400&&0<z.indexOf("Unknown SID")?(this.s=3,ct(12)):(this.s=0,ct(13)),lr(this),$i(this)}}}catch{}finally{}};function Qd(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function l0(o,c){var d=o.C,p=c.indexOf(`
`,d);return p==-1?Ml:(d=Number(c.substring(d,p)),isNaN(d)?Gd:(p+=1,p+d>c.length?Ml:(c=c.slice(p,p+d),o.C=p+d,c)))}An.prototype.cancel=function(){this.J=!0,lr(this)};function vo(o){o.S=Date.now()+o.I,Xd(o,o.I)}function Xd(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Bi(y(o.ba,o),c)}function jl(o){o.B&&(l.clearTimeout(o.B),o.B=null)}An.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(o0(this.i,this.A),this.L!=2&&(Ui(),ct(17)),lr(this),this.s=2,$i(this)):Xd(this,this.S-o)};function $i(o){o.j.G==0||o.J||If(o.j,o)}function lr(o){jl(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,Fd(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function Ul(o,c){try{var d=o.j;if(d.G!=0&&(d.g==o||Bl(d.h,o))){if(!o.K&&Bl(d.h,o)&&d.G==3){try{var p=d.Da.g.parse(c)}catch{p=null}if(Array.isArray(p)&&p.length==3){var P=p;if(P[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<o.F)xo(d),Ro(d);else break e;Hl(d),ct(18)}}else d.za=P[1],0<d.za-d.T&&37500>P[2]&&d.F&&d.v==0&&!d.C&&(d.C=Bi(y(d.Za,d),6e3));if(1>=Zd(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else cr(d,11)}else if((o.K||d.g==o)&&xo(d),!v(c))for(P=d.Da.g.parse(c),c=0;c<P.length;c++){let ae=P[c];if(d.T=ae[0],ae=ae[1],d.G==2)if(ae[0]=="c"){d.K=ae[1],d.ia=ae[2];const et=ae[3];et!=null&&(d.la=et,d.j.info("VER="+d.la));const tt=ae[4];tt!=null&&(d.Aa=tt,d.j.info("SVER="+d.Aa));const zr=ae[5];zr!=null&&typeof zr=="number"&&0<zr&&(p=1.5*zr,d.L=p,d.j.info("backChannelRequestTimeoutMs_="+p)),p=d;const Wt=o.g;if(Wt){const Po=Wt.g?Wt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Po){var O=p.h;O.g||Po.indexOf("spdy")==-1&&Po.indexOf("quic")==-1&&Po.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(zl(O,O.h),O.h=null))}if(p.D){const Gl=Wt.g?Wt.g.getResponseHeader("X-HTTP-Session-Id"):null;Gl&&(p.ya=Gl,_e(p.I,p.D,Gl))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-o.F,d.j.info("Handshake RTT: "+d.R+"ms")),p=d;var z=o;if(p.qa=Rf(p,p.J?p.ia:null,p.W),z.K){ef(p.h,z);var me=z,He=p.L;He&&(me.I=He),me.B&&(jl(me),vo(me)),p.g=z}else Ef(p);0<d.i.length&&Co(d)}else ae[0]!="stop"&&ae[0]!="close"||cr(d,7);else d.G==3&&(ae[0]=="stop"||ae[0]=="close"?ae[0]=="stop"?cr(d,7):Wl(d):ae[0]!="noop"&&d.l&&d.l.ta(ae),d.v=0)}}Ui(4)}catch{}}var u0=class{constructor(o,c){this.g=o,this.map=c}};function Yd(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Jd(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Zd(o){return o.h?1:o.g?o.g.size:0}function Bl(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function zl(o,c){o.g?o.g.add(c):o.h=c}function ef(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}Yd.prototype.cancel=function(){if(this.i=tf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function tf(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const d of o.g.values())c=c.concat(d.D);return c}return V(o.i)}function c0(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],d=o.length,p=0;p<d;p++)c.push(o[p]);return c}c=[],d=0;for(p in o)c[d++]=o[p];return c}function h0(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var d=0;d<o;d++)c.push(d);return c}c=[],d=0;for(const p in o)c[d++]=p;return c}}}function nf(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var d=h0(o),p=c0(o),P=p.length,O=0;O<P;O++)c.call(void 0,p[O],d&&d[O],o)}var rf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function d0(o,c){if(o){o=o.split("&");for(var d=0;d<o.length;d++){var p=o[d].indexOf("="),P=null;if(0<=p){var O=o[d].substring(0,p);P=o[d].substring(p+1)}else O=o[d];c(O,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function ur(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof ur){this.h=o.h,wo(this,o.j),this.o=o.o,this.g=o.g,Eo(this,o.s),this.l=o.l;var c=o.i,d=new qi;d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),sf(this,d),this.m=o.m}else o&&(c=String(o).match(rf))?(this.h=!1,wo(this,c[1]||"",!0),this.o=Wi(c[2]||""),this.g=Wi(c[3]||"",!0),Eo(this,c[4]),this.l=Wi(c[5]||"",!0),sf(this,c[6]||"",!0),this.m=Wi(c[7]||"")):(this.h=!1,this.i=new qi(null,this.h))}ur.prototype.toString=function(){var o=[],c=this.j;c&&o.push(Hi(c,of,!0),":");var d=this.g;return(d||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Hi(c,of,!0),"@"),o.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&o.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&o.push("/"),o.push(Hi(d,d.charAt(0)=="/"?m0:p0,!0))),(d=this.i.toString())&&o.push("?",d),(d=this.m)&&o.push("#",Hi(d,y0)),o.join("")};function cn(o){return new ur(o)}function wo(o,c,d){o.j=d?Wi(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function Eo(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function sf(o,c,d){c instanceof qi?(o.i=c,_0(o.i,o.h)):(d||(c=Hi(c,g0)),o.i=new qi(c,o.h))}function _e(o,c,d){o.i.set(c,d)}function To(o){return _e(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Wi(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Hi(o,c,d){return typeof o=="string"?(o=encodeURI(o).replace(c,f0),d&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function f0(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var of=/[#\/\?@]/g,p0=/[#\?:]/g,m0=/[#\?]/g,g0=/[#\?@]/g,y0=/#/g;function qi(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function Rn(o){o.g||(o.g=new Map,o.h=0,o.i&&d0(o.i,function(c,d){o.add(decodeURIComponent(c.replace(/\+/g," ")),d)}))}t=qi.prototype,t.add=function(o,c){Rn(this),this.i=null,o=Ur(this,o);var d=this.g.get(o);return d||this.g.set(o,d=[]),d.push(c),this.h+=1,this};function af(o,c){Rn(o),c=Ur(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function lf(o,c){return Rn(o),c=Ur(o,c),o.g.has(c)}t.forEach=function(o,c){Rn(this),this.g.forEach(function(d,p){d.forEach(function(P){o.call(c,P,p,this)},this)},this)},t.na=function(){Rn(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),d=[];for(let p=0;p<c.length;p++){const P=o[p];for(let O=0;O<P.length;O++)d.push(c[p])}return d},t.V=function(o){Rn(this);let c=[];if(typeof o=="string")lf(this,o)&&(c=c.concat(this.g.get(Ur(this,o))));else{o=Array.from(this.g.values());for(let d=0;d<o.length;d++)c=c.concat(o[d])}return c},t.set=function(o,c){return Rn(this),this.i=null,o=Ur(this,o),lf(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},t.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function uf(o,c,d){af(o,c),0<d.length&&(o.i=null,o.g.set(Ur(o,c),V(d)),o.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var d=0;d<c.length;d++){var p=c[d];const O=encodeURIComponent(String(p)),z=this.V(p);for(p=0;p<z.length;p++){var P=O;z[p]!==""&&(P+="="+encodeURIComponent(String(z[p]))),o.push(P)}}return this.i=o.join("&")};function Ur(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function _0(o,c){c&&!o.j&&(Rn(o),o.i=null,o.g.forEach(function(d,p){var P=p.toLowerCase();p!=P&&(af(this,p),uf(this,P,d))},o)),o.j=c}function v0(o,c){const d=new zi;if(l.Image){const p=new Image;p.onload=A(Cn,d,"TestLoadImage: loaded",!0,c,p),p.onerror=A(Cn,d,"TestLoadImage: error",!1,c,p),p.onabort=A(Cn,d,"TestLoadImage: abort",!1,c,p),p.ontimeout=A(Cn,d,"TestLoadImage: timeout",!1,c,p),l.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else c(!1)}function w0(o,c){const d=new zi,p=new AbortController,P=setTimeout(()=>{p.abort(),Cn(d,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:p.signal}).then(O=>{clearTimeout(P),O.ok?Cn(d,"TestPingServer: ok",!0,c):Cn(d,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(P),Cn(d,"TestPingServer: error",!1,c)})}function Cn(o,c,d,p,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),p(d)}catch{}}function E0(){this.g=new r0}function T0(o,c,d){const p=d||"";try{nf(o,function(P,O){let z=P;h(P)&&(z=Nl(P)),c.push(p+O+"="+encodeURIComponent(z))})}catch(P){throw c.push(p+"type="+encodeURIComponent("_badmap")),P}}function Io(o){this.l=o.Ub||null,this.j=o.eb||!1}D(Io,Vl),Io.prototype.g=function(){return new So(this.l,this.j)},Io.prototype.i=function(o){return function(){return o}}({});function So(o,c){Ze.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(So,Ze),t=So.prototype,t.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,Ki(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Gi(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Ki(this)),this.g&&(this.readyState=3,Ki(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;cf(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function cf(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?Gi(this):Ki(this),this.readyState==3&&cf(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,Gi(this))},t.Qa=function(o){this.g&&(this.response=o,Gi(this))},t.ga=function(){this.g&&Gi(this)};function Gi(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Ki(o)}t.setRequestHeader=function(o,c){this.u.append(o,c)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var d=c.next();!d.done;)d=d.value,o.push(d[0]+": "+d[1]),d=c.next();return o.join(`\r
`)};function Ki(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(So.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function hf(o){let c="";return U(o,function(d,p){c+=p,c+=":",c+=d,c+=`\r
`}),c}function $l(o,c,d){e:{for(p in d){var p=!1;break e}p=!0}p||(d=hf(d),typeof o=="string"?d!=null&&encodeURIComponent(String(d)):_e(o,c,d))}function ke(o){Ze.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(ke,Ze);var I0=/^https?$/i,S0=["POST","PUT"];t=ke.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,c,d,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():bl.g(),this.v=this.o?jd(this.o):jd(bl),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(O){df(this,O);return}if(o=d||"",d=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var P in p)d.set(P,p[P]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const O of p.keys())d.set(O,p.get(O));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(d.keys()).find(O=>O.toLowerCase()=="content-type"),P=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(S0,c,void 0))||p||P||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,z]of d)this.g.setRequestHeader(O,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{mf(this),this.u=!0,this.g.send(o),this.u=!1}catch(O){df(this,O)}};function df(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,ff(o),Ao(o)}function ff(o){o.A||(o.A=!0,ut(o,"complete"),ut(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,ut(this,"complete"),ut(this,"abort"),Ao(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ao(this,!0)),ke.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?pf(this):this.bb())},t.bb=function(){pf(this)};function pf(o){if(o.h&&typeof a<"u"&&(!o.v[1]||hn(o)!=4||o.Z()!=2)){if(o.u&&hn(o)==4)Ld(o.Ea,0,o);else if(ut(o,"readystatechange"),hn(o)==4){o.h=!1;try{const z=o.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var d;if(!(d=c)){var p;if(p=z===0){var P=String(o.D).match(rf)[1]||null;!P&&l.self&&l.self.location&&(P=l.self.location.protocol.slice(0,-1)),p=!I0.test(P?P.toLowerCase():"")}d=p}if(d)ut(o,"complete"),ut(o,"success");else{o.m=6;try{var O=2<hn(o)?o.g.statusText:""}catch{O=""}o.l=O+" ["+o.Z()+"]",ff(o)}}finally{Ao(o)}}}}function Ao(o,c){if(o.g){mf(o);const d=o.g,p=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||ut(o,"ready");try{d.onreadystatechange=p}catch{}}}function mf(o){o.I&&(l.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function hn(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<hn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),n0(c)}};function gf(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function A0(o){const c={};o=(o.g&&2<=hn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(v(o[p]))continue;var d=x(o[p]);const P=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const O=c[P]||[];c[P]=O,O.push(d)}T(c,function(p){return p.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qi(o,c,d){return d&&d.internalChannelParams&&d.internalChannelParams[o]||c}function yf(o){this.Aa=0,this.i=[],this.j=new zi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Qi("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Qi("baseRetryDelayMs",5e3,o),this.cb=Qi("retryDelaySeedMs",1e4,o),this.Wa=Qi("forwardChannelMaxRetries",2,o),this.wa=Qi("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Yd(o&&o.concurrentRequestLimit),this.Da=new E0,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=yf.prototype,t.la=8,t.G=1,t.connect=function(o,c,d,p){ct(0),this.W=o,this.H=c||{},d&&p!==void 0&&(this.H.OSID=d,this.H.OAID=p),this.F=this.X,this.I=Rf(this,null,this.W),Co(this)};function Wl(o){if(_f(o),o.G==3){var c=o.U++,d=cn(o.I);if(_e(d,"SID",o.K),_e(d,"RID",c),_e(d,"TYPE","terminate"),Xi(o,d),c=new An(o,o.j,c),c.L=2,c.v=To(cn(d)),d=!1,l.navigator&&l.navigator.sendBeacon)try{d=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!d&&l.Image&&(new Image().src=c.v,d=!0),d||(c.g=Cf(c.j,null),c.g.ea(c.v)),c.F=Date.now(),vo(c)}Af(o)}function Ro(o){o.g&&(ql(o),o.g.cancel(),o.g=null)}function _f(o){Ro(o),o.u&&(l.clearTimeout(o.u),o.u=null),xo(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function Co(o){if(!Jd(o.h)&&!o.s){o.s=!0;var c=o.Ga;Ie||J(),$||(Ie(),$=!0),X.add(c,o),o.B=0}}function R0(o,c){return Zd(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Bi(y(o.Ga,o,c),Sf(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const P=new An(this,this.j,o);let O=this.o;if(this.S&&(O?(O=g(O),S(O,this.S)):O=this.S),this.m!==null||this.O||(P.H=O,O=null),this.P)e:{for(var c=0,d=0;d<this.i.length;d++){t:{var p=this.i[d];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(c+=p,4096<c){c=d;break e}if(c===4096||d===this.i.length-1){c=d+1;break e}}c=1e3}else c=1e3;c=wf(this,P,c),d=cn(this.I),_e(d,"RID",o),_e(d,"CVER",22),this.D&&_e(d,"X-HTTP-Session-Id",this.D),Xi(this,d),O&&(this.O?c="headers="+encodeURIComponent(String(hf(O)))+"&"+c:this.m&&$l(d,this.m,O)),zl(this.h,P),this.Ua&&_e(d,"TYPE","init"),this.P?(_e(d,"$req",c),_e(d,"SID","null"),P.T=!0,Fl(P,d,null)):Fl(P,d,c),this.G=2}}else this.G==3&&(o?vf(this,o):this.i.length==0||Jd(this.h)||vf(this))};function vf(o,c){var d;c?d=c.l:d=o.U++;const p=cn(o.I);_e(p,"SID",o.K),_e(p,"RID",d),_e(p,"AID",o.T),Xi(o,p),o.m&&o.o&&$l(p,o.m,o.o),d=new An(o,o.j,d,o.B+1),o.m===null&&(d.H=o.o),c&&(o.i=c.D.concat(o.i)),c=wf(o,d,1e3),d.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),zl(o.h,d),Fl(d,p,c)}function Xi(o,c){o.H&&U(o.H,function(d,p){_e(c,p,d)}),o.l&&nf({},function(d,p){_e(c,p,d)})}function wf(o,c,d){d=Math.min(o.i.length,d);var p=o.l?y(o.l.Na,o.l,o):null;e:{var P=o.i;let O=-1;for(;;){const z=["count="+d];O==-1?0<d?(O=P[0].g,z.push("ofs="+O)):O=0:z.push("ofs="+O);let me=!0;for(let He=0;He<d;He++){let ae=P[He].g;const et=P[He].map;if(ae-=O,0>ae)O=Math.max(0,P[He].g-100),me=!1;else try{T0(et,z,"req"+ae+"_")}catch{p&&p(et)}}if(me){p=z.join("&");break e}}}return o=o.i.splice(0,d),c.D=o,p}function Ef(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;Ie||J(),$||(Ie(),$=!0),X.add(c,o),o.v=0}}function Hl(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Bi(y(o.Fa,o),Sf(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,Tf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Bi(y(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ct(10),Ro(this),Tf(this))};function ql(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Tf(o){o.g=new An(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=cn(o.qa);_e(c,"RID","rpc"),_e(c,"SID",o.K),_e(c,"AID",o.T),_e(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&_e(c,"TO",o.ja),_e(c,"TYPE","xmlhttp"),Xi(o,c),o.m&&o.o&&$l(c,o.m,o.o),o.L&&(o.g.I=o.L);var d=o.g;o=o.ia,d.L=1,d.v=To(cn(c)),d.m=null,d.P=!0,Kd(d,o)}t.Za=function(){this.C!=null&&(this.C=null,Ro(this),Hl(this),ct(19))};function xo(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function If(o,c){var d=null;if(o.g==c){xo(o),ql(o),o.g=null;var p=2}else if(Bl(o.h,c))d=c.D,ef(o.h,c),p=1;else return;if(o.G!=0){if(c.o)if(p==1){d=c.m?c.m.length:0,c=Date.now()-c.F;var P=o.B;p=go(),ut(p,new Wd(p,d)),Co(o)}else Ef(o);else if(P=c.s,P==3||P==0&&0<c.X||!(p==1&&R0(o,c)||p==2&&Hl(o)))switch(d&&0<d.length&&(c=o.h,c.i=c.i.concat(d)),P){case 1:cr(o,5);break;case 4:cr(o,10);break;case 3:cr(o,6);break;default:cr(o,2)}}}function Sf(o,c){let d=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(d*=2),d*c}function cr(o,c){if(o.j.info("Error code "+c),c==2){var d=y(o.fb,o),p=o.Xa;const P=!p;p=new ur(p||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||wo(p,"https"),To(p),P?v0(p.toString(),d):w0(p.toString(),d)}else ct(2);o.G=0,o.l&&o.l.sa(c),Af(o),_f(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),ct(2)):(this.j.info("Failed to ping google.com"),ct(1))};function Af(o){if(o.G=0,o.ka=[],o.l){const c=tf(o.h);(c.length!=0||o.i.length!=0)&&(L(o.ka,c),L(o.ka,o.i),o.h.i.length=0,V(o.i),o.i.length=0),o.l.ra()}}function Rf(o,c,d){var p=d instanceof ur?cn(d):new ur(d);if(p.g!="")c&&(p.g=c+"."+p.g),Eo(p,p.s);else{var P=l.location;p=P.protocol,c=c?c+"."+P.hostname:P.hostname,P=+P.port;var O=new ur(null);p&&wo(O,p),c&&(O.g=c),P&&Eo(O,P),d&&(O.l=d),p=O}return d=o.D,c=o.ya,d&&c&&_e(p,d,c),_e(p,"VER",o.la),Xi(o,p),p}function Cf(o,c,d){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new ke(new Io({eb:d})):new ke(o.pa),c.Ha(o.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function xf(){}t=xf.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ko(){}ko.prototype.g=function(o,c){return new At(o,c)};function At(o,c){Ze.call(this),this.g=new yf(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!v(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!v(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new Br(this)}D(At,Ze),At.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},At.prototype.close=function(){Wl(this.g)},At.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var d={};d.__data__=o,o=d}else this.u&&(d={},d.__data__=Nl(o),o=d);c.i.push(new u0(c.Ya++,o)),c.G==3&&Co(c)},At.prototype.N=function(){this.g.l=null,delete this.j,Wl(this.g),delete this.g,At.aa.N.call(this)};function kf(o){Ol.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){e:{for(const d in c){o=d;break e}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}D(kf,Ol);function Pf(){Ll.call(this),this.status=1}D(Pf,Ll);function Br(o){this.g=o}D(Br,xf),Br.prototype.ua=function(){ut(this.g,"a")},Br.prototype.ta=function(o){ut(this.g,new kf(o))},Br.prototype.sa=function(o){ut(this.g,new Pf)},Br.prototype.ra=function(){ut(this.g,"b")},ko.prototype.createWebChannel=ko.prototype.g,At.prototype.send=At.prototype.o,At.prototype.open=At.prototype.m,At.prototype.close=At.prototype.close,S_=function(){return new ko},I_=function(){return go()},T_=ar,Dc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},yo.NO_ERROR=0,yo.TIMEOUT=8,yo.HTTP_ERROR=6,da=yo,Hd.COMPLETE="complete",E_=Hd,Ud.EventType=ji,ji.OPEN="a",ji.CLOSE="b",ji.ERROR="c",ji.MESSAGE="d",Ze.prototype.listen=Ze.prototype.K,hs=Ud,ke.prototype.listenOnce=ke.prototype.L,ke.prototype.getLastError=ke.prototype.Ka,ke.prototype.getLastErrorCode=ke.prototype.Ba,ke.prototype.getStatus=ke.prototype.Z,ke.prototype.getResponseJson=ke.prototype.Oa,ke.prototype.getResponseText=ke.prototype.oa,ke.prototype.send=ke.prototype.ea,ke.prototype.setWithCredentials=ke.prototype.Ha,w_=ke}).apply(typeof Ko<"u"?Ko:typeof self<"u"?self:typeof window<"u"?window:{});const Yp="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}st.UNAUTHENTICATED=new st(null),st.GOOGLE_CREDENTIALS=new st("google-credentials-uid"),st.FIRST_PARTY=new st("first-party-uid"),st.MOCK_USER=new st("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ni="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xr=new c_("@firebase/firestore");function ss(){return xr.logLevel}function q(t,...e){if(xr.logLevel<=se.DEBUG){const n=e.map(Wh);xr.debug(`Firestore (${Ni}): ${t}`,...n)}}function Tn(t,...e){if(xr.logLevel<=se.ERROR){const n=e.map(Wh);xr.error(`Firestore (${Ni}): ${t}`,...n)}}function Ei(t,...e){if(xr.logLevel<=se.WARN){const n=e.map(Wh);xr.warn(`Firestore (${Ni}): ${t}`,...n)}}function Wh(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t="Unexpected state"){const e=`FIRESTORE (${Ni}) INTERNAL ASSERTION FAILED: `+t;throw Tn(e),new Error(e)}function fe(t,e){t||Y()}function ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends Or{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class x1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(st.UNAUTHENTICATED))}shutdown(){}}class k1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class P1{constructor(e){this.t=e,this.currentUser=st.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){fe(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Er;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Er,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Er)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(fe(typeof r.accessToken=="string"),new A_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return fe(e===null||typeof e=="string"),new st(e)}}class D1{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=st.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class N1{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new D1(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(st.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class V1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class O1{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){fe(this.o===void 0);const r=s=>{s.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,q("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(fe(typeof n.token=="string"),this.R=n.token,new V1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=L1(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function le(t,e){return t<e?-1:t>e?1:0}function Ti(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new H(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Be.fromMillis(Date.now())}static fromDate(e){return Be.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Be(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?le(this.nanoseconds,e.nanoseconds):le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Z(e)}static min(){return new Z(new Be(0,0))}static max(){return new Z(new Be(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e,n,r){n===void 0?n=0:n>e.length&&Y(),r===void 0?r=e.length-n:r>e.length-n&&Y(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Qs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Qs?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),a=n.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class we extends Qs{construct(e,n,r){return new we(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new H(b.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new we(n)}static emptyPath(){return new we([])}}const b1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ke extends Qs{construct(e,n,r){return new Ke(e,n,r)}static isValidIdentifier(e){return b1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ke.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ke(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new H(b.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new H(b.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new H(b.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(a=!a,i++):l!=="."||a?(r+=l,i++):(s(),i++)}if(s(),a)throw new H(b.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ke(n)}static emptyPath(){return new Ke([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(we.fromString(e))}static fromName(e){return new K(we.fromString(e).popFirst(5))}static empty(){return new K(we.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&we.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return we.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new we(e.slice()))}}function M1(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Z.fromTimestamp(r===1e9?new Be(n+1,0):new Be(n,r));return new Jn(i,K.empty(),e)}function F1(t){return new Jn(t.readTime,t.key,-1)}class Jn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Jn(Z.min(),K.empty(),-1)}static max(){return new Jn(Z.max(),K.empty(),-1)}}function j1(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class B1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ao(t){if(t.code!==b.FAILED_PRECONDITION||t.message!==U1)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let i=0,s=0,a=!1;e.forEach(l=>{++i,l.next(()=>{++s,a&&s===i&&n()},u=>r(u))}),a=!0,s===i&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(i=>i?M.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new M((r,i)=>{const s=e.length,a=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(e[h]).next(f=>{a[h]=f,++l,l===s&&r(a)},f=>i(f))}})}static doWhile(e,n){return new M((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function z1(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function lo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Hh.oe=-1;function fl(t){return t==null}function $a(t){return t===0&&1/t==-1/0}function $1(t){return typeof t=="number"&&Number.isInteger(t)&&!$a(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jp(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Lr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function C_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e,n){this.comparator=e,this.root=n||Ge.EMPTY}insert(e,n){return new xe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ge.BLACK,null,null))}remove(e){return new xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ge.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qo(this.root,e,this.comparator,!0)}}class Qo{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ge{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Ge.RED,this.left=i??Ge.EMPTY,this.right=s??Ge.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Ge(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ge.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Ge.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ge.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ge.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Y();const e=this.left.check();if(e!==this.right.check())throw Y();return e+(this.isRed()?0:1)}}Ge.EMPTY=null,Ge.RED=!0,Ge.BLACK=!1;Ge.EMPTY=new class{constructor(){this.size=0}get key(){throw Y()}get value(){throw Y()}get color(){throw Y()}get left(){throw Y()}get right(){throw Y()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Ge(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.comparator=e,this.data=new xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Zp(this.data.getIterator())}getIteratorFrom(e){return new Zp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Xe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Xe(this.comparator);return n.data=e,n}}class Zp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.fields=e,e.sort(Ke.comparator)}static empty(){return new xt([])}unionWith(e){let n=new Xe(Ke.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new xt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ti(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new x_("Invalid base64 string: "+s):s}}(e);return new Je(n)}static fromUint8Array(e){const n=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new Je(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Je.EMPTY_BYTE_STRING=new Je("");const W1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zn(t){if(fe(!!t),typeof t=="string"){let e=0;const n=W1.exec(t);if(fe(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Oe(t.seconds),nanos:Oe(t.nanos)}}function Oe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function kr(t){return typeof t=="string"?Je.fromBase64String(t):Je.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Gh(t){const e=t.mapValue.fields.__previous_value__;return qh(e)?Gh(e):e}function Xs(t){const e=Zn(t.mapValue.fields.__local_write_time__.timestampValue);return new Be(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e,n,r,i,s,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h}}class Ys{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ys("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ys&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo={mapValue:{}};function Pr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?qh(t)?4:G1(t)?9007199254740991:q1(t)?10:11:Y()}function un(t,e){if(t===e)return!0;const n=Pr(t);if(n!==Pr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Xs(t).isEqual(Xs(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Zn(i.timestampValue),l=Zn(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return kr(i.bytesValue).isEqual(kr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Oe(i.geoPointValue.latitude)===Oe(s.geoPointValue.latitude)&&Oe(i.geoPointValue.longitude)===Oe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Oe(i.integerValue)===Oe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=Oe(i.doubleValue),l=Oe(s.doubleValue);return a===l?$a(a)===$a(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Ti(t.arrayValue.values||[],e.arrayValue.values||[],un);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},l=s.mapValue.fields||{};if(Jp(a)!==Jp(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!un(a[u],l[u])))return!1;return!0}(t,e);default:return Y()}}function Js(t,e){return(t.values||[]).find(n=>un(n,e))!==void 0}function Ii(t,e){if(t===e)return 0;const n=Pr(t),r=Pr(e);if(n!==r)return le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return le(t.booleanValue,e.booleanValue);case 2:return function(s,a){const l=Oe(s.integerValue||s.doubleValue),u=Oe(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return em(t.timestampValue,e.timestampValue);case 4:return em(Xs(t),Xs(e));case 5:return le(t.stringValue,e.stringValue);case 6:return function(s,a){const l=kr(s),u=kr(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const l=s.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const f=le(l[h],u[h]);if(f!==0)return f}return le(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const l=le(Oe(s.latitude),Oe(a.latitude));return l!==0?l:le(Oe(s.longitude),Oe(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return tm(t.arrayValue,e.arrayValue);case 10:return function(s,a){var l,u,h,f;const m=s.fields||{},y=a.fields||{},A=(l=m.value)===null||l===void 0?void 0:l.arrayValue,D=(u=y.value)===null||u===void 0?void 0:u.arrayValue,V=le(((h=A==null?void 0:A.values)===null||h===void 0?void 0:h.length)||0,((f=D==null?void 0:D.values)===null||f===void 0?void 0:f.length)||0);return V!==0?V:tm(A,D)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===Xo.mapValue&&a===Xo.mapValue)return 0;if(s===Xo.mapValue)return 1;if(a===Xo.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=a.fields||{},f=Object.keys(h);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const y=le(u[m],f[m]);if(y!==0)return y;const A=Ii(l[u[m]],h[f[m]]);if(A!==0)return A}return le(u.length,f.length)}(t.mapValue,e.mapValue);default:throw Y()}}function em(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return le(t,e);const n=Zn(t),r=Zn(e),i=le(n.seconds,r.seconds);return i!==0?i:le(n.nanos,r.nanos)}function tm(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ii(n[i],r[i]);if(s)return s}return le(n.length,r.length)}function Si(t){return Nc(t)}function Nc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Zn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return kr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Nc(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${Nc(n.fields[a])}`;return i+"}"}(t.mapValue):Y()}function nm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Vc(t){return!!t&&"integerValue"in t}function Kh(t){return!!t&&"arrayValue"in t}function rm(t){return!!t&&"nullValue"in t}function im(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function fa(t){return!!t&&"mapValue"in t}function q1(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function As(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Lr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=As(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=As(t.arrayValue.values[n]);return e}return Object.assign({},t)}function G1(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.value=e}static empty(){return new _t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!fa(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=As(n)}setAll(e){let n=Ke.emptyPath(),r={},i=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}a?r[l.lastSegment()]=As(a):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());fa(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return un(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];fa(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Lr(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new _t(As(this.value))}}function k_(t){const e=[];return Lr(t.fields,(n,r)=>{const i=new Ke([n]);if(fa(r)){const s=k_(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new xt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,n,r,i,s,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new at(e,0,Z.min(),Z.min(),Z.min(),_t.empty(),0)}static newFoundDocument(e,n,r,i){return new at(e,1,n,Z.min(),r,i,0)}static newNoDocument(e,n){return new at(e,2,n,Z.min(),Z.min(),_t.empty(),0)}static newUnknownDocument(e,n){return new at(e,3,n,Z.min(),Z.min(),_t.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_t.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_t.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof at&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new at(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,n){this.position=e,this.inclusive=n}}function sm(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=K.comparator(K.fromName(a.referenceValue),n.key):r=Ii(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function om(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!un(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e,n="asc"){this.field=e,this.dir=n}}function K1(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{}class Fe extends P_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new X1(e,n,r):n==="array-contains"?new Z1(e,r):n==="in"?new eI(e,r):n==="not-in"?new tI(e,r):n==="array-contains-any"?new nI(e,r):new Fe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Y1(e,r):new J1(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ii(n,this.value)):n!==null&&Pr(this.value)===Pr(n)&&this.matchesComparison(Ii(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zt extends P_{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Zt(e,n)}matches(e){return D_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function D_(t){return t.op==="and"}function N_(t){return Q1(t)&&D_(t)}function Q1(t){for(const e of t.filters)if(e instanceof Zt)return!1;return!0}function Oc(t){if(t instanceof Fe)return t.field.canonicalString()+t.op.toString()+Si(t.value);if(N_(t))return t.filters.map(e=>Oc(e)).join(",");{const e=t.filters.map(n=>Oc(n)).join(",");return`${t.op}(${e})`}}function V_(t,e){return t instanceof Fe?function(r,i){return i instanceof Fe&&r.op===i.op&&r.field.isEqual(i.field)&&un(r.value,i.value)}(t,e):t instanceof Zt?function(r,i){return i instanceof Zt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,l)=>s&&V_(a,i.filters[l]),!0):!1}(t,e):void Y()}function O_(t){return t instanceof Fe?function(n){return`${n.field.canonicalString()} ${n.op} ${Si(n.value)}`}(t):t instanceof Zt?function(n){return n.op.toString()+" {"+n.getFilters().map(O_).join(" ,")+"}"}(t):"Filter"}class X1 extends Fe{constructor(e,n,r){super(e,n,r),this.key=K.fromName(r.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class Y1 extends Fe{constructor(e,n){super(e,"in",n),this.keys=L_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class J1 extends Fe{constructor(e,n){super(e,"not-in",n),this.keys=L_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function L_(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>K.fromName(r.referenceValue))}class Z1 extends Fe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Kh(n)&&Js(n.arrayValue,this.value)}}class eI extends Fe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Js(this.value.arrayValue,n)}}class tI extends Fe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Js(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Js(this.value.arrayValue,n)}}class nI extends Fe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Kh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Js(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e,n=null,r=[],i=[],s=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=l,this.ue=null}}function am(t,e=null,n=[],r=[],i=null,s=null,a=null){return new rI(t,e,n,r,i,s,a)}function Qh(t){const e=ee(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Oc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),fl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Si(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Si(r)).join(",")),e.ue=n}return e.ue}function Xh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!K1(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!V_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!om(t.startAt,e.startAt)&&om(t.endAt,e.endAt)}function Lc(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,n=null,r=[],i=[],s=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function iI(t,e,n,r,i,s,a,l){return new Vi(t,e,n,r,i,s,a,l)}function Yh(t){return new Vi(t)}function lm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function b_(t){return t.collectionGroup!==null}function Rs(t){const e=ee(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Xe(Ke.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Zs(s,r))}),n.has(Ke.keyField().canonicalString())||e.ce.push(new Zs(Ke.keyField(),r))}return e.ce}function an(t){const e=ee(t);return e.le||(e.le=sI(e,Rs(t))),e.le}function sI(t,e){if(t.limitType==="F")return am(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Zs(i.field,s)});const n=t.endAt?new Wa(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Wa(t.startAt.position,t.startAt.inclusive):null;return am(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function bc(t,e){const n=t.filters.concat([e]);return new Vi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Mc(t,e,n){return new Vi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function pl(t,e){return Xh(an(t),an(e))&&t.limitType===e.limitType}function M_(t){return`${Qh(an(t))}|lt:${t.limitType}`}function Hr(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>O_(i)).join(", ")}]`),fl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Si(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Si(i)).join(",")),`Target(${r})`}(an(t))}; limitType=${t.limitType})`}function ml(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):K.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Rs(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,l,u){const h=sm(a,l,u);return a.inclusive?h<=0:h<0}(r.startAt,Rs(r),i)||r.endAt&&!function(a,l,u){const h=sm(a,l,u);return a.inclusive?h>=0:h>0}(r.endAt,Rs(r),i))}(t,e)}function oI(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function F_(t){return(e,n)=>{let r=!1;for(const i of Rs(t)){const s=aI(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function aI(t,e,n){const r=t.field.isKeyField()?K.comparator(e.key,n.key):function(s,a,l){const u=a.data.field(s),h=l.data.field(s);return u!==null&&h!==null?Ii(u,h):Y()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Y()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Lr(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return C_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI=new xe(K.comparator);function In(){return lI}const j_=new xe(K.comparator);function ds(...t){let e=j_;for(const n of t)e=e.insert(n.key,n);return e}function U_(t){let e=j_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function yr(){return Cs()}function B_(){return Cs()}function Cs(){return new Oi(t=>t.toString(),(t,e)=>t.isEqual(e))}const uI=new xe(K.comparator),cI=new Xe(K.comparator);function re(...t){let e=cI;for(const n of t)e=e.add(n);return e}const hI=new Xe(le);function dI(){return hI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jh(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$a(e)?"-0":e}}function z_(t){return{integerValue:""+t}}function fI(t,e){return $1(e)?z_(e):Jh(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(){this._=void 0}}function pI(t,e,n){return t instanceof Ha?function(i,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&qh(s)&&(s=Gh(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(n,e):t instanceof eo?W_(t,e):t instanceof to?H_(t,e):function(i,s){const a=$_(i,s),l=um(a)+um(i.Pe);return Vc(a)&&Vc(i.Pe)?z_(l):Jh(i.serializer,l)}(t,e)}function mI(t,e,n){return t instanceof eo?W_(t,e):t instanceof to?H_(t,e):n}function $_(t,e){return t instanceof qa?function(r){return Vc(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Ha extends gl{}class eo extends gl{constructor(e){super(),this.elements=e}}function W_(t,e){const n=q_(e);for(const r of t.elements)n.some(i=>un(i,r))||n.push(r);return{arrayValue:{values:n}}}class to extends gl{constructor(e){super(),this.elements=e}}function H_(t,e){let n=q_(e);for(const r of t.elements)n=n.filter(i=>!un(i,r));return{arrayValue:{values:n}}}class qa extends gl{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function um(t){return Oe(t.integerValue||t.doubleValue)}function q_(t){return Kh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function gI(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof eo&&i instanceof eo||r instanceof to&&i instanceof to?Ti(r.elements,i.elements,un):r instanceof qa&&i instanceof qa?un(r.Pe,i.Pe):r instanceof Ha&&i instanceof Ha}(t.transform,e.transform)}class yI{constructor(e,n){this.version=e,this.transformResults=n}}class Yt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Yt}static exists(e){return new Yt(void 0,e)}static updateTime(e){return new Yt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pa(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class yl{}function G_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Zh(t.key,Yt.none()):new uo(t.key,t.data,Yt.none());{const n=t.data,r=_t.empty();let i=new Xe(Ke.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new ir(t.key,r,new xt(i.toArray()),Yt.none())}}function _I(t,e,n){t instanceof uo?function(i,s,a){const l=i.value.clone(),u=hm(i.fieldTransforms,s,a.transformResults);l.setAll(u),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof ir?function(i,s,a){if(!pa(i.precondition,s))return void s.convertToUnknownDocument(a.version);const l=hm(i.fieldTransforms,s,a.transformResults),u=s.data;u.setAll(K_(i)),u.setAll(l),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function xs(t,e,n,r){return t instanceof uo?function(s,a,l,u){if(!pa(s.precondition,a))return l;const h=s.value.clone(),f=dm(s.fieldTransforms,u,a);return h.setAll(f),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof ir?function(s,a,l,u){if(!pa(s.precondition,a))return l;const h=dm(s.fieldTransforms,u,a),f=a.data;return f.setAll(K_(s)),f.setAll(h),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(s,a,l){return pa(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function vI(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=$_(r.transform,i||null);s!=null&&(n===null&&(n=_t.empty()),n.set(r.field,s))}return n||null}function cm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ti(r,i,(s,a)=>gI(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class uo extends yl{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ir extends yl{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function K_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function hm(t,e,n){const r=new Map;fe(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,l=e.data.field(s.field);r.set(s.field,mI(a,l,n[i]))}return r}function dm(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,pI(s,a,e))}return r}class Zh extends yl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wI extends yl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&_I(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=xs(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=xs(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=B_();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(i.key)?null:l;const u=G_(a,l);u!==null&&r.set(i.key,u),a.isValidDocument()||a.convertToNoDocument(Z.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),re())}isEqual(e){return this.batchId===e.batchId&&Ti(this.mutations,e.mutations,(n,r)=>cm(n,r))&&Ti(this.baseMutations,e.baseMutations,(n,r)=>cm(n,r))}}class ed{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){fe(e.mutations.length===r.length);let i=function(){return uI}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new ed(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var be,ie;function SI(t){switch(t){default:return Y();case b.CANCELLED:case b.UNKNOWN:case b.DEADLINE_EXCEEDED:case b.RESOURCE_EXHAUSTED:case b.INTERNAL:case b.UNAVAILABLE:case b.UNAUTHENTICATED:return!1;case b.INVALID_ARGUMENT:case b.NOT_FOUND:case b.ALREADY_EXISTS:case b.PERMISSION_DENIED:case b.FAILED_PRECONDITION:case b.ABORTED:case b.OUT_OF_RANGE:case b.UNIMPLEMENTED:case b.DATA_LOSS:return!0}}function Q_(t){if(t===void 0)return Tn("GRPC error has no .code"),b.UNKNOWN;switch(t){case be.OK:return b.OK;case be.CANCELLED:return b.CANCELLED;case be.UNKNOWN:return b.UNKNOWN;case be.DEADLINE_EXCEEDED:return b.DEADLINE_EXCEEDED;case be.RESOURCE_EXHAUSTED:return b.RESOURCE_EXHAUSTED;case be.INTERNAL:return b.INTERNAL;case be.UNAVAILABLE:return b.UNAVAILABLE;case be.UNAUTHENTICATED:return b.UNAUTHENTICATED;case be.INVALID_ARGUMENT:return b.INVALID_ARGUMENT;case be.NOT_FOUND:return b.NOT_FOUND;case be.ALREADY_EXISTS:return b.ALREADY_EXISTS;case be.PERMISSION_DENIED:return b.PERMISSION_DENIED;case be.FAILED_PRECONDITION:return b.FAILED_PRECONDITION;case be.ABORTED:return b.ABORTED;case be.OUT_OF_RANGE:return b.OUT_OF_RANGE;case be.UNIMPLEMENTED:return b.UNIMPLEMENTED;case be.DATA_LOSS:return b.DATA_LOSS;default:return Y()}}(ie=be||(be={}))[ie.OK=0]="OK",ie[ie.CANCELLED=1]="CANCELLED",ie[ie.UNKNOWN=2]="UNKNOWN",ie[ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ie[ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ie[ie.NOT_FOUND=5]="NOT_FOUND",ie[ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",ie[ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",ie[ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",ie[ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ie[ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ie[ie.ABORTED=10]="ABORTED",ie[ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",ie[ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",ie[ie.INTERNAL=13]="INTERNAL",ie[ie.UNAVAILABLE=14]="UNAVAILABLE",ie[ie.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI=new wr([4294967295,4294967295],0);function fm(t){const e=AI().encode(t),n=new v_;return n.update(e),new Uint8Array(n.digest())}function pm(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new wr([n,r],0),new wr([i,s],0)]}class td{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new fs(`Invalid padding: ${n}`);if(r<0)throw new fs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new fs(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new fs(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=wr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(wr.fromNumber(r)));return i.compare(RI)===1&&(i=new wr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=fm(e),[r,i]=pm(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);if(!this.de(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new td(s,i,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.Ie===0)return;const n=fm(e),[r,i]=pm(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class fs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,co.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new _l(Z.min(),i,new xe(le),In(),re())}}class co{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new co(r,n,re(),re(),re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class X_{constructor(e,n){this.targetId=e,this.me=n}}class Y_{constructor(e,n,r=Je.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class mm{constructor(){this.fe=0,this.ge=ym(),this.pe=Je.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=re(),n=re(),r=re();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Y()}}),new co(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=ym()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,fe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class CI{constructor(e){this.Le=e,this.Be=new Map,this.ke=In(),this.qe=gm(),this.Qe=new xe(le)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Y()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Lc(s))if(r===0){const a=new K(s.path);this.Ue(n,a,at.newNoDocument(a,Z.min()))}else fe(r===1);else{const a=this.Ye(n);if(a!==r){const l=this.Ze(e),u=l?this.Xe(l,e,a):1;if(u!==0){this.je(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,l;try{a=kr(r).toUint8Array()}catch(u){if(u instanceof x_)return Ei("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new td(a,i,s)}catch(u){return Ei(u instanceof fs?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const a=this.Le.tt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,a)=>{const l=this.Je(a);if(l){if(s.current&&Lc(l.target)){const u=new K(l.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,at.newNoDocument(u,e))}s.be&&(n.set(a,s.ve()),s.Ce())}});let r=re();this.qe.forEach((s,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));const i=new _l(e,n,this.Qe,this.ke,r);return this.ke=In(),this.qe=gm(),this.Qe=new xe(le),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new mm,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Xe(le),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new mm),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function gm(){return new xe(K.comparator)}function ym(){return new xe(K.comparator)}const xI={asc:"ASCENDING",desc:"DESCENDING"},kI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PI={and:"AND",or:"OR"};class DI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Fc(t,e){return t.useProto3Json||fl(e)?e:{value:e}}function Ga(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function J_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function NI(t,e){return Ga(t,e.toTimestamp())}function ln(t){return fe(!!t),Z.fromTimestamp(function(n){const r=Zn(n);return new Be(r.seconds,r.nanos)}(t))}function nd(t,e){return jc(t,e).canonicalString()}function jc(t,e){const n=function(i){return new we(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Z_(t){const e=we.fromString(t);return fe(iv(e)),e}function Uc(t,e){return nd(t.databaseId,e.path)}function Su(t,e){const n=Z_(e);if(n.get(1)!==t.databaseId.projectId)throw new H(b.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H(b.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(tv(n))}function ev(t,e){return nd(t.databaseId,e)}function VI(t){const e=Z_(t);return e.length===4?we.emptyPath():tv(e)}function Bc(t){return new we(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function tv(t){return fe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function _m(t,e,n){return{name:Uc(t,e),fields:n.value.mapValue.fields}}function OI(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Y()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,f){return h.useProto3Json?(fe(f===void 0||typeof f=="string"),Je.fromBase64String(f||"")):(fe(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Je.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(h){const f=h.code===void 0?b.UNKNOWN:Q_(h.code);return new H(f,h.message||"")}(a);n=new Y_(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Su(t,r.document.name),s=ln(r.document.updateTime),a=r.document.createTime?ln(r.document.createTime):Z.min(),l=new _t({mapValue:{fields:r.document.fields}}),u=at.newFoundDocument(i,s,a,l),h=r.targetIds||[],f=r.removedTargetIds||[];n=new ma(h,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Su(t,r.document),s=r.readTime?ln(r.readTime):Z.min(),a=at.newNoDocument(i,s),l=r.removedTargetIds||[];n=new ma([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Su(t,r.document),s=r.removedTargetIds||[];n=new ma([],s,i,null)}else{if(!("filter"in e))return Y();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new II(i,s),l=r.targetId;n=new X_(l,a)}}return n}function LI(t,e){let n;if(e instanceof uo)n={update:_m(t,e.key,e.value)};else if(e instanceof Zh)n={delete:Uc(t,e.key)};else if(e instanceof ir)n={update:_m(t,e.key,e.data),updateMask:WI(e.fieldMask)};else{if(!(e instanceof wI))return Y();n={verify:Uc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const l=a.transform;if(l instanceof Ha)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof eo)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof to)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof qa)return{fieldPath:a.field.canonicalString(),increment:l.Pe};throw Y()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:NI(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Y()}(t,e.precondition)),n}function bI(t,e){return t&&t.length>0?(fe(e!==void 0),t.map(n=>function(i,s){let a=i.updateTime?ln(i.updateTime):ln(s);return a.isEqual(Z.min())&&(a=ln(s)),new yI(a,i.transformResults||[])}(n,e))):[]}function MI(t,e){return{documents:[ev(t,e.path)]}}function FI(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ev(t,i);const s=function(h){if(h.length!==0)return rv(Zt.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(h){if(h.length!==0)return h.map(f=>function(y){return{field:qr(y.field),direction:BI(y.dir)}}(f))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Fc(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:i}}function jI(t){let e=VI(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){fe(r===1);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(m){const y=nv(m);return y instanceof Zt&&N_(y)?y.getFilters():[y]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(y=>function(D){return new Zs(Gr(D.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(y))}(n.orderBy));let l=null;n.limit&&(l=function(m){let y;return y=typeof m=="object"?m.value:m,fl(y)?null:y}(n.limit));let u=null;n.startAt&&(u=function(m){const y=!!m.before,A=m.values||[];return new Wa(A,y)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const y=!m.before,A=m.values||[];return new Wa(A,y)}(n.endAt)),iI(e,i,a,s,l,"F",u,h)}function UI(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function nv(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Gr(n.unaryFilter.field);return Fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Gr(n.unaryFilter.field);return Fe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Gr(n.unaryFilter.field);return Fe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Gr(n.unaryFilter.field);return Fe.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Y()}}(t):t.fieldFilter!==void 0?function(n){return Fe.create(Gr(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Zt.create(n.compositeFilter.filters.map(r=>nv(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Y()}}(n.compositeFilter.op))}(t):Y()}function BI(t){return xI[t]}function zI(t){return kI[t]}function $I(t){return PI[t]}function qr(t){return{fieldPath:t.canonicalString()}}function Gr(t){return Ke.fromServerFormat(t.fieldPath)}function rv(t){return t instanceof Fe?function(n){if(n.op==="=="){if(im(n.value))return{unaryFilter:{field:qr(n.field),op:"IS_NAN"}};if(rm(n.value))return{unaryFilter:{field:qr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(im(n.value))return{unaryFilter:{field:qr(n.field),op:"IS_NOT_NAN"}};if(rm(n.value))return{unaryFilter:{field:qr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qr(n.field),op:zI(n.op),value:n.value}}}(t):t instanceof Zt?function(n){const r=n.getFilters().map(i=>rv(i));return r.length===1?r[0]:{compositeFilter:{op:$I(n.op),filters:r}}}(t):Y()}function WI(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function iv(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,n,r,i,s=Z.min(),a=Z.min(),l=Je.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new bn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new bn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new bn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new bn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e){this.ct=e}}function qI(t){const e=jI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Mc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(){this.un=new KI}addToCollectionParentIndex(e,n){return this.un.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(Jn.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(Jn.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class KI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Xe(we.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Xe(we.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ai(0)}static kn(){return new Ai(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(){this.changes=new Oi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,at.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&xs(r.mutation,i,xt.empty(),Be.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,re()).next(()=>r))}getLocalViewOfDocuments(e,n,r=re()){const i=yr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let a=ds();return s.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=yr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,re()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,i){let s=In();const a=Cs(),l=function(){return Cs()}();return n.forEach((u,h)=>{const f=r.get(h.key);i.has(h.key)&&(f===void 0||f.mutation instanceof ir)?s=s.insert(h.key,h):f!==void 0?(a.set(h.key,f.mutation.getFieldMask()),xs(f.mutation,h,f.mutation.getFieldMask(),Be.now())):a.set(h.key,xt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,f)=>a.set(h,f)),n.forEach((h,f)=>{var m;return l.set(h,new XI(f,(m=a.get(h))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Cs();let i=new xe((a,l)=>a-l),s=re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let f=r.get(u)||xt.empty();f=l.applyToLocalView(h,f),r.set(u,f);const m=(i.get(l.batchId)||re()).add(u);i=i.insert(l.batchId,m)})}).next(()=>{const a=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,f=u.value,m=B_();f.forEach(y=>{if(!s.has(y)){const A=G_(n.get(y),r.get(y));A!==null&&m.set(y,A),s=s.add(y)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,m))}return M.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(a){return K.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):b_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):M.resolve(yr());let l=-1,u=s;return a.next(h=>M.forEach(h,(f,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),s.get(f)?M.resolve():this.remoteDocumentCache.getEntry(e,f).next(y=>{u=u.insert(f,y)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,re())).next(f=>({batchId:l,changes:U_(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(r=>{let i=ds();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let a=ds();return this.indexManager.getCollectionParents(e,s).next(l=>M.forEach(l,u=>{const h=function(m,y){return new Vi(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(f=>{f.forEach((m,y)=>{a=a.insert(m,y)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(a=>{s.forEach((u,h)=>{const f=h.getKey();a.get(f)===null&&(a=a.insert(f,at.newInvalidDocument(f)))});let l=ds();return a.forEach((u,h)=>{const f=s.get(u);f!==void 0&&xs(f.mutation,h,xt.empty(),Be.now()),ml(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return M.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ln(i.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:qI(i.bundledQuery),readTime:ln(i.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(){this.overlays=new xe(K.comparator),this.Ir=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=yr();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const i=yr(),s=n.length+1,a=new K(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return M.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new xe((h,f)=>h-f);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let f=s.get(h.largestBatchId);f===null&&(f=yr(),s=s.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const l=yr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,f)=>l.set(h,f)),!(l.size()>=i)););return M.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new TI(n,r));let s=this.Ir.get(n);s===void 0&&(s=re(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(){this.sessionToken=Je.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(){this.Tr=new Xe(ze.Er),this.dr=new Xe(ze.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new ze(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new ze(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new K(new we([])),r=new ze(n,e),i=new ze(n,e+1),s=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),s.push(a.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new K(new we([])),r=new ze(n,e),i=new ze(n,e+1);let s=re();return this.dr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new ze(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ze{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return K.comparator(e.key,n.key)||le(e.wr,n.wr)}static Ar(e,n){return le(e.wr,n.wr)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Xe(ze.Er)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new EI(s,n,r,i);this.mutationQueue.push(a);for(const l of i)this.br=this.br.add(new ze(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return M.resolve(a)}lookupMutationBatch(e,n){return M.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ze(n,0),i=new ze(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],a=>{const l=this.Dr(a.wr);s.push(l)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Xe(le);return n.forEach(i=>{const s=new ze(i,0),a=new ze(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],l=>{r=r.add(l.wr)})}),M.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;K.isDocumentKey(s)||(s=s.child(""));const a=new ze(new K(s),0);let l=new Xe(le);return this.br.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(u.wr)),!0)},a),M.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){fe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return M.forEach(n.mutations,i=>{const s=new ze(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new ze(n,0),i=this.br.firstAfterOrEqual(r);return M.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e){this.Mr=e,this.docs=function(){return new xe(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():at.newInvalidDocument(n))}getEntries(e,n){let r=In();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():at.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=In();const a=n.path,l=new K(a.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:f}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||j1(F1(f),r)<=0||(i.has(f.key)||ml(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Y()}Or(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new rS(this)}getSize(e){return M.resolve(this.size)}}class rS extends QI{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e){this.persistence=e,this.Nr=new Oi(n=>Qh(n),Xh),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.Lr=0,this.Br=new rd,this.targetCount=0,this.kr=Ai.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),M.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ai(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Kn(n),M.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),M.waitFor(s).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Hh(0),this.Kr=!1,this.Kr=!0,this.$r=new eS,this.referenceDelegate=e(this),this.Ur=new iS(this),this.indexManager=new GI,this.remoteDocumentCache=function(i){return new nS(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new HI(n),this.Gr=new JI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ZI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new tS(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);const i=new oS(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return M.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class oS extends B1{constructor(e){super(),this.currentSequenceNumber=e}}class id{constructor(e){this.persistence=e,this.Jr=new rd,this.Yr=null}static Zr(e){return new id(e)}get Xr(){if(this.Yr)return this.Yr;throw Y()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),M.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Xr,r=>{const i=K.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Z.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return M.or([()=>M.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=re(),i=re();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new sd(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return fT()?8:z1(hT())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new aS;return this.Xi(e,n,a).next(l=>{if(s.result=l,this.zi)return this.es(e,n,a,l.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(ss()<=se.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",Hr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),M.resolve()):(ss()<=se.DEBUG&&q("QueryEngine","Query:",Hr(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ss()<=se.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",Hr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,an(n))):M.resolve())}Yi(e,n){if(lm(n))return M.resolve(null);let r=an(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Mc(n,null,"F"),r=an(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=re(...s);return this.Ji.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.ts(n,l);return this.ns(n,h,a,u.readTime)?this.Yi(e,Mc(n,null,"F")):this.rs(e,h,n,u)}))})))}Zi(e,n,r,i){return lm(n)||i.isEqual(Z.min())?M.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const a=this.ts(n,s);return this.ns(n,a,r,i)?M.resolve(null):(ss()<=se.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Hr(n)),this.rs(e,a,n,M1(i,-1)).next(l=>l))})}ts(e,n){let r=new Xe(F_(e));return n.forEach((i,s)=>{ml(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return ss()<=se.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",Hr(n)),this.Ji.getDocumentsMatchingQuery(e,n,Jn.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new xe(le),this._s=new Oi(s=>Qh(s),Xh),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new YI(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function cS(t,e,n,r){return new uS(t,e,n,r)}async function sv(t,e){const n=ee(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],l=[];let u=re();for(const h of i){a.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}for(const h of s){l.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(h=>({hs:h,removedBatchIds:a,addedBatchIds:l}))})})}function hS(t,e){const n=ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,f){const m=h.batch,y=m.keys();let A=M.resolve();return y.forEach(D=>{A=A.next(()=>f.getEntry(u,D)).next(V=>{const L=h.docVersions.get(D);fe(L!==null),V.version.compareTo(L)<0&&(m.applyToRemoteDocument(V,h),V.isValidDocument()&&(V.setReadTime(h.commitVersion),f.addEntry(V)))})}),A.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=re();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function ov(t){const e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function dS(t,e){const n=ee(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const l=[];e.targetChanges.forEach((f,m)=>{const y=i.get(m);if(!y)return;l.push(n.Ur.removeMatchingKeys(s,f.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(s,f.addedDocuments,m)));let A=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?A=A.withResumeToken(Je.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):f.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(f.resumeToken,r)),i=i.insert(m,A),function(V,L,C){return V.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(y,A,f)&&l.push(n.Ur.updateTargetData(s,A))});let u=In(),h=re();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),l.push(fS(s,a,e.documentUpdates).next(f=>{u=f.Ps,h=f.Is})),!r.isEqual(Z.min())){const f=n.Ur.getLastRemoteSnapshotVersion(s).next(m=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(f)}return M.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.os=i,s))}function fS(t,e,n){let r=re(),i=re();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let a=In();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(Z.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):q("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Ps:a,Is:i}})}function pS(t,e){const n=ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function mS(t,e){const n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,M.resolve(i)):n.Ur.allocateTargetId(r).next(a=>(i=new bn(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function zc(t,e,n){const r=ee(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!lo(a))throw a;q("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function vm(t,e,n){const r=ee(t);let i=Z.min(),s=re();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,f){const m=ee(u),y=m._s.get(f);return y!==void 0?M.resolve(m.os.get(y)):m.Ur.getTargetData(h,f)}(r,a,an(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,l.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?i:Z.min(),n?s:re())).next(l=>(gS(r,oI(e),l),{documents:l,Ts:s})))}function gS(t,e,n){let r=t.us.get(e)||Z.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class wm{constructor(){this.activeTargetIds=dI()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yS{constructor(){this.so=new wm,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new wm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yo=null;function Au(){return Yo===null?Yo=function(){return 268435456+Math.round(2147483648*Math.random())}():Yo++,"0x"+Yo.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const it="WebChannelConnection";class ES extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,a){const l=Au(),u=this.xo(n,r.toUriEncodedString());q("RestConnection",`Sending RPC '${n}' ${l}:`,u,i);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,s,a),this.No(n,u,h,i).then(f=>(q("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw Ei("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",u,"request:",i),f})}Lo(n,r,i,s,a,l){return this.Mo(n,r,i,s,a)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ni}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>n[a]=s),i&&i.headers.forEach((s,a)=>n[a]=s)}xo(n,r){const i=vS[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Au();return new Promise((a,l)=>{const u=new w_;u.setWithCredentials(!0),u.listenOnce(E_.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case da.NO_ERROR:const f=u.getResponseJson();q(it,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),a(f);break;case da.TIMEOUT:q(it,`RPC '${e}' ${s} timed out`),l(new H(b.DEADLINE_EXCEEDED,"Request time out"));break;case da.HTTP_ERROR:const m=u.getStatus();if(q(it,`RPC '${e}' ${s} failed with status:`,m,"response text:",u.getResponseText()),m>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const A=y==null?void 0:y.error;if(A&&A.status&&A.message){const D=function(L){const C=L.toLowerCase().replace(/_/g,"-");return Object.values(b).indexOf(C)>=0?C:b.UNKNOWN}(A.status);l(new H(D,A.message))}else l(new H(b.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new H(b.UNAVAILABLE,"Connection failed."));break;default:Y()}}finally{q(it,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);q(it,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",h,r,15)})}Bo(e,n,r){const i=Au(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=S_(),l=I_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=s.join("");q(it,`Creating RPC '${e}' stream ${i}: ${f}`,u);const m=a.createWebChannel(f,u);let y=!1,A=!1;const D=new wS({Io:L=>{A?q(it,`Not sending because RPC '${e}' stream ${i} is closed:`,L):(y||(q(it,`Opening RPC '${e}' stream ${i} transport.`),m.open(),y=!0),q(it,`RPC '${e}' stream ${i} sending:`,L),m.send(L))},To:()=>m.close()}),V=(L,C,v)=>{L.listen(C,I=>{try{v(I)}catch(N){setTimeout(()=>{throw N},0)}})};return V(m,hs.EventType.OPEN,()=>{A||(q(it,`RPC '${e}' stream ${i} transport opened.`),D.yo())}),V(m,hs.EventType.CLOSE,()=>{A||(A=!0,q(it,`RPC '${e}' stream ${i} transport closed`),D.So())}),V(m,hs.EventType.ERROR,L=>{A||(A=!0,Ei(it,`RPC '${e}' stream ${i} transport errored:`,L),D.So(new H(b.UNAVAILABLE,"The operation could not be completed")))}),V(m,hs.EventType.MESSAGE,L=>{var C;if(!A){const v=L.data[0];fe(!!v);const I=v,N=I.error||((C=I[0])===null||C===void 0?void 0:C.error);if(N){q(it,`RPC '${e}' stream ${i} received error:`,N);const F=N.status;let U=function(E){const S=be[E];if(S!==void 0)return Q_(S)}(F),T=N.message;U===void 0&&(U=b.INTERNAL,T="Unknown error status: "+F+" with message "+N.message),A=!0,D.So(new H(U,T)),m.close()}else q(it,`RPC '${e}' stream ${i} received:`,v),D.bo(v)}}),V(l,T_.STAT_EVENT,L=>{L.stat===Dc.PROXY?q(it,`RPC '${e}' stream ${i} detected buffering proxy`):L.stat===Dc.NOPROXY&&q(it,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.wo()},0),D}}function Ru(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(t){return new DI(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e,n,r,i,s,a,l,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new av(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===b.RESOURCE_EXHAUSTED?(Tn(n.toString()),Tn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===b.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new H(b.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class TS extends lv{constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=OI(this.serializer,e),r=function(s){if(!("targetChange"in s))return Z.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Z.min():a.readTime?ln(a.readTime):Z.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Bc(this.serializer),n.addTarget=function(s,a){let l;const u=a.target;if(l=Lc(u)?{documents:MI(s,u)}:{query:FI(s,u)._t},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=J_(s,a.resumeToken);const h=Fc(s,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(Z.min())>0){l.readTime=Ga(s,a.snapshotVersion.toTimestamp());const h=Fc(s,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=UI(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Bc(this.serializer),n.removeTarget=e,this.a_(n)}}class IS extends lv{constructor(e,n,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return fe(!!e.streamToken),this.lastStreamToken=e.streamToken,fe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){fe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=bI(e.writeResults,e.commitTime),r=ln(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Bc(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>LI(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new H(b.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,jc(n,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new H(b.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Lo(e,jc(n,r),i,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new H(b.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class AS{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Tn(n),this.D_=!1):q("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget(async()=>{br(this)&&(q("RemoteStore","Restarting streams for network reachability change."),await async function(u){const h=ee(u);h.L_.add(4),await ho(h),h.q_.set("Unknown"),h.L_.delete(4),await wl(h)}(this))})}),this.q_=new AS(r,i)}}async function wl(t){if(br(t))for(const e of t.B_)await e(!0)}async function ho(t){for(const e of t.B_)await e(!1)}function uv(t,e){const n=ee(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),ud(n)?ld(n):Li(n).r_()&&ad(n,e))}function od(t,e){const n=ee(t),r=Li(n);n.N_.delete(e),r.r_()&&cv(n,e),n.N_.size===0&&(r.r_()?r.o_():br(n)&&n.q_.set("Unknown"))}function ad(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Li(t).A_(e)}function cv(t,e){t.Q_.xe(e),Li(t).R_(e)}function ld(t){t.Q_=new CI({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Li(t).start(),t.q_.v_()}function ud(t){return br(t)&&!Li(t).n_()&&t.N_.size>0}function br(t){return ee(t).L_.size===0}function hv(t){t.Q_=void 0}async function CS(t){t.q_.set("Online")}async function xS(t){t.N_.forEach((e,n)=>{ad(t,e)})}async function kS(t,e){hv(t),ud(t)?(t.q_.M_(e),ld(t)):t.q_.set("Unknown")}async function PS(t,e,n){if(t.q_.set("Online"),e instanceof Y_&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const l of s.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,a),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(r){q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ka(t,r)}else if(e instanceof ma?t.Q_.Ke(e):e instanceof X_?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Z.min()))try{const r=await ov(t.localStore);n.compareTo(r)>=0&&await function(s,a){const l=s.Q_.rt(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.N_.get(h);f&&s.N_.set(h,f.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const f=s.N_.get(u);if(!f)return;s.N_.set(u,f.withResumeToken(Je.EMPTY_BYTE_STRING,f.snapshotVersion)),cv(s,u);const m=new bn(f.target,u,h,f.sequenceNumber);ad(s,m)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){q("RemoteStore","Failed to raise snapshot:",r),await Ka(t,r)}}async function Ka(t,e,n){if(!lo(e))throw e;t.L_.add(1),await ho(t),t.q_.set("Offline"),n||(n=()=>ov(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await wl(t)})}function dv(t,e){return e().catch(n=>Ka(t,n,e))}async function El(t){const e=ee(t),n=er(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;DS(e);)try{const i=await pS(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,NS(e,i)}catch(i){await Ka(e,i)}fv(e)&&pv(e)}function DS(t){return br(t)&&t.O_.length<10}function NS(t,e){t.O_.push(e);const n=er(t);n.r_()&&n.V_&&n.m_(e.mutations)}function fv(t){return br(t)&&!er(t).n_()&&t.O_.length>0}function pv(t){er(t).start()}async function VS(t){er(t).p_()}async function OS(t){const e=er(t);for(const n of t.O_)e.m_(n.mutations)}async function LS(t,e,n){const r=t.O_.shift(),i=ed.from(r,e,n);await dv(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await El(t)}async function bS(t,e){e&&er(t).V_&&await async function(r,i){if(function(a){return SI(a)&&a!==b.ABORTED}(i.code)){const s=r.O_.shift();er(r).s_(),await dv(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await El(r)}}(t,e),fv(t)&&pv(t)}async function Tm(t,e){const n=ee(t);n.asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials");const r=br(n);n.L_.add(3),await ho(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await wl(n)}async function MS(t,e){const n=ee(t);e?(n.L_.delete(2),await wl(n)):e||(n.L_.add(2),await ho(n),n.q_.set("Unknown"))}function Li(t){return t.K_||(t.K_=function(n,r,i){const s=ee(n);return s.w_(),new TS(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:CS.bind(null,t),Ro:xS.bind(null,t),mo:kS.bind(null,t),d_:PS.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),ud(t)?ld(t):t.q_.set("Unknown")):(await t.K_.stop(),hv(t))})),t.K_}function er(t){return t.U_||(t.U_=function(n,r,i){const s=ee(n);return s.w_(),new IS(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:VS.bind(null,t),mo:bS.bind(null,t),f_:OS.bind(null,t),g_:LS.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await El(t)):(await t.U_.stop(),t.O_.length>0&&(q("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,l=new cd(e,n,a,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(b.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hd(t,e){if(Tn("AsyncQueue",`${e}: ${t}`),lo(t))return new H(b.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this.comparator=e?(n,r)=>e(n,r)||K.comparator(n.key,r.key):(n,r)=>K.comparator(n.key,r.key),this.keyedMap=ds(),this.sortedSet=new xe(this.comparator)}static emptySet(e){return new di(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof di)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new di;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(){this.W_=new xe(K.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Y():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ri{constructor(e,n,r,i,s,a,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Ri(e,n,di.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class jS{constructor(){this.queries=Sm(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ee(n),s=i.queries;i.queries=Sm(),s.forEach((a,l)=>{for(const u of l.j_)u.onError(r)})})(this,new H(b.ABORTED,"Firestore shutting down"))}}function Sm(){return new Oi(t=>M_(t),pl)}async function US(t,e){const n=ee(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new FS,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const l=hd(a,`Initialization of query '${Hr(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&dd(n)}async function BS(t,e){const n=ee(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function zS(t,e){const n=ee(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const l of a.j_)l.X_(i)&&(r=!0);a.z_=i}}r&&dd(n)}function $S(t,e,n){const r=ee(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function dd(t){t.Y_.forEach(e=>{e.next()})}var $c,Am;(Am=$c||($c={})).ea="default",Am.Cache="cache";class WS{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ri(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ri.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==$c.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(e){this.key=e}}class gv{constructor(e){this.key=e}}class HS{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=re(),this.mutatedKeys=re(),this.Aa=F_(e),this.Ra=new di(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Im,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,m)=>{const y=i.get(f),A=ml(this.query,m)?m:null,D=!!y&&this.mutatedKeys.has(y.key),V=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let L=!1;y&&A?y.data.isEqual(A.data)?D!==V&&(r.track({type:3,doc:A}),L=!0):this.ga(y,A)||(r.track({type:2,doc:A}),L=!0,(u&&this.Aa(A,u)>0||h&&this.Aa(A,h)<0)&&(l=!0)):!y&&A?(r.track({type:0,doc:A}),L=!0):y&&!A&&(r.track({type:1,doc:y}),L=!0,(u||h)&&(l=!0)),L&&(A?(a=a.add(A),s=V?s.add(f):s.delete(f)):(a=a.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ra:a,fa:r,ns:l,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((f,m)=>function(A,D){const V=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y()}};return V(A)-V(D)}(f.type,m.type)||this.Aa(f.doc,m.doc)),this.pa(r),i=i!=null&&i;const l=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,h=u!==this.Ea;return this.Ea=u,a.length!==0||h?{snapshot:new Ri(this.query,e.Ra,s,a,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Im,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=re(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new gv(r))}),this.da.forEach(r=>{e.has(r)||n.push(new mv(r))}),n}ba(e){this.Ta=e.Ts,this.da=re();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ri.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class qS{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class GS{constructor(e){this.key=e,this.va=!1}}class KS{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Oi(l=>M_(l),pl),this.Ma=new Map,this.xa=new Set,this.Oa=new xe(K.comparator),this.Na=new Map,this.La=new rd,this.Ba={},this.ka=new Map,this.qa=Ai.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function QS(t,e,n=!0){const r=Tv(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await yv(r,e,n,!0),i}async function XS(t,e){const n=Tv(t);await yv(n,e,!0,!1)}async function yv(t,e,n,r){const i=await mS(t.localStore,an(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await YS(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&uv(t.remoteStore,i),l}async function YS(t,e,n,r,i){t.Ka=(m,y,A)=>async function(V,L,C,v){let I=L.view.ma(C);I.ns&&(I=await vm(V.localStore,L.query,!1).then(({documents:T})=>L.view.ma(T,I)));const N=v&&v.targetChanges.get(L.targetId),F=v&&v.targetMismatches.get(L.targetId)!=null,U=L.view.applyChanges(I,V.isPrimaryClient,N,F);return Cm(V,L.targetId,U.wa),U.snapshot}(t,m,y,A);const s=await vm(t.localStore,e,!0),a=new HS(e,s.Ts),l=a.ma(s.documents),u=co.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=a.applyChanges(l,t.isPrimaryClient,u);Cm(t,n,h.wa);const f=new qS(e,n,a);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function JS(t,e,n){const r=ee(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(a=>!pl(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await zc(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&od(r.remoteStore,i.targetId),Wc(r,i.targetId)}).catch(ao)):(Wc(r,i.targetId),await zc(r.localStore,i.targetId,!0))}async function ZS(t,e){const n=ee(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),od(n.remoteStore,r.targetId))}async function eA(t,e,n){const r=aA(t);try{const i=await function(a,l){const u=ee(a),h=Be.now(),f=l.reduce((A,D)=>A.add(D.key),re());let m,y;return u.persistence.runTransaction("Locally write mutations","readwrite",A=>{let D=In(),V=re();return u.cs.getEntries(A,f).next(L=>{D=L,D.forEach((C,v)=>{v.isValidDocument()||(V=V.add(C))})}).next(()=>u.localDocuments.getOverlayedDocuments(A,D)).next(L=>{m=L;const C=[];for(const v of l){const I=vI(v,m.get(v.key).overlayedDocument);I!=null&&C.push(new ir(v.key,I,k_(I.value.mapValue),Yt.exists(!0)))}return u.mutationQueue.addMutationBatch(A,h,C,l)}).next(L=>{y=L;const C=L.applyToLocalDocumentSet(m,V);return u.documentOverlayCache.saveOverlays(A,L.batchId,C)})}).then(()=>({batchId:y.batchId,changes:U_(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,u){let h=a.Ba[a.currentUser.toKey()];h||(h=new xe(le)),h=h.insert(l,u),a.Ba[a.currentUser.toKey()]=h}(r,i.batchId,n),await fo(r,i.changes),await El(r.remoteStore)}catch(i){const s=hd(i,"Failed to persist write");n.reject(s)}}async function _v(t,e){const n=ee(t);try{const r=await dS(n.localStore,e);e.targetChanges.forEach((i,s)=>{const a=n.Na.get(s);a&&(fe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?fe(a.va):i.removedDocuments.size>0&&(fe(a.va),a.va=!1))}),await fo(n,r,e)}catch(r){await ao(r)}}function Rm(t,e,n){const r=ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,a)=>{const l=a.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(a,l){const u=ee(a);u.onlineState=l;let h=!1;u.queries.forEach((f,m)=>{for(const y of m.j_)y.Z_(l)&&(h=!0)}),h&&dd(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function tA(t,e,n){const r=ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let a=new xe(K.comparator);a=a.insert(s,at.newNoDocument(s,Z.min()));const l=re().add(s),u=new _l(Z.min(),new Map,new xe(le),a,l);await _v(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),fd(r)}else await zc(r.localStore,e,!1).then(()=>Wc(r,e,n)).catch(ao)}async function nA(t,e){const n=ee(t),r=e.batch.batchId;try{const i=await hS(n.localStore,e);wv(n,r,null),vv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await fo(n,i)}catch(i){await ao(i)}}async function rA(t,e,n){const r=ee(t);try{const i=await function(a,l){const u=ee(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return u.mutationQueue.lookupMutationBatch(h,l).next(m=>(fe(m!==null),f=m.keys(),u.mutationQueue.removeMutationBatch(h,m))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>u.localDocuments.getDocuments(h,f))})}(r.localStore,e);wv(r,e,n),vv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await fo(r,i)}catch(i){await ao(i)}}function vv(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function wv(t,e,n){const r=ee(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Wc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||Ev(t,r)})}function Ev(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(od(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),fd(t))}function Cm(t,e,n){for(const r of n)r instanceof mv?(t.La.addReference(r.key,e),iA(t,r)):r instanceof gv?(q("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Ev(t,r.key)):Y()}function iA(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(q("SyncEngine","New document in limbo: "+n),t.xa.add(r),fd(t))}function fd(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new K(we.fromString(e)),r=t.qa.next();t.Na.set(r,new GS(n)),t.Oa=t.Oa.insert(n,r),uv(t.remoteStore,new bn(an(Yh(n.path)),r,"TargetPurposeLimboResolution",Hh.oe))}}async function fo(t,e,n){const r=ee(t),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{a.push(r.Ka(u,e,n).then(h=>{var f;if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(h){i.push(h);const m=sd.Wi(u.targetId,h);s.push(m)}}))}),await Promise.all(a),r.Ca.d_(i),await async function(u,h){const f=ee(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>M.forEach(h,y=>M.forEach(y.$i,A=>f.persistence.referenceDelegate.addReference(m,y.targetId,A)).next(()=>M.forEach(y.Ui,A=>f.persistence.referenceDelegate.removeReference(m,y.targetId,A)))))}catch(m){if(!lo(m))throw m;q("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const y=m.targetId;if(!m.fromCache){const A=f.os.get(y),D=A.snapshotVersion,V=A.withLastLimboFreeSnapshotVersion(D);f.os=f.os.insert(y,V)}}}(r.localStore,s))}async function sA(t,e){const n=ee(t);if(!n.currentUser.isEqual(e)){q("SyncEngine","User change. New user:",e.toKey());const r=await sv(n.localStore,e);n.currentUser=e,function(s,a){s.ka.forEach(l=>{l.forEach(u=>{u.reject(new H(b.CANCELLED,a))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await fo(n,r.hs)}}function oA(t,e){const n=ee(t),r=n.Na.get(e);if(r&&r.va)return re().add(r.key);{let i=re();const s=n.Ma.get(e);if(!s)return i;for(const a of s){const l=n.Fa.get(a);i=i.unionWith(l.view.Va)}return i}}function Tv(t){const e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=_v.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tA.bind(null,e),e.Ca.d_=zS.bind(null,e.eventManager),e.Ca.$a=$S.bind(null,e.eventManager),e}function aA(t){const e=ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rA.bind(null,e),e}class Qa{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=vl(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return cS(this.persistence,new lS,e.initialUser,this.serializer)}Ga(e){return new sS(id.Zr,this.serializer)}Wa(e){return new yS}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qa.provider={build:()=>new Qa};class Hc{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Rm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=sA.bind(null,this.syncEngine),await MS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new jS}()}createDatastore(e){const n=vl(e.databaseInfo.databaseId),r=function(s){return new ES(s)}(e.databaseInfo);return function(s,a,l,u){return new SS(s,a,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,a,l){return new RS(r,i,s,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Rm(this.syncEngine,n,0),function(){return Em.D()?new Em:new _S}())}createSyncEngine(e,n){return function(i,s,a,l,u,h,f){const m=new KS(i,s,a,l,u,h);return f&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ee(i);q("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await ho(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Hc.provider={build:()=>new Hc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Tn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=st.UNAUTHENTICATED,this.clientId=R_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{q("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(q("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=hd(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Cu(t,e){t.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await sv(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function xm(t,e){t.asyncQueue.verifyOperationInProgress();const n=await cA(t);q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Tm(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Tm(e.remoteStore,i)),t._onlineComponents=e}async function cA(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q("FirestoreClient","Using user provided OfflineComponentProvider");try{await Cu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===b.FAILED_PRECONDITION||i.code===b.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ei("Error using user provided cache. Falling back to memory cache: "+n),await Cu(t,new Qa)}}else q("FirestoreClient","Using default OfflineComponentProvider"),await Cu(t,new Qa);return t._offlineComponents}async function Iv(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q("FirestoreClient","Using user provided OnlineComponentProvider"),await xm(t,t._uninitializedComponentsProvider._online)):(q("FirestoreClient","Using default OnlineComponentProvider"),await xm(t,new Hc))),t._onlineComponents}function hA(t){return Iv(t).then(e=>e.syncEngine)}async function km(t){const e=await Iv(t),n=e.eventManager;return n.onListen=QS.bind(null,e.syncEngine),n.onUnlisten=JS.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=XS.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ZS.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sv(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(t,e,n){if(!n)throw new H(b.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function dA(t,e,n,r){if(e===!0&&r===!0)throw new H(b.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Dm(t){if(!K.isDocumentKey(t))throw new H(b.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Nm(t){if(K.isDocumentKey(t))throw new H(b.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Tl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y()}function Kn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(b.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Tl(t);throw new H(b.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new H(b.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new H(b.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Sv((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new H(b.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new H(b.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new H(b.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Il{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vm({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(b.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(b.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vm(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new x1;switch(r.type){case"firstParty":return new N1(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(b.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Pm.get(n);r&&(q("ComponentProvider","Removing Datastore"),Pm.delete(n),r.terminate())}(this),Promise.resolve()}}function fA(t,e,n,r={}){var i;const s=(t=Kn(t,Il))._getSettings(),a=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&Ei("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=st.MOCK_USER;else{l=l_(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new H(b.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new st(h)}t._authCredentials=new k1(new A_(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Mr(this.firestore,e,this._query)}}class It{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new It(this.firestore,e,this._key)}}class Qn extends Mr{constructor(e,n,r){super(e,n,Yh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new It(this.firestore,null,new K(e))}withConverter(e){return new Qn(this.firestore,e,this._path)}}function Om(t,e,...n){if(t=pt(t),Av("collection","path",e),t instanceof Il){const r=we.fromString(e,...n);return Nm(r),new Qn(t,null,r)}{if(!(t instanceof It||t instanceof Qn))throw new H(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(we.fromString(e,...n));return Nm(r),new Qn(t.firestore,null,r)}}function ps(t,e,...n){if(t=pt(t),arguments.length===1&&(e=R_.newId()),Av("doc","path",e),t instanceof Il){const r=we.fromString(e,...n);return Dm(r),new It(t,null,new K(r))}{if(!(t instanceof It||t instanceof Qn))throw new H(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(we.fromString(e,...n));return Dm(r),new It(t.firestore,t instanceof Qn?t.converter:null,new K(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new av(this,"async_queue_retry"),this.Vu=()=>{const r=Ru();r&&q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Ru();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Ru();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Er;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!lo(e))throw e;q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(r);throw Tn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=cd.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Y()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function bm(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Ci extends Il{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Lm,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Lm(e),this._firestoreClient=void 0,await e}}}function pA(t,e){const n=typeof t=="object"?t:g_(),r=typeof t=="string"?t:"(default)",i=f_(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=o_("firestore");s&&fA(i,...s)}return i}function Rv(t){if(t._terminated)throw new H(b.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||mA(t),t._firestoreClient}function mA(t){var e,n,r;const i=t._freezeSettings(),s=function(l,u,h,f){return new H1(l,u,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Sv(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new uA(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xi(Je.fromBase64String(e))}catch(n){throw new H(b.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new xi(Je.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H(b.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ke(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H(b.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H(b.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return le(this._lat,e._lat)||le(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA=/^__.*__$/;class yA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ir(e,this.data,this.fieldMask,n,this.fieldTransforms):new uo(e,this.data,n,this.fieldTransforms)}}class Cv{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ir(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function xv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y()}}class yd{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new yd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Xa(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(xv(this.Cu)&&gA.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class _A{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||vl(e)}Qu(e,n,r,i=!1){return new yd({Cu:e,methodName:n,qu:r,path:Ke.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _d(t){const e=t._freezeSettings(),n=vl(t._databaseId);return new _A(t._databaseId,!!e.ignoreUndefinedProperties,n)}function vA(t,e,n,r,i,s={}){const a=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);vd("Data must be an object, but it was:",a,r);const l=kv(r,a);let u,h;if(s.merge)u=new xt(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const f=[];for(const m of s.mergeFields){const y=qc(e,m,n);if(!a.contains(y))throw new H(b.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);Dv(f,y)||f.push(y)}u=new xt(f),h=a.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,h=a.fieldTransforms;return new yA(new _t(l),u,h)}class Al extends pd{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Al}}function wA(t,e,n,r){const i=t.Qu(1,e,n);vd("Data must be an object, but it was:",i,r);const s=[],a=_t.empty();Lr(r,(u,h)=>{const f=wd(e,u,n);h=pt(h);const m=i.Nu(f);if(h instanceof Al)s.push(f);else{const y=po(h,m);y!=null&&(s.push(f),a.set(f,y))}});const l=new xt(s);return new Cv(a,l,i.fieldTransforms)}function EA(t,e,n,r,i,s){const a=t.Qu(1,e,n),l=[qc(e,r,n)],u=[i];if(s.length%2!=0)throw new H(b.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)l.push(qc(e,s[y])),u.push(s[y+1]);const h=[],f=_t.empty();for(let y=l.length-1;y>=0;--y)if(!Dv(h,l[y])){const A=l[y];let D=u[y];D=pt(D);const V=a.Nu(A);if(D instanceof Al)h.push(A);else{const L=po(D,V);L!=null&&(h.push(A),f.set(A,L))}}const m=new xt(h);return new Cv(f,m,a.fieldTransforms)}function TA(t,e,n,r=!1){return po(n,t.Qu(r?4:3,e))}function po(t,e){if(Pv(t=pt(t)))return vd("Unsupported field value:",e,t),kv(t,e);if(t instanceof pd)return function(r,i){if(!xv(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const l of r){let u=po(l,i.Lu(a));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),a++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=pt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return fI(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Be.fromDate(r);return{timestampValue:Ga(i.serializer,s)}}if(r instanceof Be){const s=new Be(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ga(i.serializer,s)}}if(r instanceof md)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof xi)return{bytesValue:J_(i.serializer,r._byteString)};if(r instanceof It){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:nd(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof gd)return function(a,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return Jh(l.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Tl(r)}`)}(t,e)}function kv(t,e){const n={};return C_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Lr(t,(r,i)=>{const s=po(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Pv(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Be||t instanceof md||t instanceof xi||t instanceof It||t instanceof pd||t instanceof gd)}function vd(t,e,n){if(!Pv(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Tl(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function qc(t,e,n){if((e=pt(e))instanceof Sl)return e._internalPath;if(typeof e=="string")return wd(t,e);throw Xa("Field path arguments must be of type string or ",t,!1,void 0,n)}const IA=new RegExp("[~\\*/\\[\\]]");function wd(t,e,n){if(e.search(IA)>=0)throw Xa(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Sl(...e.split("."))._internalPath}catch{throw Xa(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Xa(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${r}`),a&&(u+=` in document ${i}`),u+=")"),new H(b.INVALID_ARGUMENT,l+t+u)}function Dv(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new It(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new SA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ed("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class SA extends Nv{data(){return super.data()}}function Ed(t,e){return typeof e=="string"?wd(t,e):e instanceof Sl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new H(b.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Td{}class Vv extends Td{}function RA(t,e,...n){let r=[];e instanceof Td&&r.push(e),r=r.concat(n),function(s){const a=s.filter(u=>u instanceof Sd).length,l=s.filter(u=>u instanceof Id).length;if(a>1||a>0&&l>0)throw new H(b.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Id extends Vv{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Id(e,n,r)}_apply(e){const n=this._parse(e);return Ov(e._query,n),new Mr(e.firestore,e.converter,bc(e._query,n))}_parse(e){const n=_d(e.firestore);return function(s,a,l,u,h,f,m){let y;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new H(b.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Fm(m,f);const A=[];for(const D of m)A.push(Mm(u,s,D));y={arrayValue:{values:A}}}else y=Mm(u,s,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Fm(m,f),y=TA(l,a,m,f==="in"||f==="not-in");return Fe.create(h,f,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Sd extends Td{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Sd(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Zt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let a=i;const l=s.getFlattenedFilters();for(const u of l)Ov(a,u),a=bc(a,u)}(e._query,n),new Mr(e.firestore,e.converter,bc(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ad extends Vv{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Ad(e,n)}_apply(e){const n=function(i,s,a){if(i.startAt!==null)throw new H(b.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new H(b.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Zs(s,a)}(e._query,this._field,this._direction);return new Mr(e.firestore,e.converter,function(i,s){const a=i.explicitOrderBy.concat([s]);return new Vi(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function CA(t,e="asc"){const n=e,r=Ed("orderBy",t);return Ad._create(r,n)}function Mm(t,e,n){if(typeof(n=pt(n))=="string"){if(n==="")throw new H(b.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!b_(e)&&n.indexOf("/")!==-1)throw new H(b.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(we.fromString(n));if(!K.isDocumentKey(r))throw new H(b.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return nm(t,new K(r))}if(n instanceof It)return nm(t,n._key);throw new H(b.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Tl(n)}.`)}function Fm(t,e){if(!Array.isArray(t)||t.length===0)throw new H(b.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ov(t,e){const n=function(i,s){for(const a of i)for(const l of a.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new H(b.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(b.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class xA{convertValue(e,n="none"){switch(Pr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(kr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Y()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Lr(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>Oe(a.doubleValue));return new gd(s)}convertGeoPoint(e){return new md(Oe(e.latitude),Oe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Gh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Xs(e));default:return null}}convertTimestamp(e){const n=Zn(e);return new Be(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=we.fromString(e);fe(iv(r));const i=new Ys(r.get(1),r.get(3)),s=new K(r.popFirst(5));return i.isEqual(n)||Tn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Lv extends Nv{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ga(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ed("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ga extends Lv{data(e={}){return super.data(e)}}class PA{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ms(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ga(this._firestore,this._userDataWriter,r.key,r,new ms(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(b.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(l=>{const u=new ga(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ms(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new ga(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ms(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,f=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),f=a.indexOf(l.doc.key)),{type:DA(l.type),doc:u,oldIndex:h,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function DA(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y()}}class bv extends xA{constructor(e){super(),this.firestore=e}convertBytes(e){return new xi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new It(this.firestore,null,n)}}function xu(t,e,n,...r){t=Kn(t,It);const i=Kn(t.firestore,Ci),s=_d(i);let a;return a=typeof(e=pt(e))=="string"||e instanceof Sl?EA(s,"updateDoc",t._key,e,n,r):wA(s,"updateDoc",t._key,e),Rd(i,[a.toMutation(t._key,Yt.exists(!0))])}function NA(t){return Rd(Kn(t.firestore,Ci),[new Zh(t._key,Yt.none())])}function VA(t,e){const n=Kn(t.firestore,Ci),r=ps(t),i=kA(t.converter,e);return Rd(n,[vA(_d(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Yt.exists(!1))]).then(()=>r)}function OA(t,...e){var n,r,i;t=pt(t);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||bm(e[a])||(s=e[a],a++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(bm(e[a])){const m=e[a];e[a]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[a+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[a+2]=(i=m.complete)===null||i===void 0?void 0:i.bind(m)}let u,h,f;if(t instanceof It)h=Kn(t.firestore,Ci),f=Yh(t._key.path),u={next:m=>{e[a]&&e[a](LA(h,t,m))},error:e[a+1],complete:e[a+2]};else{const m=Kn(t,Mr);h=Kn(m.firestore,Ci),f=m._query;const y=new bv(h);u={next:A=>{e[a]&&e[a](new PA(h,y,m,A))},error:e[a+1],complete:e[a+2]},AA(t._query)}return function(y,A,D,V){const L=new lA(V),C=new WS(A,L,D);return y.asyncQueue.enqueueAndForget(async()=>US(await km(y),C)),()=>{L.Za(),y.asyncQueue.enqueueAndForget(async()=>BS(await km(y),C))}}(Rv(h),f,l,u)}function Rd(t,e){return function(r,i){const s=new Er;return r.asyncQueue.enqueueAndForget(async()=>eA(await hA(r),i,s)),s.promise}(Rv(t),e)}function LA(t,e,n){const r=n.docs.get(e._key),i=new bv(t);return new Lv(t,i,e._key,r,new ms(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Ni=i})(p_),Gs(new wi("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),l=new Ci(new P1(r.getProvider("auth-internal")),new O1(r.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new H(b.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ys(h.options.projectId,f)}(a,i),a);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Gn(Yp,"4.7.3",e),Gn(Yp,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv="firebasestorage.googleapis.com",Fv="storageBucket",bA=2*60*1e3,MA=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne extends Or{constructor(e,n,r=0){super(ku(e),`Firebase Storage: ${n} (${ku(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ne.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ku(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var De;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(De||(De={}));function ku(t){return"storage/"+t}function Cd(){const t="An unknown error occurred, please check the error payload for server response.";return new Ne(De.UNKNOWN,t)}function FA(t){return new Ne(De.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function jA(t){return new Ne(De.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function UA(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ne(De.UNAUTHENTICATED,t)}function BA(){return new Ne(De.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function zA(t){return new Ne(De.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function $A(){return new Ne(De.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function WA(){return new Ne(De.CANCELED,"User canceled the upload/download.")}function HA(t){return new Ne(De.INVALID_URL,"Invalid URL '"+t+"'.")}function qA(t){return new Ne(De.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function GA(){return new Ne(De.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Fv+"' property when initializing the app?")}function KA(){return new Ne(De.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function QA(){return new Ne(De.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function XA(t){return new Ne(De.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Gc(t){return new Ne(De.INVALID_ARGUMENT,t)}function jv(){return new Ne(De.APP_DELETED,"The Firebase app was deleted.")}function YA(t){return new Ne(De.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ks(t,e){return new Ne(De.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function os(t){throw new Ne(De.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=kt.makeFromUrl(e,n)}catch{return new kt(e,"")}if(r.path==="")return r;throw qA(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(N){N.path.charAt(N.path.length-1)==="/"&&(N.path_=N.path_.slice(0,-1))}const a="(/(.*))?$",l=new RegExp("^gs://"+i+a,"i"),u={bucket:1,path:3};function h(N){N.path_=decodeURIComponent(N.path)}const f="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",A=new RegExp(`^https?://${m}/${f}/b/${i}/o${y}`,"i"),D={bucket:1,path:3},V=n===Mv?"(?:storage.googleapis.com|storage.cloud.google.com)":n,L="([^?#]*)",C=new RegExp(`^https?://${V}/${i}/${L}`,"i"),I=[{regex:l,indices:u,postModify:s},{regex:A,indices:D,postModify:h},{regex:C,indices:{bucket:1,path:2},postModify:h}];for(let N=0;N<I.length;N++){const F=I[N],U=F.regex.exec(e);if(U){const T=U[F.indices.bucket];let g=U[F.indices.path];g||(g=""),r=new kt(T,g),F.postModify(r);break}}if(r==null)throw HA(e);return r}}class JA{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(t,e,n){let r=1,i=null,s=null,a=!1,l=0;function u(){return l===2}let h=!1;function f(...L){h||(h=!0,e.apply(null,L))}function m(L){i=setTimeout(()=>{i=null,t(A,u())},L)}function y(){s&&clearTimeout(s)}function A(L,...C){if(h){y();return}if(L){y(),f.call(null,L,...C);return}if(u()||a){y(),f.call(null,L,...C);return}r<64&&(r*=2);let I;l===1?(l=2,I=0):I=(r+Math.random())*1e3,m(I)}let D=!1;function V(L){D||(D=!0,y(),!h&&(i!==null?(L||(l=2),clearTimeout(i),m(0)):L||(l=1)))}return m(0),s=setTimeout(()=>{a=!0,V(!0)},n),V}function eR(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(t){return t!==void 0}function nR(t){return typeof t=="object"&&!Array.isArray(t)}function xd(t){return typeof t=="string"||t instanceof String}function jm(t){return kd()&&t instanceof Blob}function kd(){return typeof Blob<"u"}function Um(t,e,n,r){if(r<e)throw Gc(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Gc(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rl(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Uv(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Tr;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Tr||(Tr={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,n,r,i,s,a,l,u,h,f,m,y=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=l,this.errorCallback_=u,this.timeout_=h,this.progressCallback_=f,this.connectionFactory_=m,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((A,D)=>{this.resolve_=A,this.reject_=D,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Jo(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=l=>{const u=l.loaded,h=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,h)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const l=s.getErrorCode()===Tr.NO_ERROR,u=s.getStatus();if(!l||rR(u,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===Tr.ABORT;r(!1,new Jo(!1,null,f));return}const h=this.successCodes_.indexOf(u)!==-1;r(!0,new Jo(h,s))})},n=(r,i)=>{const s=this.resolve_,a=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());tR(u)?s(u):s()}catch(u){a(u)}else if(l!==null){const u=Cd();u.serverResponse=l.getErrorText(),this.errorCallback_?a(this.errorCallback_(l,u)):a(u)}else if(i.canceled){const u=this.appDelete_?jv():WA();a(u)}else{const u=$A();a(u)}};this.canceled_?n(!1,new Jo(!1,null,!0)):this.backoffId_=ZA(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&eR(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Jo{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function sR(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function oR(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function aR(t,e){e&&(t["X-Firebase-GMPID"]=e)}function lR(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function uR(t,e,n,r,i,s,a=!0){const l=Uv(t.urlParams),u=t.url+l,h=Object.assign({},t.headers);return aR(h,e),sR(h,n),oR(h,s),lR(h,r),new iR(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function hR(...t){const e=cR();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(kd())return new Blob(t);throw new Ne(De.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function dR(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(t){if(typeof atob>"u")throw XA("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Pu{constructor(e,n){this.data=e,this.contentType=n||null}}function pR(t,e){switch(t){case rn.RAW:return new Pu(Bv(e));case rn.BASE64:case rn.BASE64URL:return new Pu(zv(t,e));case rn.DATA_URL:return new Pu(gR(e),yR(e))}throw Cd()}function Bv(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,a=t.charCodeAt(++n);r=65536|(s&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function mR(t){let e;try{e=decodeURIComponent(t)}catch{throw ks(rn.DATA_URL,"Malformed data URL.")}return Bv(e)}function zv(t,e){switch(t){case rn.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw ks(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case rn.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw ks(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=fR(e)}catch(i){throw i.message.includes("polyfill")?i:ks(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class $v{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ks(rn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=_R(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function gR(t){const e=new $v(t);return e.base64?zv(rn.BASE64,e.rest):mR(e.rest)}function yR(t){return new $v(t).contentType}function _R(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e,n){let r=0,i="";jm(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(jm(this.data_)){const r=this.data_,i=dR(r,e,n);return i===null?null:new Vn(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Vn(r,!0)}}static getBlob(...e){if(kd()){const n=e.map(r=>r instanceof Vn?r.data_:r);return new Vn(hR.apply(null,n))}else{const n=e.map(a=>xd(a)?pR(rn.RAW,a).data:a.data_);let r=0;n.forEach(a=>{r+=a.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(a=>{for(let l=0;l<a.length;l++)i[s++]=a[l]}),new Vn(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wv(t){let e;try{e=JSON.parse(t)}catch{return null}return nR(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function wR(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function Hv(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(t,e){return e}class ht{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||ER}}let Zo=null;function TR(t){return!xd(t)||t.length<2?t:Hv(t)}function qv(){if(Zo)return Zo;const t=[];t.push(new ht("bucket")),t.push(new ht("generation")),t.push(new ht("metageneration")),t.push(new ht("name","fullPath",!0));function e(s,a){return TR(a)}const n=new ht("name");n.xform=e,t.push(n);function r(s,a){return a!==void 0?Number(a):a}const i=new ht("size");return i.xform=r,t.push(i),t.push(new ht("timeCreated")),t.push(new ht("updated")),t.push(new ht("md5Hash",null,!0)),t.push(new ht("cacheControl",null,!0)),t.push(new ht("contentDisposition",null,!0)),t.push(new ht("contentEncoding",null,!0)),t.push(new ht("contentLanguage",null,!0)),t.push(new ht("contentType",null,!0)),t.push(new ht("metadata","customMetadata",!0)),Zo=t,Zo}function IR(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new kt(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function SR(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const a=n[s];r[a.local]=a.xform(r,e[a.server])}return IR(r,t),r}function Gv(t,e,n){const r=Wv(e);return r===null?null:SR(t,r,n)}function AR(t,e,n,r){const i=Wv(e);if(i===null||!xd(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const a=encodeURIComponent;return s.split(",").map(h=>{const f=t.bucket,m=t.fullPath,y="/b/"+a(f)+"/o/"+a(m),A=Rl(y,n,r),D=Uv({alt:"media",token:h});return A+D})[0]}function RR(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class Pd{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(t){if(!t)throw Cd()}function CR(t,e){function n(r,i){const s=Gv(t,i,e);return Kv(s!==null),s}return n}function xR(t,e){function n(r,i){const s=Gv(t,i,e);return Kv(s!==null),AR(s,i,t.host,t._protocol)}return n}function Qv(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=BA():i=UA():n.getStatus()===402?i=jA(t.bucket):n.getStatus()===403?i=zA(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Xv(t){const e=Qv(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=FA(t.path)),s.serverResponse=i.serverResponse,s}return n}function kR(t,e,n){const r=e.fullServerUrl(),i=Rl(r,t.host,t._protocol),s="GET",a=t.maxOperationRetryTime,l=new Pd(i,s,xR(t,n),a);return l.errorHandler=Xv(e),l}function PR(t,e){const n=e.fullServerUrl(),r=Rl(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function a(u,h){}const l=new Pd(r,i,a,s);return l.successCodes=[200,204],l.errorHandler=Xv(e),l}function DR(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function NR(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=DR(null,e)),r}function VR(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function l(){let I="";for(let N=0;N<2;N++)I=I+Math.random().toString().slice(2);return I}const u=l();a["Content-Type"]="multipart/related; boundary="+u;const h=NR(e,r,i),f=RR(h,n),m="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+u+`\r
Content-Type: `+h.contentType+`\r
\r
`,y=`\r
--`+u+"--",A=Vn.getBlob(m,r,y);if(A===null)throw KA();const D={name:h.fullPath},V=Rl(s,t.host,t._protocol),L="POST",C=t.maxUploadRetryTime,v=new Pd(V,L,CR(t,n),C);return v.urlParams=D,v.headers=a,v.body=A.uploadData(),v.errorHandler=Qv(e),v}class OR{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Tr.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Tr.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Tr.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw os("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw os("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw os("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw os("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw os("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class LR extends OR{initXhr(){this.xhr_.responseType="text"}}function Dd(){return new LR}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e,n){this._service=e,n instanceof kt?this._location=n:this._location=kt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Dr(e,n)}get root(){const e=new kt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Hv(this._location.path)}get storage(){return this._service}get parent(){const e=vR(this._location.path);if(e===null)return null;const n=new kt(this._location.bucket,e);return new Dr(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw YA(e)}}function bR(t,e,n){t._throwIfRoot("uploadBytes");const r=VR(t.storage,t._location,qv(),new Vn(e,!0),n);return t.storage.makeRequestWithTokens(r,Dd).then(i=>({metadata:i,ref:t}))}function MR(t){t._throwIfRoot("getDownloadURL");const e=kR(t.storage,t._location,qv());return t.storage.makeRequestWithTokens(e,Dd).then(n=>{if(n===null)throw QA();return n})}function FR(t){t._throwIfRoot("deleteObject");const e=PR(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Dd)}function jR(t,e){const n=wR(t._location.path,e),r=new kt(t._location.bucket,n);return new Dr(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(t){return/^[A-Za-z]+:\/\//.test(t)}function BR(t,e){return new Dr(t,e)}function Yv(t,e){if(t instanceof Nd){const n=t;if(n._bucket==null)throw GA();const r=new Dr(n,n._bucket);return e!=null?Yv(r,e):r}else return e!==void 0?jR(t,e):t}function zR(t,e){if(e&&UR(e)){if(t instanceof Nd)return BR(t,e);throw Gc("To use ref(service, url), the first argument must be a Storage instance.")}else return Yv(t,e)}function Bm(t,e){const n=e==null?void 0:e[Fv];return n==null?null:kt.makeFromBucketSpec(n,t)}function $R(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:l_(i,t.app.options.projectId))}class Nd{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Mv,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=bA,this._maxUploadRetryTime=MA,this._requests=new Set,i!=null?this._bucket=kt.makeFromBucketSpec(i,this._host):this._bucket=Bm(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=kt.makeFromBucketSpec(this._url,e):this._bucket=Bm(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Um("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Um("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Dr(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new JA(jv());{const a=uR(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const zm="@firebase/storage",$m="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv="storage";function WR(t,e,n){return t=pt(t),bR(t,e,n)}function HR(t){return t=pt(t),MR(t)}function qR(t){return t=pt(t),FR(t)}function Wm(t,e){return t=pt(t),zR(t,e)}function GR(t=g_(),e){t=pt(t);const r=f_(t,Jv).getImmediate({identifier:e}),i=o_("storage");return i&&KR(r,...i),r}function KR(t,e,n,r={}){$R(t,e,n,r)}function QR(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Nd(n,r,i,e,p_)}function XR(){Gs(new wi(Jv,QR,"PUBLIC").setMultipleInstances(!0)),Gn(zm,$m,""),Gn(zm,$m,"esm2017")}XR();const YR={apiKey:"AIzaSyA0ZCgyjVAqKBDbR9-iiUb8bVyH7UijiDo",authDomain:"bever-family-recipes.firebaseapp.com",projectId:"bever-family-recipes",storageBucket:"bever-family-recipes.firebasestorage.app",messagingSenderId:"609429863508",appId:"1:609429863508:web:aee0811bd4c8757d2501c1"},Zv=m_(YR),Wr=pA(Zv),Hm=GR(Zv),JR=[{id:"all",name:"All Recipes",icon:""},{id:"breakfast",name:"Breakfast",icon:""},{id:"main-course",name:"Main Course",icon:""},{id:"side-dish",name:"Sides",icon:""},{id:"dessert",name:"Desserts",icon:""},{id:"pasta",name:"Pasta",icon:""},{id:"soup",name:"Soups",icon:""},{id:"salad",name:"Salads",icon:""},{id:"appetizer",name:"Appetizers",icon:""},{id:"bread",name:"Breads",icon:""},{id:"beverage",name:"Beverages",icon:""},{id:"other",name:"Other",icon:""}],ZR={id:"",title:"",category:"",author:"",servings:"",prepTime:"",cookTime:"",ingredients:[{amount:"",ingredient:""}],instructions:[""],notes:"",imageUrl:"",dateAdded:"",comments:[]},Du=async(t,e)=>{const n=await fetch("/.netlify/functions/recipe-ai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:t,...e})});if(!n.ok){const r=await n.json();throw new Error(r.error||"AI request failed")}return n.json()};function eC(){const[t,e]=ue.useState([]),[n]=ue.useState(JR),[r,i]=ue.useState("home"),[s,a]=ue.useState(null),[l,u]=ue.useState("all"),[h,f]=ue.useState("all"),[m,y]=ue.useState(""),[A,D]=ue.useState(!1),[V,L]=ue.useState(null),[C,v]=ue.useState(!0),I=["all",...new Set(t.map(_=>_.author).filter(Boolean))];ue.useEffect(()=>{const _=RA(Om(Wr,"recipes"),CA("dateAdded","desc")),Q=OA(_,te=>{const Ve=te.docs.map(Ie=>({id:Ie.id,...Ie.data()}));e(Ve),v(!1)},te=>{console.error("Firestore error:",te),v(!1)});return()=>Q()},[]);const N=(_,Q=null)=>{_!=="home"&&(y(""),f("all")),a(Q),i(_)},F=(_,Q="success")=>{L({message:_,type:Q}),setTimeout(()=>L(null),3e3)},U=async _=>{try{const{id:Q,...te}=_;if(Q)await xu(ps(Wr,"recipes",Q),te),F("Recipe updated");else{const Ve={...te,dateAdded:new Date().toISOString()};await VA(Om(Wr,"recipes"),Ve),F("Recipe saved")}N("home")}catch(Q){console.error("Save error:",Q),F("Error saving recipe: "+Q.message,"error")}},T=async(_,Q)=>{try{const te=t.find($=>$.id===_);if(!te)return;const Ve={id:Date.now().toString(),text:Q.text,author:Q.author,date:new Date().toISOString()},Ie=[...te.comments||[],Ve];await xu(ps(Wr,"recipes",_),{comments:Ie}),F("Comment added")}catch(te){console.error("Comment error:",te),F("Error adding comment","error")}},g=async(_,Q)=>{try{const te=t.find(Ie=>Ie.id===_);if(!te)return;const Ve=(te.comments||[]).filter(Ie=>Ie.id!==Q);await xu(ps(Wr,"recipes",_),{comments:Ve}),F("Comment removed")}catch(te){console.error("Delete comment error:",te),F("Error removing comment","error")}},E=async(_,Q)=>{try{if(Q&&Q.includes("firebasestorage"))try{const te=Wm(Hm,Q);await qR(te)}catch{console.log("Image deletion skipped")}await NA(ps(Wr,"recipes",_)),F("Recipe removed"),N("home")}catch(te){console.error("Delete error:",te),F("Error deleting recipe","error")}},S=async _=>{if(!_)return null;try{const Q=`recipes/${Date.now()}_${_.name}`,te=Wm(Hm,Q);return await WR(te,_),await HR(te)}catch(Q){throw console.error("Upload error:",Q),Q}},x=()=>{const _=JSON.stringify(t,null,2),Q=new Blob([_],{type:"application/json"}),te=URL.createObjectURL(Q),Ve=document.createElement("a");Ve.href=te,Ve.download="bever-family-recipes.json",Ve.click(),URL.revokeObjectURL(te),F("Recipes exported!")},k=t.filter(_=>{var Ie,$,X;const Q=!m||((Ie=_.title)==null?void 0:Ie.toLowerCase().includes(m.toLowerCase()))||(($=_.ingredients)==null?void 0:$.some(J=>{var pe;return(pe=J.ingredient)==null?void 0:pe.toLowerCase().includes(m.toLowerCase())}))||((X=_.author)==null?void 0:X.toLowerCase().includes(m.toLowerCase())),te=l==="all"||_.category===l,Ve=h==="all"||_.author===h;return Q&&te&&Ve});return C?w.jsx("div",{style:R.loadingScreen,children:w.jsxs("div",{style:R.loadingContent,children:[w.jsx("div",{style:R.loadingLogo,children:"BF"}),w.jsx("p",{style:R.loadingText,children:"Loading recipes..."})]})}):w.jsxs("div",{style:R.app,children:[V&&w.jsx("div",{style:{...R.notification,backgroundColor:V.type==="success"?"#5c6d5e":"#9b6b5b"},children:V.message}),w.jsx("header",{style:R.header,children:w.jsxs("div",{style:R.headerInner,children:[w.jsxs("div",{style:R.logo,onClick:()=>{N("home"),u("all")},children:[w.jsx("span",{style:R.logoMark,children:"BF"}),w.jsxs("div",{style:R.logoText,children:[w.jsx("span",{style:R.logoTitle,children:"Bever Family"}),w.jsx("span",{style:R.logoSubtitle,children:"R E C I P E S"})]})]}),w.jsxs("nav",{style:R.nav,children:[w.jsx("button",{style:r==="home"?R.navLinkActive:R.navLink,onClick:()=>N("home"),children:"Recipes"}),w.jsx("button",{style:r==="add"?R.navLinkActive:R.navLink,onClick:()=>N("add"),children:"Add New"}),w.jsx("button",{style:R.navLink,onClick:x,title:"Export all recipes as JSON",children:"Export"})]})]})}),w.jsxs("main",{style:R.main,children:[r==="home"&&w.jsx(tC,{recipes:t,filteredRecipes:k,categories:n,selectedCategory:l,setSelectedCategory:u,authors:I,selectedAuthor:h,setSelectedAuthor:f,searchQuery:m,setSearchQuery:y,setSelectedRecipe:_=>N("view",_),setView:N}),(r==="add"||r==="edit")&&w.jsx(rC,{recipe:s,categories:n.filter(_=>_.id!=="all"),onSave:U,onCancel:()=>N(s?"view":"home",s),isProcessing:A,setIsProcessing:D,showNotification:F,uploadImage:S}),r==="view"&&s&&w.jsx(iC,{recipe:t.find(_=>_.id===s.id)||s,categories:n,onEdit:()=>N("edit",s),onDelete:()=>{confirm("Remove this recipe from the collection?")&&E(s.id,s.imageUrl)},onBack:()=>N("home"),onAddComment:_=>T(s.id,_),onDeleteComment:_=>g(s.id,_)})]}),w.jsx("footer",{style:R.footer,children:w.jsxs("div",{style:R.footerContent,children:[w.jsx("span",{style:R.footerLogo,children:"BF"}),w.jsx("p",{style:R.footerText,children:"Bever Family Recipes"}),w.jsx("p",{style:R.footerTagline,children:"Gathering around the table, one recipe at a time"})]})})]})}function tC({recipes:t,filteredRecipes:e,categories:n,selectedCategory:r,setSelectedCategory:i,authors:s,selectedAuthor:a,setSelectedAuthor:l,searchQuery:u,setSearchQuery:h,setSelectedRecipe:f,setView:m}){var y;return w.jsxs("div",{children:[w.jsx("section",{style:R.hero,children:w.jsxs("div",{style:R.heroContent,children:[w.jsx("p",{style:R.heroWelcome,children:"Welcome to the"}),w.jsx("h1",{style:R.heroTitle,children:"Bever Family Recipes"}),w.jsxs("div",{style:R.heroDivider,children:[w.jsx("span",{style:R.heroDividerLine}),w.jsx("span",{style:R.heroDividerIcon,children:""}),w.jsx("span",{style:R.heroDividerLine})]}),w.jsxs("p",{style:R.heroSubtitle,children:["A collection of treasured recipes passed down through generations.",w.jsx("br",{}),"From our kitchen to yours."]}),w.jsxs("div",{style:R.searchContainer,children:[w.jsx("input",{type:"text",placeholder:"Search recipes...",value:u,onChange:A=>h(A.target.value),style:R.searchInput}),u&&w.jsx("button",{style:R.clearSearch,onClick:()=>h(""),children:""})]}),s.length>2&&w.jsxs("div",{style:R.authorFilter,children:[w.jsx("label",{style:R.authorLabel,children:"Recipe from:"}),w.jsxs("select",{value:a,onChange:A=>l(A.target.value),style:R.authorSelect,children:[w.jsx("option",{value:"all",children:"Everyone"}),s.filter(A=>A!=="all").map(A=>w.jsx("option",{value:A,children:A},A))]})]})]})}),w.jsx("section",{style:R.categorySection,children:w.jsx("div",{style:R.categoryPills,children:n.map(A=>w.jsx("button",{style:r===A.id?R.categoryPillActive:R.categoryPill,onClick:()=>i(A.id),children:A.name},A.id))})}),w.jsxs("section",{style:R.recipeSection,children:[w.jsxs("div",{style:R.sectionHeader,children:[w.jsxs("h2",{style:R.sectionTitle,children:[r==="all"?"All Recipes":(y=n.find(A=>A.id===r))==null?void 0:y.name,a!=="all"&&` from ${a}`]}),w.jsxs("span",{style:R.recipeCount,children:[e.length," ",e.length===1?"recipe":"recipes"]})]}),e.length>0?w.jsx("div",{style:R.recipeGrid,children:e.map(A=>w.jsx(nC,{recipe:A,categories:n,onClick:()=>f(A)},A.id))}):w.jsxs("div",{style:R.emptyState,children:[w.jsx("div",{style:R.emptyIcon,children:""}),w.jsx("h3",{style:R.emptyTitle,children:"No recipes found"}),w.jsx("p",{style:R.emptyText,children:u||a!=="all"?"Try adjusting your search or filters.":"Start your family's collection by adding the first recipe."}),!u&&a==="all"&&w.jsx("button",{style:R.emptyButton,onClick:()=>m("add"),children:"Add a Recipe"})]})]})]})}function nC({recipe:t,categories:e,onClick:n}){var l;const r=e.find(u=>u.id===t.category),[i,s]=ue.useState(!1),a=((l=t.comments)==null?void 0:l.length)||0;return w.jsxs("button",{style:R.recipeCard,onClick:n,children:[w.jsx("div",{style:R.cardImageContainer,children:t.imageUrl&&!i?w.jsx("img",{src:t.imageUrl,alt:t.title,style:R.cardImage,onError:()=>s(!0)}):w.jsx("div",{style:R.cardImagePlaceholder,children:w.jsx("span",{style:R.placeholderIcon,children:""})})}),w.jsxs("div",{style:R.cardContent,children:[r&&w.jsx("span",{style:R.cardCategory,children:r.name}),w.jsx("h3",{style:R.cardTitle,children:t.title}),t.author&&w.jsxs("p",{style:R.cardAuthor,children:["from ",t.author]}),w.jsxs("div",{style:R.cardMeta,children:[t.prepTime&&w.jsx("span",{children:t.prepTime}),t.prepTime&&t.servings&&w.jsx("span",{style:R.cardMetaDot,children:""}),t.servings&&w.jsxs("span",{children:["Serves ",t.servings]}),a>0&&w.jsxs(w.Fragment,{children:[w.jsx("span",{style:R.cardMetaDot,children:""}),w.jsxs("span",{children:[a," ",a===1?"note":"notes"]})]})]})]})]})}function rC({recipe:t,categories:e,onSave:n,onCancel:r,isProcessing:i,setIsProcessing:s,showNotification:a,uploadImage:l}){const[u,h]=ue.useState("manual"),[f,m]=ue.useState(t||ZR),[y,A]=ue.useState(null),[D,V]=ue.useState(null),[L,C]=ue.useState((t==null?void 0:t.imageUrl)||null),[v,I]=ue.useState(null),[N,F]=ue.useState(!1),[U,T]=ue.useState(""),[g,E]=ue.useState(""),[S,x]=ue.useState(!1),k=ue.useRef(null),_=ue.useRef(null),Q=(B,G)=>{m(he=>({...he,[B]:G}))},te=(B,G,he)=>{m(ge=>({...ge,ingredients:ge.ingredients.map((St,sr)=>sr===B?{...St,[G]:he}:St)}))},Ve=()=>{m(B=>({...B,ingredients:[...B.ingredients,{amount:"",ingredient:""}]}))},Ie=B=>{f.ingredients.length>1&&m(G=>({...G,ingredients:G.ingredients.filter((he,ge)=>ge!==B)}))},$=(B,G)=>{m(he=>({...he,instructions:he.instructions.map((ge,St)=>St===B?G:ge)}))},X=()=>{m(B=>({...B,instructions:[...B.instructions,""]}))},J=B=>{f.instructions.length>1&&m(G=>({...G,instructions:G.instructions.filter((he,ge)=>ge!==B)}))},pe=B=>{const G=B.target.files[0];if(G){if(!G.type.startsWith("image/")){a("Please select an image file","error");return}C(URL.createObjectURL(G)),I(G)}},ce=()=>{C(null),I(null),Q("imageUrl","")},Se=B=>{B.preventDefault(),x(!0)},Bt=B=>{B.preventDefault(),x(!1)},zt=B=>{B.preventDefault(),x(!1);const G=B.dataTransfer.files[0];G&&Ot(G)},Ot=async B=>{const G=B.type==="application/pdf",he=B.type.startsWith("image/");if(!G&&!he){a("Please select an image or PDF file","error");return}s(!0),he?(A(URL.createObjectURL(B)),V(null)):(A(null),V(B.name));try{const ge=await new Promise((bi,Mi)=>{const or=new FileReader;or.onload=()=>bi(or.result.split(",")[1]),or.onerror=Mi,or.readAsDataURL(B)}),sr=(await Du(G?"scan-pdf":"scan-image",{imageData:ge,imageType:B.type})).content[0].text.match(/\{[\s\S]*\}/);if(sr){const bi=JSON.parse(sr[0]);m(Mi=>({...Mi,...bi})),a("Recipe extracted! Review the details below."),h("manual")}}catch(ge){console.error("Error:",ge),a("Could not read recipe. Try entering it manually.","error")}finally{s(!1)}},$t=async B=>{const G=B.target.files[0];G&&Ot(G)},Cl=async()=>{const B=g.trim();if(!B){a("Please paste the recipe content from the website","error");return}s(!0);try{const he=(await Du("extract-website",{content:B})).content[0].text.match(/\{[\s\S]*\}/);if(he){const ge=JSON.parse(he[0]);m(St=>({...St,...ge})),a("Recipe imported! Review the details below."),h("manual")}}catch(G){console.error("Error:",G),a("Could not extract recipe. Try copying just the recipe text.","error")}finally{s(!1)}},xl=async()=>{const B=U.trim();if(!B){a("Please enter a recipe URL","error");return}if(!B.startsWith("http://")&&!B.startsWith("https://")){a("Please enter a valid URL starting with http:// or https://","error");return}s(!0);try{const G=await Du("fetch-url",{url:B});if(G.error){a(G.error,"error");return}const he=G.content[0].text.match(/\{[\s\S]*\}/);if(he){const ge=JSON.parse(he[0]);m(St=>({...St,...ge})),a("Recipe imported! Review the details below."),h("manual")}}catch(G){console.error("Error:",G),a("Could not fetch recipe. Some sites block this - try pasting the content instead.","error")}finally{s(!1)}},Fr=async B=>{if(B.preventDefault(),!f.title.trim()){a("Please enter a recipe title","error");return}F(!0);try{let G=f.imageUrl||"";v&&(a("Uploading photo..."),G=await l(v));const he={...f,imageUrl:G,ingredients:Array.isArray(f.ingredients)?f.ingredients.filter(ge=>ge.amount||ge.ingredient):[],instructions:Array.isArray(f.instructions)?f.instructions.filter(ge=>ge&&ge.trim()):[],comments:f.comments||[]};await n(he)}catch(G){console.error("Submit error:",G),a("Error saving recipe: "+G.message,"error"),F(!1)}};return w.jsxs("div",{style:R.addPage,children:[w.jsxs("div",{style:R.addPageHeader,children:[w.jsx("h1",{style:R.addPageTitle,children:t?"Edit Recipe":"Add New Recipe"}),w.jsx("p",{style:R.addPageSubtitle,children:"Share a treasured family recipe"})]}),!t&&w.jsxs("div",{style:R.tabs,children:[w.jsx("button",{style:u==="manual"?R.tabActive:R.tab,onClick:()=>h("manual"),children:"Write it out"}),w.jsx("button",{style:u==="scan"?R.tabActive:R.tab,onClick:()=>h("scan"),children:"Scan file"}),w.jsx("button",{style:u==="website"?R.tabActive:R.tab,onClick:()=>h("website"),children:"From website"})]}),u==="scan"&&!t&&w.jsxs("div",{style:R.scanSection,children:[w.jsxs("div",{style:{...R.uploadZone,borderColor:S?"#8a9a8e":"#d9d6d0",backgroundColor:S?"#f0f5f1":"#faf9f7"},onClick:()=>{var B;return(B=k.current)==null?void 0:B.click()},onDragOver:Se,onDragLeave:Bt,onDrop:zt,children:[y?w.jsx("img",{src:y,alt:"Uploaded",style:R.uploadedImage}):D?w.jsxs("div",{style:R.pdfPreview,children:[w.jsx("div",{style:R.pdfIcon,children:"PDF"}),w.jsx("p",{style:R.pdfFileName,children:D})]}):w.jsxs(w.Fragment,{children:[w.jsx("div",{style:R.scanIcon,children:""}),w.jsx("h3",{style:R.scanTitle,children:"Scan a Recipe"}),w.jsxs("p",{style:R.scanText,children:["Drag & drop a photo or PDF here, or click to browse.",w.jsx("br",{}),"We'll convert it to text for you."]}),w.jsx("button",{type:"button",style:R.uploadButton,children:"Choose File"}),w.jsx("p",{style:R.fileTypes,children:"Supports: JPG, PNG, PDF"})]}),i&&w.jsxs("div",{style:R.processingOverlay,children:[w.jsx("div",{style:R.spinner}),w.jsx("p",{children:"Reading recipe..."})]})]}),w.jsx("input",{ref:k,type:"file",accept:"image/*,.pdf,application/pdf",onChange:$t,style:{display:"none"}})]}),u==="website"&&!t&&w.jsx("div",{style:R.websiteSection,children:w.jsxs("div",{style:R.websiteBox,children:[w.jsx("div",{style:R.scanIcon,children:""}),w.jsx("h3",{style:R.scanTitle,children:"Import from Website"}),w.jsxs("p",{style:R.scanText,children:["Found a recipe online? Enter the URL and we'll grab it for you,",w.jsx("br",{}),"or paste the recipe content directly."]}),w.jsxs("div",{style:R.websiteInputGroup,children:[w.jsx("label",{style:R.label,children:"Option 1: Fetch from URL"}),w.jsxs("div",{style:R.urlFetchRow,children:[w.jsx("input",{type:"text",value:U,onChange:B=>T(B.target.value),placeholder:"https://www.allrecipes.com/recipe/...",style:R.urlInput}),w.jsx("button",{type:"button",onClick:xl,style:R.fetchButton,disabled:i,children:i?"Fetching...":"Fetch"})]}),w.jsx("p",{style:R.websiteHint,children:"Works with most recipe sites. Some sites may block this."})]}),w.jsxs("div",{style:R.orDivider,children:[w.jsx("span",{style:R.orLine}),w.jsx("span",{style:R.orText,children:"or"}),w.jsx("span",{style:R.orLine})]}),w.jsxs("div",{style:R.websiteInputGroup,children:[w.jsx("label",{style:R.label,children:"Option 2: Paste Recipe Content"}),w.jsx("p",{style:R.websiteHint,children:"Copy the recipe from the website and paste it here"}),w.jsx("textarea",{value:g,onChange:B=>E(B.target.value),placeholder:"Paste the recipe content here...",style:R.websiteTextarea,rows:10}),w.jsx("button",{type:"button",onClick:Cl,style:R.uploadButton,disabled:i||!g.trim(),children:i?"Extracting...":"Extract Recipe"})]}),i&&w.jsxs("div",{style:R.processingOverlay,children:[w.jsx("div",{style:R.spinner}),w.jsx("p",{children:"Reading recipe..."})]})]})}),(u==="manual"||t)&&w.jsxs("form",{onSubmit:Fr,style:R.form,children:[w.jsxs("div",{style:R.formSection,children:[w.jsx("h3",{style:R.formSectionTitle,children:"Basic Information"}),w.jsxs("div",{style:R.formRow,children:[w.jsxs("div",{style:R.formGroup,children:[w.jsx("label",{style:R.label,children:"Recipe Title"}),w.jsx("input",{type:"text",value:f.title,onChange:B=>Q("title",B.target.value),placeholder:"Grandma's Apple Pie",style:R.input})]}),w.jsxs("div",{style:R.formGroup,children:[w.jsx("label",{style:R.label,children:"Category"}),w.jsxs("select",{value:f.category,onChange:B=>Q("category",B.target.value),style:R.select,children:[w.jsx("option",{value:"",children:"Select one..."}),e.map(B=>w.jsx("option",{value:B.id,children:B.name},B.id))]})]})]}),w.jsxs("div",{style:R.formRow3,children:[w.jsxs("div",{style:R.formGroup,children:[w.jsx("label",{style:R.label,children:"Prep Time"}),w.jsx("input",{type:"text",value:f.prepTime,onChange:B=>Q("prepTime",B.target.value),placeholder:"20 min",style:R.input})]}),w.jsxs("div",{style:R.formGroup,children:[w.jsx("label",{style:R.label,children:"Cook Time"}),w.jsx("input",{type:"text",value:f.cookTime,onChange:B=>Q("cookTime",B.target.value),placeholder:"1 hour",style:R.input})]}),w.jsxs("div",{style:R.formGroup,children:[w.jsx("label",{style:R.label,children:"Servings"}),w.jsx("input",{type:"text",value:f.servings,onChange:B=>Q("servings",B.target.value),placeholder:"6-8",style:R.input})]})]}),w.jsxs("div",{style:R.formGroup,children:[w.jsx("label",{style:R.label,children:"Recipe from"}),w.jsx("input",{type:"text",value:f.author,onChange:B=>Q("author",B.target.value),placeholder:"Grandma Bever, Mom's kitchen, etc.",style:R.input})]})]}),w.jsxs("div",{style:R.formSection,children:[w.jsx("h3",{style:R.formSectionTitle,children:"Photo"}),w.jsxs("div",{style:R.photoUploadArea,children:[L?w.jsxs("div",{style:R.photoPreviewContainer,children:[w.jsx("img",{src:L,alt:"Recipe",style:R.photoPreview}),w.jsxs("div",{style:R.photoActions,children:[w.jsx("button",{type:"button",onClick:()=>{var B;return(B=_.current)==null?void 0:B.click()},style:R.photoChangeBtn,children:"Change"}),w.jsx("button",{type:"button",onClick:ce,style:R.photoRemoveBtn,children:"Remove"})]})]}):w.jsxs("div",{style:R.photoDropzone,onClick:()=>{var B;return(B=_.current)==null?void 0:B.click()},children:[w.jsx("span",{style:R.photoIcon,children:"+"}),w.jsx("p",{style:R.photoText,children:"Add a photo of the finished dish"})]}),w.jsx("input",{ref:_,type:"file",accept:"image/*",onChange:pe,style:{display:"none"}})]})]}),w.jsxs("div",{style:R.formSection,children:[w.jsx("h3",{style:R.formSectionTitle,children:"Ingredients"}),f.ingredients.map((B,G)=>w.jsxs("div",{style:R.ingredientRow,children:[w.jsx("input",{type:"text",value:B.amount,onChange:he=>te(G,"amount",he.target.value),placeholder:"1 cup",style:R.amountInput}),w.jsx("input",{type:"text",value:B.ingredient,onChange:he=>te(G,"ingredient",he.target.value),placeholder:"all-purpose flour",style:R.ingredientInput}),w.jsx("button",{type:"button",onClick:()=>Ie(G),style:R.removeBtn,children:""})]},G)),w.jsx("button",{type:"button",onClick:Ve,style:R.addItemBtn,children:"+ Add ingredient"})]}),w.jsxs("div",{style:R.formSection,children:[w.jsx("h3",{style:R.formSectionTitle,children:"Instructions"}),f.instructions.map((B,G)=>w.jsxs("div",{style:R.instructionRow,children:[w.jsx("span",{style:R.stepNum,children:G+1}),w.jsx("textarea",{value:B,onChange:he=>$(G,he.target.value),placeholder:"Describe this step...",style:R.instructionInput,rows:2}),w.jsx("button",{type:"button",onClick:()=>J(G),style:R.removeBtn,children:""})]},G)),w.jsx("button",{type:"button",onClick:X,style:R.addItemBtn,children:"+ Add step"})]}),w.jsxs("div",{style:R.formSection,children:[w.jsx("h3",{style:R.formSectionTitle,children:"Notes & Memories"}),w.jsx("textarea",{value:f.notes,onChange:B=>Q("notes",B.target.value),placeholder:"Any tips, variations, or special memories about this recipe...",style:R.notesInput,rows:4})]}),w.jsxs("div",{style:R.formActions,children:[w.jsx("button",{type:"button",onClick:r,style:R.cancelBtn,children:"Cancel"}),w.jsx("button",{type:"submit",style:R.saveBtn,disabled:N,children:N?"Saving...":"Save Recipe"})]})]})]})}function iC({recipe:t,categories:e,onEdit:n,onDelete:r,onBack:i,onAddComment:s,onDeleteComment:a}){var L,C,v;const l=e.find(I=>I.id===t.category),[u,h]=ue.useState(!1),[f,m]=ue.useState({author:"",text:""}),[y,A]=ue.useState(!1),D=()=>{f.text.trim()&&(f.author.trim()||(f.author="Anonymous"),s(f),m({author:"",text:""}),A(!1))},V=I=>I?new Date(I).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"";return w.jsxs("div",{style:R.detailPage,children:[w.jsxs("div",{style:R.detailNav,children:[w.jsx("button",{onClick:i,style:R.backBtn,children:" Back to recipes"}),w.jsxs("div",{style:R.detailActions,children:[w.jsx("button",{onClick:()=>window.print(),style:R.actionBtn,children:"Print"}),w.jsx("button",{onClick:n,style:R.actionBtn,children:"Edit"}),w.jsx("button",{onClick:r,style:R.deleteBtn,children:"Delete"})]})]}),w.jsxs("article",{style:R.recipeDetail,children:[t.imageUrl&&!u&&w.jsx("div",{style:R.detailImageWrap,children:w.jsx("img",{src:t.imageUrl,alt:t.title,style:R.detailImage,onError:()=>h(!0)})}),w.jsxs("div",{style:R.detailContent,children:[w.jsxs("header",{style:R.detailHeader,children:[l&&w.jsx("span",{style:R.detailCategory,children:l.name}),w.jsx("h1",{style:R.detailTitle,children:t.title}),t.author&&w.jsxs("p",{style:R.detailAuthor,children:["A recipe from ",t.author]}),w.jsxs("div",{style:R.detailMeta,children:[t.prepTime&&w.jsxs("span",{children:["Prep: ",t.prepTime]}),t.cookTime&&w.jsxs("span",{children:["Cook: ",t.cookTime]}),t.servings&&w.jsxs("span",{children:["Serves ",t.servings]})]})]}),w.jsxs("div",{style:R.detailDivider,children:[w.jsx("span",{style:R.dividerLine}),w.jsx("span",{style:R.dividerIcon,children:""}),w.jsx("span",{style:R.dividerLine})]}),w.jsxs("div",{style:R.detailBody,children:[w.jsxs("section",{style:R.ingredientsCol,children:[w.jsx("h2",{style:R.colTitle,children:"Ingredients"}),w.jsx("ul",{style:R.ingredientsList,children:(L=t.ingredients)==null?void 0:L.map((I,N)=>w.jsxs("li",{style:R.ingredientItem,children:[w.jsx("strong",{children:I.amount})," ",I.ingredient]},N))})]}),w.jsxs("section",{style:R.instructionsCol,children:[w.jsx("h2",{style:R.colTitle,children:"Instructions"}),w.jsx("ol",{style:R.instructionsList,children:(C=t.instructions)==null?void 0:C.map((I,N)=>w.jsx("li",{style:R.instructionItem,children:I},N))})]})]}),t.notes&&w.jsxs("section",{style:R.notesBox,children:[w.jsx("h3",{style:R.notesTitle,children:"Notes"}),w.jsx("p",{style:R.notesContent,children:t.notes})]}),w.jsxs("section",{style:R.commentsSection,children:[w.jsxs("div",{style:R.commentsSectionHeader,children:[w.jsxs("h3",{style:R.commentsTitle,children:["Family Notes & Reviews (",((v=t.comments)==null?void 0:v.length)||0,")"]}),!y&&w.jsx("button",{onClick:()=>A(!0),style:R.addCommentBtn,children:"+ Add Note"})]}),y&&w.jsxs("div",{style:R.commentForm,children:[w.jsx("input",{type:"text",value:f.author,onChange:I=>m(N=>({...N,author:I.target.value})),placeholder:"Your name",style:R.commentAuthorInput}),w.jsx("textarea",{value:f.text,onChange:I=>m(N=>({...N,text:I.target.value})),placeholder:"Share your experience with this recipe, any changes you made, or tips for others...",style:R.commentTextInput,rows:3}),w.jsxs("div",{style:R.commentFormActions,children:[w.jsx("button",{type:"button",onClick:()=>A(!1),style:R.cancelBtn,children:"Cancel"}),w.jsx("button",{type:"button",onClick:D,style:R.saveBtn,disabled:!f.text.trim(),children:"Add Note"})]})]}),t.comments&&t.comments.length>0?w.jsx("div",{style:R.commentsList,children:t.comments.map(I=>w.jsxs("div",{style:R.commentItem,children:[w.jsxs("div",{style:R.commentHeader,children:[w.jsx("span",{style:R.commentAuthor,children:I.author}),w.jsx("span",{style:R.commentDate,children:V(I.date)})]}),w.jsx("p",{style:R.commentText,children:I.text}),w.jsx("button",{onClick:()=>{confirm("Remove this note?")&&a(I.id)},style:R.deleteCommentBtn,children:"Remove"})]},I.id))}):!y&&w.jsx("p",{style:R.noComments,children:"No notes yet. Be the first to share your experience with this recipe!"})]})]})]})]})}const R={app:{minHeight:"100vh",backgroundColor:"#fdfcfa",fontFamily:"'Montserrat', -apple-system, BlinkMacSystemFont, sans-serif",color:"#3d3d3d"},loadingScreen:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f5f3ef"},loadingContent:{textAlign:"center"},loadingLogo:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:48,color:"#8a9a8e",letterSpacing:4,marginBottom:16},loadingText:{color:"#7a7a7a",fontSize:14,letterSpacing:2},notification:{position:"fixed",top:20,right:20,padding:"14px 28px",borderRadius:2,color:"white",fontSize:13,fontWeight:500,letterSpacing:.5,zIndex:1e3,boxShadow:"0 4px 20px rgba(0,0,0,0.15)"},header:{backgroundColor:"#fdfcfa",borderBottom:"1px solid #e8e6e2",padding:"20px 40px"},headerInner:{maxWidth:1200,margin:"0 auto",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:16},logo:{display:"flex",alignItems:"center",gap:16,cursor:"pointer"},logoMark:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:28,color:"#8a9a8e",letterSpacing:3},logoText:{display:"flex",flexDirection:"column"},logoTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:20,fontWeight:600,color:"#3d3d3d",lineHeight:1.1},logoSubtitle:{fontSize:10,letterSpacing:3,color:"#8a9a8e"},nav:{display:"flex",gap:24},navLink:{background:"none",border:"none",fontSize:13,fontWeight:500,color:"#7a7a7a",cursor:"pointer",letterSpacing:1,textTransform:"uppercase",padding:"8px 0",borderBottom:"2px solid transparent"},navLinkActive:{background:"none",border:"none",fontSize:13,fontWeight:500,color:"#3d3d3d",cursor:"pointer",letterSpacing:1,textTransform:"uppercase",padding:"8px 0",borderBottom:"2px solid #8a9a8e"},hero:{backgroundColor:"#f5f3ef",padding:"60px 40px",textAlign:"center"},heroContent:{maxWidth:700,margin:"0 auto"},heroWelcome:{fontSize:13,letterSpacing:3,textTransform:"uppercase",color:"#8a9a8e",marginBottom:12},heroTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:48,fontWeight:400,color:"#3d3d3d",marginBottom:24,lineHeight:1.1},heroDivider:{display:"flex",alignItems:"center",justifyContent:"center",gap:16,marginBottom:24},heroDividerLine:{width:60,height:1,backgroundColor:"#c9c4bc"},heroDividerIcon:{color:"#8a9a8e",fontSize:12},heroSubtitle:{fontSize:15,color:"#7a7a7a",lineHeight:1.8,marginBottom:32},searchContainer:{maxWidth:400,margin:"0 auto",position:"relative"},searchInput:{width:"100%",padding:"16px 48px 16px 24px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,backgroundColor:"white",outline:"none",textAlign:"center",letterSpacing:.5},clearSearch:{position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",background:"none",border:"none",fontSize:20,color:"#9a9a9a",cursor:"pointer",padding:4},authorFilter:{marginTop:20,display:"flex",alignItems:"center",justifyContent:"center",gap:12},authorLabel:{fontSize:13,color:"#7a7a7a"},authorSelect:{padding:"10px 16px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,backgroundColor:"white",outline:"none",cursor:"pointer",minWidth:150},categorySection:{padding:"24px 40px",borderBottom:"1px solid #e8e6e2",backgroundColor:"#fdfcfa",overflowX:"auto"},categoryPills:{display:"flex",justifyContent:"center",flexWrap:"wrap",gap:10,maxWidth:1e3,margin:"0 auto"},categoryPill:{padding:"8px 16px",background:"transparent",border:"1px solid #d9d6d0",borderRadius:2,fontSize:11,fontWeight:500,color:"#7a7a7a",cursor:"pointer",letterSpacing:1,textTransform:"uppercase",whiteSpace:"nowrap"},categoryPillActive:{padding:"8px 16px",background:"#5c6d5e",border:"1px solid #5c6d5e",borderRadius:2,fontSize:11,fontWeight:500,color:"white",cursor:"pointer",letterSpacing:1,textTransform:"uppercase",whiteSpace:"nowrap"},recipeSection:{padding:"48px 40px",maxWidth:1200,margin:"0 auto"},sectionHeader:{display:"flex",justifyContent:"space-between",alignItems:"baseline",marginBottom:32,paddingBottom:16,borderBottom:"1px solid #e8e6e2",flexWrap:"wrap",gap:8},sectionTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:28,fontWeight:400,color:"#3d3d3d"},recipeCount:{fontSize:13,color:"#9a9a9a",letterSpacing:.5},recipeGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:32},recipeCard:{background:"white",border:"1px solid #e8e6e2",borderRadius:2,overflow:"hidden",cursor:"pointer",textAlign:"left",transition:"box-shadow 0.2s"},cardImageContainer:{height:200,overflow:"hidden",backgroundColor:"#f5f3ef"},cardImage:{width:"100%",height:"100%",objectFit:"cover"},cardImagePlaceholder:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f5f3ef"},placeholderIcon:{fontSize:32,color:"#c9c4bc"},cardContent:{padding:20},cardCategory:{fontSize:10,letterSpacing:2,textTransform:"uppercase",color:"#8a9a8e",marginBottom:6,display:"block"},cardTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:20,fontWeight:400,color:"#3d3d3d",marginBottom:6,lineHeight:1.3},cardAuthor:{fontSize:12,color:"#9a9a9a",fontStyle:"italic",marginBottom:10},cardMeta:{fontSize:11,color:"#9a9a9a",display:"flex",alignItems:"center",flexWrap:"wrap"},cardMetaDot:{margin:"0 6px"},emptyState:{textAlign:"center",padding:"60px 20px"},emptyIcon:{fontSize:32,color:"#c9c4bc",marginBottom:24},emptyTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:28,color:"#3d3d3d",marginBottom:12},emptyText:{color:"#7a7a7a",marginBottom:32,fontSize:15},emptyButton:{padding:"14px 32px",background:"#5c6d5e",color:"white",border:"none",borderRadius:2,fontSize:12,fontWeight:500,letterSpacing:1,textTransform:"uppercase",cursor:"pointer"},footer:{backgroundColor:"#f5f3ef",padding:"48px 40px",textAlign:"center",borderTop:"1px solid #e8e6e2"},footerContent:{maxWidth:400,margin:"0 auto"},footerLogo:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:32,color:"#8a9a8e",letterSpacing:4,marginBottom:16,display:"block"},footerText:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:20,color:"#3d3d3d",marginBottom:8},footerTagline:{fontSize:13,color:"#9a9a9a",fontStyle:"italic"},addPage:{maxWidth:700,margin:"0 auto",padding:"48px 24px"},addPageHeader:{textAlign:"center",marginBottom:40},addPageTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:36,color:"#3d3d3d",marginBottom:8},addPageSubtitle:{color:"#9a9a9a",fontSize:14},tabs:{display:"flex",marginBottom:32,border:"1px solid #d9d6d0",borderRadius:2,overflow:"hidden"},tab:{flex:1,padding:"14px 16px",background:"white",border:"none",fontSize:12,fontWeight:500,color:"#7a7a7a",cursor:"pointer",letterSpacing:.5},tabActive:{flex:1,padding:"14px 16px",background:"#5c6d5e",border:"none",fontSize:12,fontWeight:500,color:"white",cursor:"pointer",letterSpacing:.5},scanSection:{marginBottom:32},uploadZone:{border:"2px dashed #d9d6d0",borderRadius:2,padding:"60px 40px",textAlign:"center",cursor:"pointer",backgroundColor:"#faf9f7",position:"relative",transition:"all 0.2s"},scanIcon:{fontSize:32,color:"#8a9a8e",marginBottom:16},scanTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:24,color:"#3d3d3d",marginBottom:12},scanText:{color:"#7a7a7a",fontSize:14,marginBottom:24,lineHeight:1.7},uploadButton:{padding:"14px 28px",background:"#5c6d5e",color:"white",border:"none",borderRadius:2,fontSize:12,fontWeight:500,letterSpacing:1,textTransform:"uppercase",cursor:"pointer"},uploadedImage:{maxWidth:"100%",maxHeight:300,borderRadius:2},pdfPreview:{display:"flex",flexDirection:"column",alignItems:"center",gap:12},pdfIcon:{width:80,height:100,background:"#e8e6e2",borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",fontSize:18,fontWeight:600,color:"#7a7a7a",letterSpacing:1},pdfFileName:{fontSize:14,color:"#5a5a5a",fontWeight:500},fileTypes:{fontSize:12,color:"#9a9a9a",marginTop:16},processingOverlay:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(253,252,250,0.95)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",borderRadius:2},spinner:{width:40,height:40,border:"3px solid #e8e6e2",borderTopColor:"#8a9a8e",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:16},websiteSection:{marginBottom:32},websiteBox:{border:"1px solid #d9d6d0",borderRadius:2,padding:40,backgroundColor:"#faf9f7",position:"relative",textAlign:"center"},websiteInputGroup:{marginTop:24,textAlign:"left"},websiteHint:{fontSize:12,color:"#9a9a9a",marginBottom:8,fontStyle:"italic"},websiteTextarea:{width:"100%",padding:"14px 16px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",fontFamily:"inherit",resize:"vertical",backgroundColor:"white",marginBottom:16},urlFetchRow:{display:"flex",gap:12,marginBottom:8},urlInput:{flex:1,padding:"14px 16px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",fontFamily:"inherit"},fetchButton:{padding:"14px 24px",background:"#5c6d5e",color:"white",border:"none",borderRadius:2,fontSize:12,fontWeight:500,letterSpacing:1,textTransform:"uppercase",cursor:"pointer",whiteSpace:"nowrap"},orDivider:{display:"flex",alignItems:"center",justifyContent:"center",gap:16,margin:"32px 0"},orLine:{flex:1,height:1,backgroundColor:"#d9d6d0"},orText:{fontSize:12,color:"#9a9a9a",textTransform:"uppercase",letterSpacing:2},form:{background:"white",border:"1px solid #e8e6e2",padding:40},formSection:{marginBottom:40},formSectionTitle:{fontSize:11,fontWeight:600,letterSpacing:2,textTransform:"uppercase",color:"#8a9a8e",marginBottom:20,paddingBottom:12,borderBottom:"1px solid #e8e6e2"},formRow:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:20,marginBottom:20},formRow3:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:20,marginBottom:20},formGroup:{marginBottom:20},label:{display:"block",fontSize:12,fontWeight:500,color:"#5a5a5a",marginBottom:8,letterSpacing:.5},input:{width:"100%",padding:"14px 16px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",fontFamily:"inherit"},select:{width:"100%",padding:"14px 16px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",background:"white",cursor:"pointer",fontFamily:"inherit"},photoUploadArea:{},photoPreviewContainer:{position:"relative",maxWidth:400},photoPreview:{width:"100%",height:250,objectFit:"cover",borderRadius:2},photoActions:{position:"absolute",bottom:12,left:12,display:"flex",gap:8},photoChangeBtn:{padding:"8px 16px",background:"white",border:"none",borderRadius:2,fontSize:12,fontWeight:500,cursor:"pointer"},photoRemoveBtn:{padding:"8px 16px",background:"white",border:"none",borderRadius:2,fontSize:12,fontWeight:500,cursor:"pointer",color:"#9b6b5b"},photoDropzone:{border:"2px dashed #d9d6d0",borderRadius:2,padding:"40px 20px",textAlign:"center",cursor:"pointer",maxWidth:400},photoIcon:{fontSize:32,color:"#c9c4bc",display:"block",marginBottom:12},photoText:{fontSize:13,color:"#9a9a9a"},ingredientRow:{display:"flex",gap:12,marginBottom:12},amountInput:{width:100,padding:"12px 14px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",fontFamily:"inherit"},ingredientInput:{flex:1,padding:"12px 14px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",fontFamily:"inherit"},removeBtn:{width:40,height:40,background:"transparent",border:"1px solid #d9d6d0",borderRadius:2,cursor:"pointer",fontSize:18,color:"#9a9a9a",display:"flex",alignItems:"center",justifyContent:"center"},addItemBtn:{padding:"12px 20px",background:"transparent",border:"1px solid #d9d6d0",borderRadius:2,fontSize:13,color:"#7a7a7a",cursor:"pointer",fontFamily:"inherit"},instructionRow:{display:"flex",gap:12,marginBottom:12,alignItems:"flex-start"},stepNum:{width:32,height:32,background:"#f5f3ef",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:13,fontWeight:500,color:"#7a7a7a",flexShrink:0,marginTop:4},instructionInput:{flex:1,padding:"12px 14px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",fontFamily:"inherit",resize:"vertical"},notesInput:{width:"100%",padding:"14px 16px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",fontFamily:"inherit",resize:"vertical"},formActions:{display:"flex",justifyContent:"flex-end",gap:12,paddingTop:24,borderTop:"1px solid #e8e6e2",marginTop:20},cancelBtn:{padding:"14px 28px",background:"transparent",border:"1px solid #d9d6d0",borderRadius:2,fontSize:12,fontWeight:500,letterSpacing:1,textTransform:"uppercase",cursor:"pointer",color:"#7a7a7a"},saveBtn:{padding:"14px 32px",background:"#5c6d5e",border:"none",borderRadius:2,fontSize:12,fontWeight:500,letterSpacing:1,textTransform:"uppercase",cursor:"pointer",color:"white"},detailPage:{maxWidth:900,margin:"0 auto",padding:"40px 24px"},detailNav:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:32,flexWrap:"wrap",gap:12},backBtn:{padding:"10px 20px",background:"transparent",border:"1px solid #d9d6d0",borderRadius:2,fontSize:13,color:"#7a7a7a",cursor:"pointer"},detailActions:{display:"flex",gap:8},actionBtn:{padding:"10px 16px",background:"white",border:"1px solid #d9d6d0",borderRadius:2,fontSize:12,color:"#7a7a7a",cursor:"pointer",letterSpacing:.5},deleteBtn:{padding:"10px 16px",background:"white",border:"1px solid #c9a89a",borderRadius:2,fontSize:12,color:"#9b6b5b",cursor:"pointer",letterSpacing:.5},recipeDetail:{background:"white",border:"1px solid #e8e6e2",overflow:"hidden"},detailImageWrap:{height:400,overflow:"hidden"},detailImage:{width:"100%",height:"100%",objectFit:"cover"},detailContent:{padding:48},detailHeader:{textAlign:"center",marginBottom:32},detailCategory:{fontSize:11,letterSpacing:2,textTransform:"uppercase",color:"#8a9a8e",marginBottom:12,display:"block"},detailTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:42,fontWeight:400,color:"#3d3d3d",marginBottom:12,lineHeight:1.2},detailAuthor:{fontSize:15,color:"#9a9a9a",fontStyle:"italic",marginBottom:24},detailMeta:{display:"flex",justifyContent:"center",gap:32,fontSize:13,color:"#7a7a7a",flexWrap:"wrap"},detailDivider:{display:"flex",alignItems:"center",justifyContent:"center",gap:16,margin:"32px 0"},dividerLine:{width:60,height:1,backgroundColor:"#e8e6e2"},dividerIcon:{color:"#c9c4bc",fontSize:12},detailBody:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:48},ingredientsCol:{},instructionsCol:{},colTitle:{fontSize:11,fontWeight:600,letterSpacing:2,textTransform:"uppercase",color:"#8a9a8e",marginBottom:20,paddingBottom:12,borderBottom:"1px solid #e8e6e2"},ingredientsList:{listStyle:"none"},ingredientItem:{padding:"10px 0",borderBottom:"1px dotted #e8e6e2",fontSize:14,color:"#5a5a5a"},instructionsList:{paddingLeft:20},instructionItem:{padding:"12px 0",fontSize:14,color:"#5a5a5a",lineHeight:1.8},notesBox:{marginTop:40,padding:28,background:"#f9f8f6",borderLeft:"3px solid #8a9a8e"},notesTitle:{fontSize:11,fontWeight:600,letterSpacing:2,textTransform:"uppercase",color:"#8a9a8e",marginBottom:12},notesContent:{fontSize:14,color:"#5a5a5a",lineHeight:1.8,fontStyle:"italic"},commentsSection:{marginTop:48,paddingTop:32,borderTop:"1px solid #e8e6e2"},commentsSectionHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24,flexWrap:"wrap",gap:12},commentsTitle:{fontSize:11,fontWeight:600,letterSpacing:2,textTransform:"uppercase",color:"#8a9a8e"},addCommentBtn:{padding:"10px 20px",background:"transparent",border:"1px solid #8a9a8e",borderRadius:2,fontSize:12,fontWeight:500,color:"#5c6d5e",cursor:"pointer",letterSpacing:.5},commentForm:{background:"#f9f8f6",padding:24,marginBottom:24,borderRadius:2},commentAuthorInput:{width:"100%",maxWidth:300,padding:"12px 16px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",fontFamily:"inherit",marginBottom:12},commentTextInput:{width:"100%",padding:"12px 16px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",fontFamily:"inherit",resize:"vertical",marginBottom:16},commentFormActions:{display:"flex",justifyContent:"flex-end",gap:12},commentsList:{},commentItem:{padding:"20px 0",borderBottom:"1px solid #e8e6e2",position:"relative"},commentHeader:{display:"flex",alignItems:"baseline",gap:12,marginBottom:8},commentAuthor:{fontWeight:600,fontSize:14,color:"#3d3d3d"},commentDate:{fontSize:12,color:"#9a9a9a"},commentText:{fontSize:14,color:"#5a5a5a",lineHeight:1.7},deleteCommentBtn:{position:"absolute",top:20,right:0,background:"none",border:"none",fontSize:12,color:"#c9a89a",cursor:"pointer"},noComments:{fontSize:14,color:"#9a9a9a",fontStyle:"italic",textAlign:"center",padding:"24px 0"}};if(typeof window<"u"){const t=document.createElement("style");t.textContent=`
    @keyframes spin { to { transform: rotate(360deg); } }
    @media (max-width: 768px) {
      .formRow, .formRow3 { grid-template-columns: 1fr !important; }
      .detailBody { grid-template-columns: 1fr !important; }
    }
  `,document.head.appendChild(t)}Nu.createRoot(document.getElementById("root")).render(w.jsx($0.StrictMode,{children:w.jsx(eC,{})}));
