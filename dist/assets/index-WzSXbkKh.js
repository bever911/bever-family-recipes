(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function V0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var tg={exports:{}},pl={},ng={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _o=Symbol.for("react.element"),L0=Symbol.for("react.portal"),O0=Symbol.for("react.fragment"),j0=Symbol.for("react.strict_mode"),M0=Symbol.for("react.profiler"),F0=Symbol.for("react.provider"),B0=Symbol.for("react.context"),U0=Symbol.for("react.forward_ref"),z0=Symbol.for("react.suspense"),$0=Symbol.for("react.memo"),W0=Symbol.for("react.lazy"),Ff=Symbol.iterator;function q0(t){return t===null||typeof t!="object"?null:(t=Ff&&t[Ff]||t["@@iterator"],typeof t=="function"?t:null)}var rg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ig=Object.assign,sg={};function Hi(t,e,n){this.props=t,this.context=e,this.refs=sg,this.updater=n||rg}Hi.prototype.isReactComponent={};Hi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Hi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function og(){}og.prototype=Hi.prototype;function ld(t,e,n){this.props=t,this.context=e,this.refs=sg,this.updater=n||rg}var ud=ld.prototype=new og;ud.constructor=ld;ig(ud,Hi.prototype);ud.isPureReactComponent=!0;var Bf=Array.isArray,ag=Object.prototype.hasOwnProperty,cd={current:null},lg={key:!0,ref:!0,__self:!0,__source:!0};function ug(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)ag.call(e,r)&&!lg.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:_o,type:t,key:s,ref:o,props:i,_owner:cd.current}}function H0(t,e){return{$$typeof:_o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function dd(t){return typeof t=="object"&&t!==null&&t.$$typeof===_o}function G0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Uf=/\/+/g;function su(t,e){return typeof t=="object"&&t!==null&&t.key!=null?G0(""+t.key):e.toString(36)}function ya(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case _o:case L0:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+su(o,0):r,Bf(i)?(n="",t!=null&&(n=t.replace(Uf,"$&/")+"/"),ya(i,e,n,"",function(d){return d})):i!=null&&(dd(i)&&(i=H0(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Uf,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Bf(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+su(s,l);o+=ya(s,e,n,u,i)}else if(u=q0(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+su(s,l++),o+=ya(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Go(t,e,n){if(t==null)return t;var r=[],i=0;return ya(t,r,"","",function(s){return e.call(n,s,i++)}),r}function K0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _t={current:null},va={transition:null},Q0={ReactCurrentDispatcher:_t,ReactCurrentBatchConfig:va,ReactCurrentOwner:cd};function cg(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:Go,forEach:function(t,e,n){Go(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Go(t,function(){e++}),e},toArray:function(t){return Go(t,function(e){return e})||[]},only:function(t){if(!dd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ue.Component=Hi;ue.Fragment=O0;ue.Profiler=M0;ue.PureComponent=ld;ue.StrictMode=j0;ue.Suspense=z0;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q0;ue.act=cg;ue.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ig({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=cd.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)ag.call(e,u)&&!lg.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:_o,type:t.type,key:i,ref:s,props:r,_owner:o}};ue.createContext=function(t){return t={$$typeof:B0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:F0,_context:t},t.Consumer=t};ue.createElement=ug;ue.createFactory=function(t){var e=ug.bind(null,t);return e.type=t,e};ue.createRef=function(){return{current:null}};ue.forwardRef=function(t){return{$$typeof:U0,render:t}};ue.isValidElement=dd;ue.lazy=function(t){return{$$typeof:W0,_payload:{_status:-1,_result:t},_init:K0}};ue.memo=function(t,e){return{$$typeof:$0,type:t,compare:e===void 0?null:e}};ue.startTransition=function(t){var e=va.transition;va.transition={};try{t()}finally{va.transition=e}};ue.unstable_act=cg;ue.useCallback=function(t,e){return _t.current.useCallback(t,e)};ue.useContext=function(t){return _t.current.useContext(t)};ue.useDebugValue=function(){};ue.useDeferredValue=function(t){return _t.current.useDeferredValue(t)};ue.useEffect=function(t,e){return _t.current.useEffect(t,e)};ue.useId=function(){return _t.current.useId()};ue.useImperativeHandle=function(t,e,n){return _t.current.useImperativeHandle(t,e,n)};ue.useInsertionEffect=function(t,e){return _t.current.useInsertionEffect(t,e)};ue.useLayoutEffect=function(t,e){return _t.current.useLayoutEffect(t,e)};ue.useMemo=function(t,e){return _t.current.useMemo(t,e)};ue.useReducer=function(t,e,n){return _t.current.useReducer(t,e,n)};ue.useRef=function(t){return _t.current.useRef(t)};ue.useState=function(t){return _t.current.useState(t)};ue.useSyncExternalStore=function(t,e,n){return _t.current.useSyncExternalStore(t,e,n)};ue.useTransition=function(){return _t.current.useTransition()};ue.version="18.3.1";ng.exports=ue;var te=ng.exports;const Y0=V0(te);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X0=te,J0=Symbol.for("react.element"),Z0=Symbol.for("react.fragment"),ew=Object.prototype.hasOwnProperty,tw=X0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nw={key:!0,ref:!0,__self:!0,__source:!0};function dg(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)ew.call(e,r)&&!nw.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:J0,type:t,key:s,ref:o,props:i,_owner:tw.current}}pl.Fragment=Z0;pl.jsx=dg;pl.jsxs=dg;tg.exports=pl;var p=tg.exports,qu={},hg={exports:{}},Bt={},fg={exports:{}},pg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,K){var q=G.length;G.push(K);e:for(;0<q;){var se=q-1>>>1,le=G[se];if(0<i(le,K))G[se]=K,G[q]=le,q=se;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var K=G[0],q=G.pop();if(q!==K){G[0]=q;e:for(var se=0,le=G.length,oe=le>>>1;se<oe;){var ae=2*(se+1)-1,Dt=G[ae],Et=ae+1,Nt=G[Et];if(0>i(Dt,q))Et<le&&0>i(Nt,Dt)?(G[se]=Nt,G[Et]=q,se=Et):(G[se]=Dt,G[ae]=q,se=ae);else if(Et<le&&0>i(Nt,q))G[se]=Nt,G[Et]=q,se=Et;else break e}}return K}function i(G,K){var q=G.sortIndex-K.sortIndex;return q!==0?q:G.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],f=1,y=null,_=3,R=!1,P=!1,N=!1,V=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(G){for(var K=n(d);K!==null;){if(K.callback===null)r(d);else if(K.startTime<=G)r(d),K.sortIndex=K.expirationTime,e(u,K);else break;K=n(d)}}function b(G){if(N=!1,C(G),!P)if(n(u)!==null)P=!0,Pt(F);else{var K=n(d);K!==null&&He(b,K.startTime-G)}}function F(G,K){P=!1,N&&(N=!1,x(v),v=-1),R=!0;var q=_;try{for(C(K),y=n(u);y!==null&&(!(y.expirationTime>K)||G&&!S());){var se=y.callback;if(typeof se=="function"){y.callback=null,_=y.priorityLevel;var le=se(y.expirationTime<=K);K=t.unstable_now(),typeof le=="function"?y.callback=le:y===n(u)&&r(u),C(K)}else r(u);y=n(u)}if(y!==null)var oe=!0;else{var ae=n(d);ae!==null&&He(b,ae.startTime-K),oe=!1}return oe}finally{y=null,_=q,R=!1}}var $=!1,T=null,v=-1,E=5,I=-1;function S(){return!(t.unstable_now()-I<E)}function k(){if(T!==null){var G=t.unstable_now();I=G;var K=!0;try{K=T(!0,G)}finally{K?A():($=!1,T=null)}}else $=!1}var A;if(typeof w=="function")A=function(){w(k)};else if(typeof MessageChannel<"u"){var ke=new MessageChannel,it=ke.port2;ke.port1.onmessage=k,A=function(){it.postMessage(null)}}else A=function(){V(k,0)};function Pt(G){T=G,$||($=!0,A())}function He(G,K){v=V(function(){G(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){P||R||(P=!0,Pt(F))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(G){switch(_){case 1:case 2:case 3:var K=3;break;default:K=_}var q=_;_=K;try{return G()}finally{_=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,K){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var q=_;_=G;try{return K()}finally{_=q}},t.unstable_scheduleCallback=function(G,K,q){var se=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?se+q:se):q=se,G){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=q+le,G={id:f++,callback:K,priorityLevel:G,startTime:q,expirationTime:le,sortIndex:-1},q>se?(G.sortIndex=q,e(d,G),n(u)===null&&G===n(d)&&(N?(x(v),v=-1):N=!0,He(b,q-se))):(G.sortIndex=le,e(u,G),P||R||(P=!0,Pt(F))),G},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(G){var K=_;return function(){var q=_;_=K;try{return G.apply(this,arguments)}finally{_=q}}}})(pg);fg.exports=pg;var rw=fg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iw=te,Ft=rw;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mg=new Set,Hs={};function Xr(t,e){Pi(t,e),Pi(t+"Capture",e)}function Pi(t,e){for(Hs[t]=e,t=0;t<e.length;t++)mg.add(e[t])}var Rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hu=Object.prototype.hasOwnProperty,sw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zf={},$f={};function ow(t){return Hu.call($f,t)?!0:Hu.call(zf,t)?!1:sw.test(t)?$f[t]=!0:(zf[t]=!0,!1)}function aw(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function lw(t,e,n,r){if(e===null||typeof e>"u"||aw(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function wt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var nt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){nt[t]=new wt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];nt[e]=new wt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){nt[t]=new wt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){nt[t]=new wt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){nt[t]=new wt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){nt[t]=new wt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){nt[t]=new wt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){nt[t]=new wt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){nt[t]=new wt(t,5,!1,t.toLowerCase(),null,!1,!1)});var hd=/[\-:]([a-z])/g;function fd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(hd,fd);nt[e]=new wt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(hd,fd);nt[e]=new wt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(hd,fd);nt[e]=new wt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){nt[t]=new wt(t,1,!1,t.toLowerCase(),null,!1,!1)});nt.xlinkHref=new wt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){nt[t]=new wt(t,1,!1,t.toLowerCase(),null,!0,!0)});function pd(t,e,n,r){var i=nt.hasOwnProperty(e)?nt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(lw(e,n,i,r)&&(n=null),r||i===null?ow(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Vn=iw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ko=Symbol.for("react.element"),di=Symbol.for("react.portal"),hi=Symbol.for("react.fragment"),md=Symbol.for("react.strict_mode"),Gu=Symbol.for("react.profiler"),gg=Symbol.for("react.provider"),yg=Symbol.for("react.context"),gd=Symbol.for("react.forward_ref"),Ku=Symbol.for("react.suspense"),Qu=Symbol.for("react.suspense_list"),yd=Symbol.for("react.memo"),Hn=Symbol.for("react.lazy"),vg=Symbol.for("react.offscreen"),Wf=Symbol.iterator;function ps(t){return t===null||typeof t!="object"?null:(t=Wf&&t[Wf]||t["@@iterator"],typeof t=="function"?t:null)}var Ne=Object.assign,ou;function Ss(t){if(ou===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ou=e&&e[1]||""}return`
`+ou+t}var au=!1;function lu(t,e){if(!t||au)return"";au=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{au=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ss(t):""}function uw(t){switch(t.tag){case 5:return Ss(t.type);case 16:return Ss("Lazy");case 13:return Ss("Suspense");case 19:return Ss("SuspenseList");case 0:case 2:case 15:return t=lu(t.type,!1),t;case 11:return t=lu(t.type.render,!1),t;case 1:return t=lu(t.type,!0),t;default:return""}}function Yu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case hi:return"Fragment";case di:return"Portal";case Gu:return"Profiler";case md:return"StrictMode";case Ku:return"Suspense";case Qu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case yg:return(t.displayName||"Context")+".Consumer";case gg:return(t._context.displayName||"Context")+".Provider";case gd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case yd:return e=t.displayName||null,e!==null?e:Yu(t.type)||"Memo";case Hn:e=t._payload,t=t._init;try{return Yu(t(e))}catch{}}return null}function cw(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yu(e);case 8:return e===md?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function _g(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function dw(t){var e=_g(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Qo(t){t._valueTracker||(t._valueTracker=dw(t))}function wg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=_g(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Va(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Xu(t,e){var n=e.checked;return Ne({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function qf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=fr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Eg(t,e){e=e.checked,e!=null&&pd(t,"checked",e,!1)}function Ju(t,e){Eg(t,e);var n=fr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Zu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Zu(t,e.type,fr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Hf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Zu(t,e,n){(e!=="number"||Va(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var xs=Array.isArray;function Ii(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+fr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ec(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Ne({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Gf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(xs(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:fr(n)}}function Tg(t,e){var n=fr(e.value),r=fr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Kf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ig(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ig(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Yo,Sg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Yo=Yo||document.createElement("div"),Yo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Yo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Gs(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ns={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hw=["Webkit","ms","Moz","O"];Object.keys(Ns).forEach(function(t){hw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ns[e]=Ns[t]})});function xg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ns.hasOwnProperty(t)&&Ns[t]?(""+e).trim():e+"px"}function Ag(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=xg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var fw=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nc(t,e){if(e){if(fw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function rc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ic=null;function vd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var sc=null,Si=null,xi=null;function Qf(t){if(t=To(t)){if(typeof sc!="function")throw Error(z(280));var e=t.stateNode;e&&(e=_l(e),sc(t.stateNode,t.type,e))}}function Rg(t){Si?xi?xi.push(t):xi=[t]:Si=t}function Cg(){if(Si){var t=Si,e=xi;if(xi=Si=null,Qf(t),e)for(t=0;t<e.length;t++)Qf(e[t])}}function kg(t,e){return t(e)}function Pg(){}var uu=!1;function Dg(t,e,n){if(uu)return t(e,n);uu=!0;try{return kg(t,e,n)}finally{uu=!1,(Si!==null||xi!==null)&&(Pg(),Cg())}}function Ks(t,e){var n=t.stateNode;if(n===null)return null;var r=_l(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var oc=!1;if(Rn)try{var ms={};Object.defineProperty(ms,"passive",{get:function(){oc=!0}}),window.addEventListener("test",ms,ms),window.removeEventListener("test",ms,ms)}catch{oc=!1}function pw(t,e,n,r,i,s,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var bs=!1,La=null,Oa=!1,ac=null,mw={onError:function(t){bs=!0,La=t}};function gw(t,e,n,r,i,s,o,l,u){bs=!1,La=null,pw.apply(mw,arguments)}function yw(t,e,n,r,i,s,o,l,u){if(gw.apply(this,arguments),bs){if(bs){var d=La;bs=!1,La=null}else throw Error(z(198));Oa||(Oa=!0,ac=d)}}function Jr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ng(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Yf(t){if(Jr(t)!==t)throw Error(z(188))}function vw(t){var e=t.alternate;if(!e){if(e=Jr(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Yf(i),t;if(s===r)return Yf(i),e;s=s.sibling}throw Error(z(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function bg(t){return t=vw(t),t!==null?Vg(t):null}function Vg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Vg(t);if(e!==null)return e;t=t.sibling}return null}var Lg=Ft.unstable_scheduleCallback,Xf=Ft.unstable_cancelCallback,_w=Ft.unstable_shouldYield,ww=Ft.unstable_requestPaint,Fe=Ft.unstable_now,Ew=Ft.unstable_getCurrentPriorityLevel,_d=Ft.unstable_ImmediatePriority,Og=Ft.unstable_UserBlockingPriority,ja=Ft.unstable_NormalPriority,Tw=Ft.unstable_LowPriority,jg=Ft.unstable_IdlePriority,ml=null,fn=null;function Iw(t){if(fn&&typeof fn.onCommitFiberRoot=="function")try{fn.onCommitFiberRoot(ml,t,void 0,(t.current.flags&128)===128)}catch{}}var tn=Math.clz32?Math.clz32:Aw,Sw=Math.log,xw=Math.LN2;function Aw(t){return t>>>=0,t===0?32:31-(Sw(t)/xw|0)|0}var Xo=64,Jo=4194304;function As(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ma(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=As(l):(s&=o,s!==0&&(r=As(s)))}else o=n&~i,o!==0?r=As(o):s!==0&&(r=As(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-tn(e),i=1<<n,r|=t[n],e&=~i;return r}function Rw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-tn(s),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=Rw(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function lc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Mg(){var t=Xo;return Xo<<=1,!(Xo&4194240)&&(Xo=64),t}function cu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function wo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-tn(e),t[e]=n}function kw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-tn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function wd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-tn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var _e=0;function Fg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Bg,Ed,Ug,zg,$g,uc=!1,Zo=[],er=null,tr=null,nr=null,Qs=new Map,Ys=new Map,Kn=[],Pw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Jf(t,e){switch(t){case"focusin":case"focusout":er=null;break;case"dragenter":case"dragleave":tr=null;break;case"mouseover":case"mouseout":nr=null;break;case"pointerover":case"pointerout":Qs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ys.delete(e.pointerId)}}function gs(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=To(e),e!==null&&Ed(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Dw(t,e,n,r,i){switch(e){case"focusin":return er=gs(er,t,e,n,r,i),!0;case"dragenter":return tr=gs(tr,t,e,n,r,i),!0;case"mouseover":return nr=gs(nr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Qs.set(s,gs(Qs.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ys.set(s,gs(Ys.get(s)||null,t,e,n,r,i)),!0}return!1}function Wg(t){var e=br(t.target);if(e!==null){var n=Jr(e);if(n!==null){if(e=n.tag,e===13){if(e=Ng(n),e!==null){t.blockedOn=e,$g(t.priority,function(){Ug(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _a(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=cc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ic=r,n.target.dispatchEvent(r),ic=null}else return e=To(n),e!==null&&Ed(e),t.blockedOn=n,!1;e.shift()}return!0}function Zf(t,e,n){_a(t)&&n.delete(e)}function Nw(){uc=!1,er!==null&&_a(er)&&(er=null),tr!==null&&_a(tr)&&(tr=null),nr!==null&&_a(nr)&&(nr=null),Qs.forEach(Zf),Ys.forEach(Zf)}function ys(t,e){t.blockedOn===e&&(t.blockedOn=null,uc||(uc=!0,Ft.unstable_scheduleCallback(Ft.unstable_NormalPriority,Nw)))}function Xs(t){function e(i){return ys(i,t)}if(0<Zo.length){ys(Zo[0],t);for(var n=1;n<Zo.length;n++){var r=Zo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(er!==null&&ys(er,t),tr!==null&&ys(tr,t),nr!==null&&ys(nr,t),Qs.forEach(e),Ys.forEach(e),n=0;n<Kn.length;n++)r=Kn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Kn.length&&(n=Kn[0],n.blockedOn===null);)Wg(n),n.blockedOn===null&&Kn.shift()}var Ai=Vn.ReactCurrentBatchConfig,Fa=!0;function bw(t,e,n,r){var i=_e,s=Ai.transition;Ai.transition=null;try{_e=1,Td(t,e,n,r)}finally{_e=i,Ai.transition=s}}function Vw(t,e,n,r){var i=_e,s=Ai.transition;Ai.transition=null;try{_e=4,Td(t,e,n,r)}finally{_e=i,Ai.transition=s}}function Td(t,e,n,r){if(Fa){var i=cc(t,e,n,r);if(i===null)wu(t,e,r,Ba,n),Jf(t,r);else if(Dw(i,t,e,n,r))r.stopPropagation();else if(Jf(t,r),e&4&&-1<Pw.indexOf(t)){for(;i!==null;){var s=To(i);if(s!==null&&Bg(s),s=cc(t,e,n,r),s===null&&wu(t,e,r,Ba,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else wu(t,e,r,null,n)}}var Ba=null;function cc(t,e,n,r){if(Ba=null,t=vd(r),t=br(t),t!==null)if(e=Jr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ng(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ba=t,null}function qg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ew()){case _d:return 1;case Og:return 4;case ja:case Tw:return 16;case jg:return 536870912;default:return 16}default:return 16}}var Xn=null,Id=null,wa=null;function Hg(){if(wa)return wa;var t,e=Id,n=e.length,r,i="value"in Xn?Xn.value:Xn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return wa=i.slice(t,1<r?1-r:void 0)}function Ea(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ea(){return!0}function ep(){return!1}function Ut(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ea:ep,this.isPropagationStopped=ep,this}return Ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ea)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ea)},persist:function(){},isPersistent:ea}),e}var Gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sd=Ut(Gi),Eo=Ne({},Gi,{view:0,detail:0}),Lw=Ut(Eo),du,hu,vs,gl=Ne({},Eo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==vs&&(vs&&t.type==="mousemove"?(du=t.screenX-vs.screenX,hu=t.screenY-vs.screenY):hu=du=0,vs=t),du)},movementY:function(t){return"movementY"in t?t.movementY:hu}}),tp=Ut(gl),Ow=Ne({},gl,{dataTransfer:0}),jw=Ut(Ow),Mw=Ne({},Eo,{relatedTarget:0}),fu=Ut(Mw),Fw=Ne({},Gi,{animationName:0,elapsedTime:0,pseudoElement:0}),Bw=Ut(Fw),Uw=Ne({},Gi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),zw=Ut(Uw),$w=Ne({},Gi,{data:0}),np=Ut($w),Ww={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Hw[t])?!!e[t]:!1}function xd(){return Gw}var Kw=Ne({},Eo,{key:function(t){if(t.key){var e=Ww[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ea(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?qw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xd,charCode:function(t){return t.type==="keypress"?Ea(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ea(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Qw=Ut(Kw),Yw=Ne({},gl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rp=Ut(Yw),Xw=Ne({},Eo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xd}),Jw=Ut(Xw),Zw=Ne({},Gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),eE=Ut(Zw),tE=Ne({},gl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),nE=Ut(tE),rE=[9,13,27,32],Ad=Rn&&"CompositionEvent"in window,Vs=null;Rn&&"documentMode"in document&&(Vs=document.documentMode);var iE=Rn&&"TextEvent"in window&&!Vs,Gg=Rn&&(!Ad||Vs&&8<Vs&&11>=Vs),ip=" ",sp=!1;function Kg(t,e){switch(t){case"keyup":return rE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var fi=!1;function sE(t,e){switch(t){case"compositionend":return Qg(e);case"keypress":return e.which!==32?null:(sp=!0,ip);case"textInput":return t=e.data,t===ip&&sp?null:t;default:return null}}function oE(t,e){if(fi)return t==="compositionend"||!Ad&&Kg(t,e)?(t=Hg(),wa=Id=Xn=null,fi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Gg&&e.locale!=="ko"?null:e.data;default:return null}}var aE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function op(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!aE[t.type]:e==="textarea"}function Yg(t,e,n,r){Rg(r),e=Ua(e,"onChange"),0<e.length&&(n=new Sd("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ls=null,Js=null;function lE(t){ay(t,0)}function yl(t){var e=gi(t);if(wg(e))return t}function uE(t,e){if(t==="change")return e}var Xg=!1;if(Rn){var pu;if(Rn){var mu="oninput"in document;if(!mu){var ap=document.createElement("div");ap.setAttribute("oninput","return;"),mu=typeof ap.oninput=="function"}pu=mu}else pu=!1;Xg=pu&&(!document.documentMode||9<document.documentMode)}function lp(){Ls&&(Ls.detachEvent("onpropertychange",Jg),Js=Ls=null)}function Jg(t){if(t.propertyName==="value"&&yl(Js)){var e=[];Yg(e,Js,t,vd(t)),Dg(lE,e)}}function cE(t,e,n){t==="focusin"?(lp(),Ls=e,Js=n,Ls.attachEvent("onpropertychange",Jg)):t==="focusout"&&lp()}function dE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return yl(Js)}function hE(t,e){if(t==="click")return yl(e)}function fE(t,e){if(t==="input"||t==="change")return yl(e)}function pE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var sn=typeof Object.is=="function"?Object.is:pE;function Zs(t,e){if(sn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Hu.call(e,i)||!sn(t[i],e[i]))return!1}return!0}function up(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cp(t,e){var n=up(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=up(n)}}function Zg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Zg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ey(){for(var t=window,e=Va();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Va(t.document)}return e}function Rd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function mE(t){var e=ey(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Zg(n.ownerDocument.documentElement,n)){if(r!==null&&Rd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=cp(n,s);var o=cp(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gE=Rn&&"documentMode"in document&&11>=document.documentMode,pi=null,dc=null,Os=null,hc=!1;function dp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;hc||pi==null||pi!==Va(r)||(r=pi,"selectionStart"in r&&Rd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Os&&Zs(Os,r)||(Os=r,r=Ua(dc,"onSelect"),0<r.length&&(e=new Sd("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=pi)))}function ta(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var mi={animationend:ta("Animation","AnimationEnd"),animationiteration:ta("Animation","AnimationIteration"),animationstart:ta("Animation","AnimationStart"),transitionend:ta("Transition","TransitionEnd")},gu={},ty={};Rn&&(ty=document.createElement("div").style,"AnimationEvent"in window||(delete mi.animationend.animation,delete mi.animationiteration.animation,delete mi.animationstart.animation),"TransitionEvent"in window||delete mi.transitionend.transition);function vl(t){if(gu[t])return gu[t];if(!mi[t])return t;var e=mi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ty)return gu[t]=e[n];return t}var ny=vl("animationend"),ry=vl("animationiteration"),iy=vl("animationstart"),sy=vl("transitionend"),oy=new Map,hp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vr(t,e){oy.set(t,e),Xr(e,[t])}for(var yu=0;yu<hp.length;yu++){var vu=hp[yu],yE=vu.toLowerCase(),vE=vu[0].toUpperCase()+vu.slice(1);vr(yE,"on"+vE)}vr(ny,"onAnimationEnd");vr(ry,"onAnimationIteration");vr(iy,"onAnimationStart");vr("dblclick","onDoubleClick");vr("focusin","onFocus");vr("focusout","onBlur");vr(sy,"onTransitionEnd");Pi("onMouseEnter",["mouseout","mouseover"]);Pi("onMouseLeave",["mouseout","mouseover"]);Pi("onPointerEnter",["pointerout","pointerover"]);Pi("onPointerLeave",["pointerout","pointerover"]);Xr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_E=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rs));function fp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,yw(r,e,void 0,t),t.currentTarget=null}function ay(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;fp(i,l,d),s=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;fp(i,l,d),s=u}}}if(Oa)throw t=ac,Oa=!1,ac=null,t}function Se(t,e){var n=e[yc];n===void 0&&(n=e[yc]=new Set);var r=t+"__bubble";n.has(r)||(ly(e,t,2,!1),n.add(r))}function _u(t,e,n){var r=0;e&&(r|=4),ly(n,t,r,e)}var na="_reactListening"+Math.random().toString(36).slice(2);function eo(t){if(!t[na]){t[na]=!0,mg.forEach(function(n){n!=="selectionchange"&&(_E.has(n)||_u(n,!1,t),_u(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[na]||(e[na]=!0,_u("selectionchange",!1,e))}}function ly(t,e,n,r){switch(qg(e)){case 1:var i=bw;break;case 4:i=Vw;break;default:i=Td}n=i.bind(null,e,n,t),i=void 0,!oc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function wu(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=br(l),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}l=l.parentNode}}r=r.return}Dg(function(){var d=s,f=vd(n),y=[];e:{var _=oy.get(t);if(_!==void 0){var R=Sd,P=t;switch(t){case"keypress":if(Ea(n)===0)break e;case"keydown":case"keyup":R=Qw;break;case"focusin":P="focus",R=fu;break;case"focusout":P="blur",R=fu;break;case"beforeblur":case"afterblur":R=fu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=tp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=jw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=Jw;break;case ny:case ry:case iy:R=Bw;break;case sy:R=eE;break;case"scroll":R=Lw;break;case"wheel":R=nE;break;case"copy":case"cut":case"paste":R=zw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=rp}var N=(e&4)!==0,V=!N&&t==="scroll",x=N?_!==null?_+"Capture":null:_;N=[];for(var w=d,C;w!==null;){C=w;var b=C.stateNode;if(C.tag===5&&b!==null&&(C=b,x!==null&&(b=Ks(w,x),b!=null&&N.push(to(w,b,C)))),V)break;w=w.return}0<N.length&&(_=new R(_,P,null,n,f),y.push({event:_,listeners:N}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",R=t==="mouseout"||t==="pointerout",_&&n!==ic&&(P=n.relatedTarget||n.fromElement)&&(br(P)||P[Cn]))break e;if((R||_)&&(_=f.window===f?f:(_=f.ownerDocument)?_.defaultView||_.parentWindow:window,R?(P=n.relatedTarget||n.toElement,R=d,P=P?br(P):null,P!==null&&(V=Jr(P),P!==V||P.tag!==5&&P.tag!==6)&&(P=null)):(R=null,P=d),R!==P)){if(N=tp,b="onMouseLeave",x="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(N=rp,b="onPointerLeave",x="onPointerEnter",w="pointer"),V=R==null?_:gi(R),C=P==null?_:gi(P),_=new N(b,w+"leave",R,n,f),_.target=V,_.relatedTarget=C,b=null,br(f)===d&&(N=new N(x,w+"enter",P,n,f),N.target=C,N.relatedTarget=V,b=N),V=b,R&&P)t:{for(N=R,x=P,w=0,C=N;C;C=ai(C))w++;for(C=0,b=x;b;b=ai(b))C++;for(;0<w-C;)N=ai(N),w--;for(;0<C-w;)x=ai(x),C--;for(;w--;){if(N===x||x!==null&&N===x.alternate)break t;N=ai(N),x=ai(x)}N=null}else N=null;R!==null&&pp(y,_,R,N,!1),P!==null&&V!==null&&pp(y,V,P,N,!0)}}e:{if(_=d?gi(d):window,R=_.nodeName&&_.nodeName.toLowerCase(),R==="select"||R==="input"&&_.type==="file")var F=uE;else if(op(_))if(Xg)F=fE;else{F=dE;var $=cE}else(R=_.nodeName)&&R.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(F=hE);if(F&&(F=F(t,d))){Yg(y,F,n,f);break e}$&&$(t,_,d),t==="focusout"&&($=_._wrapperState)&&$.controlled&&_.type==="number"&&Zu(_,"number",_.value)}switch($=d?gi(d):window,t){case"focusin":(op($)||$.contentEditable==="true")&&(pi=$,dc=d,Os=null);break;case"focusout":Os=dc=pi=null;break;case"mousedown":hc=!0;break;case"contextmenu":case"mouseup":case"dragend":hc=!1,dp(y,n,f);break;case"selectionchange":if(gE)break;case"keydown":case"keyup":dp(y,n,f)}var T;if(Ad)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else fi?Kg(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(Gg&&n.locale!=="ko"&&(fi||v!=="onCompositionStart"?v==="onCompositionEnd"&&fi&&(T=Hg()):(Xn=f,Id="value"in Xn?Xn.value:Xn.textContent,fi=!0)),$=Ua(d,v),0<$.length&&(v=new np(v,t,null,n,f),y.push({event:v,listeners:$}),T?v.data=T:(T=Qg(n),T!==null&&(v.data=T)))),(T=iE?sE(t,n):oE(t,n))&&(d=Ua(d,"onBeforeInput"),0<d.length&&(f=new np("onBeforeInput","beforeinput",null,n,f),y.push({event:f,listeners:d}),f.data=T))}ay(y,e)})}function to(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ua(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ks(t,n),s!=null&&r.unshift(to(t,s,i)),s=Ks(t,e),s!=null&&r.push(to(t,s,i))),t=t.return}return r}function ai(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function pp(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,i?(u=Ks(n,s),u!=null&&o.unshift(to(n,u,l))):i||(u=Ks(n,s),u!=null&&o.push(to(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var wE=/\r\n?/g,EE=/\u0000|\uFFFD/g;function mp(t){return(typeof t=="string"?t:""+t).replace(wE,`
`).replace(EE,"")}function ra(t,e,n){if(e=mp(e),mp(t)!==e&&n)throw Error(z(425))}function za(){}var fc=null,pc=null;function mc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var gc=typeof setTimeout=="function"?setTimeout:void 0,TE=typeof clearTimeout=="function"?clearTimeout:void 0,gp=typeof Promise=="function"?Promise:void 0,IE=typeof queueMicrotask=="function"?queueMicrotask:typeof gp<"u"?function(t){return gp.resolve(null).then(t).catch(SE)}:gc;function SE(t){setTimeout(function(){throw t})}function Eu(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Xs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Xs(e)}function rr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function yp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ki=Math.random().toString(36).slice(2),dn="__reactFiber$"+Ki,no="__reactProps$"+Ki,Cn="__reactContainer$"+Ki,yc="__reactEvents$"+Ki,xE="__reactListeners$"+Ki,AE="__reactHandles$"+Ki;function br(t){var e=t[dn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Cn]||n[dn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=yp(t);t!==null;){if(n=t[dn])return n;t=yp(t)}return e}t=n,n=t.parentNode}return null}function To(t){return t=t[dn]||t[Cn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function gi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function _l(t){return t[no]||null}var vc=[],yi=-1;function _r(t){return{current:t}}function Ae(t){0>yi||(t.current=vc[yi],vc[yi]=null,yi--)}function Te(t,e){yi++,vc[yi]=t.current,t.current=e}var pr={},ft=_r(pr),At=_r(!1),zr=pr;function Di(t,e){var n=t.type.contextTypes;if(!n)return pr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Rt(t){return t=t.childContextTypes,t!=null}function $a(){Ae(At),Ae(ft)}function vp(t,e,n){if(ft.current!==pr)throw Error(z(168));Te(ft,e),Te(At,n)}function uy(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(z(108,cw(t)||"Unknown",i));return Ne({},n,r)}function Wa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||pr,zr=ft.current,Te(ft,t),Te(At,At.current),!0}function _p(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=uy(t,e,zr),r.__reactInternalMemoizedMergedChildContext=t,Ae(At),Ae(ft),Te(ft,t)):Ae(At),Te(At,n)}var In=null,wl=!1,Tu=!1;function cy(t){In===null?In=[t]:In.push(t)}function RE(t){wl=!0,cy(t)}function wr(){if(!Tu&&In!==null){Tu=!0;var t=0,e=_e;try{var n=In;for(_e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}In=null,wl=!1}catch(i){throw In!==null&&(In=In.slice(t+1)),Lg(_d,wr),i}finally{_e=e,Tu=!1}}return null}var vi=[],_i=0,qa=null,Ha=0,zt=[],$t=0,$r=null,Sn=1,xn="";function Pr(t,e){vi[_i++]=Ha,vi[_i++]=qa,qa=t,Ha=e}function dy(t,e,n){zt[$t++]=Sn,zt[$t++]=xn,zt[$t++]=$r,$r=t;var r=Sn;t=xn;var i=32-tn(r)-1;r&=~(1<<i),n+=1;var s=32-tn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Sn=1<<32-tn(e)+i|n<<i|r,xn=s+t}else Sn=1<<s|n<<i|r,xn=t}function Cd(t){t.return!==null&&(Pr(t,1),dy(t,1,0))}function kd(t){for(;t===qa;)qa=vi[--_i],vi[_i]=null,Ha=vi[--_i],vi[_i]=null;for(;t===$r;)$r=zt[--$t],zt[$t]=null,xn=zt[--$t],zt[$t]=null,Sn=zt[--$t],zt[$t]=null}var Mt=null,Lt=null,Ce=!1,en=null;function hy(t,e){var n=Wt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function wp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Mt=t,Lt=rr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Mt=t,Lt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=$r!==null?{id:Sn,overflow:xn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Wt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Mt=t,Lt=null,!0):!1;default:return!1}}function _c(t){return(t.mode&1)!==0&&(t.flags&128)===0}function wc(t){if(Ce){var e=Lt;if(e){var n=e;if(!wp(t,e)){if(_c(t))throw Error(z(418));e=rr(n.nextSibling);var r=Mt;e&&wp(t,e)?hy(r,n):(t.flags=t.flags&-4097|2,Ce=!1,Mt=t)}}else{if(_c(t))throw Error(z(418));t.flags=t.flags&-4097|2,Ce=!1,Mt=t}}}function Ep(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Mt=t}function ia(t){if(t!==Mt)return!1;if(!Ce)return Ep(t),Ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!mc(t.type,t.memoizedProps)),e&&(e=Lt)){if(_c(t))throw fy(),Error(z(418));for(;e;)hy(t,e),e=rr(e.nextSibling)}if(Ep(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Lt=rr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Lt=null}}else Lt=Mt?rr(t.stateNode.nextSibling):null;return!0}function fy(){for(var t=Lt;t;)t=rr(t.nextSibling)}function Ni(){Lt=Mt=null,Ce=!1}function Pd(t){en===null?en=[t]:en.push(t)}var CE=Vn.ReactCurrentBatchConfig;function _s(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function sa(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Tp(t){var e=t._init;return e(t._payload)}function py(t){function e(x,w){if(t){var C=x.deletions;C===null?(x.deletions=[w],x.flags|=16):C.push(w)}}function n(x,w){if(!t)return null;for(;w!==null;)e(x,w),w=w.sibling;return null}function r(x,w){for(x=new Map;w!==null;)w.key!==null?x.set(w.key,w):x.set(w.index,w),w=w.sibling;return x}function i(x,w){return x=ar(x,w),x.index=0,x.sibling=null,x}function s(x,w,C){return x.index=C,t?(C=x.alternate,C!==null?(C=C.index,C<w?(x.flags|=2,w):C):(x.flags|=2,w)):(x.flags|=1048576,w)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,w,C,b){return w===null||w.tag!==6?(w=ku(C,x.mode,b),w.return=x,w):(w=i(w,C),w.return=x,w)}function u(x,w,C,b){var F=C.type;return F===hi?f(x,w,C.props.children,b,C.key):w!==null&&(w.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Hn&&Tp(F)===w.type)?(b=i(w,C.props),b.ref=_s(x,w,C),b.return=x,b):(b=Ca(C.type,C.key,C.props,null,x.mode,b),b.ref=_s(x,w,C),b.return=x,b)}function d(x,w,C,b){return w===null||w.tag!==4||w.stateNode.containerInfo!==C.containerInfo||w.stateNode.implementation!==C.implementation?(w=Pu(C,x.mode,b),w.return=x,w):(w=i(w,C.children||[]),w.return=x,w)}function f(x,w,C,b,F){return w===null||w.tag!==7?(w=Mr(C,x.mode,b,F),w.return=x,w):(w=i(w,C),w.return=x,w)}function y(x,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return w=ku(""+w,x.mode,C),w.return=x,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ko:return C=Ca(w.type,w.key,w.props,null,x.mode,C),C.ref=_s(x,null,w),C.return=x,C;case di:return w=Pu(w,x.mode,C),w.return=x,w;case Hn:var b=w._init;return y(x,b(w._payload),C)}if(xs(w)||ps(w))return w=Mr(w,x.mode,C,null),w.return=x,w;sa(x,w)}return null}function _(x,w,C,b){var F=w!==null?w.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return F!==null?null:l(x,w,""+C,b);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ko:return C.key===F?u(x,w,C,b):null;case di:return C.key===F?d(x,w,C,b):null;case Hn:return F=C._init,_(x,w,F(C._payload),b)}if(xs(C)||ps(C))return F!==null?null:f(x,w,C,b,null);sa(x,C)}return null}function R(x,w,C,b,F){if(typeof b=="string"&&b!==""||typeof b=="number")return x=x.get(C)||null,l(w,x,""+b,F);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ko:return x=x.get(b.key===null?C:b.key)||null,u(w,x,b,F);case di:return x=x.get(b.key===null?C:b.key)||null,d(w,x,b,F);case Hn:var $=b._init;return R(x,w,C,$(b._payload),F)}if(xs(b)||ps(b))return x=x.get(C)||null,f(w,x,b,F,null);sa(w,b)}return null}function P(x,w,C,b){for(var F=null,$=null,T=w,v=w=0,E=null;T!==null&&v<C.length;v++){T.index>v?(E=T,T=null):E=T.sibling;var I=_(x,T,C[v],b);if(I===null){T===null&&(T=E);break}t&&T&&I.alternate===null&&e(x,T),w=s(I,w,v),$===null?F=I:$.sibling=I,$=I,T=E}if(v===C.length)return n(x,T),Ce&&Pr(x,v),F;if(T===null){for(;v<C.length;v++)T=y(x,C[v],b),T!==null&&(w=s(T,w,v),$===null?F=T:$.sibling=T,$=T);return Ce&&Pr(x,v),F}for(T=r(x,T);v<C.length;v++)E=R(T,x,v,C[v],b),E!==null&&(t&&E.alternate!==null&&T.delete(E.key===null?v:E.key),w=s(E,w,v),$===null?F=E:$.sibling=E,$=E);return t&&T.forEach(function(S){return e(x,S)}),Ce&&Pr(x,v),F}function N(x,w,C,b){var F=ps(C);if(typeof F!="function")throw Error(z(150));if(C=F.call(C),C==null)throw Error(z(151));for(var $=F=null,T=w,v=w=0,E=null,I=C.next();T!==null&&!I.done;v++,I=C.next()){T.index>v?(E=T,T=null):E=T.sibling;var S=_(x,T,I.value,b);if(S===null){T===null&&(T=E);break}t&&T&&S.alternate===null&&e(x,T),w=s(S,w,v),$===null?F=S:$.sibling=S,$=S,T=E}if(I.done)return n(x,T),Ce&&Pr(x,v),F;if(T===null){for(;!I.done;v++,I=C.next())I=y(x,I.value,b),I!==null&&(w=s(I,w,v),$===null?F=I:$.sibling=I,$=I);return Ce&&Pr(x,v),F}for(T=r(x,T);!I.done;v++,I=C.next())I=R(T,x,v,I.value,b),I!==null&&(t&&I.alternate!==null&&T.delete(I.key===null?v:I.key),w=s(I,w,v),$===null?F=I:$.sibling=I,$=I);return t&&T.forEach(function(k){return e(x,k)}),Ce&&Pr(x,v),F}function V(x,w,C,b){if(typeof C=="object"&&C!==null&&C.type===hi&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Ko:e:{for(var F=C.key,$=w;$!==null;){if($.key===F){if(F=C.type,F===hi){if($.tag===7){n(x,$.sibling),w=i($,C.props.children),w.return=x,x=w;break e}}else if($.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Hn&&Tp(F)===$.type){n(x,$.sibling),w=i($,C.props),w.ref=_s(x,$,C),w.return=x,x=w;break e}n(x,$);break}else e(x,$);$=$.sibling}C.type===hi?(w=Mr(C.props.children,x.mode,b,C.key),w.return=x,x=w):(b=Ca(C.type,C.key,C.props,null,x.mode,b),b.ref=_s(x,w,C),b.return=x,x=b)}return o(x);case di:e:{for($=C.key;w!==null;){if(w.key===$)if(w.tag===4&&w.stateNode.containerInfo===C.containerInfo&&w.stateNode.implementation===C.implementation){n(x,w.sibling),w=i(w,C.children||[]),w.return=x,x=w;break e}else{n(x,w);break}else e(x,w);w=w.sibling}w=Pu(C,x.mode,b),w.return=x,x=w}return o(x);case Hn:return $=C._init,V(x,w,$(C._payload),b)}if(xs(C))return P(x,w,C,b);if(ps(C))return N(x,w,C,b);sa(x,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,w!==null&&w.tag===6?(n(x,w.sibling),w=i(w,C),w.return=x,x=w):(n(x,w),w=ku(C,x.mode,b),w.return=x,x=w),o(x)):n(x,w)}return V}var bi=py(!0),my=py(!1),Ga=_r(null),Ka=null,wi=null,Dd=null;function Nd(){Dd=wi=Ka=null}function bd(t){var e=Ga.current;Ae(Ga),t._currentValue=e}function Ec(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ri(t,e){Ka=t,Dd=wi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(xt=!0),t.firstContext=null)}function Ht(t){var e=t._currentValue;if(Dd!==t)if(t={context:t,memoizedValue:e,next:null},wi===null){if(Ka===null)throw Error(z(308));wi=t,Ka.dependencies={lanes:0,firstContext:t}}else wi=wi.next=t;return e}var Vr=null;function Vd(t){Vr===null?Vr=[t]:Vr.push(t)}function gy(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Vd(e)):(n.next=i.next,i.next=n),e.interleaved=n,kn(t,r)}function kn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Gn=!1;function Ld(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function An(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ir(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,fe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,kn(t,n)}return i=r.interleaved,i===null?(e.next=e,Vd(r)):(e.next=i.next,i.next=e),r.interleaved=e,kn(t,n)}function Ta(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,wd(t,n)}}function Ip(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Qa(t,e,n,r){var i=t.updateQueue;Gn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?s=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=u))}if(s!==null){var y=i.baseState;o=0,f=d=u=null,l=s;do{var _=l.lane,R=l.eventTime;if((r&_)===_){f!==null&&(f=f.next={eventTime:R,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var P=t,N=l;switch(_=e,R=n,N.tag){case 1:if(P=N.payload,typeof P=="function"){y=P.call(R,y,_);break e}y=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=N.payload,_=typeof P=="function"?P.call(R,y,_):P,_==null)break e;y=Ne({},y,_);break e;case 2:Gn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,_=i.effects,_===null?i.effects=[l]:_.push(l))}else R={eventTime:R,lane:_,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=R,u=y):f=f.next=R,o|=_;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;_=l,l=_.next,_.next=null,i.lastBaseUpdate=_,i.shared.pending=null}}while(!0);if(f===null&&(u=y),i.baseState=u,i.firstBaseUpdate=d,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);qr|=o,t.lanes=o,t.memoizedState=y}}function Sp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(z(191,i));i.call(r)}}}var Io={},pn=_r(Io),ro=_r(Io),io=_r(Io);function Lr(t){if(t===Io)throw Error(z(174));return t}function Od(t,e){switch(Te(io,e),Te(ro,t),Te(pn,Io),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:tc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=tc(e,t)}Ae(pn),Te(pn,e)}function Vi(){Ae(pn),Ae(ro),Ae(io)}function vy(t){Lr(io.current);var e=Lr(pn.current),n=tc(e,t.type);e!==n&&(Te(ro,t),Te(pn,n))}function jd(t){ro.current===t&&(Ae(pn),Ae(ro))}var Pe=_r(0);function Ya(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Iu=[];function Md(){for(var t=0;t<Iu.length;t++)Iu[t]._workInProgressVersionPrimary=null;Iu.length=0}var Ia=Vn.ReactCurrentDispatcher,Su=Vn.ReactCurrentBatchConfig,Wr=0,De=null,$e=null,Ke=null,Xa=!1,js=!1,so=0,kE=0;function at(){throw Error(z(321))}function Fd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!sn(t[n],e[n]))return!1;return!0}function Bd(t,e,n,r,i,s){if(Wr=s,De=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ia.current=t===null||t.memoizedState===null?bE:VE,t=n(r,i),js){s=0;do{if(js=!1,so=0,25<=s)throw Error(z(301));s+=1,Ke=$e=null,e.updateQueue=null,Ia.current=LE,t=n(r,i)}while(js)}if(Ia.current=Ja,e=$e!==null&&$e.next!==null,Wr=0,Ke=$e=De=null,Xa=!1,e)throw Error(z(300));return t}function Ud(){var t=so!==0;return so=0,t}function cn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ke===null?De.memoizedState=Ke=t:Ke=Ke.next=t,Ke}function Gt(){if($e===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=$e.next;var e=Ke===null?De.memoizedState:Ke.next;if(e!==null)Ke=e,$e=t;else{if(t===null)throw Error(z(310));$e=t,t={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},Ke===null?De.memoizedState=Ke=t:Ke=Ke.next=t}return Ke}function oo(t,e){return typeof e=="function"?e(t):e}function xu(t){var e=Gt(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=$e,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,u=null,d=s;do{var f=d.lane;if((Wr&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var y={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=y,o=r):u=u.next=y,De.lanes|=f,qr|=f}d=d.next}while(d!==null&&d!==s);u===null?o=r:u.next=l,sn(r,e.memoizedState)||(xt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,De.lanes|=s,qr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Au(t){var e=Gt(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);sn(s,e.memoizedState)||(xt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function _y(){}function wy(t,e){var n=De,r=Gt(),i=e(),s=!sn(r.memoizedState,i);if(s&&(r.memoizedState=i,xt=!0),r=r.queue,zd(Iy.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ke!==null&&Ke.memoizedState.tag&1){if(n.flags|=2048,ao(9,Ty.bind(null,n,r,i,e),void 0,null),Qe===null)throw Error(z(349));Wr&30||Ey(n,e,i)}return i}function Ey(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Ty(t,e,n,r){e.value=n,e.getSnapshot=r,Sy(e)&&xy(t)}function Iy(t,e,n){return n(function(){Sy(e)&&xy(t)})}function Sy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!sn(t,n)}catch{return!0}}function xy(t){var e=kn(t,1);e!==null&&nn(e,t,1,-1)}function xp(t){var e=cn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:oo,lastRenderedState:t},e.queue=t,t=t.dispatch=NE.bind(null,De,t),[e.memoizedState,t]}function ao(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Ay(){return Gt().memoizedState}function Sa(t,e,n,r){var i=cn();De.flags|=t,i.memoizedState=ao(1|e,n,void 0,r===void 0?null:r)}function El(t,e,n,r){var i=Gt();r=r===void 0?null:r;var s=void 0;if($e!==null){var o=$e.memoizedState;if(s=o.destroy,r!==null&&Fd(r,o.deps)){i.memoizedState=ao(e,n,s,r);return}}De.flags|=t,i.memoizedState=ao(1|e,n,s,r)}function Ap(t,e){return Sa(8390656,8,t,e)}function zd(t,e){return El(2048,8,t,e)}function Ry(t,e){return El(4,2,t,e)}function Cy(t,e){return El(4,4,t,e)}function ky(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Py(t,e,n){return n=n!=null?n.concat([t]):null,El(4,4,ky.bind(null,e,t),n)}function $d(){}function Dy(t,e){var n=Gt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Fd(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ny(t,e){var n=Gt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Fd(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function by(t,e,n){return Wr&21?(sn(n,e)||(n=Mg(),De.lanes|=n,qr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,xt=!0),t.memoizedState=n)}function PE(t,e){var n=_e;_e=n!==0&&4>n?n:4,t(!0);var r=Su.transition;Su.transition={};try{t(!1),e()}finally{_e=n,Su.transition=r}}function Vy(){return Gt().memoizedState}function DE(t,e,n){var r=or(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ly(t))Oy(e,n);else if(n=gy(t,e,n,r),n!==null){var i=yt();nn(n,t,r,i),jy(n,e,r)}}function NE(t,e,n){var r=or(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ly(t))Oy(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,sn(l,o)){var u=e.interleaved;u===null?(i.next=i,Vd(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=gy(t,e,i,r),n!==null&&(i=yt(),nn(n,t,r,i),jy(n,e,r))}}function Ly(t){var e=t.alternate;return t===De||e!==null&&e===De}function Oy(t,e){js=Xa=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function jy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,wd(t,n)}}var Ja={readContext:Ht,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},bE={readContext:Ht,useCallback:function(t,e){return cn().memoizedState=[t,e===void 0?null:e],t},useContext:Ht,useEffect:Ap,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Sa(4194308,4,ky.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Sa(4194308,4,t,e)},useInsertionEffect:function(t,e){return Sa(4,2,t,e)},useMemo:function(t,e){var n=cn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=cn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=DE.bind(null,De,t),[r.memoizedState,t]},useRef:function(t){var e=cn();return t={current:t},e.memoizedState=t},useState:xp,useDebugValue:$d,useDeferredValue:function(t){return cn().memoizedState=t},useTransition:function(){var t=xp(!1),e=t[0];return t=PE.bind(null,t[1]),cn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=De,i=cn();if(Ce){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),Qe===null)throw Error(z(349));Wr&30||Ey(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Ap(Iy.bind(null,r,s,t),[t]),r.flags|=2048,ao(9,Ty.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=cn(),e=Qe.identifierPrefix;if(Ce){var n=xn,r=Sn;n=(r&~(1<<32-tn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=so++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=kE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},VE={readContext:Ht,useCallback:Dy,useContext:Ht,useEffect:zd,useImperativeHandle:Py,useInsertionEffect:Ry,useLayoutEffect:Cy,useMemo:Ny,useReducer:xu,useRef:Ay,useState:function(){return xu(oo)},useDebugValue:$d,useDeferredValue:function(t){var e=Gt();return by(e,$e.memoizedState,t)},useTransition:function(){var t=xu(oo)[0],e=Gt().memoizedState;return[t,e]},useMutableSource:_y,useSyncExternalStore:wy,useId:Vy,unstable_isNewReconciler:!1},LE={readContext:Ht,useCallback:Dy,useContext:Ht,useEffect:zd,useImperativeHandle:Py,useInsertionEffect:Ry,useLayoutEffect:Cy,useMemo:Ny,useReducer:Au,useRef:Ay,useState:function(){return Au(oo)},useDebugValue:$d,useDeferredValue:function(t){var e=Gt();return $e===null?e.memoizedState=t:by(e,$e.memoizedState,t)},useTransition:function(){var t=Au(oo)[0],e=Gt().memoizedState;return[t,e]},useMutableSource:_y,useSyncExternalStore:wy,useId:Vy,unstable_isNewReconciler:!1};function Jt(t,e){if(t&&t.defaultProps){e=Ne({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Tc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ne({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Tl={isMounted:function(t){return(t=t._reactInternals)?Jr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=yt(),i=or(t),s=An(r,i);s.payload=e,n!=null&&(s.callback=n),e=ir(t,s,i),e!==null&&(nn(e,t,i,r),Ta(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=yt(),i=or(t),s=An(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ir(t,s,i),e!==null&&(nn(e,t,i,r),Ta(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=yt(),r=or(t),i=An(n,r);i.tag=2,e!=null&&(i.callback=e),e=ir(t,i,r),e!==null&&(nn(e,t,r,n),Ta(e,t,r))}};function Rp(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Zs(n,r)||!Zs(i,s):!0}function My(t,e,n){var r=!1,i=pr,s=e.contextType;return typeof s=="object"&&s!==null?s=Ht(s):(i=Rt(e)?zr:ft.current,r=e.contextTypes,s=(r=r!=null)?Di(t,i):pr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Tl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Cp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Tl.enqueueReplaceState(e,e.state,null)}function Ic(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Ld(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ht(s):(s=Rt(e)?zr:ft.current,i.context=Di(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Tc(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Tl.enqueueReplaceState(i,i.state,null),Qa(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Li(t,e){try{var n="",r=e;do n+=uw(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Ru(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Sc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var OE=typeof WeakMap=="function"?WeakMap:Map;function Fy(t,e,n){n=An(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){el||(el=!0,Vc=r),Sc(t,e)},n}function By(t,e,n){n=An(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Sc(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Sc(t,e),typeof r!="function"&&(sr===null?sr=new Set([this]):sr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function kp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new OE;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=YE.bind(null,t,e,n),e.then(t,t))}function Pp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Dp(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=An(-1,1),e.tag=2,ir(n,e,1))),n.lanes|=1),t)}var jE=Vn.ReactCurrentOwner,xt=!1;function gt(t,e,n,r){e.child=t===null?my(e,null,n,r):bi(e,t.child,n,r)}function Np(t,e,n,r,i){n=n.render;var s=e.ref;return Ri(e,i),r=Bd(t,e,n,r,s,i),n=Ud(),t!==null&&!xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Pn(t,e,i)):(Ce&&n&&Cd(e),e.flags|=1,gt(t,e,r,i),e.child)}function bp(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Xd(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Uy(t,e,s,r,i)):(t=Ca(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Zs,n(o,r)&&t.ref===e.ref)return Pn(t,e,i)}return e.flags|=1,t=ar(s,r),t.ref=e.ref,t.return=e,e.child=t}function Uy(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Zs(s,r)&&t.ref===e.ref)if(xt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(xt=!0);else return e.lanes=t.lanes,Pn(t,e,i)}return xc(t,e,n,r,i)}function zy(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(Ti,Vt),Vt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Te(Ti,Vt),Vt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Te(Ti,Vt),Vt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Te(Ti,Vt),Vt|=r;return gt(t,e,i,n),e.child}function $y(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function xc(t,e,n,r,i){var s=Rt(n)?zr:ft.current;return s=Di(e,s),Ri(e,i),n=Bd(t,e,n,r,s,i),r=Ud(),t!==null&&!xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Pn(t,e,i)):(Ce&&r&&Cd(e),e.flags|=1,gt(t,e,n,i),e.child)}function Vp(t,e,n,r,i){if(Rt(n)){var s=!0;Wa(e)}else s=!1;if(Ri(e,i),e.stateNode===null)xa(t,e),My(e,n,r),Ic(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Ht(d):(d=Rt(n)?zr:ft.current,d=Di(e,d));var f=n.getDerivedStateFromProps,y=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";y||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==d)&&Cp(e,o,r,d),Gn=!1;var _=e.memoizedState;o.state=_,Qa(e,r,o,i),u=e.memoizedState,l!==r||_!==u||At.current||Gn?(typeof f=="function"&&(Tc(e,n,f,r),u=e.memoizedState),(l=Gn||Rp(e,n,l,r,_,u,d))?(y||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,yy(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Jt(e.type,l),o.props=d,y=e.pendingProps,_=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Ht(u):(u=Rt(n)?zr:ft.current,u=Di(e,u));var R=n.getDerivedStateFromProps;(f=typeof R=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==y||_!==u)&&Cp(e,o,r,u),Gn=!1,_=e.memoizedState,o.state=_,Qa(e,r,o,i);var P=e.memoizedState;l!==y||_!==P||At.current||Gn?(typeof R=="function"&&(Tc(e,n,R,r),P=e.memoizedState),(d=Gn||Rp(e,n,d,r,_,P,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,P,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,P,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=P),o.props=r,o.state=P,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),r=!1)}return Ac(t,e,n,r,s,i)}function Ac(t,e,n,r,i,s){$y(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&_p(e,n,!1),Pn(t,e,s);r=e.stateNode,jE.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=bi(e,t.child,null,s),e.child=bi(e,null,l,s)):gt(t,e,l,s),e.memoizedState=r.state,i&&_p(e,n,!0),e.child}function Wy(t){var e=t.stateNode;e.pendingContext?vp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&vp(t,e.context,!1),Od(t,e.containerInfo)}function Lp(t,e,n,r,i){return Ni(),Pd(i),e.flags|=256,gt(t,e,n,r),e.child}var Rc={dehydrated:null,treeContext:null,retryLane:0};function Cc(t){return{baseLanes:t,cachePool:null,transitions:null}}function qy(t,e,n){var r=e.pendingProps,i=Pe.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Te(Pe,i&1),t===null)return wc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=xl(o,r,0,null),t=Mr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Cc(n),e.memoizedState=Rc,t):Wd(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return ME(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=ar(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=ar(l,s):(s=Mr(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Cc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Rc,r}return s=t.child,t=s.sibling,r=ar(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Wd(t,e){return e=xl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function oa(t,e,n,r){return r!==null&&Pd(r),bi(e,t.child,null,n),t=Wd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ME(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Ru(Error(z(422))),oa(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=xl({mode:"visible",children:r.children},i,0,null),s=Mr(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&bi(e,t.child,null,o),e.child.memoizedState=Cc(o),e.memoizedState=Rc,s);if(!(e.mode&1))return oa(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(z(419)),r=Ru(s,r,void 0),oa(t,e,o,r)}if(l=(o&t.childLanes)!==0,xt||l){if(r=Qe,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,kn(t,i),nn(r,t,i,-1))}return Yd(),r=Ru(Error(z(421))),oa(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=XE.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Lt=rr(i.nextSibling),Mt=e,Ce=!0,en=null,t!==null&&(zt[$t++]=Sn,zt[$t++]=xn,zt[$t++]=$r,Sn=t.id,xn=t.overflow,$r=e),e=Wd(e,r.children),e.flags|=4096,e)}function Op(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ec(t.return,e,n)}function Cu(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Hy(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(gt(t,e,r.children,n),r=Pe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Op(t,n,e);else if(t.tag===19)Op(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Te(Pe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ya(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Cu(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ya(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Cu(e,!0,n,null,s);break;case"together":Cu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function xa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Pn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),qr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=ar(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ar(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function FE(t,e,n){switch(e.tag){case 3:Wy(e),Ni();break;case 5:vy(e);break;case 1:Rt(e.type)&&Wa(e);break;case 4:Od(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Te(Ga,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Te(Pe,Pe.current&1),e.flags|=128,null):n&e.child.childLanes?qy(t,e,n):(Te(Pe,Pe.current&1),t=Pn(t,e,n),t!==null?t.sibling:null);Te(Pe,Pe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Hy(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Te(Pe,Pe.current),r)break;return null;case 22:case 23:return e.lanes=0,zy(t,e,n)}return Pn(t,e,n)}var Gy,kc,Ky,Qy;Gy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};kc=function(){};Ky=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Lr(pn.current);var s=null;switch(n){case"input":i=Xu(t,i),r=Xu(t,r),s=[];break;case"select":i=Ne({},i,{value:void 0}),r=Ne({},r,{value:void 0}),s=[];break;case"textarea":i=ec(t,i),r=ec(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=za)}nc(n,r);var o;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var l=i[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Hs.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var u=r[d];if(l=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Hs.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Se("scroll",t),s||l===u||(s=[])):(s=s||[]).push(d,u))}n&&(s=s||[]).push("style",n);var d=s;(e.updateQueue=d)&&(e.flags|=4)}};Qy=function(t,e,n,r){n!==r&&(e.flags|=4)};function ws(t,e){if(!Ce)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function lt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function BE(t,e,n){var r=e.pendingProps;switch(kd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(e),null;case 1:return Rt(e.type)&&$a(),lt(e),null;case 3:return r=e.stateNode,Vi(),Ae(At),Ae(ft),Md(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ia(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,en!==null&&(jc(en),en=null))),kc(t,e),lt(e),null;case 5:jd(e);var i=Lr(io.current);if(n=e.type,t!==null&&e.stateNode!=null)Ky(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return lt(e),null}if(t=Lr(pn.current),ia(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[dn]=e,r[no]=s,t=(e.mode&1)!==0,n){case"dialog":Se("cancel",r),Se("close",r);break;case"iframe":case"object":case"embed":Se("load",r);break;case"video":case"audio":for(i=0;i<Rs.length;i++)Se(Rs[i],r);break;case"source":Se("error",r);break;case"img":case"image":case"link":Se("error",r),Se("load",r);break;case"details":Se("toggle",r);break;case"input":qf(r,s),Se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Se("invalid",r);break;case"textarea":Gf(r,s),Se("invalid",r)}nc(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&ra(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&ra(r.textContent,l,t),i=["children",""+l]):Hs.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Se("scroll",r)}switch(n){case"input":Qo(r),Hf(r,s,!0);break;case"textarea":Qo(r),Kf(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=za)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ig(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[dn]=e,t[no]=r,Gy(t,e,!1,!1),e.stateNode=t;e:{switch(o=rc(n,r),n){case"dialog":Se("cancel",t),Se("close",t),i=r;break;case"iframe":case"object":case"embed":Se("load",t),i=r;break;case"video":case"audio":for(i=0;i<Rs.length;i++)Se(Rs[i],t);i=r;break;case"source":Se("error",t),i=r;break;case"img":case"image":case"link":Se("error",t),Se("load",t),i=r;break;case"details":Se("toggle",t),i=r;break;case"input":qf(t,r),i=Xu(t,r),Se("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ne({},r,{value:void 0}),Se("invalid",t);break;case"textarea":Gf(t,r),i=ec(t,r),Se("invalid",t);break;default:i=r}nc(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?Ag(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Sg(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Gs(t,u):typeof u=="number"&&Gs(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Hs.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Se("scroll",t):u!=null&&pd(t,s,u,o))}switch(n){case"input":Qo(t),Hf(t,r,!1);break;case"textarea":Qo(t),Kf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+fr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ii(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ii(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=za)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return lt(e),null;case 6:if(t&&e.stateNode!=null)Qy(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=Lr(io.current),Lr(pn.current),ia(e)){if(r=e.stateNode,n=e.memoizedProps,r[dn]=e,(s=r.nodeValue!==n)&&(t=Mt,t!==null))switch(t.tag){case 3:ra(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ra(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[dn]=e,e.stateNode=r}return lt(e),null;case 13:if(Ae(Pe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ce&&Lt!==null&&e.mode&1&&!(e.flags&128))fy(),Ni(),e.flags|=98560,s=!1;else if(s=ia(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(z(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(z(317));s[dn]=e}else Ni(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;lt(e),s=!1}else en!==null&&(jc(en),en=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Pe.current&1?We===0&&(We=3):Yd())),e.updateQueue!==null&&(e.flags|=4),lt(e),null);case 4:return Vi(),kc(t,e),t===null&&eo(e.stateNode.containerInfo),lt(e),null;case 10:return bd(e.type._context),lt(e),null;case 17:return Rt(e.type)&&$a(),lt(e),null;case 19:if(Ae(Pe),s=e.memoizedState,s===null)return lt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ws(s,!1);else{if(We!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ya(t),o!==null){for(e.flags|=128,ws(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Te(Pe,Pe.current&1|2),e.child}t=t.sibling}s.tail!==null&&Fe()>Oi&&(e.flags|=128,r=!0,ws(s,!1),e.lanes=4194304)}else{if(!r)if(t=Ya(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ws(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ce)return lt(e),null}else 2*Fe()-s.renderingStartTime>Oi&&n!==1073741824&&(e.flags|=128,r=!0,ws(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Fe(),e.sibling=null,n=Pe.current,Te(Pe,r?n&1|2:n&1),e):(lt(e),null);case 22:case 23:return Qd(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Vt&1073741824&&(lt(e),e.subtreeFlags&6&&(e.flags|=8192)):lt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function UE(t,e){switch(kd(e),e.tag){case 1:return Rt(e.type)&&$a(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Vi(),Ae(At),Ae(ft),Md(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return jd(e),null;case 13:if(Ae(Pe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));Ni()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ae(Pe),null;case 4:return Vi(),null;case 10:return bd(e.type._context),null;case 22:case 23:return Qd(),null;case 24:return null;default:return null}}var aa=!1,dt=!1,zE=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Ei(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Le(t,e,r)}else n.current=null}function Pc(t,e,n){try{n()}catch(r){Le(t,e,r)}}var jp=!1;function $E(t,e){if(fc=Fa,t=ey(),Rd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,d=0,f=0,y=t,_=null;t:for(;;){for(var R;y!==n||i!==0&&y.nodeType!==3||(l=o+i),y!==s||r!==0&&y.nodeType!==3||(u=o+r),y.nodeType===3&&(o+=y.nodeValue.length),(R=y.firstChild)!==null;)_=y,y=R;for(;;){if(y===t)break t;if(_===n&&++d===i&&(l=o),_===s&&++f===r&&(u=o),(R=y.nextSibling)!==null)break;y=_,_=y.parentNode}y=R}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(pc={focusedElem:t,selectionRange:n},Fa=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var N=P.memoizedProps,V=P.memoizedState,x=e.stateNode,w=x.getSnapshotBeforeUpdate(e.elementType===e.type?N:Jt(e.type,N),V);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(b){Le(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return P=jp,jp=!1,P}function Ms(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Pc(e,n,s)}i=i.next}while(i!==r)}}function Il(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Dc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Yy(t){var e=t.alternate;e!==null&&(t.alternate=null,Yy(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[dn],delete e[no],delete e[yc],delete e[xE],delete e[AE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Xy(t){return t.tag===5||t.tag===3||t.tag===4}function Mp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Xy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Nc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=za));else if(r!==4&&(t=t.child,t!==null))for(Nc(t,e,n),t=t.sibling;t!==null;)Nc(t,e,n),t=t.sibling}function bc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(bc(t,e,n),t=t.sibling;t!==null;)bc(t,e,n),t=t.sibling}var Xe=null,Zt=!1;function Wn(t,e,n){for(n=n.child;n!==null;)Jy(t,e,n),n=n.sibling}function Jy(t,e,n){if(fn&&typeof fn.onCommitFiberUnmount=="function")try{fn.onCommitFiberUnmount(ml,n)}catch{}switch(n.tag){case 5:dt||Ei(n,e);case 6:var r=Xe,i=Zt;Xe=null,Wn(t,e,n),Xe=r,Zt=i,Xe!==null&&(Zt?(t=Xe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Xe.removeChild(n.stateNode));break;case 18:Xe!==null&&(Zt?(t=Xe,n=n.stateNode,t.nodeType===8?Eu(t.parentNode,n):t.nodeType===1&&Eu(t,n),Xs(t)):Eu(Xe,n.stateNode));break;case 4:r=Xe,i=Zt,Xe=n.stateNode.containerInfo,Zt=!0,Wn(t,e,n),Xe=r,Zt=i;break;case 0:case 11:case 14:case 15:if(!dt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Pc(n,e,o),i=i.next}while(i!==r)}Wn(t,e,n);break;case 1:if(!dt&&(Ei(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Le(n,e,l)}Wn(t,e,n);break;case 21:Wn(t,e,n);break;case 22:n.mode&1?(dt=(r=dt)||n.memoizedState!==null,Wn(t,e,n),dt=r):Wn(t,e,n);break;default:Wn(t,e,n)}}function Fp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new zE),e.forEach(function(r){var i=JE.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Yt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Xe=l.stateNode,Zt=!1;break e;case 3:Xe=l.stateNode.containerInfo,Zt=!0;break e;case 4:Xe=l.stateNode.containerInfo,Zt=!0;break e}l=l.return}if(Xe===null)throw Error(z(160));Jy(s,o,i),Xe=null,Zt=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(d){Le(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Zy(e,t),e=e.sibling}function Zy(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Yt(e,t),ln(t),r&4){try{Ms(3,t,t.return),Il(3,t)}catch(N){Le(t,t.return,N)}try{Ms(5,t,t.return)}catch(N){Le(t,t.return,N)}}break;case 1:Yt(e,t),ln(t),r&512&&n!==null&&Ei(n,n.return);break;case 5:if(Yt(e,t),ln(t),r&512&&n!==null&&Ei(n,n.return),t.flags&32){var i=t.stateNode;try{Gs(i,"")}catch(N){Le(t,t.return,N)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Eg(i,s),rc(l,o);var d=rc(l,s);for(o=0;o<u.length;o+=2){var f=u[o],y=u[o+1];f==="style"?Ag(i,y):f==="dangerouslySetInnerHTML"?Sg(i,y):f==="children"?Gs(i,y):pd(i,f,y,d)}switch(l){case"input":Ju(i,s);break;case"textarea":Tg(i,s);break;case"select":var _=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var R=s.value;R!=null?Ii(i,!!s.multiple,R,!1):_!==!!s.multiple&&(s.defaultValue!=null?Ii(i,!!s.multiple,s.defaultValue,!0):Ii(i,!!s.multiple,s.multiple?[]:"",!1))}i[no]=s}catch(N){Le(t,t.return,N)}}break;case 6:if(Yt(e,t),ln(t),r&4){if(t.stateNode===null)throw Error(z(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(N){Le(t,t.return,N)}}break;case 3:if(Yt(e,t),ln(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Xs(e.containerInfo)}catch(N){Le(t,t.return,N)}break;case 4:Yt(e,t),ln(t);break;case 13:Yt(e,t),ln(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Gd=Fe())),r&4&&Fp(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(dt=(d=dt)||f,Yt(e,t),dt=d):Yt(e,t),ln(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(Q=t,f=t.child;f!==null;){for(y=Q=f;Q!==null;){switch(_=Q,R=_.child,_.tag){case 0:case 11:case 14:case 15:Ms(4,_,_.return);break;case 1:Ei(_,_.return);var P=_.stateNode;if(typeof P.componentWillUnmount=="function"){r=_,n=_.return;try{e=r,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(N){Le(r,n,N)}}break;case 5:Ei(_,_.return);break;case 22:if(_.memoizedState!==null){Up(y);continue}}R!==null?(R.return=_,Q=R):Up(y)}f=f.sibling}e:for(f=null,y=t;;){if(y.tag===5){if(f===null){f=y;try{i=y.stateNode,d?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=y.stateNode,u=y.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=xg("display",o))}catch(N){Le(t,t.return,N)}}}else if(y.tag===6){if(f===null)try{y.stateNode.nodeValue=d?"":y.memoizedProps}catch(N){Le(t,t.return,N)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;f===y&&(f=null),y=y.return}f===y&&(f=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Yt(e,t),ln(t),r&4&&Fp(t);break;case 21:break;default:Yt(e,t),ln(t)}}function ln(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Xy(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Gs(i,""),r.flags&=-33);var s=Mp(t);bc(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Mp(t);Nc(t,l,o);break;default:throw Error(z(161))}}catch(u){Le(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function WE(t,e,n){Q=t,ev(t)}function ev(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var i=Q,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||aa;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||dt;l=aa;var d=dt;if(aa=o,(dt=u)&&!d)for(Q=i;Q!==null;)o=Q,u=o.child,o.tag===22&&o.memoizedState!==null?zp(i):u!==null?(u.return=o,Q=u):zp(i);for(;s!==null;)Q=s,ev(s),s=s.sibling;Q=i,aa=l,dt=d}Bp(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Q=s):Bp(t)}}function Bp(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:dt||Il(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!dt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Jt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Sp(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Sp(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var y=f.dehydrated;y!==null&&Xs(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}dt||e.flags&512&&Dc(e)}catch(_){Le(e,e.return,_)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function Up(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function zp(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Il(4,e)}catch(u){Le(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Le(e,i,u)}}var s=e.return;try{Dc(e)}catch(u){Le(e,s,u)}break;case 5:var o=e.return;try{Dc(e)}catch(u){Le(e,o,u)}}}catch(u){Le(e,e.return,u)}if(e===t){Q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Q=l;break}Q=e.return}}var qE=Math.ceil,Za=Vn.ReactCurrentDispatcher,qd=Vn.ReactCurrentOwner,qt=Vn.ReactCurrentBatchConfig,fe=0,Qe=null,Ue=null,et=0,Vt=0,Ti=_r(0),We=0,lo=null,qr=0,Sl=0,Hd=0,Fs=null,It=null,Gd=0,Oi=1/0,Tn=null,el=!1,Vc=null,sr=null,la=!1,Jn=null,tl=0,Bs=0,Lc=null,Aa=-1,Ra=0;function yt(){return fe&6?Fe():Aa!==-1?Aa:Aa=Fe()}function or(t){return t.mode&1?fe&2&&et!==0?et&-et:CE.transition!==null?(Ra===0&&(Ra=Mg()),Ra):(t=_e,t!==0||(t=window.event,t=t===void 0?16:qg(t.type)),t):1}function nn(t,e,n,r){if(50<Bs)throw Bs=0,Lc=null,Error(z(185));wo(t,n,r),(!(fe&2)||t!==Qe)&&(t===Qe&&(!(fe&2)&&(Sl|=n),We===4&&Qn(t,et)),Ct(t,r),n===1&&fe===0&&!(e.mode&1)&&(Oi=Fe()+500,wl&&wr()))}function Ct(t,e){var n=t.callbackNode;Cw(t,e);var r=Ma(t,t===Qe?et:0);if(r===0)n!==null&&Xf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Xf(n),e===1)t.tag===0?RE($p.bind(null,t)):cy($p.bind(null,t)),IE(function(){!(fe&6)&&wr()}),n=null;else{switch(Fg(r)){case 1:n=_d;break;case 4:n=Og;break;case 16:n=ja;break;case 536870912:n=jg;break;default:n=ja}n=lv(n,tv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function tv(t,e){if(Aa=-1,Ra=0,fe&6)throw Error(z(327));var n=t.callbackNode;if(Ci()&&t.callbackNode!==n)return null;var r=Ma(t,t===Qe?et:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=nl(t,r);else{e=r;var i=fe;fe|=2;var s=rv();(Qe!==t||et!==e)&&(Tn=null,Oi=Fe()+500,jr(t,e));do try{KE();break}catch(l){nv(t,l)}while(!0);Nd(),Za.current=s,fe=i,Ue!==null?e=0:(Qe=null,et=0,e=We)}if(e!==0){if(e===2&&(i=lc(t),i!==0&&(r=i,e=Oc(t,i))),e===1)throw n=lo,jr(t,0),Qn(t,r),Ct(t,Fe()),n;if(e===6)Qn(t,r);else{if(i=t.current.alternate,!(r&30)&&!HE(i)&&(e=nl(t,r),e===2&&(s=lc(t),s!==0&&(r=s,e=Oc(t,s))),e===1))throw n=lo,jr(t,0),Qn(t,r),Ct(t,Fe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:Dr(t,It,Tn);break;case 3:if(Qn(t,r),(r&130023424)===r&&(e=Gd+500-Fe(),10<e)){if(Ma(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){yt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=gc(Dr.bind(null,t,It,Tn),e);break}Dr(t,It,Tn);break;case 4:if(Qn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-tn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*qE(r/1960))-r,10<r){t.timeoutHandle=gc(Dr.bind(null,t,It,Tn),r);break}Dr(t,It,Tn);break;case 5:Dr(t,It,Tn);break;default:throw Error(z(329))}}}return Ct(t,Fe()),t.callbackNode===n?tv.bind(null,t):null}function Oc(t,e){var n=Fs;return t.current.memoizedState.isDehydrated&&(jr(t,e).flags|=256),t=nl(t,e),t!==2&&(e=It,It=n,e!==null&&jc(e)),t}function jc(t){It===null?It=t:It.push.apply(It,t)}function HE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!sn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Qn(t,e){for(e&=~Hd,e&=~Sl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-tn(e),r=1<<n;t[n]=-1,e&=~r}}function $p(t){if(fe&6)throw Error(z(327));Ci();var e=Ma(t,0);if(!(e&1))return Ct(t,Fe()),null;var n=nl(t,e);if(t.tag!==0&&n===2){var r=lc(t);r!==0&&(e=r,n=Oc(t,r))}if(n===1)throw n=lo,jr(t,0),Qn(t,e),Ct(t,Fe()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Dr(t,It,Tn),Ct(t,Fe()),null}function Kd(t,e){var n=fe;fe|=1;try{return t(e)}finally{fe=n,fe===0&&(Oi=Fe()+500,wl&&wr())}}function Hr(t){Jn!==null&&Jn.tag===0&&!(fe&6)&&Ci();var e=fe;fe|=1;var n=qt.transition,r=_e;try{if(qt.transition=null,_e=1,t)return t()}finally{_e=r,qt.transition=n,fe=e,!(fe&6)&&wr()}}function Qd(){Vt=Ti.current,Ae(Ti)}function jr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,TE(n)),Ue!==null)for(n=Ue.return;n!==null;){var r=n;switch(kd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&$a();break;case 3:Vi(),Ae(At),Ae(ft),Md();break;case 5:jd(r);break;case 4:Vi();break;case 13:Ae(Pe);break;case 19:Ae(Pe);break;case 10:bd(r.type._context);break;case 22:case 23:Qd()}n=n.return}if(Qe=t,Ue=t=ar(t.current,null),et=Vt=e,We=0,lo=null,Hd=Sl=qr=0,It=Fs=null,Vr!==null){for(e=0;e<Vr.length;e++)if(n=Vr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Vr=null}return t}function nv(t,e){do{var n=Ue;try{if(Nd(),Ia.current=Ja,Xa){for(var r=De.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Xa=!1}if(Wr=0,Ke=$e=De=null,js=!1,so=0,qd.current=null,n===null||n.return===null){We=1,lo=e,Ue=null;break}e:{var s=t,o=n.return,l=n,u=e;if(e=et,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=l,y=f.tag;if(!(f.mode&1)&&(y===0||y===11||y===15)){var _=f.alternate;_?(f.updateQueue=_.updateQueue,f.memoizedState=_.memoizedState,f.lanes=_.lanes):(f.updateQueue=null,f.memoizedState=null)}var R=Pp(o);if(R!==null){R.flags&=-257,Dp(R,o,l,s,e),R.mode&1&&kp(s,d,e),e=R,u=d;var P=e.updateQueue;if(P===null){var N=new Set;N.add(u),e.updateQueue=N}else P.add(u);break e}else{if(!(e&1)){kp(s,d,e),Yd();break e}u=Error(z(426))}}else if(Ce&&l.mode&1){var V=Pp(o);if(V!==null){!(V.flags&65536)&&(V.flags|=256),Dp(V,o,l,s,e),Pd(Li(u,l));break e}}s=u=Li(u,l),We!==4&&(We=2),Fs===null?Fs=[s]:Fs.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=Fy(s,u,e);Ip(s,x);break e;case 1:l=u;var w=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(sr===null||!sr.has(C)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=By(s,l,e);Ip(s,b);break e}}s=s.return}while(s!==null)}sv(n)}catch(F){e=F,Ue===n&&n!==null&&(Ue=n=n.return);continue}break}while(!0)}function rv(){var t=Za.current;return Za.current=Ja,t===null?Ja:t}function Yd(){(We===0||We===3||We===2)&&(We=4),Qe===null||!(qr&268435455)&&!(Sl&268435455)||Qn(Qe,et)}function nl(t,e){var n=fe;fe|=2;var r=rv();(Qe!==t||et!==e)&&(Tn=null,jr(t,e));do try{GE();break}catch(i){nv(t,i)}while(!0);if(Nd(),fe=n,Za.current=r,Ue!==null)throw Error(z(261));return Qe=null,et=0,We}function GE(){for(;Ue!==null;)iv(Ue)}function KE(){for(;Ue!==null&&!_w();)iv(Ue)}function iv(t){var e=av(t.alternate,t,Vt);t.memoizedProps=t.pendingProps,e===null?sv(t):Ue=e,qd.current=null}function sv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=UE(n,e),n!==null){n.flags&=32767,Ue=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{We=6,Ue=null;return}}else if(n=BE(n,e,Vt),n!==null){Ue=n;return}if(e=e.sibling,e!==null){Ue=e;return}Ue=e=t}while(e!==null);We===0&&(We=5)}function Dr(t,e,n){var r=_e,i=qt.transition;try{qt.transition=null,_e=1,QE(t,e,n,r)}finally{qt.transition=i,_e=r}return null}function QE(t,e,n,r){do Ci();while(Jn!==null);if(fe&6)throw Error(z(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(kw(t,s),t===Qe&&(Ue=Qe=null,et=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||la||(la=!0,lv(ja,function(){return Ci(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=qt.transition,qt.transition=null;var o=_e;_e=1;var l=fe;fe|=4,qd.current=null,$E(t,n),Zy(n,t),mE(pc),Fa=!!fc,pc=fc=null,t.current=n,WE(n),ww(),fe=l,_e=o,qt.transition=s}else t.current=n;if(la&&(la=!1,Jn=t,tl=i),s=t.pendingLanes,s===0&&(sr=null),Iw(n.stateNode),Ct(t,Fe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(el)throw el=!1,t=Vc,Vc=null,t;return tl&1&&t.tag!==0&&Ci(),s=t.pendingLanes,s&1?t===Lc?Bs++:(Bs=0,Lc=t):Bs=0,wr(),null}function Ci(){if(Jn!==null){var t=Fg(tl),e=qt.transition,n=_e;try{if(qt.transition=null,_e=16>t?16:t,Jn===null)var r=!1;else{if(t=Jn,Jn=null,tl=0,fe&6)throw Error(z(331));var i=fe;for(fe|=4,Q=t.current;Q!==null;){var s=Q,o=s.child;if(Q.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(Q=d;Q!==null;){var f=Q;switch(f.tag){case 0:case 11:case 15:Ms(8,f,s)}var y=f.child;if(y!==null)y.return=f,Q=y;else for(;Q!==null;){f=Q;var _=f.sibling,R=f.return;if(Yy(f),f===d){Q=null;break}if(_!==null){_.return=R,Q=_;break}Q=R}}}var P=s.alternate;if(P!==null){var N=P.child;if(N!==null){P.child=null;do{var V=N.sibling;N.sibling=null,N=V}while(N!==null)}}Q=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Q=o;else e:for(;Q!==null;){if(s=Q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ms(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,Q=x;break e}Q=s.return}}var w=t.current;for(Q=w;Q!==null;){o=Q;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,Q=C;else e:for(o=w;Q!==null;){if(l=Q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Il(9,l)}}catch(F){Le(l,l.return,F)}if(l===o){Q=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,Q=b;break e}Q=l.return}}if(fe=i,wr(),fn&&typeof fn.onPostCommitFiberRoot=="function")try{fn.onPostCommitFiberRoot(ml,t)}catch{}r=!0}return r}finally{_e=n,qt.transition=e}}return!1}function Wp(t,e,n){e=Li(n,e),e=Fy(t,e,1),t=ir(t,e,1),e=yt(),t!==null&&(wo(t,1,e),Ct(t,e))}function Le(t,e,n){if(t.tag===3)Wp(t,t,n);else for(;e!==null;){if(e.tag===3){Wp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(sr===null||!sr.has(r))){t=Li(n,t),t=By(e,t,1),e=ir(e,t,1),t=yt(),e!==null&&(wo(e,1,t),Ct(e,t));break}}e=e.return}}function YE(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=yt(),t.pingedLanes|=t.suspendedLanes&n,Qe===t&&(et&n)===n&&(We===4||We===3&&(et&130023424)===et&&500>Fe()-Gd?jr(t,0):Hd|=n),Ct(t,e)}function ov(t,e){e===0&&(t.mode&1?(e=Jo,Jo<<=1,!(Jo&130023424)&&(Jo=4194304)):e=1);var n=yt();t=kn(t,e),t!==null&&(wo(t,e,n),Ct(t,n))}function XE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ov(t,n)}function JE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),ov(t,n)}var av;av=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||At.current)xt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return xt=!1,FE(t,e,n);xt=!!(t.flags&131072)}else xt=!1,Ce&&e.flags&1048576&&dy(e,Ha,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;xa(t,e),t=e.pendingProps;var i=Di(e,ft.current);Ri(e,n),i=Bd(null,e,r,t,i,n);var s=Ud();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Rt(r)?(s=!0,Wa(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ld(e),i.updater=Tl,e.stateNode=i,i._reactInternals=e,Ic(e,r,t,n),e=Ac(null,e,r,!0,s,n)):(e.tag=0,Ce&&s&&Cd(e),gt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(xa(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=eT(r),t=Jt(r,t),i){case 0:e=xc(null,e,r,t,n);break e;case 1:e=Vp(null,e,r,t,n);break e;case 11:e=Np(null,e,r,t,n);break e;case 14:e=bp(null,e,r,Jt(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Jt(r,i),xc(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Jt(r,i),Vp(t,e,r,i,n);case 3:e:{if(Wy(e),t===null)throw Error(z(387));r=e.pendingProps,s=e.memoizedState,i=s.element,yy(t,e),Qa(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Li(Error(z(423)),e),e=Lp(t,e,r,n,i);break e}else if(r!==i){i=Li(Error(z(424)),e),e=Lp(t,e,r,n,i);break e}else for(Lt=rr(e.stateNode.containerInfo.firstChild),Mt=e,Ce=!0,en=null,n=my(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ni(),r===i){e=Pn(t,e,n);break e}gt(t,e,r,n)}e=e.child}return e;case 5:return vy(e),t===null&&wc(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,mc(r,i)?o=null:s!==null&&mc(r,s)&&(e.flags|=32),$y(t,e),gt(t,e,o,n),e.child;case 6:return t===null&&wc(e),null;case 13:return qy(t,e,n);case 4:return Od(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=bi(e,null,r,n):gt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Jt(r,i),Np(t,e,r,i,n);case 7:return gt(t,e,e.pendingProps,n),e.child;case 8:return gt(t,e,e.pendingProps.children,n),e.child;case 12:return gt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Te(Ga,r._currentValue),r._currentValue=o,s!==null)if(sn(s.value,o)){if(s.children===i.children&&!At.current){e=Pn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=An(-1,n&-n),u.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Ec(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(z(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Ec(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}gt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ri(e,n),i=Ht(i),r=r(i),e.flags|=1,gt(t,e,r,n),e.child;case 14:return r=e.type,i=Jt(r,e.pendingProps),i=Jt(r.type,i),bp(t,e,r,i,n);case 15:return Uy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Jt(r,i),xa(t,e),e.tag=1,Rt(r)?(t=!0,Wa(e)):t=!1,Ri(e,n),My(e,r,i),Ic(e,r,i,n),Ac(null,e,r,!0,t,n);case 19:return Hy(t,e,n);case 22:return zy(t,e,n)}throw Error(z(156,e.tag))};function lv(t,e){return Lg(t,e)}function ZE(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wt(t,e,n,r){return new ZE(t,e,n,r)}function Xd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function eT(t){if(typeof t=="function")return Xd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===gd)return 11;if(t===yd)return 14}return 2}function ar(t,e){var n=t.alternate;return n===null?(n=Wt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ca(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Xd(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case hi:return Mr(n.children,i,s,e);case md:o=8,i|=8;break;case Gu:return t=Wt(12,n,e,i|2),t.elementType=Gu,t.lanes=s,t;case Ku:return t=Wt(13,n,e,i),t.elementType=Ku,t.lanes=s,t;case Qu:return t=Wt(19,n,e,i),t.elementType=Qu,t.lanes=s,t;case vg:return xl(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case gg:o=10;break e;case yg:o=9;break e;case gd:o=11;break e;case yd:o=14;break e;case Hn:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=Wt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Mr(t,e,n,r){return t=Wt(7,t,r,e),t.lanes=n,t}function xl(t,e,n,r){return t=Wt(22,t,r,e),t.elementType=vg,t.lanes=n,t.stateNode={isHidden:!1},t}function ku(t,e,n){return t=Wt(6,t,null,e),t.lanes=n,t}function Pu(t,e,n){return e=Wt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function tT(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cu(0),this.expirationTimes=cu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Jd(t,e,n,r,i,s,o,l,u){return t=new tT(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Wt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ld(s),t}function nT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:di,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function uv(t){if(!t)return pr;t=t._reactInternals;e:{if(Jr(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Rt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(Rt(n))return uy(t,n,e)}return e}function cv(t,e,n,r,i,s,o,l,u){return t=Jd(n,r,!0,t,i,s,o,l,u),t.context=uv(null),n=t.current,r=yt(),i=or(n),s=An(r,i),s.callback=e??null,ir(n,s,i),t.current.lanes=i,wo(t,i,r),Ct(t,r),t}function Al(t,e,n,r){var i=e.current,s=yt(),o=or(i);return n=uv(n),e.context===null?e.context=n:e.pendingContext=n,e=An(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ir(i,e,o),t!==null&&(nn(t,i,o,s),Ta(t,i,o)),o}function rl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function qp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Zd(t,e){qp(t,e),(t=t.alternate)&&qp(t,e)}function rT(){return null}var dv=typeof reportError=="function"?reportError:function(t){console.error(t)};function eh(t){this._internalRoot=t}Rl.prototype.render=eh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Al(t,e,null,null)};Rl.prototype.unmount=eh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Hr(function(){Al(null,t,null,null)}),e[Cn]=null}};function Rl(t){this._internalRoot=t}Rl.prototype.unstable_scheduleHydration=function(t){if(t){var e=zg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Kn.length&&e!==0&&e<Kn[n].priority;n++);Kn.splice(n,0,t),n===0&&Wg(t)}};function th(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Cl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Hp(){}function iT(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var d=rl(o);s.call(d)}}var o=cv(e,r,t,0,null,!1,!1,"",Hp);return t._reactRootContainer=o,t[Cn]=o.current,eo(t.nodeType===8?t.parentNode:t),Hr(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var d=rl(u);l.call(d)}}var u=Jd(t,0,!1,null,null,!1,!1,"",Hp);return t._reactRootContainer=u,t[Cn]=u.current,eo(t.nodeType===8?t.parentNode:t),Hr(function(){Al(e,u,n,r)}),u}function kl(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var u=rl(o);l.call(u)}}Al(e,o,t,i)}else o=iT(n,e,t,i,r);return rl(o)}Bg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=As(e.pendingLanes);n!==0&&(wd(e,n|1),Ct(e,Fe()),!(fe&6)&&(Oi=Fe()+500,wr()))}break;case 13:Hr(function(){var r=kn(t,1);if(r!==null){var i=yt();nn(r,t,1,i)}}),Zd(t,1)}};Ed=function(t){if(t.tag===13){var e=kn(t,134217728);if(e!==null){var n=yt();nn(e,t,134217728,n)}Zd(t,134217728)}};Ug=function(t){if(t.tag===13){var e=or(t),n=kn(t,e);if(n!==null){var r=yt();nn(n,t,e,r)}Zd(t,e)}};zg=function(){return _e};$g=function(t,e){var n=_e;try{return _e=t,e()}finally{_e=n}};sc=function(t,e,n){switch(e){case"input":if(Ju(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=_l(r);if(!i)throw Error(z(90));wg(r),Ju(r,i)}}}break;case"textarea":Tg(t,n);break;case"select":e=n.value,e!=null&&Ii(t,!!n.multiple,e,!1)}};kg=Kd;Pg=Hr;var sT={usingClientEntryPoint:!1,Events:[To,gi,_l,Rg,Cg,Kd]},Es={findFiberByHostInstance:br,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},oT={bundleType:Es.bundleType,version:Es.version,rendererPackageName:Es.rendererPackageName,rendererConfig:Es.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=bg(t),t===null?null:t.stateNode},findFiberByHostInstance:Es.findFiberByHostInstance||rT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ua=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ua.isDisabled&&ua.supportsFiber)try{ml=ua.inject(oT),fn=ua}catch{}}Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sT;Bt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!th(e))throw Error(z(200));return nT(t,e,null,n)};Bt.createRoot=function(t,e){if(!th(t))throw Error(z(299));var n=!1,r="",i=dv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Jd(t,1,!1,null,null,n,!1,r,i),t[Cn]=e.current,eo(t.nodeType===8?t.parentNode:t),new eh(e)};Bt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=bg(e),t=t===null?null:t.stateNode,t};Bt.flushSync=function(t){return Hr(t)};Bt.hydrate=function(t,e,n){if(!Cl(e))throw Error(z(200));return kl(null,t,e,!0,n)};Bt.hydrateRoot=function(t,e,n){if(!th(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=dv;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=cv(e,null,t,1,n??null,i,!1,s,o),t[Cn]=e.current,eo(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Rl(e)};Bt.render=function(t,e,n){if(!Cl(e))throw Error(z(200));return kl(null,t,e,!1,n)};Bt.unmountComponentAtNode=function(t){if(!Cl(t))throw Error(z(40));return t._reactRootContainer?(Hr(function(){kl(null,null,t,!1,function(){t._reactRootContainer=null,t[Cn]=null})}),!0):!1};Bt.unstable_batchedUpdates=Kd;Bt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Cl(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return kl(t,e,n,!1,r)};Bt.version="18.3.1-next-f1338f8080-20240426";function hv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hv)}catch(t){console.error(t)}}hv(),hg.exports=Bt;var aT=hg.exports,Gp=aT;qu.createRoot=Gp.createRoot,qu.hydrateRoot=Gp.hydrateRoot;var Kp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},lT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},pv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,f=s>>2,y=(s&3)<<4|l>>4;let _=(l&15)<<2|d>>6,R=d&63;u||(R=64,o||(_=64)),r.push(n[f],n[y],n[_],n[R])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(fv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):lT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const y=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||d==null||y==null)throw new uT;const _=s<<2|l>>4;if(r.push(_),d!==64){const R=l<<4&240|d>>2;if(r.push(R),y!==64){const P=d<<6&192|y;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class uT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cT=function(t){const e=fv(t);return pv.encodeByteArray(e,!0)},il=function(t){return cT(t).replace(/\./g,"")},dT=function(t){try{return pv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT=()=>hT().__FIREBASE_DEFAULTS__,pT=()=>{if(typeof process>"u"||typeof Kp>"u")return;const t=Kp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},mT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&dT(t[1]);return e&&JSON.parse(e)},nh=()=>{try{return fT()||pT()||mT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},gT=t=>{var e,n;return(n=(e=nh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},mv=t=>{const e=gT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},gv=()=>{var t;return(t=nh())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[il(JSON.stringify(n)),il(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _T(){var t;const e=(t=nh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wT(){return!_T()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ET(){try{return typeof indexedDB=="object"}catch{return!1}}function TT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT="FirebaseError";class Zr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=IT,Object.setPrototypeOf(this,Zr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vv.prototype.create)}}class vv{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?ST(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new Zr(i,l,r)}}function ST(t,e){return t.replace(xT,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const xT=/\{\$([^}]+)}/g;function Mc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Qp(s)&&Qp(o)){if(!Mc(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Qp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(t){return t&&t._delegate?t._delegate:t}class ji{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new yT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(CT(e))try{this.getOrInitializeService({instanceIdentifier:Nr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Nr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Nr){return this.instances.has(e)}getOptions(e=Nr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:RT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Nr){return this.component?this.component.multipleInstances?e:Nr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function RT(t){return t===Nr?void 0:t}function CT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new AT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var he;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(he||(he={}));const PT={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},DT=he.INFO,NT={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},bT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=NT[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _v{constructor(e){this.name=e,this._logLevel=DT,this._logHandler=bT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?PT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...e),this._logHandler(this,he.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...e),this._logHandler(this,he.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,he.INFO,...e),this._logHandler(this,he.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,he.WARN,...e),this._logHandler(this,he.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...e),this._logHandler(this,he.ERROR,...e)}}const VT=(t,e)=>e.some(n=>t instanceof n);let Yp,Xp;function LT(){return Yp||(Yp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OT(){return Xp||(Xp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const wv=new WeakMap,Fc=new WeakMap,Ev=new WeakMap,Du=new WeakMap,rh=new WeakMap;function jT(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(lr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&wv.set(n,t)}).catch(()=>{}),rh.set(e,t),e}function MT(t){if(Fc.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Fc.set(t,e)}let Bc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Fc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ev.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return lr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function FT(t){Bc=t(Bc)}function BT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Nu(this),e,...n);return Ev.set(r,e.sort?e.sort():[e]),lr(r)}:OT().includes(t)?function(...e){return t.apply(Nu(this),e),lr(wv.get(this))}:function(...e){return lr(t.apply(Nu(this),e))}}function UT(t){return typeof t=="function"?BT(t):(t instanceof IDBTransaction&&MT(t),VT(t,LT())?new Proxy(t,Bc):t)}function lr(t){if(t instanceof IDBRequest)return jT(t);if(Du.has(t))return Du.get(t);const e=UT(t);return e!==t&&(Du.set(t,e),rh.set(e,t)),e}const Nu=t=>rh.get(t);function zT(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=lr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(lr(o.result),u.oldVersion,u.newVersion,lr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const $T=["get","getKey","getAll","getAllKeys","count"],WT=["put","add","delete","clear"],bu=new Map;function Jp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(bu.get(e))return bu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=WT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||$T.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),i&&u.done]))[0]};return bu.set(e,s),s}FT(t=>({...t,get:(e,n,r)=>Jp(e,n)||t.get(e,n,r),has:(e,n)=>!!Jp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(HT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function HT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Uc="@firebase/app",Zp="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dn=new _v("@firebase/app"),GT="@firebase/app-compat",KT="@firebase/analytics-compat",QT="@firebase/analytics",YT="@firebase/app-check-compat",XT="@firebase/app-check",JT="@firebase/auth",ZT="@firebase/auth-compat",e1="@firebase/database",t1="@firebase/data-connect",n1="@firebase/database-compat",r1="@firebase/functions",i1="@firebase/functions-compat",s1="@firebase/installations",o1="@firebase/installations-compat",a1="@firebase/messaging",l1="@firebase/messaging-compat",u1="@firebase/performance",c1="@firebase/performance-compat",d1="@firebase/remote-config",h1="@firebase/remote-config-compat",f1="@firebase/storage",p1="@firebase/storage-compat",m1="@firebase/firestore",g1="@firebase/vertexai-preview",y1="@firebase/firestore-compat",v1="firebase",_1="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zc="[DEFAULT]",w1={[Uc]:"fire-core",[GT]:"fire-core-compat",[QT]:"fire-analytics",[KT]:"fire-analytics-compat",[XT]:"fire-app-check",[YT]:"fire-app-check-compat",[JT]:"fire-auth",[ZT]:"fire-auth-compat",[e1]:"fire-rtdb",[t1]:"fire-data-connect",[n1]:"fire-rtdb-compat",[r1]:"fire-fn",[i1]:"fire-fn-compat",[s1]:"fire-iid",[o1]:"fire-iid-compat",[a1]:"fire-fcm",[l1]:"fire-fcm-compat",[u1]:"fire-perf",[c1]:"fire-perf-compat",[d1]:"fire-rc",[h1]:"fire-rc-compat",[f1]:"fire-gcs",[p1]:"fire-gcs-compat",[m1]:"fire-fst",[y1]:"fire-fst-compat",[g1]:"fire-vertex","fire-js":"fire-js",[v1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl=new Map,E1=new Map,$c=new Map;function em(t,e){try{t.container.addComponent(e)}catch(n){Dn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function uo(t){const e=t.name;if($c.has(e))return Dn.debug(`There were multiple attempts to register component ${e}.`),!1;$c.set(e,t);for(const n of sl.values())em(n,t);for(const n of E1.values())em(n,t);return!0}function Tv(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ur=new vv("app","Firebase",T1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ji("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ur.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv=_1;function Sv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:zc,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ur.create("bad-app-name",{appName:String(i)});if(n||(n=gv()),!n)throw ur.create("no-options");const s=sl.get(i);if(s){if(Mc(n,s.options)&&Mc(r,s.config))return s;throw ur.create("duplicate-app",{appName:i})}const o=new kT(i);for(const u of $c.values())o.addComponent(u);const l=new I1(n,r,o);return sl.set(i,l),l}function xv(t=zc){const e=sl.get(t);if(!e&&t===zc&&gv())return Sv();if(!e)throw ur.create("no-app",{appName:t});return e}function cr(t,e,n){var r;let i=(r=w1[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Dn.warn(l.join(" "));return}uo(new ji(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1="firebase-heartbeat-database",x1=1,co="firebase-heartbeat-store";let Vu=null;function Av(){return Vu||(Vu=zT(S1,x1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(co)}catch(n){console.warn(n)}}}}).catch(t=>{throw ur.create("idb-open",{originalErrorMessage:t.message})})),Vu}async function A1(t){try{const n=(await Av()).transaction(co),r=await n.objectStore(co).get(Rv(t));return await n.done,r}catch(e){if(e instanceof Zr)Dn.warn(e.message);else{const n=ur.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Dn.warn(n.message)}}}async function tm(t,e){try{const r=(await Av()).transaction(co,"readwrite");await r.objectStore(co).put(e,Rv(t)),await r.done}catch(n){if(n instanceof Zr)Dn.warn(n.message);else{const r=ur.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Dn.warn(r.message)}}}function Rv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1=1024,C1=30*24*60*60*1e3;class k1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new D1(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=nm();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=C1}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Dn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=nm(),{heartbeatsToSend:r,unsentEntries:i}=P1(this._heartbeatsCache.heartbeats),s=il(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Dn.warn(n),""}}}function nm(){return new Date().toISOString().substring(0,10)}function P1(t,e=R1){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),rm(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),rm(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class D1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ET()?TT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await A1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return tm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return tm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function rm(t){return il(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(t){uo(new ji("platform-logger",e=>new qT(e),"PRIVATE")),uo(new ji("heartbeat",e=>new k1(e),"PRIVATE")),cr(Uc,Zp,t),cr(Uc,Zp,"esm2017"),cr("fire-js","")}N1("");var b1="firebase",V1="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cr(b1,V1,"app");var im=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fr,Cv;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,v){function E(){}E.prototype=v.prototype,T.D=v.prototype,T.prototype=new E,T.prototype.constructor=T,T.C=function(I,S,k){for(var A=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)A[ke-2]=arguments[ke];return v.prototype[S].apply(I,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,v,E){E||(E=0);var I=Array(16);if(typeof v=="string")for(var S=0;16>S;++S)I[S]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(S=0;16>S;++S)I[S]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=T.g[0],E=T.g[1],S=T.g[2];var k=T.g[3],A=v+(k^E&(S^k))+I[0]+3614090360&4294967295;v=E+(A<<7&4294967295|A>>>25),A=k+(S^v&(E^S))+I[1]+3905402710&4294967295,k=v+(A<<12&4294967295|A>>>20),A=S+(E^k&(v^E))+I[2]+606105819&4294967295,S=k+(A<<17&4294967295|A>>>15),A=E+(v^S&(k^v))+I[3]+3250441966&4294967295,E=S+(A<<22&4294967295|A>>>10),A=v+(k^E&(S^k))+I[4]+4118548399&4294967295,v=E+(A<<7&4294967295|A>>>25),A=k+(S^v&(E^S))+I[5]+1200080426&4294967295,k=v+(A<<12&4294967295|A>>>20),A=S+(E^k&(v^E))+I[6]+2821735955&4294967295,S=k+(A<<17&4294967295|A>>>15),A=E+(v^S&(k^v))+I[7]+4249261313&4294967295,E=S+(A<<22&4294967295|A>>>10),A=v+(k^E&(S^k))+I[8]+1770035416&4294967295,v=E+(A<<7&4294967295|A>>>25),A=k+(S^v&(E^S))+I[9]+2336552879&4294967295,k=v+(A<<12&4294967295|A>>>20),A=S+(E^k&(v^E))+I[10]+4294925233&4294967295,S=k+(A<<17&4294967295|A>>>15),A=E+(v^S&(k^v))+I[11]+2304563134&4294967295,E=S+(A<<22&4294967295|A>>>10),A=v+(k^E&(S^k))+I[12]+1804603682&4294967295,v=E+(A<<7&4294967295|A>>>25),A=k+(S^v&(E^S))+I[13]+4254626195&4294967295,k=v+(A<<12&4294967295|A>>>20),A=S+(E^k&(v^E))+I[14]+2792965006&4294967295,S=k+(A<<17&4294967295|A>>>15),A=E+(v^S&(k^v))+I[15]+1236535329&4294967295,E=S+(A<<22&4294967295|A>>>10),A=v+(S^k&(E^S))+I[1]+4129170786&4294967295,v=E+(A<<5&4294967295|A>>>27),A=k+(E^S&(v^E))+I[6]+3225465664&4294967295,k=v+(A<<9&4294967295|A>>>23),A=S+(v^E&(k^v))+I[11]+643717713&4294967295,S=k+(A<<14&4294967295|A>>>18),A=E+(k^v&(S^k))+I[0]+3921069994&4294967295,E=S+(A<<20&4294967295|A>>>12),A=v+(S^k&(E^S))+I[5]+3593408605&4294967295,v=E+(A<<5&4294967295|A>>>27),A=k+(E^S&(v^E))+I[10]+38016083&4294967295,k=v+(A<<9&4294967295|A>>>23),A=S+(v^E&(k^v))+I[15]+3634488961&4294967295,S=k+(A<<14&4294967295|A>>>18),A=E+(k^v&(S^k))+I[4]+3889429448&4294967295,E=S+(A<<20&4294967295|A>>>12),A=v+(S^k&(E^S))+I[9]+568446438&4294967295,v=E+(A<<5&4294967295|A>>>27),A=k+(E^S&(v^E))+I[14]+3275163606&4294967295,k=v+(A<<9&4294967295|A>>>23),A=S+(v^E&(k^v))+I[3]+4107603335&4294967295,S=k+(A<<14&4294967295|A>>>18),A=E+(k^v&(S^k))+I[8]+1163531501&4294967295,E=S+(A<<20&4294967295|A>>>12),A=v+(S^k&(E^S))+I[13]+2850285829&4294967295,v=E+(A<<5&4294967295|A>>>27),A=k+(E^S&(v^E))+I[2]+4243563512&4294967295,k=v+(A<<9&4294967295|A>>>23),A=S+(v^E&(k^v))+I[7]+1735328473&4294967295,S=k+(A<<14&4294967295|A>>>18),A=E+(k^v&(S^k))+I[12]+2368359562&4294967295,E=S+(A<<20&4294967295|A>>>12),A=v+(E^S^k)+I[5]+4294588738&4294967295,v=E+(A<<4&4294967295|A>>>28),A=k+(v^E^S)+I[8]+2272392833&4294967295,k=v+(A<<11&4294967295|A>>>21),A=S+(k^v^E)+I[11]+1839030562&4294967295,S=k+(A<<16&4294967295|A>>>16),A=E+(S^k^v)+I[14]+4259657740&4294967295,E=S+(A<<23&4294967295|A>>>9),A=v+(E^S^k)+I[1]+2763975236&4294967295,v=E+(A<<4&4294967295|A>>>28),A=k+(v^E^S)+I[4]+1272893353&4294967295,k=v+(A<<11&4294967295|A>>>21),A=S+(k^v^E)+I[7]+4139469664&4294967295,S=k+(A<<16&4294967295|A>>>16),A=E+(S^k^v)+I[10]+3200236656&4294967295,E=S+(A<<23&4294967295|A>>>9),A=v+(E^S^k)+I[13]+681279174&4294967295,v=E+(A<<4&4294967295|A>>>28),A=k+(v^E^S)+I[0]+3936430074&4294967295,k=v+(A<<11&4294967295|A>>>21),A=S+(k^v^E)+I[3]+3572445317&4294967295,S=k+(A<<16&4294967295|A>>>16),A=E+(S^k^v)+I[6]+76029189&4294967295,E=S+(A<<23&4294967295|A>>>9),A=v+(E^S^k)+I[9]+3654602809&4294967295,v=E+(A<<4&4294967295|A>>>28),A=k+(v^E^S)+I[12]+3873151461&4294967295,k=v+(A<<11&4294967295|A>>>21),A=S+(k^v^E)+I[15]+530742520&4294967295,S=k+(A<<16&4294967295|A>>>16),A=E+(S^k^v)+I[2]+3299628645&4294967295,E=S+(A<<23&4294967295|A>>>9),A=v+(S^(E|~k))+I[0]+4096336452&4294967295,v=E+(A<<6&4294967295|A>>>26),A=k+(E^(v|~S))+I[7]+1126891415&4294967295,k=v+(A<<10&4294967295|A>>>22),A=S+(v^(k|~E))+I[14]+2878612391&4294967295,S=k+(A<<15&4294967295|A>>>17),A=E+(k^(S|~v))+I[5]+4237533241&4294967295,E=S+(A<<21&4294967295|A>>>11),A=v+(S^(E|~k))+I[12]+1700485571&4294967295,v=E+(A<<6&4294967295|A>>>26),A=k+(E^(v|~S))+I[3]+2399980690&4294967295,k=v+(A<<10&4294967295|A>>>22),A=S+(v^(k|~E))+I[10]+4293915773&4294967295,S=k+(A<<15&4294967295|A>>>17),A=E+(k^(S|~v))+I[1]+2240044497&4294967295,E=S+(A<<21&4294967295|A>>>11),A=v+(S^(E|~k))+I[8]+1873313359&4294967295,v=E+(A<<6&4294967295|A>>>26),A=k+(E^(v|~S))+I[15]+4264355552&4294967295,k=v+(A<<10&4294967295|A>>>22),A=S+(v^(k|~E))+I[6]+2734768916&4294967295,S=k+(A<<15&4294967295|A>>>17),A=E+(k^(S|~v))+I[13]+1309151649&4294967295,E=S+(A<<21&4294967295|A>>>11),A=v+(S^(E|~k))+I[4]+4149444226&4294967295,v=E+(A<<6&4294967295|A>>>26),A=k+(E^(v|~S))+I[11]+3174756917&4294967295,k=v+(A<<10&4294967295|A>>>22),A=S+(v^(k|~E))+I[2]+718787259&4294967295,S=k+(A<<15&4294967295|A>>>17),A=E+(k^(S|~v))+I[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(S+(A<<21&4294967295|A>>>11))&4294967295,T.g[2]=T.g[2]+S&4294967295,T.g[3]=T.g[3]+k&4294967295}r.prototype.u=function(T,v){v===void 0&&(v=T.length);for(var E=v-this.blockSize,I=this.B,S=this.h,k=0;k<v;){if(S==0)for(;k<=E;)i(this,T,k),k+=this.blockSize;if(typeof T=="string"){for(;k<v;)if(I[S++]=T.charCodeAt(k++),S==this.blockSize){i(this,I),S=0;break}}else for(;k<v;)if(I[S++]=T[k++],S==this.blockSize){i(this,I),S=0;break}}this.h=S,this.o+=v},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;var E=8*this.o;for(v=T.length-8;v<T.length;++v)T[v]=E&255,E/=256;for(this.u(T),T=Array(16),v=E=0;4>v;++v)for(var I=0;32>I;I+=8)T[E++]=this.g[v]>>>I&255;return T};function s(T,v){var E=l;return Object.prototype.hasOwnProperty.call(E,T)?E[T]:E[T]=v(T)}function o(T,v){this.h=v;for(var E=[],I=!0,S=T.length-1;0<=S;S--){var k=T[S]|0;I&&k==v||(E[S]=k,I=!1)}this.g=E}var l={};function u(T){return-128<=T&&128>T?s(T,function(v){return new o([v|0],0>v?-1:0)}):new o([T|0],0>T?-1:0)}function d(T){if(isNaN(T)||!isFinite(T))return y;if(0>T)return V(d(-T));for(var v=[],E=1,I=0;T>=E;I++)v[I]=T/E|0,E*=4294967296;return new o(v,0)}function f(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return V(f(T.substring(1),v));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=d(Math.pow(v,8)),I=y,S=0;S<T.length;S+=8){var k=Math.min(8,T.length-S),A=parseInt(T.substring(S,S+k),v);8>k?(k=d(Math.pow(v,k)),I=I.j(k).add(d(A))):(I=I.j(E),I=I.add(d(A)))}return I}var y=u(0),_=u(1),R=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-V(this).m();for(var T=0,v=1,E=0;E<this.g.length;E++){var I=this.i(E);T+=(0<=I?I:4294967296+I)*v,v*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(P(this))return"0";if(N(this))return"-"+V(this).toString(T);for(var v=d(Math.pow(T,6)),E=this,I="";;){var S=b(E,v).g;E=x(E,S.j(v));var k=((0<E.g.length?E.g[0]:E.h)>>>0).toString(T);if(E=S,P(E))return k+I;for(;6>k.length;)k="0"+k;I=k+I}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function P(T){if(T.h!=0)return!1;for(var v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function N(T){return T.h==-1}t.l=function(T){return T=x(this,T),N(T)?-1:P(T)?0:1};function V(T){for(var v=T.g.length,E=[],I=0;I<v;I++)E[I]=~T.g[I];return new o(E,~T.h).add(_)}t.abs=function(){return N(this)?V(this):this},t.add=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],I=0,S=0;S<=v;S++){var k=I+(this.i(S)&65535)+(T.i(S)&65535),A=(k>>>16)+(this.i(S)>>>16)+(T.i(S)>>>16);I=A>>>16,k&=65535,A&=65535,E[S]=A<<16|k}return new o(E,E[E.length-1]&-2147483648?-1:0)};function x(T,v){return T.add(V(v))}t.j=function(T){if(P(this)||P(T))return y;if(N(this))return N(T)?V(this).j(V(T)):V(V(this).j(T));if(N(T))return V(this.j(V(T)));if(0>this.l(R)&&0>T.l(R))return d(this.m()*T.m());for(var v=this.g.length+T.g.length,E=[],I=0;I<2*v;I++)E[I]=0;for(I=0;I<this.g.length;I++)for(var S=0;S<T.g.length;S++){var k=this.i(I)>>>16,A=this.i(I)&65535,ke=T.i(S)>>>16,it=T.i(S)&65535;E[2*I+2*S]+=A*it,w(E,2*I+2*S),E[2*I+2*S+1]+=k*it,w(E,2*I+2*S+1),E[2*I+2*S+1]+=A*ke,w(E,2*I+2*S+1),E[2*I+2*S+2]+=k*ke,w(E,2*I+2*S+2)}for(I=0;I<v;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=v;I<2*v;I++)E[I]=0;return new o(E,0)};function w(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function C(T,v){this.g=T,this.h=v}function b(T,v){if(P(v))throw Error("division by zero");if(P(T))return new C(y,y);if(N(T))return v=b(V(T),v),new C(V(v.g),V(v.h));if(N(v))return v=b(T,V(v)),new C(V(v.g),v.h);if(30<T.g.length){if(N(T)||N(v))throw Error("slowDivide_ only works with positive integers.");for(var E=_,I=v;0>=I.l(T);)E=F(E),I=F(I);var S=$(E,1),k=$(I,1);for(I=$(I,2),E=$(E,2);!P(I);){var A=k.add(I);0>=A.l(T)&&(S=S.add(E),k=A),I=$(I,1),E=$(E,1)}return v=x(T,S.j(v)),new C(S,v)}for(S=y;0<=T.l(v);){for(E=Math.max(1,Math.floor(T.m()/v.m())),I=Math.ceil(Math.log(E)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),k=d(E),A=k.j(v);N(A)||0<A.l(T);)E-=I,k=d(E),A=k.j(v);P(k)&&(k=_),S=S.add(k),T=x(T,A)}return new C(S,T)}t.A=function(T){return b(this,T).h},t.and=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)&T.i(I);return new o(E,this.h&T.h)},t.or=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)|T.i(I);return new o(E,this.h|T.h)},t.xor=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)^T.i(I);return new o(E,this.h^T.h)};function F(T){for(var v=T.g.length+1,E=[],I=0;I<v;I++)E[I]=T.i(I)<<1|T.i(I-1)>>>31;return new o(E,T.h)}function $(T,v){var E=v>>5;v%=32;for(var I=T.g.length-E,S=[],k=0;k<I;k++)S[k]=0<v?T.i(k+E)>>>v|T.i(k+E+1)<<32-v:T.i(k+E);return new o(S,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Cv=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Fr=o}).apply(typeof im<"u"?im:typeof self<"u"?self:typeof window<"u"?window:{});var ca=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kv,Cs,Pv,ka,Wc,Dv,Nv,bv;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,c,h){return a==Array.prototype||a==Object.prototype||(a[c]=h.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof ca=="object"&&ca];for(var c=0;c<a.length;++c){var h=a[c];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function i(a,c){if(c)e:{var h=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var D=a[g];if(!(D in h))break e;h=h[D]}a=a[a.length-1],g=h[a],c=c(g),c!=g&&c!=null&&e(h,a,{configurable:!0,writable:!0,value:c})}}function s(a,c){a instanceof String&&(a+="");var h=0,g=!1,D={next:function(){if(!g&&h<a.length){var L=h++;return{value:c(L,a[L]),done:!1}}return g=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(a){return a||function(){return s(this,function(c,h){return h})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var c=typeof a;return c=c!="object"?c:a?Array.isArray(a)?"array":c:"null",c=="array"||c=="object"&&typeof a.length=="number"}function d(a){var c=typeof a;return c=="object"&&a!=null||c=="function"}function f(a,c,h){return a.call.apply(a.bind,arguments)}function y(a,c,h){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,g),a.apply(c,D)}}return function(){return a.apply(c,arguments)}}function _(a,c,h){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:y,_.apply(null,arguments)}function R(a,c){var h=Array.prototype.slice.call(arguments,1);return function(){var g=h.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function P(a,c){function h(){}h.prototype=c.prototype,a.aa=c.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(g,D,L){for(var H=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)H[Ee-2]=arguments[Ee];return c.prototype[D].apply(g,H)}}function N(a){const c=a.length;if(0<c){const h=Array(c);for(let g=0;g<c;g++)h[g]=a[g];return h}return[]}function V(a,c){for(let h=1;h<arguments.length;h++){const g=arguments[h];if(u(g)){const D=a.length||0,L=g.length||0;a.length=D+L;for(let H=0;H<L;H++)a[D+H]=g[H]}else a.push(g)}}class x{constructor(c,h){this.i=c,this.j=h,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function w(a){return/^[\s\xa0]*$/.test(a)}function C(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function b(a){return b[" "](a),a}b[" "]=function(){};var F=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function $(a,c,h){for(const g in a)c.call(h,a[g],g,a)}function T(a,c){for(const h in a)c.call(void 0,a[h],h,a)}function v(a){const c={};for(const h in a)c[h]=a[h];return c}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(a,c){let h,g;for(let D=1;D<arguments.length;D++){g=arguments[D];for(h in g)a[h]=g[h];for(let L=0;L<E.length;L++)h=E[L],Object.prototype.hasOwnProperty.call(g,h)&&(a[h]=g[h])}}function S(a){var c=1;a=a.split(":");const h=[];for(;0<c&&a.length;)h.push(a.shift()),c--;return a.length&&h.push(a.join(":")),h}function k(a){l.setTimeout(()=>{throw a},0)}function A(){var a=K;let c=null;return a.g&&(c=a.g,a.g=a.g.next,a.g||(a.h=null),c.next=null),c}class ke{constructor(){this.h=this.g=null}add(c,h){const g=it.get();g.set(c,h),this.h?this.h.next=g:this.g=g,this.h=g}}var it=new x(()=>new Pt,a=>a.reset());class Pt{constructor(){this.next=this.g=this.h=null}set(c,h){this.h=c,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let He,G=!1,K=new ke,q=()=>{const a=l.Promise.resolve(void 0);He=()=>{a.then(se)}};var se=()=>{for(var a;a=A();){try{a.h.call(a.g)}catch(h){k(h)}var c=it;c.j(a),100>c.h&&(c.h++,a.next=c.g,c.g=a)}G=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function oe(a,c){this.type=a,this.g=this.target=c,this.defaultPrevented=!1}oe.prototype.h=function(){this.defaultPrevented=!0};var ae=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,c=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const h=()=>{};l.addEventListener("test",h,c),l.removeEventListener("test",h,c)}catch{}return a}();function Dt(a,c){if(oe.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=c,c=a.relatedTarget){if(F){e:{try{b(c.nodeName);var D=!0;break e}catch{}D=!1}D||(c=null)}}else h=="mouseover"?c=a.fromElement:h=="mouseout"&&(c=a.toElement);this.relatedTarget=c,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Et[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Dt.aa.h.call(this)}}P(Dt,oe);var Et={2:"touch",3:"pen",4:"mouse"};Dt.prototype.h=function(){Dt.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Nt="closure_listenable_"+(1e6*Math.random()|0),Zi=0;function es(a,c,h,g,D){this.listener=a,this.proxy=null,this.src=c,this.type=h,this.capture=!!g,this.ha=D,this.key=++Zi,this.da=this.fa=!1}function Ln(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function On(a){this.src=a,this.g={},this.h=0}On.prototype.add=function(a,c,h,g,D){var L=a.toString();a=this.g[L],a||(a=this.g[L]=[],this.h++);var H=jn(a,c,g,D);return-1<H?(c=a[H],h||(c.fa=!1)):(c=new es(c,this.src,L,!!g,D),c.fa=h,a.push(c)),c};function Tr(a,c){var h=c.type;if(h in a.g){var g=a.g[h],D=Array.prototype.indexOf.call(g,c,void 0),L;(L=0<=D)&&Array.prototype.splice.call(g,D,1),L&&(Ln(c),a.g[h].length==0&&(delete a.g[h],a.h--))}}function jn(a,c,h,g){for(var D=0;D<a.length;++D){var L=a[D];if(!L.da&&L.listener==c&&L.capture==!!h&&L.ha==g)return D}return-1}var Ir="closure_lm_"+(1e6*Math.random()|0),Mn={};function Sr(a,c,h,g,D){if(Array.isArray(c)){for(var L=0;L<c.length;L++)Sr(a,c[L],h,g,D);return null}return h=ve(h),a&&a[Nt]?a.K(c,h,d(g)?!!g.capture:!1,D):ts(a,c,h,!1,g,D)}function ts(a,c,h,g,D,L){if(!c)throw Error("Invalid event type");var H=d(D)?!!D.capture:!!D,Ee=Z(a);if(Ee||(a[Ir]=Ee=new On(a)),h=Ee.add(c,h,g,H,L),h.proxy)return h;if(g=U(),h.proxy=g,g.src=a,g.listener=h,a.addEventListener)ae||(D=H),D===void 0&&(D=!1),a.addEventListener(c.toString(),g,D);else if(a.attachEvent)a.attachEvent(B(c.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return h}function U(){function a(h){return c.call(a.src,a.listener,h)}const c=W;return a}function J(a,c,h,g,D){if(Array.isArray(c))for(var L=0;L<c.length;L++)J(a,c[L],h,g,D);else g=d(g)?!!g.capture:!!g,h=ve(h),a&&a[Nt]?(a=a.i,c=String(c).toString(),c in a.g&&(L=a.g[c],h=jn(L,h,g,D),-1<h&&(Ln(L[h]),Array.prototype.splice.call(L,h,1),L.length==0&&(delete a.g[c],a.h--)))):a&&(a=Z(a))&&(c=a.g[c.toString()],a=-1,c&&(a=jn(c,h,g,D)),(h=-1<a?c[a]:null)&&O(h))}function O(a){if(typeof a!="number"&&a&&!a.da){var c=a.src;if(c&&c[Nt])Tr(c.i,a);else{var h=a.type,g=a.proxy;c.removeEventListener?c.removeEventListener(h,g,a.capture):c.detachEvent?c.detachEvent(B(h),g):c.addListener&&c.removeListener&&c.removeListener(g),(h=Z(c))?(Tr(h,a),h.h==0&&(h.src=null,c[Ir]=null)):Ln(a)}}}function B(a){return a in Mn?Mn[a]:Mn[a]="on"+a}function W(a,c){if(a.da)a=!0;else{c=new Dt(c,this);var h=a.listener,g=a.ha||a.src;a.fa&&O(a),a=h.call(g,c)}return a}function Z(a){return a=a[Ir],a instanceof On?a:null}var pe="__closure_events_fn_"+(1e9*Math.random()>>>0);function ve(a){return typeof a=="function"?a:(a[pe]||(a[pe]=function(c){return a.handleEvent(c)}),a[pe])}function me(){le.call(this),this.i=new On(this),this.M=this,this.F=null}P(me,le),me.prototype[Nt]=!0,me.prototype.removeEventListener=function(a,c,h,g){J(this,a,c,h,g)};function Re(a,c){var h,g=a.F;if(g)for(h=[];g;g=g.F)h.push(g);if(a=a.M,g=c.type||c,typeof c=="string")c=new oe(c,a);else if(c instanceof oe)c.target=c.target||a;else{var D=c;c=new oe(g,a),I(c,D)}if(D=!0,h)for(var L=h.length-1;0<=L;L--){var H=c.g=h[L];D=Tt(H,g,!0,c)&&D}if(H=c.g=a,D=Tt(H,g,!0,c)&&D,D=Tt(H,g,!1,c)&&D,h)for(L=0;L<h.length;L++)H=c.g=h[L],D=Tt(H,g,!1,c)&&D}me.prototype.N=function(){if(me.aa.N.call(this),this.i){var a=this.i,c;for(c in a.g){for(var h=a.g[c],g=0;g<h.length;g++)Ln(h[g]);delete a.g[c],a.h--}}this.F=null},me.prototype.K=function(a,c,h,g){return this.i.add(String(a),c,!1,h,g)},me.prototype.L=function(a,c,h,g){return this.i.add(String(a),c,!0,h,g)};function Tt(a,c,h,g){if(c=a.i.g[String(c)],!c)return!0;c=c.concat();for(var D=!0,L=0;L<c.length;++L){var H=c[L];if(H&&!H.da&&H.capture==h){var Ee=H.listener,Ye=H.ha||H.src;H.fa&&Tr(a.i,H),D=Ee.call(Ye,g)!==!1&&D}}return D&&!g.defaultPrevented}function vn(a,c,h){if(typeof a=="function")h&&(a=_(a,h));else if(a&&typeof a.handleEvent=="function")a=_(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(a,c||0)}function Fn(a){a.g=vn(()=>{a.g=null,a.i&&(a.i=!1,Fn(a))},a.l);const c=a.h;a.h=null,a.m.apply(null,c)}class xr extends le{constructor(c,h){super(),this.m=c,this.l=h,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Fn(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function an(a){le.call(this),this.h=a,this.g={}}P(an,le);var Kt=[];function Bn(a){$(a.g,function(c,h){this.g.hasOwnProperty(h)&&O(c)},a),a.g={}}an.prototype.N=function(){an.aa.N.call(this),Bn(this)},an.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _n=l.JSON.stringify,Do=l.JSON.parse,c0=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Wl(){}Wl.prototype.h=null;function Gh(a){return a.h||(a.h=a.i())}function Kh(){}var ns={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ql(){oe.call(this,"d")}P(ql,oe);function Hl(){oe.call(this,"c")}P(Hl,oe);var Ar={},Qh=null;function No(){return Qh=Qh||new me}Ar.La="serverreachability";function Yh(a){oe.call(this,Ar.La,a)}P(Yh,oe);function rs(a){const c=No();Re(c,new Yh(c))}Ar.STAT_EVENT="statevent";function Xh(a,c){oe.call(this,Ar.STAT_EVENT,a),this.stat=c}P(Xh,oe);function pt(a){const c=No();Re(c,new Xh(c,a))}Ar.Ma="timingevent";function Jh(a,c){oe.call(this,Ar.Ma,a),this.size=c}P(Jh,oe);function is(a,c){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},c)}function ss(){this.g=!0}ss.prototype.xa=function(){this.g=!1};function d0(a,c,h,g,D,L){a.info(function(){if(a.g)if(L)for(var H="",Ee=L.split("&"),Ye=0;Ye<Ee.length;Ye++){var ge=Ee[Ye].split("=");if(1<ge.length){var st=ge[0];ge=ge[1];var ot=st.split("_");H=2<=ot.length&&ot[1]=="type"?H+(st+"="+ge+"&"):H+(st+"=redacted&")}}else H=null;else H=L;return"XMLHTTP REQ ("+g+") [attempt "+D+"]: "+c+`
`+h+`
`+H})}function h0(a,c,h,g,D,L,H){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+D+"]: "+c+`
`+h+`
`+L+" "+H})}function ri(a,c,h,g){a.info(function(){return"XMLHTTP TEXT ("+c+"): "+p0(a,h)+(g?" "+g:"")})}function f0(a,c){a.info(function(){return"TIMEOUT: "+c})}ss.prototype.info=function(){};function p0(a,c){if(!a.g)return c;if(!c)return null;try{var h=JSON.parse(c);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var g=h[a];if(!(2>g.length)){var D=g[1];if(Array.isArray(D)&&!(1>D.length)){var L=D[0];if(L!="noop"&&L!="stop"&&L!="close")for(var H=1;H<D.length;H++)D[H]=""}}}}return _n(h)}catch{return c}}var bo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Zh={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Gl;function Vo(){}P(Vo,Wl),Vo.prototype.g=function(){return new XMLHttpRequest},Vo.prototype.i=function(){return{}},Gl=new Vo;function Un(a,c,h,g){this.j=a,this.i=c,this.l=h,this.R=g||1,this.U=new an(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ef}function ef(){this.i=null,this.g="",this.h=!1}var tf={},Kl={};function Ql(a,c,h){a.L=1,a.v=Mo(wn(c)),a.m=h,a.P=!0,nf(a,null)}function nf(a,c){a.F=Date.now(),Lo(a),a.A=wn(a.v);var h=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),yf(h.i,"t",g),a.C=0,h=a.j.J,a.h=new ef,a.g=Lf(a.j,h?c:null,!a.m),0<a.O&&(a.M=new xr(_(a.Y,a,a.g),a.O)),c=a.U,h=a.g,g=a.ca;var D="readystatechange";Array.isArray(D)||(D&&(Kt[0]=D.toString()),D=Kt);for(var L=0;L<D.length;L++){var H=Sr(h,D[L],g||c.handleEvent,!1,c.h||c);if(!H)break;c.g[H.key]=H}c=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,c)):(a.u="GET",a.g.ea(a.A,a.u,null,c)),rs(),d0(a.i,a.u,a.A,a.l,a.R,a.m)}Un.prototype.ca=function(a){a=a.target;const c=this.M;c&&En(a)==3?c.j():this.Y(a)},Un.prototype.Y=function(a){try{if(a==this.g)e:{const ot=En(this.g);var c=this.g.Ba();const oi=this.g.Z();if(!(3>ot)&&(ot!=3||this.g&&(this.h.h||this.g.oa()||Sf(this.g)))){this.J||ot!=4||c==7||(c==8||0>=oi?rs(3):rs(2)),Yl(this);var h=this.g.Z();this.X=h;t:if(rf(this)){var g=Sf(this.g);a="";var D=g.length,L=En(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Rr(this),os(this);var H="";break t}this.h.i=new l.TextDecoder}for(c=0;c<D;c++)this.h.h=!0,a+=this.h.i.decode(g[c],{stream:!(L&&c==D-1)});g.length=0,this.h.g+=a,this.C=0,H=this.h.g}else H=this.g.oa();if(this.o=h==200,h0(this.i,this.u,this.A,this.l,this.R,ot,h),this.o){if(this.T&&!this.K){t:{if(this.g){var Ee,Ye=this.g;if((Ee=Ye.g?Ye.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Ee)){var ge=Ee;break t}}ge=null}if(h=ge)ri(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xl(this,h);else{this.o=!1,this.s=3,pt(12),Rr(this),os(this);break e}}if(this.P){h=!0;let Qt;for(;!this.J&&this.C<H.length;)if(Qt=m0(this,H),Qt==Kl){ot==4&&(this.s=4,pt(14),h=!1),ri(this.i,this.l,null,"[Incomplete Response]");break}else if(Qt==tf){this.s=4,pt(15),ri(this.i,this.l,H,"[Invalid Chunk]"),h=!1;break}else ri(this.i,this.l,Qt,null),Xl(this,Qt);if(rf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ot!=4||H.length!=0||this.h.h||(this.s=1,pt(16),h=!1),this.o=this.o&&h,!h)ri(this.i,this.l,H,"[Invalid Chunked Response]"),Rr(this),os(this);else if(0<H.length&&!this.W){this.W=!0;var st=this.j;st.g==this&&st.ba&&!st.M&&(st.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),ru(st),st.M=!0,pt(11))}}else ri(this.i,this.l,H,null),Xl(this,H);ot==4&&Rr(this),this.o&&!this.J&&(ot==4?Df(this.j,this):(this.o=!1,Lo(this)))}else N0(this.g),h==400&&0<H.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),Rr(this),os(this)}}}catch{}finally{}};function rf(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function m0(a,c){var h=a.C,g=c.indexOf(`
`,h);return g==-1?Kl:(h=Number(c.substring(h,g)),isNaN(h)?tf:(g+=1,g+h>c.length?Kl:(c=c.slice(g,g+h),a.C=g+h,c)))}Un.prototype.cancel=function(){this.J=!0,Rr(this)};function Lo(a){a.S=Date.now()+a.I,sf(a,a.I)}function sf(a,c){if(a.B!=null)throw Error("WatchDog timer not null");a.B=is(_(a.ba,a),c)}function Yl(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Un.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(f0(this.i,this.A),this.L!=2&&(rs(),pt(17)),Rr(this),this.s=2,os(this)):sf(this,this.S-a)};function os(a){a.j.G==0||a.J||Df(a.j,a)}function Rr(a){Yl(a);var c=a.M;c&&typeof c.ma=="function"&&c.ma(),a.M=null,Bn(a.U),a.g&&(c=a.g,a.g=null,c.abort(),c.ma())}function Xl(a,c){try{var h=a.j;if(h.G!=0&&(h.g==a||Jl(h.h,a))){if(!a.K&&Jl(h.h,a)&&h.G==3){try{var g=h.Da.g.parse(c)}catch{g=null}if(Array.isArray(g)&&g.length==3){var D=g;if(D[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)Wo(h),zo(h);else break e;nu(h),pt(18)}}else h.za=D[1],0<h.za-h.T&&37500>D[2]&&h.F&&h.v==0&&!h.C&&(h.C=is(_(h.Za,h),6e3));if(1>=lf(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else kr(h,11)}else if((a.K||h.g==a)&&Wo(h),!w(c))for(D=h.Da.g.parse(c),c=0;c<D.length;c++){let ge=D[c];if(h.T=ge[0],ge=ge[1],h.G==2)if(ge[0]=="c"){h.K=ge[1],h.ia=ge[2];const st=ge[3];st!=null&&(h.la=st,h.j.info("VER="+h.la));const ot=ge[4];ot!=null&&(h.Aa=ot,h.j.info("SVER="+h.Aa));const oi=ge[5];oi!=null&&typeof oi=="number"&&0<oi&&(g=1.5*oi,h.L=g,h.j.info("backChannelRequestTimeoutMs_="+g)),g=h;const Qt=a.g;if(Qt){const Ho=Qt.g?Qt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ho){var L=g.h;L.g||Ho.indexOf("spdy")==-1&&Ho.indexOf("quic")==-1&&Ho.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Zl(L,L.h),L.h=null))}if(g.D){const iu=Qt.g?Qt.g.getResponseHeader("X-HTTP-Session-Id"):null;iu&&(g.ya=iu,Ie(g.I,g.D,iu))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),g=h;var H=a;if(g.qa=Vf(g,g.J?g.ia:null,g.W),H.K){uf(g.h,H);var Ee=H,Ye=g.L;Ye&&(Ee.I=Ye),Ee.B&&(Yl(Ee),Lo(Ee)),g.g=H}else kf(g);0<h.i.length&&$o(h)}else ge[0]!="stop"&&ge[0]!="close"||kr(h,7);else h.G==3&&(ge[0]=="stop"||ge[0]=="close"?ge[0]=="stop"?kr(h,7):tu(h):ge[0]!="noop"&&h.l&&h.l.ta(ge),h.v=0)}}rs(4)}catch{}}var g0=class{constructor(a,c){this.g=a,this.map=c}};function of(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function af(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function lf(a){return a.h?1:a.g?a.g.size:0}function Jl(a,c){return a.h?a.h==c:a.g?a.g.has(c):!1}function Zl(a,c){a.g?a.g.add(c):a.h=c}function uf(a,c){a.h&&a.h==c?a.h=null:a.g&&a.g.has(c)&&a.g.delete(c)}of.prototype.cancel=function(){if(this.i=cf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function cf(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let c=a.i;for(const h of a.g.values())c=c.concat(h.D);return c}return N(a.i)}function y0(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var c=[],h=a.length,g=0;g<h;g++)c.push(a[g]);return c}c=[],h=0;for(g in a)c[h++]=a[g];return c}function v0(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var c=[];a=a.length;for(var h=0;h<a;h++)c.push(h);return c}c=[],h=0;for(const g in a)c[h++]=g;return c}}}function df(a,c){if(a.forEach&&typeof a.forEach=="function")a.forEach(c,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,c,void 0);else for(var h=v0(a),g=y0(a),D=g.length,L=0;L<D;L++)c.call(void 0,g[L],h&&h[L],a)}var hf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _0(a,c){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var g=a[h].indexOf("="),D=null;if(0<=g){var L=a[h].substring(0,g);D=a[h].substring(g+1)}else L=a[h];c(L,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function Cr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Cr){this.h=a.h,Oo(this,a.j),this.o=a.o,this.g=a.g,jo(this,a.s),this.l=a.l;var c=a.i,h=new us;h.i=c.i,c.g&&(h.g=new Map(c.g),h.h=c.h),ff(this,h),this.m=a.m}else a&&(c=String(a).match(hf))?(this.h=!1,Oo(this,c[1]||"",!0),this.o=as(c[2]||""),this.g=as(c[3]||"",!0),jo(this,c[4]),this.l=as(c[5]||"",!0),ff(this,c[6]||"",!0),this.m=as(c[7]||"")):(this.h=!1,this.i=new us(null,this.h))}Cr.prototype.toString=function(){var a=[],c=this.j;c&&a.push(ls(c,pf,!0),":");var h=this.g;return(h||c=="file")&&(a.push("//"),(c=this.o)&&a.push(ls(c,pf,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(ls(h,h.charAt(0)=="/"?T0:E0,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",ls(h,S0)),a.join("")};function wn(a){return new Cr(a)}function Oo(a,c,h){a.j=h?as(c,!0):c,a.j&&(a.j=a.j.replace(/:$/,""))}function jo(a,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);a.s=c}else a.s=null}function ff(a,c,h){c instanceof us?(a.i=c,x0(a.i,a.h)):(h||(c=ls(c,I0)),a.i=new us(c,a.h))}function Ie(a,c,h){a.i.set(c,h)}function Mo(a){return Ie(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function as(a,c){return a?c?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ls(a,c,h){return typeof a=="string"?(a=encodeURI(a).replace(c,w0),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function w0(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var pf=/[#\/\?@]/g,E0=/[#\?:]/g,T0=/[#\?]/g,I0=/[#\?@]/g,S0=/#/g;function us(a,c){this.h=this.g=null,this.i=a||null,this.j=!!c}function zn(a){a.g||(a.g=new Map,a.h=0,a.i&&_0(a.i,function(c,h){a.add(decodeURIComponent(c.replace(/\+/g," ")),h)}))}t=us.prototype,t.add=function(a,c){zn(this),this.i=null,a=ii(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(c),this.h+=1,this};function mf(a,c){zn(a),c=ii(a,c),a.g.has(c)&&(a.i=null,a.h-=a.g.get(c).length,a.g.delete(c))}function gf(a,c){return zn(a),c=ii(a,c),a.g.has(c)}t.forEach=function(a,c){zn(this),this.g.forEach(function(h,g){h.forEach(function(D){a.call(c,D,g,this)},this)},this)},t.na=function(){zn(this);const a=Array.from(this.g.values()),c=Array.from(this.g.keys()),h=[];for(let g=0;g<c.length;g++){const D=a[g];for(let L=0;L<D.length;L++)h.push(c[g])}return h},t.V=function(a){zn(this);let c=[];if(typeof a=="string")gf(this,a)&&(c=c.concat(this.g.get(ii(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)c=c.concat(a[h])}return c},t.set=function(a,c){return zn(this),this.i=null,a=ii(this,a),gf(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[c]),this.h+=1,this},t.get=function(a,c){return a?(a=this.V(a),0<a.length?String(a[0]):c):c};function yf(a,c,h){mf(a,c),0<h.length&&(a.i=null,a.g.set(ii(a,c),N(h)),a.h+=h.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],c=Array.from(this.g.keys());for(var h=0;h<c.length;h++){var g=c[h];const L=encodeURIComponent(String(g)),H=this.V(g);for(g=0;g<H.length;g++){var D=L;H[g]!==""&&(D+="="+encodeURIComponent(String(H[g]))),a.push(D)}}return this.i=a.join("&")};function ii(a,c){return c=String(c),a.j&&(c=c.toLowerCase()),c}function x0(a,c){c&&!a.j&&(zn(a),a.i=null,a.g.forEach(function(h,g){var D=g.toLowerCase();g!=D&&(mf(this,g),yf(this,D,h))},a)),a.j=c}function A0(a,c){const h=new ss;if(l.Image){const g=new Image;g.onload=R($n,h,"TestLoadImage: loaded",!0,c,g),g.onerror=R($n,h,"TestLoadImage: error",!1,c,g),g.onabort=R($n,h,"TestLoadImage: abort",!1,c,g),g.ontimeout=R($n,h,"TestLoadImage: timeout",!1,c,g),l.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else c(!1)}function R0(a,c){const h=new ss,g=new AbortController,D=setTimeout(()=>{g.abort(),$n(h,"TestPingServer: timeout",!1,c)},1e4);fetch(a,{signal:g.signal}).then(L=>{clearTimeout(D),L.ok?$n(h,"TestPingServer: ok",!0,c):$n(h,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(D),$n(h,"TestPingServer: error",!1,c)})}function $n(a,c,h,g,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),g(h)}catch{}}function C0(){this.g=new c0}function k0(a,c,h){const g=h||"";try{df(a,function(D,L){let H=D;d(D)&&(H=_n(D)),c.push(g+L+"="+encodeURIComponent(H))})}catch(D){throw c.push(g+"type="+encodeURIComponent("_badmap")),D}}function Fo(a){this.l=a.Ub||null,this.j=a.eb||!1}P(Fo,Wl),Fo.prototype.g=function(){return new Bo(this.l,this.j)},Fo.prototype.i=function(a){return function(){return a}}({});function Bo(a,c){me.call(this),this.D=a,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(Bo,me),t=Bo.prototype,t.open=function(a,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=c,this.readyState=1,ds(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(c.body=a),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,cs(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ds(this)),this.g&&(this.readyState=3,ds(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;vf(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function vf(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var c=a.value?a.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!a.done}))&&(this.response=this.responseText+=c)}a.done?cs(this):ds(this),this.readyState==3&&vf(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,cs(this))},t.Qa=function(a){this.g&&(this.response=a,cs(this))},t.ga=function(){this.g&&cs(this)};function cs(a){a.readyState=4,a.l=null,a.j=null,a.v=null,ds(a)}t.setRequestHeader=function(a,c){this.u.append(a,c)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],c=this.h.entries();for(var h=c.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=c.next();return a.join(`\r
`)};function ds(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Bo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function _f(a){let c="";return $(a,function(h,g){c+=g,c+=":",c+=h,c+=`\r
`}),c}function eu(a,c,h){e:{for(g in h){var g=!1;break e}g=!0}g||(h=_f(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):Ie(a,c,h))}function Ve(a){me.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(Ve,me);var P0=/^https?$/i,D0=["POST","PUT"];t=Ve.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,c,h,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);c=c?c.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Gl.g(),this.v=this.o?Gh(this.o):Gh(Gl),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(c,String(a),!0),this.B=!1}catch(L){wf(this,L);return}if(a=h||"",h=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var D in g)h.set(D,g[D]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const L of g.keys())h.set(L,g.get(L));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(h.keys()).find(L=>L.toLowerCase()=="content-type"),D=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(D0,c,void 0))||g||D||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,H]of h)this.g.setRequestHeader(L,H);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{If(this),this.u=!0,this.g.send(a),this.u=!1}catch(L){wf(this,L)}};function wf(a,c){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=c,a.m=5,Ef(a),Uo(a)}function Ef(a){a.A||(a.A=!0,Re(a,"complete"),Re(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Re(this,"complete"),Re(this,"abort"),Uo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Uo(this,!0)),Ve.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Tf(this):this.bb())},t.bb=function(){Tf(this)};function Tf(a){if(a.h&&typeof o<"u"&&(!a.v[1]||En(a)!=4||a.Z()!=2)){if(a.u&&En(a)==4)vn(a.Ea,0,a);else if(Re(a,"readystatechange"),En(a)==4){a.h=!1;try{const H=a.Z();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var h;if(!(h=c)){var g;if(g=H===0){var D=String(a.D).match(hf)[1]||null;!D&&l.self&&l.self.location&&(D=l.self.location.protocol.slice(0,-1)),g=!P0.test(D?D.toLowerCase():"")}h=g}if(h)Re(a,"complete"),Re(a,"success");else{a.m=6;try{var L=2<En(a)?a.g.statusText:""}catch{L=""}a.l=L+" ["+a.Z()+"]",Ef(a)}}finally{Uo(a)}}}}function Uo(a,c){if(a.g){If(a);const h=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,c||Re(a,"ready");try{h.onreadystatechange=g}catch{}}}function If(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function En(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<En(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var c=this.g.responseText;return a&&c.indexOf(a)==0&&(c=c.substring(a.length)),Do(c)}};function Sf(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function N0(a){const c={};a=(a.g&&2<=En(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(w(a[g]))continue;var h=S(a[g]);const D=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();const L=c[D]||[];c[D]=L,L.push(h)}T(c,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function hs(a,c,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||c}function xf(a){this.Aa=0,this.i=[],this.j=new ss,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=hs("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=hs("baseRetryDelayMs",5e3,a),this.cb=hs("retryDelaySeedMs",1e4,a),this.Wa=hs("forwardChannelMaxRetries",2,a),this.wa=hs("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new of(a&&a.concurrentRequestLimit),this.Da=new C0,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=xf.prototype,t.la=8,t.G=1,t.connect=function(a,c,h,g){pt(0),this.W=a,this.H=c||{},h&&g!==void 0&&(this.H.OSID=h,this.H.OAID=g),this.F=this.X,this.I=Vf(this,null,this.W),$o(this)};function tu(a){if(Af(a),a.G==3){var c=a.U++,h=wn(a.I);if(Ie(h,"SID",a.K),Ie(h,"RID",c),Ie(h,"TYPE","terminate"),fs(a,h),c=new Un(a,a.j,c),c.L=2,c.v=Mo(wn(h)),h=!1,l.navigator&&l.navigator.sendBeacon)try{h=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!h&&l.Image&&(new Image().src=c.v,h=!0),h||(c.g=Lf(c.j,null),c.g.ea(c.v)),c.F=Date.now(),Lo(c)}bf(a)}function zo(a){a.g&&(ru(a),a.g.cancel(),a.g=null)}function Af(a){zo(a),a.u&&(l.clearTimeout(a.u),a.u=null),Wo(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function $o(a){if(!af(a.h)&&!a.s){a.s=!0;var c=a.Ga;He||q(),G||(He(),G=!0),K.add(c,a),a.B=0}}function b0(a,c){return lf(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=c.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=is(_(a.Ga,a,c),Nf(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const D=new Un(this,this.j,a);let L=this.o;if(this.S&&(L?(L=v(L),I(L,this.S)):L=this.S),this.m!==null||this.O||(D.H=L,L=null),this.P)e:{for(var c=0,h=0;h<this.i.length;h++){t:{var g=this.i[h];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(c+=g,4096<c){c=h;break e}if(c===4096||h===this.i.length-1){c=h+1;break e}}c=1e3}else c=1e3;c=Cf(this,D,c),h=wn(this.I),Ie(h,"RID",a),Ie(h,"CVER",22),this.D&&Ie(h,"X-HTTP-Session-Id",this.D),fs(this,h),L&&(this.O?c="headers="+encodeURIComponent(String(_f(L)))+"&"+c:this.m&&eu(h,this.m,L)),Zl(this.h,D),this.Ua&&Ie(h,"TYPE","init"),this.P?(Ie(h,"$req",c),Ie(h,"SID","null"),D.T=!0,Ql(D,h,null)):Ql(D,h,c),this.G=2}}else this.G==3&&(a?Rf(this,a):this.i.length==0||af(this.h)||Rf(this))};function Rf(a,c){var h;c?h=c.l:h=a.U++;const g=wn(a.I);Ie(g,"SID",a.K),Ie(g,"RID",h),Ie(g,"AID",a.T),fs(a,g),a.m&&a.o&&eu(g,a.m,a.o),h=new Un(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),c&&(a.i=c.D.concat(a.i)),c=Cf(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Zl(a.h,h),Ql(h,g,c)}function fs(a,c){a.H&&$(a.H,function(h,g){Ie(c,g,h)}),a.l&&df({},function(h,g){Ie(c,g,h)})}function Cf(a,c,h){h=Math.min(a.i.length,h);var g=a.l?_(a.l.Na,a.l,a):null;e:{var D=a.i;let L=-1;for(;;){const H=["count="+h];L==-1?0<h?(L=D[0].g,H.push("ofs="+L)):L=0:H.push("ofs="+L);let Ee=!0;for(let Ye=0;Ye<h;Ye++){let ge=D[Ye].g;const st=D[Ye].map;if(ge-=L,0>ge)L=Math.max(0,D[Ye].g-100),Ee=!1;else try{k0(st,H,"req"+ge+"_")}catch{g&&g(st)}}if(Ee){g=H.join("&");break e}}}return a=a.i.splice(0,h),c.D=a,g}function kf(a){if(!a.g&&!a.u){a.Y=1;var c=a.Fa;He||q(),G||(He(),G=!0),K.add(c,a),a.v=0}}function nu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=is(_(a.Fa,a),Nf(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Pf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=is(_(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),zo(this),Pf(this))};function ru(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Pf(a){a.g=new Un(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var c=wn(a.qa);Ie(c,"RID","rpc"),Ie(c,"SID",a.K),Ie(c,"AID",a.T),Ie(c,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ie(c,"TO",a.ja),Ie(c,"TYPE","xmlhttp"),fs(a,c),a.m&&a.o&&eu(c,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=Mo(wn(c)),h.m=null,h.P=!0,nf(h,a)}t.Za=function(){this.C!=null&&(this.C=null,zo(this),nu(this),pt(19))};function Wo(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Df(a,c){var h=null;if(a.g==c){Wo(a),ru(a),a.g=null;var g=2}else if(Jl(a.h,c))h=c.D,uf(a.h,c),g=1;else return;if(a.G!=0){if(c.o)if(g==1){h=c.m?c.m.length:0,c=Date.now()-c.F;var D=a.B;g=No(),Re(g,new Jh(g,h)),$o(a)}else kf(a);else if(D=c.s,D==3||D==0&&0<c.X||!(g==1&&b0(a,c)||g==2&&nu(a)))switch(h&&0<h.length&&(c=a.h,c.i=c.i.concat(h)),D){case 1:kr(a,5);break;case 4:kr(a,10);break;case 3:kr(a,6);break;default:kr(a,2)}}}function Nf(a,c){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*c}function kr(a,c){if(a.j.info("Error code "+c),c==2){var h=_(a.fb,a),g=a.Xa;const D=!g;g=new Cr(g||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Oo(g,"https"),Mo(g),D?A0(g.toString(),h):R0(g.toString(),h)}else pt(2);a.G=0,a.l&&a.l.sa(c),bf(a),Af(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function bf(a){if(a.G=0,a.ka=[],a.l){const c=cf(a.h);(c.length!=0||a.i.length!=0)&&(V(a.ka,c),V(a.ka,a.i),a.h.i.length=0,N(a.i),a.i.length=0),a.l.ra()}}function Vf(a,c,h){var g=h instanceof Cr?wn(h):new Cr(h);if(g.g!="")c&&(g.g=c+"."+g.g),jo(g,g.s);else{var D=l.location;g=D.protocol,c=c?c+"."+D.hostname:D.hostname,D=+D.port;var L=new Cr(null);g&&Oo(L,g),c&&(L.g=c),D&&jo(L,D),h&&(L.l=h),g=L}return h=a.D,c=a.ya,h&&c&&Ie(g,h,c),Ie(g,"VER",a.la),fs(a,g),g}function Lf(a,c,h){if(c&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=a.Ca&&!a.pa?new Ve(new Fo({eb:h})):new Ve(a.pa),c.Ha(a.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Of(){}t=Of.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function qo(){}qo.prototype.g=function(a,c){return new bt(a,c)};function bt(a,c){me.call(this),this.g=new xf(c),this.l=a,this.h=c&&c.messageUrlParams||null,a=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(a?a["X-WebChannel-Content-Type"]=c.messageContentType:a={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(a?a["X-WebChannel-Client-Profile"]=c.va:a={"X-WebChannel-Client-Profile":c.va}),this.g.S=a,(a=c&&c.Sb)&&!w(a)&&(this.g.m=a),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!w(c)&&(this.g.D=c,a=this.h,a!==null&&c in a&&(a=this.h,c in a&&delete a[c])),this.j=new si(this)}P(bt,me),bt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bt.prototype.close=function(){tu(this.g)},bt.prototype.o=function(a){var c=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=_n(a),a=h);c.i.push(new g0(c.Ya++,a)),c.G==3&&$o(c)},bt.prototype.N=function(){this.g.l=null,delete this.j,tu(this.g),delete this.g,bt.aa.N.call(this)};function jf(a){ql.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var c=a.__sm__;if(c){e:{for(const h in c){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,c=c!==null&&a in c?c[a]:void 0),this.data=c}else this.data=a}P(jf,ql);function Mf(){Hl.call(this),this.status=1}P(Mf,Hl);function si(a){this.g=a}P(si,Of),si.prototype.ua=function(){Re(this.g,"a")},si.prototype.ta=function(a){Re(this.g,new jf(a))},si.prototype.sa=function(a){Re(this.g,new Mf)},si.prototype.ra=function(){Re(this.g,"b")},qo.prototype.createWebChannel=qo.prototype.g,bt.prototype.send=bt.prototype.o,bt.prototype.open=bt.prototype.m,bt.prototype.close=bt.prototype.close,bv=function(){return new qo},Nv=function(){return No()},Dv=Ar,Wc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},bo.NO_ERROR=0,bo.TIMEOUT=8,bo.HTTP_ERROR=6,ka=bo,Zh.COMPLETE="complete",Pv=Zh,Kh.EventType=ns,ns.OPEN="a",ns.CLOSE="b",ns.ERROR="c",ns.MESSAGE="d",me.prototype.listen=me.prototype.K,Cs=Kh,Ve.prototype.listenOnce=Ve.prototype.L,Ve.prototype.getLastError=Ve.prototype.Ka,Ve.prototype.getLastErrorCode=Ve.prototype.Ba,Ve.prototype.getStatus=Ve.prototype.Z,Ve.prototype.getResponseJson=Ve.prototype.Oa,Ve.prototype.getResponseText=Ve.prototype.oa,Ve.prototype.send=Ve.prototype.ea,Ve.prototype.setWithCredentials=Ve.prototype.Ha,kv=Ve}).apply(typeof ca<"u"?ca:typeof self<"u"?self:typeof window<"u"?window:{});const sm="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ct.UNAUTHENTICATED=new ct(null),ct.GOOGLE_CREDENTIALS=new ct("google-credentials-uid"),ct.FIRST_PARTY=new ct("first-party-uid"),ct.MOCK_USER=new ct("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qi="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr=new _v("@firebase/firestore");function Ts(){return Gr.logLevel}function X(t,...e){if(Gr.logLevel<=he.DEBUG){const n=e.map(ih);Gr.debug(`Firestore (${Qi}): ${t}`,...n)}}function Nn(t,...e){if(Gr.logLevel<=he.ERROR){const n=e.map(ih);Gr.error(`Firestore (${Qi}): ${t}`,...n)}}function Mi(t,...e){if(Gr.logLevel<=he.WARN){const n=e.map(ih);Gr.warn(`Firestore (${Qi}): ${t}`,...n)}}function ih(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t="Unexpected state"){const e=`FIRESTORE (${Qi}) INTERNAL ASSERTION FAILED: `+t;throw Nn(e),new Error(e)}function we(t,e){t||ne()}function ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends Zr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class L1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ct.UNAUTHENTICATED))}shutdown(){}}class O1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class j1{constructor(e){this.t=e,this.currentUser=ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){we(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Br;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Br,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Br)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(we(typeof r.accessToken=="string"),new Vv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string"),new ct(e)}}class M1{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ct.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class F1{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new M1(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class B1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class U1{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){we(this.o===void 0);const r=s=>{s.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,X("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(we(typeof n.token=="string"),this.R=n.token,new B1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z1(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=z1(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ye(t,e){return t<e?-1:t>e?1:0}function Fi(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Y(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return qe.fromMillis(Date.now())}static fromDate(e){return qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new qe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ye(this.nanoseconds,e.nanoseconds):ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.timestamp=e}static fromTimestamp(e){return new re(e)}static min(){return new re(new qe(0,0))}static max(){return new re(new qe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(),r===void 0?r=e.length-n:r>e.length-n&&ne(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ho.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ho?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class xe extends ho{construct(e,n,r){return new xe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new xe(n)}static emptyPath(){return new xe([])}}const $1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ze extends ho{construct(e,n,r){return new Ze(e,n,r)}static isValidIdentifier(e){return $1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ze.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ze(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Y(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new Y(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Y(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new Y(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ze(n)}static emptyPath(){return new Ze([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.path=e}static fromPath(e){return new ee(xe.fromString(e))}static fromName(e){return new ee(xe.fromString(e).popFirst(5))}static empty(){return new ee(xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return xe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ee(new xe(e.slice()))}}function W1(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=re.fromTimestamp(r===1e9?new qe(n+1,0):new qe(n,r));return new mr(i,ee.empty(),e)}function q1(t){return new mr(t.readTime,t.key,-1)}class mr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new mr(re.min(),ee.empty(),-1)}static max(){return new mr(re.max(),ee.empty(),-1)}}function H1(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ee.comparator(t.documentKey,e.documentKey),n!==0?n:ye(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class K1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function So(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==G1)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(i=>i?M.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new M((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++l,l===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new M((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function Q1(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function xo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}sh.oe=-1;function Pl(t){return t==null}function ol(t){return t===0&&1/t==-1/0}function Y1(t){return typeof t=="number"&&Number.isInteger(t)&&!ol(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ei(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ov(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e,n){this.comparator=e,this.root=n||Je.EMPTY}insert(e,n){return new be(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Je.BLACK,null,null))}remove(e){return new be(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Je.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new da(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new da(this.root,e,this.comparator,!1)}getReverseIterator(){return new da(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new da(this.root,e,this.comparator,!0)}}class da{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Je{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Je.RED,this.left=i??Je.EMPTY,this.right=s??Je.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Je(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Je.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Je.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Je.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Je.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ne();const e=this.left.check();if(e!==this.right.check())throw ne();return e+(this.isRed()?0:1)}}Je.EMPTY=null,Je.RED=!0,Je.BLACK=!1;Je.EMPTY=new class{constructor(){this.size=0}get key(){throw ne()}get value(){throw ne()}get color(){throw ne()}get left(){throw ne()}get right(){throw ne()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Je(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.comparator=e,this.data=new be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new am(this.data.getIterator())}getIteratorFrom(e){return new am(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof tt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new tt(this.comparator);return n.data=e,n}}class am{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.fields=e,e.sort(Ze.comparator)}static empty(){return new Ot([])}unionWith(e){let n=new tt(Ze.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ot(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Fi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new jv("Invalid base64 string: "+s):s}}(e);return new rt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rt.EMPTY_BYTE_STRING=new rt("");const X1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gr(t){if(we(!!t),typeof t=="string"){let e=0;const n=X1.exec(t);if(we(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Me(t.seconds),nanos:Me(t.nanos)}}function Me(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Kr(t){return typeof t=="string"?rt.fromBase64String(t):rt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function ah(t){const e=t.mapValue.fields.__previous_value__;return oh(e)?ah(e):e}function fo(t){const e=gr(t.mapValue.fields.__local_write_time__.timestampValue);return new qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e,n,r,i,s,o,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d}}class po{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new po("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof po&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha={mapValue:{}};function Qr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?oh(t)?4:eI(t)?9007199254740991:Z1(t)?10:11:ne()}function yn(t,e){if(t===e)return!0;const n=Qr(t);if(n!==Qr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return fo(t).isEqual(fo(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=gr(i.timestampValue),l=gr(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Kr(i.bytesValue).isEqual(Kr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Me(i.geoPointValue.latitude)===Me(s.geoPointValue.latitude)&&Me(i.geoPointValue.longitude)===Me(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Me(i.integerValue)===Me(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Me(i.doubleValue),l=Me(s.doubleValue);return o===l?ol(o)===ol(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Fi(t.arrayValue.values||[],e.arrayValue.values||[],yn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(om(o)!==om(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!yn(o[u],l[u])))return!1;return!0}(t,e);default:return ne()}}function mo(t,e){return(t.values||[]).find(n=>yn(n,e))!==void 0}function Bi(t,e){if(t===e)return 0;const n=Qr(t),r=Qr(e);if(n!==r)return ye(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ye(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=Me(s.integerValue||s.doubleValue),u=Me(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return lm(t.timestampValue,e.timestampValue);case 4:return lm(fo(t),fo(e));case 5:return ye(t.stringValue,e.stringValue);case 6:return function(s,o){const l=Kr(s),u=Kr(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const f=ye(l[d],u[d]);if(f!==0)return f}return ye(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=ye(Me(s.latitude),Me(o.latitude));return l!==0?l:ye(Me(s.longitude),Me(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return um(t.arrayValue,e.arrayValue);case 10:return function(s,o){var l,u,d,f;const y=s.fields||{},_=o.fields||{},R=(l=y.value)===null||l===void 0?void 0:l.arrayValue,P=(u=_.value)===null||u===void 0?void 0:u.arrayValue,N=ye(((d=R==null?void 0:R.values)===null||d===void 0?void 0:d.length)||0,((f=P==null?void 0:P.values)===null||f===void 0?void 0:f.length)||0);return N!==0?N:um(R,P)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===ha.mapValue&&o===ha.mapValue)return 0;if(s===ha.mapValue)return 1;if(o===ha.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let y=0;y<u.length&&y<f.length;++y){const _=ye(u[y],f[y]);if(_!==0)return _;const R=Bi(l[u[y]],d[f[y]]);if(R!==0)return R}return ye(u.length,f.length)}(t.mapValue,e.mapValue);default:throw ne()}}function lm(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ye(t,e);const n=gr(t),r=gr(e),i=ye(n.seconds,r.seconds);return i!==0?i:ye(n.nanos,r.nanos)}function um(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Bi(n[i],r[i]);if(s)return s}return ye(n.length,r.length)}function Ui(t){return qc(t)}function qc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=gr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Kr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ee.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=qc(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${qc(n.fields[o])}`;return i+"}"}(t.mapValue):ne()}function cm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Hc(t){return!!t&&"integerValue"in t}function lh(t){return!!t&&"arrayValue"in t}function dm(t){return!!t&&"nullValue"in t}function hm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Pa(t){return!!t&&"mapValue"in t}function Z1(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Us(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ei(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Us(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Us(t.arrayValue.values[n]);return e}return Object.assign({},t)}function eI(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.value=e}static empty(){return new St({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Pa(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Us(n)}setAll(e){let n=Ze.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=Us(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Pa(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return yn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Pa(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ei(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new St(Us(this.value))}}function Mv(t){const e=[];return ei(t.fields,(n,r)=>{const i=new Ze([n]);if(Pa(r)){const s=Mv(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Ot(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new ht(e,0,re.min(),re.min(),re.min(),St.empty(),0)}static newFoundDocument(e,n,r,i){return new ht(e,1,n,re.min(),r,i,0)}static newNoDocument(e,n){return new ht(e,2,n,re.min(),re.min(),St.empty(),0)}static newUnknownDocument(e,n){return new ht(e,3,n,re.min(),re.min(),St.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=St.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=St.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,n){this.position=e,this.inclusive=n}}function fm(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ee.comparator(ee.fromName(o.referenceValue),n.key):r=Bi(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function pm(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!yn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,n="asc"){this.field=e,this.dir=n}}function tI(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{}class ze extends Fv{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new rI(e,n,r):n==="array-contains"?new oI(e,r):n==="in"?new aI(e,r):n==="not-in"?new lI(e,r):n==="array-contains-any"?new uI(e,r):new ze(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new iI(e,r):new sI(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Bi(n,this.value)):n!==null&&Qr(this.value)===Qr(n)&&this.matchesComparison(Bi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class on extends Fv{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new on(e,n)}matches(e){return Bv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Bv(t){return t.op==="and"}function Uv(t){return nI(t)&&Bv(t)}function nI(t){for(const e of t.filters)if(e instanceof on)return!1;return!0}function Gc(t){if(t instanceof ze)return t.field.canonicalString()+t.op.toString()+Ui(t.value);if(Uv(t))return t.filters.map(e=>Gc(e)).join(",");{const e=t.filters.map(n=>Gc(n)).join(",");return`${t.op}(${e})`}}function zv(t,e){return t instanceof ze?function(r,i){return i instanceof ze&&r.op===i.op&&r.field.isEqual(i.field)&&yn(r.value,i.value)}(t,e):t instanceof on?function(r,i){return i instanceof on&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&zv(o,i.filters[l]),!0):!1}(t,e):void ne()}function $v(t){return t instanceof ze?function(n){return`${n.field.canonicalString()} ${n.op} ${Ui(n.value)}`}(t):t instanceof on?function(n){return n.op.toString()+" {"+n.getFilters().map($v).join(" ,")+"}"}(t):"Filter"}class rI extends ze{constructor(e,n,r){super(e,n,r),this.key=ee.fromName(r.referenceValue)}matches(e){const n=ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class iI extends ze{constructor(e,n){super(e,"in",n),this.keys=Wv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class sI extends ze{constructor(e,n){super(e,"not-in",n),this.keys=Wv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Wv(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ee.fromName(r.referenceValue))}class oI extends ze{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return lh(n)&&mo(n.arrayValue,this.value)}}class aI extends ze{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&mo(this.value.arrayValue,n)}}class lI extends ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(mo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!mo(this.value.arrayValue,n)}}class uI extends ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!lh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>mo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function mm(t,e=null,n=[],r=[],i=null,s=null,o=null){return new cI(t,e,n,r,i,s,o)}function uh(t){const e=ie(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Gc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Pl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ui(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ui(r)).join(",")),e.ue=n}return e.ue}function ch(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!tI(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!zv(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!pm(t.startAt,e.startAt)&&pm(t.endAt,e.endAt)}function Kc(t){return ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function dI(t,e,n,r,i,s,o,l){return new Yi(t,e,n,r,i,s,o,l)}function dh(t){return new Yi(t)}function gm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function qv(t){return t.collectionGroup!==null}function zs(t){const e=ie(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new tt(Ze.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new go(s,r))}),n.has(Ze.keyField().canonicalString())||e.ce.push(new go(Ze.keyField(),r))}return e.ce}function mn(t){const e=ie(t);return e.le||(e.le=hI(e,zs(t))),e.le}function hI(t,e){if(t.limitType==="F")return mm(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new go(i.field,s)});const n=t.endAt?new al(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new al(t.startAt.position,t.startAt.inclusive):null;return mm(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Qc(t,e){const n=t.filters.concat([e]);return new Yi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Yc(t,e,n){return new Yi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Dl(t,e){return ch(mn(t),mn(e))&&t.limitType===e.limitType}function Hv(t){return`${uh(mn(t))}|lt:${t.limitType}`}function li(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>$v(i)).join(", ")}]`),Pl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ui(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ui(i)).join(",")),`Target(${r})`}(mn(t))}; limitType=${t.limitType})`}function Nl(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ee.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of zs(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,u){const d=fm(o,l,u);return o.inclusive?d<=0:d<0}(r.startAt,zs(r),i)||r.endAt&&!function(o,l,u){const d=fm(o,l,u);return o.inclusive?d>=0:d>0}(r.endAt,zs(r),i))}(t,e)}function fI(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Gv(t){return(e,n)=>{let r=!1;for(const i of zs(t)){const s=pI(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function pI(t,e,n){const r=t.field.isKeyField()?ee.comparator(e.key,n.key):function(s,o,l){const u=o.data.field(s),d=l.data.field(s);return u!==null&&d!==null?Bi(u,d):ne()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ei(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Ov(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI=new be(ee.comparator);function bn(){return mI}const Kv=new be(ee.comparator);function ks(...t){let e=Kv;for(const n of t)e=e.insert(n.key,n);return e}function Qv(t){let e=Kv;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Or(){return $s()}function Yv(){return $s()}function $s(){return new Xi(t=>t.toString(),(t,e)=>t.isEqual(e))}const gI=new be(ee.comparator),yI=new tt(ee.comparator);function ce(...t){let e=yI;for(const n of t)e=e.add(n);return e}const vI=new tt(ye);function _I(){return vI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ol(e)?"-0":e}}function Xv(t){return{integerValue:""+t}}function wI(t,e){return Y1(e)?Xv(e):hh(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(){this._=void 0}}function EI(t,e,n){return t instanceof ll?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&oh(s)&&(s=ah(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof yo?Zv(t,e):t instanceof vo?e_(t,e):function(i,s){const o=Jv(i,s),l=ym(o)+ym(i.Pe);return Hc(o)&&Hc(i.Pe)?Xv(l):hh(i.serializer,l)}(t,e)}function TI(t,e,n){return t instanceof yo?Zv(t,e):t instanceof vo?e_(t,e):n}function Jv(t,e){return t instanceof ul?function(r){return Hc(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class ll extends bl{}class yo extends bl{constructor(e){super(),this.elements=e}}function Zv(t,e){const n=t_(e);for(const r of t.elements)n.some(i=>yn(i,r))||n.push(r);return{arrayValue:{values:n}}}class vo extends bl{constructor(e){super(),this.elements=e}}function e_(t,e){let n=t_(e);for(const r of t.elements)n=n.filter(i=>!yn(i,r));return{arrayValue:{values:n}}}class ul extends bl{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function ym(t){return Me(t.integerValue||t.doubleValue)}function t_(t){return lh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function II(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof yo&&i instanceof yo||r instanceof vo&&i instanceof vo?Fi(r.elements,i.elements,yn):r instanceof ul&&i instanceof ul?yn(r.Pe,i.Pe):r instanceof ll&&i instanceof ll}(t.transform,e.transform)}class SI{constructor(e,n){this.version=e,this.transformResults=n}}class rn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new rn}static exists(e){return new rn(void 0,e)}static updateTime(e){return new rn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Da(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Vl{}function n_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new fh(t.key,rn.none()):new Ao(t.key,t.data,rn.none());{const n=t.data,r=St.empty();let i=new tt(Ze.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Er(t.key,r,new Ot(i.toArray()),rn.none())}}function xI(t,e,n){t instanceof Ao?function(i,s,o){const l=i.value.clone(),u=_m(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Er?function(i,s,o){if(!Da(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=_m(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(r_(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ws(t,e,n,r){return t instanceof Ao?function(s,o,l,u){if(!Da(s.precondition,o))return l;const d=s.value.clone(),f=wm(s.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Er?function(s,o,l,u){if(!Da(s.precondition,o))return l;const d=wm(s.fieldTransforms,u,o),f=o.data;return f.setAll(r_(s)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(y=>y.field))}(t,e,n,r):function(s,o,l){return Da(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function AI(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=Jv(r.transform,i||null);s!=null&&(n===null&&(n=St.empty()),n.set(r.field,s))}return n||null}function vm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Fi(r,i,(s,o)=>II(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ao extends Vl{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Er extends Vl{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function r_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function _m(t,e,n){const r=new Map;we(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,TI(o,l,n[i]))}return r}function wm(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,EI(s,o,e))}return r}class fh extends Vl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RI extends Vl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&xI(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ws(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ws(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Yv();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const u=n_(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&Fi(this.mutations,e.mutations,(n,r)=>vm(n,r))&&Fi(this.baseMutations,e.baseMutations,(n,r)=>vm(n,r))}}class ph{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){we(e.mutations.length===r.length);let i=function(){return gI}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new ph(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be,de;function DI(t){switch(t){default:return ne();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function i_(t){if(t===void 0)return Nn("GRPC error has no .code"),j.UNKNOWN;switch(t){case Be.OK:return j.OK;case Be.CANCELLED:return j.CANCELLED;case Be.UNKNOWN:return j.UNKNOWN;case Be.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case Be.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case Be.INTERNAL:return j.INTERNAL;case Be.UNAVAILABLE:return j.UNAVAILABLE;case Be.UNAUTHENTICATED:return j.UNAUTHENTICATED;case Be.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case Be.NOT_FOUND:return j.NOT_FOUND;case Be.ALREADY_EXISTS:return j.ALREADY_EXISTS;case Be.PERMISSION_DENIED:return j.PERMISSION_DENIED;case Be.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case Be.ABORTED:return j.ABORTED;case Be.OUT_OF_RANGE:return j.OUT_OF_RANGE;case Be.UNIMPLEMENTED:return j.UNIMPLEMENTED;case Be.DATA_LOSS:return j.DATA_LOSS;default:return ne()}}(de=Be||(Be={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI=new Fr([4294967295,4294967295],0);function Em(t){const e=NI().encode(t),n=new Cv;return n.update(e),new Uint8Array(n.digest())}function Tm(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Fr([n,r],0),new Fr([i,s],0)]}class mh{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ps(`Invalid padding: ${n}`);if(r<0)throw new Ps(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ps(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ps(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Fr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Fr.fromNumber(r)));return i.compare(bI)===1&&(i=new Fr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Em(e),[r,i]=Tm(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new mh(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=Em(e),[r,i]=Tm(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ps extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ro.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ll(re.min(),i,new be(ye),bn(),ce())}}class Ro{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ro(r,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class s_{constructor(e,n){this.targetId=e,this.me=n}}class o_{constructor(e,n,r=rt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Im{constructor(){this.fe=0,this.ge=xm(),this.pe=rt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ce(),n=ce(),r=ce();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ne()}}),new Ro(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=xm()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,we(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class VI{constructor(e){this.Le=e,this.Be=new Map,this.ke=bn(),this.qe=Sm(),this.Qe=new be(ye)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ne()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Kc(s))if(r===0){const o=new ee(s.path);this.Ue(n,o,ht.newNoDocument(o,re.min()))}else we(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=Kr(r).toUint8Array()}catch(u){if(u instanceof jv)return Mi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new mh(o,i,s)}catch(u){return Mi(u instanceof Ps?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const l=this.Je(o);if(l){if(s.current&&Kc(l.target)){const u=new ee(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,ht.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ce();this.qe.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Ll(e,n,this.Qe,this.ke,r);return this.ke=bn(),this.qe=Sm(),this.Qe=new be(ye),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Im,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new tt(ye),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Im),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Sm(){return new be(ee.comparator)}function xm(){return new be(ee.comparator)}const LI={asc:"ASCENDING",desc:"DESCENDING"},OI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jI={and:"AND",or:"OR"};class MI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Xc(t,e){return t.useProto3Json||Pl(e)?e:{value:e}}function cl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function a_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function FI(t,e){return cl(t,e.toTimestamp())}function gn(t){return we(!!t),re.fromTimestamp(function(n){const r=gr(n);return new qe(r.seconds,r.nanos)}(t))}function gh(t,e){return Jc(t,e).canonicalString()}function Jc(t,e){const n=function(i){return new xe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function l_(t){const e=xe.fromString(t);return we(f_(e)),e}function Zc(t,e){return gh(t.databaseId,e.path)}function Lu(t,e){const n=l_(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ee(c_(n))}function u_(t,e){return gh(t.databaseId,e)}function BI(t){const e=l_(t);return e.length===4?xe.emptyPath():c_(e)}function ed(t){return new xe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function c_(t){return we(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Am(t,e,n){return{name:Zc(t,e),fields:n.value.mapValue.fields}}function UI(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ne()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,f){return d.useProto3Json?(we(f===void 0||typeof f=="string"),rt.fromBase64String(f||"")):(we(f===void 0||f instanceof Buffer||f instanceof Uint8Array),rt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const f=d.code===void 0?j.UNKNOWN:i_(d.code);return new Y(f,d.message||"")}(o);n=new o_(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Lu(t,r.document.name),s=gn(r.document.updateTime),o=r.document.createTime?gn(r.document.createTime):re.min(),l=new St({mapValue:{fields:r.document.fields}}),u=ht.newFoundDocument(i,s,o,l),d=r.targetIds||[],f=r.removedTargetIds||[];n=new Na(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Lu(t,r.document),s=r.readTime?gn(r.readTime):re.min(),o=ht.newNoDocument(i,s),l=r.removedTargetIds||[];n=new Na([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Lu(t,r.document),s=r.removedTargetIds||[];n=new Na([],s,i,null)}else{if(!("filter"in e))return ne();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new PI(i,s),l=r.targetId;n=new s_(l,o)}}return n}function zI(t,e){let n;if(e instanceof Ao)n={update:Am(t,e.key,e.value)};else if(e instanceof fh)n={delete:Zc(t,e.key)};else if(e instanceof Er)n={update:Am(t,e.key,e.data),updateMask:XI(e.fieldMask)};else{if(!(e instanceof RI))return ne();n={verify:Zc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof ll)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof yo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof vo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ul)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw ne()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:FI(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ne()}(t,e.precondition)),n}function $I(t,e){return t&&t.length>0?(we(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?gn(i.updateTime):gn(s);return o.isEqual(re.min())&&(o=gn(s)),new SI(o,i.transformResults||[])}(n,e))):[]}function WI(t,e){return{documents:[u_(t,e.path)]}}function qI(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=u_(t,i);const s=function(d){if(d.length!==0)return h_(on.create(d,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(d){if(d.length!==0)return d.map(f=>function(_){return{field:ui(_.field),direction:KI(_.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Xc(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:i}}function HI(t){let e=BI(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){we(r===1);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(y){const _=d_(y);return _ instanceof on&&Uv(_)?_.getFilters():[_]}(n.where));let o=[];n.orderBy&&(o=function(y){return y.map(_=>function(P){return new go(ci(P.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(_))}(n.orderBy));let l=null;n.limit&&(l=function(y){let _;return _=typeof y=="object"?y.value:y,Pl(_)?null:_}(n.limit));let u=null;n.startAt&&(u=function(y){const _=!!y.before,R=y.values||[];return new al(R,_)}(n.startAt));let d=null;return n.endAt&&(d=function(y){const _=!y.before,R=y.values||[];return new al(R,_)}(n.endAt)),dI(e,i,o,s,l,"F",u,d)}function GI(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function d_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ci(n.unaryFilter.field);return ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ci(n.unaryFilter.field);return ze.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ci(n.unaryFilter.field);return ze.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ci(n.unaryFilter.field);return ze.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ne()}}(t):t.fieldFilter!==void 0?function(n){return ze.create(ci(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ne()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return on.create(n.compositeFilter.filters.map(r=>d_(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ne()}}(n.compositeFilter.op))}(t):ne()}function KI(t){return LI[t]}function QI(t){return OI[t]}function YI(t){return jI[t]}function ui(t){return{fieldPath:t.canonicalString()}}function ci(t){return Ze.fromServerFormat(t.fieldPath)}function h_(t){return t instanceof ze?function(n){if(n.op==="=="){if(hm(n.value))return{unaryFilter:{field:ui(n.field),op:"IS_NAN"}};if(dm(n.value))return{unaryFilter:{field:ui(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(hm(n.value))return{unaryFilter:{field:ui(n.field),op:"IS_NOT_NAN"}};if(dm(n.value))return{unaryFilter:{field:ui(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ui(n.field),op:QI(n.op),value:n.value}}}(t):t instanceof on?function(n){const r=n.getFilters().map(i=>h_(i));return r.length===1?r[0]:{compositeFilter:{op:YI(n.op),filters:r}}}(t):ne()}function XI(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function f_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,n,r,i,s=re.min(),o=re.min(),l=rt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Zn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Zn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Zn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Zn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e){this.ct=e}}function ZI(t){const e=HI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Yc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(){this.un=new tS}addToCollectionParentIndex(e,n){return this.un.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(mr.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(mr.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class tS{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new tt(xe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new tt(xe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new zi(0)}static kn(){return new zi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(){this.changes=new Xi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ht.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ws(r.mutation,i,Ot.empty(),qe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ce()){const i=Or();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=ks();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Or();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ce()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=bn();const o=$s(),l=function(){return $s()}();return n.forEach((u,d)=>{const f=r.get(d.key);i.has(d.key)&&(f===void 0||f.mutation instanceof Er)?s=s.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),Ws(f.mutation,d,f.mutation.getFieldMask(),qe.now())):o.set(d.key,Ot.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var y;return l.set(d,new rS(f,(y=o.get(d))!==null&&y!==void 0?y:null))}),l))}recalculateAndSaveOverlays(e,n){const r=$s();let i=new be((o,l)=>o-l),s=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||Ot.empty();f=l.applyToLocalView(d,f),r.set(u,f);const y=(i.get(l.batchId)||ce()).add(u);i=i.insert(l.batchId,y)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,f=u.value,y=Yv();f.forEach(_=>{if(!s.has(_)){const R=n_(n.get(_),r.get(_));R!==null&&y.set(_,R),s=s.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,y))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ee.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):qv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):M.resolve(Or());let l=-1,u=s;return o.next(d=>M.forEach(d,(f,y)=>(l<y.largestBatchId&&(l=y.largestBatchId),s.get(f)?M.resolve():this.remoteDocumentCache.getEntry(e,f).next(_=>{u=u.insert(f,_)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,ce())).next(f=>({batchId:l,changes:Qv(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ee(n)).next(r=>{let i=ks();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=ks();return this.indexManager.getCollectionParents(e,s).next(l=>M.forEach(l,u=>{const d=function(y,_){return new Yi(_,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((y,_)=>{o=o.insert(y,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,ht.newInvalidDocument(f)))});let l=ks();return o.forEach((u,d)=>{const f=s.get(u);f!==void 0&&Ws(f.mutation,d,Ot.empty(),qe.now()),Nl(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return M.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:gn(i.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:ZI(i.bundledQuery),readTime:gn(i.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(){this.overlays=new be(ee.comparator),this.Ir=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Or();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const i=Or(),s=n.length+1,o=new ee(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return M.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new be((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=s.get(d.largestBatchId);f===null&&(f=Or(),s=s.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const l=Or(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>l.set(d,f)),!(l.size()>=i)););return M.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new kI(n,r));let s=this.Ir.get(n);s===void 0&&(s=ce(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(){this.sessionToken=rt.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(){this.Tr=new tt(Ge.Er),this.dr=new tt(Ge.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ge(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ge(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ee(new xe([])),r=new Ge(n,e),i=new Ge(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ee(new xe([])),r=new Ge(n,e),i=new Ge(n,e+1);let s=ce();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Ge(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ge{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ee.comparator(e.key,n.key)||ye(e.wr,n.wr)}static Ar(e,n){return ye(e.wr,n.wr)||ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new tt(Ge.Er)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new CI(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.br=this.br.add(new Ge(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ge(n,0),i=new Ge(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const l=this.Dr(o.wr);s.push(l)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new tt(ye);return n.forEach(i=>{const s=new Ge(i,0),o=new Ge(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],l=>{r=r.add(l.wr)})}),M.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ee.isDocumentKey(s)||(s=s.child(""));const o=new Ge(new ee(s),0);let l=new tt(ye);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(l=l.add(u.wr)),!0)},o),M.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){we(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return M.forEach(n.mutations,i=>{const s=new Ge(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ge(n,0),i=this.br.firstAfterOrEqual(r);return M.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e){this.Mr=e,this.docs=function(){return new be(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():ht.newInvalidDocument(n))}getEntries(e,n){let r=bn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ht.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=bn();const o=n.path,l=new ee(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||H1(q1(f),r)<=0||(i.has(f.key)||Nl(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ne()}Or(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new cS(this)}getSize(e){return M.resolve(this.size)}}class cS extends nS{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(e){this.persistence=e,this.Nr=new Xi(n=>uh(n),ch),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.Lr=0,this.Br=new yh,this.targetCount=0,this.kr=zi.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),M.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new zi(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Kn(n),M.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),M.waitFor(s).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e,n){this.qr={},this.overlays={},this.Qr=new sh(0),this.Kr=!1,this.Kr=!0,this.$r=new aS,this.referenceDelegate=e(this),this.Ur=new dS(this),this.indexManager=new eS,this.remoteDocumentCache=function(i){return new uS(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new JI(n),this.Gr=new sS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new oS,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new lS(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const i=new fS(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return M.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class fS extends K1{constructor(e){super(),this.currentSequenceNumber=e}}class vh{constructor(e){this.persistence=e,this.Jr=new yh,this.Yr=null}static Zr(e){return new vh(e)}get Xr(){if(this.Yr)return this.Yr;throw ne()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),M.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Xr,r=>{const i=ee.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,re.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return M.or([()=>M.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ce(),i=ce();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new _h(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return wT()?8:Q1(vT())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new pS;return this.Xi(e,n,o).next(l=>{if(s.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Ts()<=he.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",li(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),M.resolve()):(Ts()<=he.DEBUG&&X("QueryEngine","Query:",li(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ts()<=he.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",li(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mn(n))):M.resolve())}Yi(e,n){if(gm(n))return M.resolve(null);let r=mn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Yc(n,null,"F"),r=mn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ce(...s);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,l);return this.ns(n,d,o,u.readTime)?this.Yi(e,Yc(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,i){return gm(n)||i.isEqual(re.min())?M.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?M.resolve(null):(Ts()<=he.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),li(n)),this.rs(e,o,n,W1(i,-1)).next(l=>l))})}ts(e,n){let r=new tt(Gv(e));return n.forEach((i,s)=>{Nl(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Ts()<=he.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",li(n)),this.Ji.getDocumentsMatchingQuery(e,n,mr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new be(ye),this._s=new Xi(s=>uh(s),ch),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iS(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function yS(t,e,n,r){return new gS(t,e,n,r)}async function p_(t,e){const n=ie(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=ce();for(const d of i){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of s){l.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:l}))})})}function vS(t,e){const n=ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,f){const y=d.batch,_=y.keys();let R=M.resolve();return _.forEach(P=>{R=R.next(()=>f.getEntry(u,P)).next(N=>{const V=d.docVersions.get(P);we(V!==null),N.version.compareTo(V)<0&&(y.applyToRemoteDocument(N,d),N.isValidDocument()&&(N.setReadTime(d.commitVersion),f.addEntry(N)))})}),R.next(()=>l.mutationQueue.removeMutationBatch(u,y))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ce();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function m_(t){const e=ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function _S(t,e){const n=ie(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const l=[];e.targetChanges.forEach((f,y)=>{const _=i.get(y);if(!_)return;l.push(n.Ur.removeMatchingKeys(s,f.removedDocuments,y).next(()=>n.Ur.addMatchingKeys(s,f.addedDocuments,y)));let R=_.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(y)!==null?R=R.withResumeToken(rt.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):f.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(f.resumeToken,r)),i=i.insert(y,R),function(N,V,x){return N.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(_,R,f)&&l.push(n.Ur.updateTargetData(s,R))});let u=bn(),d=ce();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),l.push(wS(s,o,e.documentUpdates).next(f=>{u=f.Ps,d=f.Is})),!r.isEqual(re.min())){const f=n.Ur.getLastRemoteSnapshotVersion(s).next(y=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(f)}return M.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(n.os=i,s))}function wS(t,e,n){let r=ce(),i=ce();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=bn();return n.forEach((l,u)=>{const d=s.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(re.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):X("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function ES(t,e){const n=ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function TS(t,e){const n=ie(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,M.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Zn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function td(t,e,n){const r=ie(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!xo(o))throw o;X("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Rm(t,e,n){const r=ie(t);let i=re.min(),s=ce();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const y=ie(u),_=y._s.get(f);return _!==void 0?M.resolve(y.os.get(_)):y.Ur.getTargetData(d,f)}(r,o,mn(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:re.min(),n?s:ce())).next(l=>(IS(r,fI(e),l),{documents:l,Ts:s})))}function IS(t,e,n){let r=t.us.get(e)||re.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class Cm{constructor(){this.activeTargetIds=_I()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class SS{constructor(){this.so=new Cm,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Cm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){X("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){X("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fa=null;function Ou(){return fa===null?fa=function(){return 268435456+Math.round(2147483648*Math.random())}():fa++,"0x"+fa.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ut="WebChannelConnection";class CS extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const l=Ou(),u=this.xo(n,r.toUriEncodedString());X("RestConnection",`Sending RPC '${n}' ${l}:`,u,i);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,s,o),this.No(n,u,d,i).then(f=>(X("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw Mi("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",u,"request:",i),f})}Lo(n,r,i,s,o,l){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=AS[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Ou();return new Promise((o,l)=>{const u=new kv;u.setWithCredentials(!0),u.listenOnce(Pv.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ka.NO_ERROR:const f=u.getResponseJson();X(ut,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case ka.TIMEOUT:X(ut,`RPC '${e}' ${s} timed out`),l(new Y(j.DEADLINE_EXCEEDED,"Request time out"));break;case ka.HTTP_ERROR:const y=u.getStatus();if(X(ut,`RPC '${e}' ${s} failed with status:`,y,"response text:",u.getResponseText()),y>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);const R=_==null?void 0:_.error;if(R&&R.status&&R.message){const P=function(V){const x=V.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(x)>=0?x:j.UNKNOWN}(R.status);l(new Y(P,R.message))}else l(new Y(j.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Y(j.UNAVAILABLE,"Connection failed."));break;default:ne()}}finally{X(ut,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(i);X(ut,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const i=Ou(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=bv(),l=Nv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=s.join("");X(ut,`Creating RPC '${e}' stream ${i}: ${f}`,u);const y=o.createWebChannel(f,u);let _=!1,R=!1;const P=new RS({Io:V=>{R?X(ut,`Not sending because RPC '${e}' stream ${i} is closed:`,V):(_||(X(ut,`Opening RPC '${e}' stream ${i} transport.`),y.open(),_=!0),X(ut,`RPC '${e}' stream ${i} sending:`,V),y.send(V))},To:()=>y.close()}),N=(V,x,w)=>{V.listen(x,C=>{try{w(C)}catch(b){setTimeout(()=>{throw b},0)}})};return N(y,Cs.EventType.OPEN,()=>{R||(X(ut,`RPC '${e}' stream ${i} transport opened.`),P.yo())}),N(y,Cs.EventType.CLOSE,()=>{R||(R=!0,X(ut,`RPC '${e}' stream ${i} transport closed`),P.So())}),N(y,Cs.EventType.ERROR,V=>{R||(R=!0,Mi(ut,`RPC '${e}' stream ${i} transport errored:`,V),P.So(new Y(j.UNAVAILABLE,"The operation could not be completed")))}),N(y,Cs.EventType.MESSAGE,V=>{var x;if(!R){const w=V.data[0];we(!!w);const C=w,b=C.error||((x=C[0])===null||x===void 0?void 0:x.error);if(b){X(ut,`RPC '${e}' stream ${i} received error:`,b);const F=b.status;let $=function(E){const I=Be[E];if(I!==void 0)return i_(I)}(F),T=b.message;$===void 0&&($=j.INTERNAL,T="Unknown error status: "+F+" with message "+b.message),R=!0,P.So(new Y($,T)),y.close()}else X(ut,`RPC '${e}' stream ${i} received:`,w),P.bo(w)}}),N(l,Dv.STAT_EVENT,V=>{V.stat===Wc.PROXY?X(ut,`RPC '${e}' stream ${i} detected buffering proxy`):V.stat===Wc.NOPROXY&&X(ut,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{P.wo()},0),P}}function ju(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ol(t){return new MI(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&X("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(e,n,r,i,s,o,l,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new g_(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(Nn(n.toString()),Nn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new Y(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return X("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(X("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class kS extends y_{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=UI(this.serializer,e),r=function(s){if(!("targetChange"in s))return re.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?re.min():o.readTime?gn(o.readTime):re.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=ed(this.serializer),n.addTarget=function(s,o){let l;const u=o.target;if(l=Kc(u)?{documents:WI(s,u)}:{query:qI(s,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=a_(s,o.resumeToken);const d=Xc(s,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(re.min())>0){l.readTime=cl(s,o.snapshotVersion.toTimestamp());const d=Xc(s,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=GI(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=ed(this.serializer),n.removeTarget=e,this.a_(n)}}class PS extends y_{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return we(!!e.streamToken),this.lastStreamToken=e.streamToken,we(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){we(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=$I(e.writeResults,e.commitTime),r=gn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=ed(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>zI(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Y(j.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Jc(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Y(j.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,Jc(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(j.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class NS{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Nn(n),this.D_=!1):X("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{ti(this)&&(X("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=ie(u);d.L_.add(4),await Co(d),d.q_.set("Unknown"),d.L_.delete(4),await jl(d)}(this))})}),this.q_=new NS(r,i)}}async function jl(t){if(ti(t))for(const e of t.B_)await e(!0)}async function Co(t){for(const e of t.B_)await e(!1)}function v_(t,e){const n=ie(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Ih(n)?Th(n):Ji(n).r_()&&Eh(n,e))}function wh(t,e){const n=ie(t),r=Ji(n);n.N_.delete(e),r.r_()&&__(n,e),n.N_.size===0&&(r.r_()?r.o_():ti(n)&&n.q_.set("Unknown"))}function Eh(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ji(t).A_(e)}function __(t,e){t.Q_.xe(e),Ji(t).R_(e)}function Th(t){t.Q_=new VI({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ji(t).start(),t.q_.v_()}function Ih(t){return ti(t)&&!Ji(t).n_()&&t.N_.size>0}function ti(t){return ie(t).L_.size===0}function w_(t){t.Q_=void 0}async function VS(t){t.q_.set("Online")}async function LS(t){t.N_.forEach((e,n)=>{Eh(t,e)})}async function OS(t,e){w_(t),Ih(t)?(t.q_.M_(e),Th(t)):t.q_.set("Unknown")}async function jS(t,e,n){if(t.q_.set("Online"),e instanceof o_&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(r){X("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await dl(t,r)}else if(e instanceof Na?t.Q_.Ke(e):e instanceof s_?t.Q_.He(e):t.Q_.We(e),!n.isEqual(re.min()))try{const r=await m_(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.Q_.rt(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.N_.get(d);f&&s.N_.set(d,f.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const f=s.N_.get(u);if(!f)return;s.N_.set(u,f.withResumeToken(rt.EMPTY_BYTE_STRING,f.snapshotVersion)),__(s,u);const y=new Zn(f.target,u,d,f.sequenceNumber);Eh(s,y)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){X("RemoteStore","Failed to raise snapshot:",r),await dl(t,r)}}async function dl(t,e,n){if(!xo(e))throw e;t.L_.add(1),await Co(t),t.q_.set("Offline"),n||(n=()=>m_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await jl(t)})}function E_(t,e){return e().catch(n=>dl(t,n,e))}async function Ml(t){const e=ie(t),n=yr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;MS(e);)try{const i=await ES(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,FS(e,i)}catch(i){await dl(e,i)}T_(e)&&I_(e)}function MS(t){return ti(t)&&t.O_.length<10}function FS(t,e){t.O_.push(e);const n=yr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function T_(t){return ti(t)&&!yr(t).n_()&&t.O_.length>0}function I_(t){yr(t).start()}async function BS(t){yr(t).p_()}async function US(t){const e=yr(t);for(const n of t.O_)e.m_(n.mutations)}async function zS(t,e,n){const r=t.O_.shift(),i=ph.from(r,e,n);await E_(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Ml(t)}async function $S(t,e){e&&yr(t).V_&&await async function(r,i){if(function(o){return DI(o)&&o!==j.ABORTED}(i.code)){const s=r.O_.shift();yr(r).s_(),await E_(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Ml(r)}}(t,e),T_(t)&&I_(t)}async function Pm(t,e){const n=ie(t);n.asyncQueue.verifyOperationInProgress(),X("RemoteStore","RemoteStore received new credentials");const r=ti(n);n.L_.add(3),await Co(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await jl(n)}async function WS(t,e){const n=ie(t);e?(n.L_.delete(2),await jl(n)):e||(n.L_.add(2),await Co(n),n.q_.set("Unknown"))}function Ji(t){return t.K_||(t.K_=function(n,r,i){const s=ie(n);return s.w_(),new kS(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:VS.bind(null,t),Ro:LS.bind(null,t),mo:OS.bind(null,t),d_:jS.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Ih(t)?Th(t):t.q_.set("Unknown")):(await t.K_.stop(),w_(t))})),t.K_}function yr(t){return t.U_||(t.U_=function(n,r,i){const s=ie(n);return s.w_(),new PS(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:BS.bind(null,t),mo:$S.bind(null,t),f_:US.bind(null,t),g_:zS.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Ml(t)):(await t.U_.stop(),t.O_.length>0&&(X("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new Sh(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xh(t,e){if(Nn("AsyncQueue",`${e}: ${t}`),xo(t))return new Y(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ee.comparator(n.key,r.key):(n,r)=>ee.comparator(n.key,r.key),this.keyedMap=ks(),this.sortedSet=new be(this.comparator)}static emptySet(e){return new ki(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ki)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ki;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(){this.W_=new be(ee.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ne():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class $i{constructor(e,n,r,i,s,o,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new $i(e,n,ki.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class HS{constructor(){this.queries=Nm(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ie(n),s=i.queries;i.queries=Nm(),s.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new Y(j.ABORTED,"Firestore shutting down"))}}function Nm(){return new Xi(t=>Hv(t),Dl)}async function GS(t,e){const n=ie(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new qS,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=xh(o,`Initialization of query '${li(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Ah(n)}async function KS(t,e){const n=ie(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function QS(t,e){const n=ie(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.j_)l.X_(i)&&(r=!0);o.z_=i}}r&&Ah(n)}function YS(t,e,n){const r=ie(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function Ah(t){t.Y_.forEach(e=>{e.next()})}var nd,bm;(bm=nd||(nd={})).ea="default",bm.Cache="cache";class XS{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new $i(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=$i.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==nd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(e){this.key=e}}class x_{constructor(e){this.key=e}}class JS{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ce(),this.mutatedKeys=ce(),this.Aa=Gv(e),this.Ra=new ki(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Dm,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,y)=>{const _=i.get(f),R=Nl(this.query,y)?y:null,P=!!_&&this.mutatedKeys.has(_.key),N=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let V=!1;_&&R?_.data.isEqual(R.data)?P!==N&&(r.track({type:3,doc:R}),V=!0):this.ga(_,R)||(r.track({type:2,doc:R}),V=!0,(u&&this.Aa(R,u)>0||d&&this.Aa(R,d)<0)&&(l=!0)):!_&&R?(r.track({type:0,doc:R}),V=!0):_&&!R&&(r.track({type:1,doc:_}),V=!0,(u||d)&&(l=!0)),V&&(R?(o=o.add(R),s=N?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:l,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,y)=>function(R,P){const N=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne()}};return N(R)-N(P)}(f.type,y.type)||this.Aa(f.doc,y.doc)),this.pa(r),i=i!=null&&i;const l=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new $i(this.query,e.Ra,s,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Dm,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ce(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new x_(r))}),this.da.forEach(r=>{e.has(r)||n.push(new S_(r))}),n}ba(e){this.Ta=e.Ts,this.da=ce();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return $i.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class ZS{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class ex{constructor(e){this.key=e,this.va=!1}}class tx{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Xi(l=>Hv(l),Dl),this.Ma=new Map,this.xa=new Set,this.Oa=new be(ee.comparator),this.Na=new Map,this.La=new yh,this.Ba={},this.ka=new Map,this.qa=zi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function nx(t,e,n=!0){const r=D_(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await A_(r,e,n,!0),i}async function rx(t,e){const n=D_(t);await A_(n,e,!0,!1)}async function A_(t,e,n,r){const i=await TS(t.localStore,mn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await ix(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&v_(t.remoteStore,i),l}async function ix(t,e,n,r,i){t.Ka=(y,_,R)=>async function(N,V,x,w){let C=V.view.ma(x);C.ns&&(C=await Rm(N.localStore,V.query,!1).then(({documents:T})=>V.view.ma(T,C)));const b=w&&w.targetChanges.get(V.targetId),F=w&&w.targetMismatches.get(V.targetId)!=null,$=V.view.applyChanges(C,N.isPrimaryClient,b,F);return Lm(N,V.targetId,$.wa),$.snapshot}(t,y,_,R);const s=await Rm(t.localStore,e,!0),o=new JS(e,s.Ts),l=o.ma(s.documents),u=Ro.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=o.applyChanges(l,t.isPrimaryClient,u);Lm(t,n,d.wa);const f=new ZS(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function sx(t,e,n){const r=ie(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Dl(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await td(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&wh(r.remoteStore,i.targetId),rd(r,i.targetId)}).catch(So)):(rd(r,i.targetId),await td(r.localStore,i.targetId,!0))}async function ox(t,e){const n=ie(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),wh(n.remoteStore,r.targetId))}async function ax(t,e,n){const r=px(t);try{const i=await function(o,l){const u=ie(o),d=qe.now(),f=l.reduce((R,P)=>R.add(P.key),ce());let y,_;return u.persistence.runTransaction("Locally write mutations","readwrite",R=>{let P=bn(),N=ce();return u.cs.getEntries(R,f).next(V=>{P=V,P.forEach((x,w)=>{w.isValidDocument()||(N=N.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(R,P)).next(V=>{y=V;const x=[];for(const w of l){const C=AI(w,y.get(w.key).overlayedDocument);C!=null&&x.push(new Er(w.key,C,Mv(C.value.mapValue),rn.exists(!0)))}return u.mutationQueue.addMutationBatch(R,d,x,l)}).next(V=>{_=V;const x=V.applyToLocalDocumentSet(y,N);return u.documentOverlayCache.saveOverlays(R,V.batchId,x)})}).then(()=>({batchId:_.batchId,changes:Qv(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new be(ye)),d=d.insert(l,u),o.Ba[o.currentUser.toKey()]=d}(r,i.batchId,n),await ko(r,i.changes),await Ml(r.remoteStore)}catch(i){const s=xh(i,"Failed to persist write");n.reject(s)}}async function R_(t,e){const n=ie(t);try{const r=await _S(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(we(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?we(o.va):i.removedDocuments.size>0&&(we(o.va),o.va=!1))}),await ko(n,r,e)}catch(r){await So(r)}}function Vm(t,e,n){const r=ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const l=o.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=ie(o);u.onlineState=l;let d=!1;u.queries.forEach((f,y)=>{for(const _ of y.j_)_.Z_(l)&&(d=!0)}),d&&Ah(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function lx(t,e,n){const r=ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new be(ee.comparator);o=o.insert(s,ht.newNoDocument(s,re.min()));const l=ce().add(s),u=new Ll(re.min(),new Map,new be(ye),o,l);await R_(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),Rh(r)}else await td(r.localStore,e,!1).then(()=>rd(r,e,n)).catch(So)}async function ux(t,e){const n=ie(t),r=e.batch.batchId;try{const i=await vS(n.localStore,e);k_(n,r,null),C_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ko(n,i)}catch(i){await So(i)}}async function cx(t,e,n){const r=ie(t);try{const i=await function(o,l){const u=ie(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,l).next(y=>(we(y!==null),f=y.keys(),u.mutationQueue.removeMutationBatch(d,y))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);k_(r,e,n),C_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ko(r,i)}catch(i){await So(i)}}function C_(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function k_(t,e,n){const r=ie(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function rd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||P_(t,r)})}function P_(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(wh(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Rh(t))}function Lm(t,e,n){for(const r of n)r instanceof S_?(t.La.addReference(r.key,e),dx(t,r)):r instanceof x_?(X("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||P_(t,r.key)):ne()}function dx(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(X("SyncEngine","New document in limbo: "+n),t.xa.add(r),Rh(t))}function Rh(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ee(xe.fromString(e)),r=t.qa.next();t.Na.set(r,new ex(n)),t.Oa=t.Oa.insert(n,r),v_(t.remoteStore,new Zn(mn(dh(n.path)),r,"TargetPurposeLimboResolution",sh.oe))}}async function ko(t,e,n){const r=ie(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const y=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,y?"current":"not-current")}if(d){i.push(d);const y=_h.Wi(u.targetId,d);s.push(y)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(u,d){const f=ie(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>M.forEach(d,_=>M.forEach(_.$i,R=>f.persistence.referenceDelegate.addReference(y,_.targetId,R)).next(()=>M.forEach(_.Ui,R=>f.persistence.referenceDelegate.removeReference(y,_.targetId,R)))))}catch(y){if(!xo(y))throw y;X("LocalStore","Failed to update sequence numbers: "+y)}for(const y of d){const _=y.targetId;if(!y.fromCache){const R=f.os.get(_),P=R.snapshotVersion,N=R.withLastLimboFreeSnapshotVersion(P);f.os=f.os.insert(_,N)}}}(r.localStore,s))}async function hx(t,e){const n=ie(t);if(!n.currentUser.isEqual(e)){X("SyncEngine","User change. New user:",e.toKey());const r=await p_(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(l=>{l.forEach(u=>{u.reject(new Y(j.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ko(n,r.hs)}}function fx(t,e){const n=ie(t),r=n.Na.get(e);if(r&&r.va)return ce().add(r.key);{let i=ce();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const l=n.Fa.get(o);i=i.unionWith(l.view.Va)}return i}}function D_(t){const e=ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=R_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fx.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lx.bind(null,e),e.Ca.d_=QS.bind(null,e.eventManager),e.Ca.$a=YS.bind(null,e.eventManager),e}function px(t){const e=ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ux.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cx.bind(null,e),e}class hl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ol(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return yS(this.persistence,new mS,e.initialUser,this.serializer)}Ga(e){return new hS(vh.Zr,this.serializer)}Wa(e){return new SS}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}hl.provider={build:()=>new hl};class id{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Vm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=hx.bind(null,this.syncEngine),await WS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new HS}()}createDatastore(e){const n=Ol(e.databaseInfo.databaseId),r=function(s){return new CS(s)}(e.databaseInfo);return function(s,o,l,u){return new DS(s,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new bS(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Vm(this.syncEngine,n,0),function(){return km.D()?new km:new xS}())}createSyncEngine(e,n){return function(i,s,o,l,u,d,f){const y=new tx(i,s,o,l,u,d);return f&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ie(i);X("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Co(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}id.provider={build:()=>new id};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Nn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ct.UNAUTHENTICATED,this.clientId=Lv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{X("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(X("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=xh(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Mu(t,e){t.asyncQueue.verifyOperationInProgress(),X("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await p_(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Om(t,e){t.asyncQueue.verifyOperationInProgress();const n=await yx(t);X("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Pm(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Pm(e.remoteStore,i)),t._onlineComponents=e}async function yx(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X("FirestoreClient","Using user provided OfflineComponentProvider");try{await Mu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===j.FAILED_PRECONDITION||i.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Mi("Error using user provided cache. Falling back to memory cache: "+n),await Mu(t,new hl)}}else X("FirestoreClient","Using default OfflineComponentProvider"),await Mu(t,new hl);return t._offlineComponents}async function N_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X("FirestoreClient","Using user provided OnlineComponentProvider"),await Om(t,t._uninitializedComponentsProvider._online)):(X("FirestoreClient","Using default OnlineComponentProvider"),await Om(t,new id))),t._onlineComponents}function vx(t){return N_(t).then(e=>e.syncEngine)}async function jm(t){const e=await N_(t),n=e.eventManager;return n.onListen=nx.bind(null,e.syncEngine),n.onUnlisten=sx.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=rx.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ox.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(t,e,n){if(!n)throw new Y(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function _x(t,e,n,r){if(e===!0&&r===!0)throw new Y(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Fm(t){if(!ee.isDocumentKey(t))throw new Y(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Bm(t){if(ee.isDocumentKey(t))throw new Y(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Fl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne()}function dr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Fl(t);throw new Y(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Y(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_x("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=b_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Y(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Y(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Y(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bl{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Um({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Um(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new L1;switch(r.type){case"firstParty":return new F1(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Mm.get(n);r&&(X("ComponentProvider","Removing Datastore"),Mm.delete(n),r.terminate())}(this),Promise.resolve()}}function wx(t,e,n,r={}){var i;const s=(t=dr(t,Bl))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Mi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=ct.MOCK_USER;else{l=yv(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new Y(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ct(d)}t._authCredentials=new O1(new Vv(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ni(this.firestore,e,this._query)}}class kt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kt(this.firestore,e,this._key)}}class hr extends ni{constructor(e,n,r){super(e,n,dh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kt(this.firestore,null,new ee(e))}withConverter(e){return new hr(this.firestore,e,this._path)}}function zm(t,e,...n){if(t=vt(t),V_("collection","path",e),t instanceof Bl){const r=xe.fromString(e,...n);return Bm(r),new hr(t,null,r)}{if(!(t instanceof kt||t instanceof hr))throw new Y(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(xe.fromString(e,...n));return Bm(r),new hr(t.firestore,null,r)}}function un(t,e,...n){if(t=vt(t),arguments.length===1&&(e=Lv.newId()),V_("doc","path",e),t instanceof Bl){const r=xe.fromString(e,...n);return Fm(r),new kt(t,null,new ee(r))}{if(!(t instanceof kt||t instanceof hr))throw new Y(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(xe.fromString(e,...n));return Fm(r),new kt(t.firestore,t instanceof hr?t.converter:null,new ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new g_(this,"async_queue_retry"),this.Vu=()=>{const r=ju();r&&X("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=ju();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=ju();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Br;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!xo(e))throw e;X("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Nn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Sh.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&ne()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Wm(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Wi extends Bl{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new $m,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $m(e),this._firestoreClient=void 0,await e}}}function Ex(t,e){const n=typeof t=="object"?t:xv(),r=typeof t=="string"?t:"(default)",i=Tv(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=mv("firestore");s&&wx(i,...s)}return i}function L_(t){if(t._terminated)throw new Y(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Tx(t),t._firestoreClient}function Tx(t){var e,n,r;const i=t._freezeSettings(),s=function(l,u,d,f){return new J1(l,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,b_(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new gx(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qi(rt.fromBase64String(e))}catch(n){throw new Y(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new qi(rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ze(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ye(this._lat,e._lat)||ye(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix=/^__.*__$/;class Sx{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Er(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ao(e,this.data,n,this.fieldTransforms)}}class O_{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Er(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function j_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne()}}class Dh{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Dh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return fl(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(j_(this.Cu)&&Ix.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class xx{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ol(e)}Qu(e,n,r,i=!1){return new Dh({Cu:e,methodName:n,qu:r,path:Ze.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nh(t){const e=t._freezeSettings(),n=Ol(t._databaseId);return new xx(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ax(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);bh("Data must be an object, but it was:",o,r);const l=M_(r,o);let u,d;if(s.merge)u=new Ot(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const y of s.mergeFields){const _=sd(e,y,n);if(!o.contains(_))throw new Y(j.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);B_(f,_)||f.push(_)}u=new Ot(f),d=o.fieldTransforms.filter(y=>u.covers(y.field))}else u=null,d=o.fieldTransforms;return new Sx(new St(l),u,d)}class zl extends Ch{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zl}}function Rx(t,e,n,r){const i=t.Qu(1,e,n);bh("Data must be an object, but it was:",i,r);const s=[],o=St.empty();ei(r,(u,d)=>{const f=Vh(e,u,n);d=vt(d);const y=i.Nu(f);if(d instanceof zl)s.push(f);else{const _=Po(d,y);_!=null&&(s.push(f),o.set(f,_))}});const l=new Ot(s);return new O_(o,l,i.fieldTransforms)}function Cx(t,e,n,r,i,s){const o=t.Qu(1,e,n),l=[sd(e,r,n)],u=[i];if(s.length%2!=0)throw new Y(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)l.push(sd(e,s[_])),u.push(s[_+1]);const d=[],f=St.empty();for(let _=l.length-1;_>=0;--_)if(!B_(d,l[_])){const R=l[_];let P=u[_];P=vt(P);const N=o.Nu(R);if(P instanceof zl)d.push(R);else{const V=Po(P,N);V!=null&&(d.push(R),f.set(R,V))}}const y=new Ot(d);return new O_(f,y,o.fieldTransforms)}function kx(t,e,n,r=!1){return Po(n,t.Qu(r?4:3,e))}function Po(t,e){if(F_(t=vt(t)))return bh("Unsupported field value:",e,t),M_(t,e);if(t instanceof Ch)return function(r,i){if(!j_(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let u=Po(l,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=vt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return wI(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=qe.fromDate(r);return{timestampValue:cl(i.serializer,s)}}if(r instanceof qe){const s=new qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:cl(i.serializer,s)}}if(r instanceof kh)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof qi)return{bytesValue:a_(i.serializer,r._byteString)};if(r instanceof kt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:gh(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ph)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return hh(l.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Fl(r)}`)}(t,e)}function M_(t,e){const n={};return Ov(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ei(t,(r,i)=>{const s=Po(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function F_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof qe||t instanceof kh||t instanceof qi||t instanceof kt||t instanceof Ch||t instanceof Ph)}function bh(t,e,n){if(!F_(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Fl(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function sd(t,e,n){if((e=vt(e))instanceof Ul)return e._internalPath;if(typeof e=="string")return Vh(t,e);throw fl("Field path arguments must be of type string or ",t,!1,void 0,n)}const Px=new RegExp("[~\\*/\\[\\]]");function Vh(t,e,n){if(e.search(Px)>=0)throw fl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ul(...e.split("."))._internalPath}catch{throw fl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function fl(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Y(j.INVALID_ARGUMENT,l+t+u)}function B_(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Dx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Lh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Dx extends U_{data(){return super.data()}}function Lh(t,e){return typeof e=="string"?Vh(t,e):e instanceof Ul?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Oh{}class z_ extends Oh{}function bx(t,e,...n){let r=[];e instanceof Oh&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Mh).length,l=s.filter(u=>u instanceof jh).length;if(o>1||o>0&&l>0)throw new Y(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class jh extends z_{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new jh(e,n,r)}_apply(e){const n=this._parse(e);return $_(e._query,n),new ni(e.firestore,e.converter,Qc(e._query,n))}_parse(e){const n=Nh(e.firestore);return function(s,o,l,u,d,f,y){let _;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Y(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Hm(y,f);const R=[];for(const P of y)R.push(qm(u,s,P));_={arrayValue:{values:R}}}else _=qm(u,s,y)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Hm(y,f),_=kx(l,o,y,f==="in"||f==="not-in");return ze.create(d,f,_)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Mh extends Oh{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Mh(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:on.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const l=s.getFlattenedFilters();for(const u of l)$_(o,u),o=Qc(o,u)}(e._query,n),new ni(e.firestore,e.converter,Qc(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Fh extends z_{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Fh(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new Y(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Y(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new go(s,o)}(e._query,this._field,this._direction);return new ni(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Yi(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Vx(t,e="asc"){const n=e,r=Lh("orderBy",t);return Fh._create(r,n)}function qm(t,e,n){if(typeof(n=vt(n))=="string"){if(n==="")throw new Y(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qv(e)&&n.indexOf("/")!==-1)throw new Y(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(xe.fromString(n));if(!ee.isDocumentKey(r))throw new Y(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return cm(t,new ee(r))}if(n instanceof kt)return cm(t,n._key);throw new Y(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fl(n)}.`)}function Hm(t,e){if(!Array.isArray(t)||t.length===0)throw new Y(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $_(t,e){const n=function(i,s){for(const o of i)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Y(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Lx{convertValue(e,n="none"){switch(Qr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Me(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Kr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ne()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ei(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Me(o.doubleValue));return new Ph(s)}convertGeoPoint(e){return new kh(Me(e.latitude),Me(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ah(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(fo(e));default:return null}}convertTimestamp(e){const n=gr(e);return new qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=xe.fromString(e);we(f_(r));const i=new po(r.get(1),r.get(3)),s=new ee(r.popFirst(5));return i.isEqual(n)||Nn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class W_ extends U_{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ba(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Lh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ba extends W_{data(e={}){return super.data(e)}}class jx{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ds(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ba(this._firestore,this._userDataWriter,r.key,r,new Ds(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new ba(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Ds(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new ba(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Ds(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,f=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:Mx(l.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Mx(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne()}}class q_ extends Lx{constructor(e){super(),this.firestore=e}convertBytes(e){return new qi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new kt(this.firestore,null,n)}}function qn(t,e,n,...r){t=dr(t,kt);const i=dr(t.firestore,Wi),s=Nh(i);let o;return o=typeof(e=vt(e))=="string"||e instanceof Ul?Cx(s,"updateDoc",t._key,e,n,r):Rx(s,"updateDoc",t._key,e),Bh(i,[o.toMutation(t._key,rn.exists(!0))])}function Fx(t){return Bh(dr(t.firestore,Wi),[new fh(t._key,rn.none())])}function Bx(t,e){const n=dr(t.firestore,Wi),r=un(t),i=Ox(t.converter,e);return Bh(n,[Ax(Nh(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,rn.exists(!1))]).then(()=>r)}function Ux(t,...e){var n,r,i;t=vt(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Wm(e[o])||(s=e[o],o++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Wm(e[o])){const y=e[o];e[o]=(n=y.next)===null||n===void 0?void 0:n.bind(y),e[o+1]=(r=y.error)===null||r===void 0?void 0:r.bind(y),e[o+2]=(i=y.complete)===null||i===void 0?void 0:i.bind(y)}let u,d,f;if(t instanceof kt)d=dr(t.firestore,Wi),f=dh(t._key.path),u={next:y=>{e[o]&&e[o](zx(d,t,y))},error:e[o+1],complete:e[o+2]};else{const y=dr(t,ni);d=dr(y.firestore,Wi),f=y._query;const _=new q_(d);u={next:R=>{e[o]&&e[o](new jx(d,_,y,R))},error:e[o+1],complete:e[o+2]},Nx(t._query)}return function(_,R,P,N){const V=new mx(N),x=new XS(R,V,P);return _.asyncQueue.enqueueAndForget(async()=>GS(await jm(_),x)),()=>{V.Za(),_.asyncQueue.enqueueAndForget(async()=>KS(await jm(_),x))}}(L_(d),f,l,u)}function Bh(t,e){return function(r,i){const s=new Br;return r.asyncQueue.enqueueAndForget(async()=>ax(await vx(r),i,s)),s.promise}(L_(t),e)}function zx(t,e,n){const r=n.docs.get(e._key),i=new q_(t);return new W_(t,i,e._key,r,new Ds(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Qi=i})(Iv),uo(new ji("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new Wi(new j1(r.getProvider("auth-internal")),new U1(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Y(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new po(d.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),cr(sm,"4.7.3",e),cr(sm,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_="firebasestorage.googleapis.com",G_="storageBucket",$x=2*60*1e3,Wx=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je extends Zr{constructor(e,n,r=0){super(Fu(e),`Firebase Storage: ${n} (${Fu(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,je.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Fu(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Oe;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Oe||(Oe={}));function Fu(t){return"storage/"+t}function Uh(){const t="An unknown error occurred, please check the error payload for server response.";return new je(Oe.UNKNOWN,t)}function qx(t){return new je(Oe.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Hx(t){return new je(Oe.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Gx(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new je(Oe.UNAUTHENTICATED,t)}function Kx(){return new je(Oe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Qx(t){return new je(Oe.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Yx(){return new je(Oe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Xx(){return new je(Oe.CANCELED,"User canceled the upload/download.")}function Jx(t){return new je(Oe.INVALID_URL,"Invalid URL '"+t+"'.")}function Zx(t){return new je(Oe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function eA(){return new je(Oe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+G_+"' property when initializing the app?")}function tA(){return new je(Oe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function nA(){return new je(Oe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function rA(t){return new je(Oe.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function od(t){return new je(Oe.INVALID_ARGUMENT,t)}function K_(){return new je(Oe.APP_DELETED,"The Firebase app was deleted.")}function iA(t){return new je(Oe.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function qs(t,e){return new je(Oe.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Is(t){throw new je(Oe.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=jt.makeFromUrl(e,n)}catch{return new jt(e,"")}if(r.path==="")return r;throw Zx(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(b){b.path.charAt(b.path.length-1)==="/"&&(b.path_=b.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function d(b){b.path_=decodeURIComponent(b.path)}const f="v[A-Za-z0-9_]+",y=n.replace(/[.]/g,"\\."),_="(/([^?#]*).*)?$",R=new RegExp(`^https?://${y}/${f}/b/${i}/o${_}`,"i"),P={bucket:1,path:3},N=n===H_?"(?:storage.googleapis.com|storage.cloud.google.com)":n,V="([^?#]*)",x=new RegExp(`^https?://${N}/${i}/${V}`,"i"),C=[{regex:l,indices:u,postModify:s},{regex:R,indices:P,postModify:d},{regex:x,indices:{bucket:1,path:2},postModify:d}];for(let b=0;b<C.length;b++){const F=C[b],$=F.regex.exec(e);if($){const T=$[F.indices.bucket];let v=$[F.indices.path];v||(v=""),r=new jt(T,v),F.postModify(r);break}}if(r==null)throw Jx(e);return r}}class sA{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(t,e,n){let r=1,i=null,s=null,o=!1,l=0;function u(){return l===2}let d=!1;function f(...V){d||(d=!0,e.apply(null,V))}function y(V){i=setTimeout(()=>{i=null,t(R,u())},V)}function _(){s&&clearTimeout(s)}function R(V,...x){if(d){_();return}if(V){_(),f.call(null,V,...x);return}if(u()||o){_(),f.call(null,V,...x);return}r<64&&(r*=2);let C;l===1?(l=2,C=0):C=(r+Math.random())*1e3,y(C)}let P=!1;function N(V){P||(P=!0,_(),!d&&(i!==null?(V||(l=2),clearTimeout(i),y(0)):V||(l=1)))}return y(0),s=setTimeout(()=>{o=!0,N(!0)},n),N}function aA(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lA(t){return t!==void 0}function uA(t){return typeof t=="object"&&!Array.isArray(t)}function zh(t){return typeof t=="string"||t instanceof String}function Gm(t){return $h()&&t instanceof Blob}function $h(){return typeof Blob<"u"}function Km(t,e,n,r){if(r<e)throw od(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw od(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $l(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Q_(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Ur;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ur||(Ur={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e,n,r,i,s,o,l,u,d,f,y,_=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=y,this.retry=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,P)=>{this.resolve_=R,this.reject_=P,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new pa(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=l=>{const u=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const l=s.getErrorCode()===Ur.NO_ERROR,u=s.getStatus();if(!l||cA(u,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===Ur.ABORT;r(!1,new pa(!1,null,f));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new pa(d,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());lA(u)?s(u):s()}catch(u){o(u)}else if(l!==null){const u=Uh();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(i.canceled){const u=this.appDelete_?K_():Xx();o(u)}else{const u=Yx();o(u)}};this.canceled_?n(!1,new pa(!1,null,!0)):this.backoffId_=oA(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&aA(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class pa{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function hA(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function fA(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function pA(t,e){e&&(t["X-Firebase-GMPID"]=e)}function mA(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function gA(t,e,n,r,i,s,o=!0){const l=Q_(t.urlParams),u=t.url+l,d=Object.assign({},t.headers);return pA(d,e),hA(d,n),fA(d,s),mA(d,r),new dA(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function vA(...t){const e=yA();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if($h())return new Blob(t);throw new je(Oe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function _A(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(t){if(typeof atob>"u")throw rA("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Bu{constructor(e,n){this.data=e,this.contentType=n||null}}function EA(t,e){switch(t){case hn.RAW:return new Bu(Y_(e));case hn.BASE64:case hn.BASE64URL:return new Bu(X_(t,e));case hn.DATA_URL:return new Bu(IA(e),SA(e))}throw Uh()}function Y_(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function TA(t){let e;try{e=decodeURIComponent(t)}catch{throw qs(hn.DATA_URL,"Malformed data URL.")}return Y_(e)}function X_(t,e){switch(t){case hn.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw qs(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case hn.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw qs(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=wA(e)}catch(i){throw i.message.includes("polyfill")?i:qs(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class J_{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw qs(hn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=xA(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function IA(t){const e=new J_(t);return e.base64?X_(hn.BASE64,e.rest):TA(e.rest)}function SA(t){return new J_(t).contentType}function xA(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,n){let r=0,i="";Gm(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(Gm(this.data_)){const r=this.data_,i=_A(r,e,n);return i===null?null:new Yn(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Yn(r,!0)}}static getBlob(...e){if($h()){const n=e.map(r=>r instanceof Yn?r.data_:r);return new Yn(vA.apply(null,n))}else{const n=e.map(o=>zh(o)?EA(hn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)i[s++]=o[l]}),new Yn(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(t){let e;try{e=JSON.parse(t)}catch{return null}return uA(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function RA(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function e0(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CA(t,e){return e}class mt{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||CA}}let ma=null;function kA(t){return!zh(t)||t.length<2?t:e0(t)}function t0(){if(ma)return ma;const t=[];t.push(new mt("bucket")),t.push(new mt("generation")),t.push(new mt("metageneration")),t.push(new mt("name","fullPath",!0));function e(s,o){return kA(o)}const n=new mt("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new mt("size");return i.xform=r,t.push(i),t.push(new mt("timeCreated")),t.push(new mt("updated")),t.push(new mt("md5Hash",null,!0)),t.push(new mt("cacheControl",null,!0)),t.push(new mt("contentDisposition",null,!0)),t.push(new mt("contentEncoding",null,!0)),t.push(new mt("contentLanguage",null,!0)),t.push(new mt("contentType",null,!0)),t.push(new mt("metadata","customMetadata",!0)),ma=t,ma}function PA(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new jt(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function DA(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return PA(r,t),r}function n0(t,e,n){const r=Z_(e);return r===null?null:DA(t,r,n)}function NA(t,e,n,r){const i=Z_(e);if(i===null||!zh(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(d=>{const f=t.bucket,y=t.fullPath,_="/b/"+o(f)+"/o/"+o(y),R=$l(_,n,r),P=Q_({alt:"media",token:d});return R+P})[0]}function bA(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class Wh{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0(t){if(!t)throw Uh()}function VA(t,e){function n(r,i){const s=n0(t,i,e);return r0(s!==null),s}return n}function LA(t,e){function n(r,i){const s=n0(t,i,e);return r0(s!==null),NA(s,i,t.host,t._protocol)}return n}function i0(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=Kx():i=Gx():n.getStatus()===402?i=Hx(t.bucket):n.getStatus()===403?i=Qx(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function s0(t){const e=i0(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=qx(t.path)),s.serverResponse=i.serverResponse,s}return n}function OA(t,e,n){const r=e.fullServerUrl(),i=$l(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,l=new Wh(i,s,LA(t,n),o);return l.errorHandler=s0(e),l}function jA(t,e){const n=e.fullServerUrl(),r=$l(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(u,d){}const l=new Wh(r,i,o,s);return l.successCodes=[200,204],l.errorHandler=s0(e),l}function MA(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function FA(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=MA(null,e)),r}function BA(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let C="";for(let b=0;b<2;b++)C=C+Math.random().toString().slice(2);return C}const u=l();o["Content-Type"]="multipart/related; boundary="+u;const d=FA(e,r,i),f=bA(d,n),y="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,_=`\r
--`+u+"--",R=Yn.getBlob(y,r,_);if(R===null)throw tA();const P={name:d.fullPath},N=$l(s,t.host,t._protocol),V="POST",x=t.maxUploadRetryTime,w=new Wh(N,V,VA(t,n),x);return w.urlParams=P,w.headers=o,w.body=R.uploadData(),w.errorHandler=i0(e),w}class UA{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ur.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ur.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ur.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Is("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Is("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Is("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Is("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Is("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class zA extends UA{initXhr(){this.xhr_.responseType="text"}}function qh(){return new zA}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e,n){this._service=e,n instanceof jt?this._location=n:this._location=jt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Yr(e,n)}get root(){const e=new jt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return e0(this._location.path)}get storage(){return this._service}get parent(){const e=AA(this._location.path);if(e===null)return null;const n=new jt(this._location.bucket,e);return new Yr(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw iA(e)}}function $A(t,e,n){t._throwIfRoot("uploadBytes");const r=BA(t.storage,t._location,t0(),new Yn(e,!0),n);return t.storage.makeRequestWithTokens(r,qh).then(i=>({metadata:i,ref:t}))}function WA(t){t._throwIfRoot("getDownloadURL");const e=OA(t.storage,t._location,t0());return t.storage.makeRequestWithTokens(e,qh).then(n=>{if(n===null)throw nA();return n})}function qA(t){t._throwIfRoot("deleteObject");const e=jA(t.storage,t._location);return t.storage.makeRequestWithTokens(e,qh)}function HA(t,e){const n=RA(t._location.path,e),r=new jt(t._location.bucket,n);return new Yr(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(t){return/^[A-Za-z]+:\/\//.test(t)}function KA(t,e){return new Yr(t,e)}function o0(t,e){if(t instanceof Hh){const n=t;if(n._bucket==null)throw eA();const r=new Yr(n,n._bucket);return e!=null?o0(r,e):r}else return e!==void 0?HA(t,e):t}function QA(t,e){if(e&&GA(e)){if(t instanceof Hh)return KA(t,e);throw od("To use ref(service, url), the first argument must be a Storage instance.")}else return o0(t,e)}function Qm(t,e){const n=e==null?void 0:e[G_];return n==null?null:jt.makeFromBucketSpec(n,t)}function YA(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:yv(i,t.app.options.projectId))}class Hh{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=H_,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=$x,this._maxUploadRetryTime=Wx,this._requests=new Set,i!=null?this._bucket=jt.makeFromBucketSpec(i,this._host):this._bucket=Qm(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=jt.makeFromBucketSpec(this._url,e):this._bucket=Qm(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Km("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Km("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Yr(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new sA(K_());{const o=gA(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const Ym="@firebase/storage",Xm="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0="storage";function XA(t,e,n){return t=vt(t),$A(t,e,n)}function JA(t){return t=vt(t),WA(t)}function Jm(t){return t=vt(t),qA(t)}function Uu(t,e){return t=vt(t),QA(t,e)}function ZA(t=xv(),e){t=vt(t);const r=Tv(t,a0).getImmediate({identifier:e}),i=mv("storage");return i&&eR(r,...i),r}function eR(t,e,n,r={}){YA(t,e,n,r)}function tR(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Hh(n,r,i,e,Iv)}function nR(){uo(new ji(a0,tR,"PUBLIC").setMultipleInstances(!0)),cr(Ym,Xm,""),cr(Ym,Xm,"esm2017")}nR();const rR={apiKey:"AIzaSyA0ZCgyjVAqKBDbR9-iiUb8bVyH7UijiDo",authDomain:"bever-family-recipes.firebaseapp.com",projectId:"bever-family-recipes",storageBucket:"bever-family-recipes.firebasestorage.app",messagingSenderId:"609429863508",appId:"1:609429863508:web:aee0811bd4c8757d2501c1"},l0=Sv(rR),Xt=Ex(l0),zu=ZA(l0),Zm=(t,e)=>{try{const n=localStorage.getItem(t);return n?JSON.parse(n):e}catch{return e}},$u=(t,e)=>{try{localStorage.setItem(t,JSON.stringify(e))}catch{}},iR="bluestar",sR=[{id:"all",name:"All Recipes",icon:""},{id:"breakfast",name:"Breakfast",icon:""},{id:"main-course",name:"Main Course",icon:""},{id:"side-dish",name:"Sides",icon:""},{id:"dessert",name:"Desserts",icon:""},{id:"pasta",name:"Pasta",icon:""},{id:"soup",name:"Soups",icon:""},{id:"salad",name:"Salads",icon:""},{id:"appetizer",name:"Appetizers",icon:""},{id:"bread",name:"Breads",icon:""},{id:"beverage",name:"Beverages",icon:""},{id:"other",name:"Other",icon:""}],oR=[{id:"newest",name:"Newest First"},{id:"oldest",name:"Oldest First"},{id:"a-z",name:"A  Z"},{id:"z-a",name:"Z  A"},{id:"category",name:"By Category"}],aR=["cup","cups","tbsp","tsp","oz","lb","g","kg","ml","liter","pint","quart","gallon","piece","slice","clove","can","package","stick","pinch","dash","sprig","large","medium","small","whole","bunch","head"],lR={id:"",title:"",category:"",author:"",authorIsFamily:!0,servings:"",prepTime:"",cookTime:"",ingredients:[{qty:"",unit:"",ingredient:""}],instructions:[""],notes:"",story:"",imageUrl:"",handwrittenImageUrl:"",dateAdded:"",trashedAt:null,comments:[],madeIt:[]},eg=4/3,ad={tablespoons:"tbsp",tablespoon:"tbsp",tbsps:"tbsp",tbs:"tbsp",T:"tbsp",teaspoons:"tsp",teaspoon:"tsp",tsps:"tsp",t:"tsp","t.":"tsp",cups:"cup",c:"cup",C:"cup","c.":"cup",ounces:"oz",ounce:"oz",ozs:"oz","fluid ounces":"fl oz","fluid ounce":"fl oz","fl. oz.":"fl oz","fl. oz":"fl oz",pints:"pint",pt:"pint",pts:"pint",quarts:"quart",qt:"quart",qts:"quart",gallons:"gallon",gal:"gallon",gals:"gallon",milliliters:"ml",milliliter:"ml",mls:"ml",mL:"ml",liters:"liter",litre:"liter",litres:"liter",l:"liter",L:"liter",pounds:"lb",pound:"lb",lbs:"lb","lb.":"lb",grams:"g",gram:"g",gr:"g",kilograms:"kg",kilogram:"kg",kgs:"kg",pieces:"piece",pcs:"piece",pc:"piece",slices:"slice",cloves:"clove",heads:"head",bunches:"bunch",cans:"can",packages:"package",pkgs:"package",pkg:"package",sticks:"stick",pinches:"pinch",dashes:"dash",sprigs:"sprig",stalks:"stalk",leaves:"leaf",large:"large",lg:"large",medium:"medium",med:"medium",small:"small",sm:"small"},uR=t=>{if(!t)return"";const e=t.trim().toLowerCase();return ad[e]||ad[t.trim()]||t.trim()},ga={"":.5,"":.333,"":.667,"":.25,"":.75,"":.2,"":.4,"":.6,"":.8,"":.167,"":.833,"":.125,"":.375,"":.625,"":.875,"1/2":.5,"1/3":.333,"2/3":.667,"1/4":.25,"3/4":.75,"1/8":.125,"3/8":.375,"5/8":.625,"7/8":.875},cR=["tablespoons?","tbsps?","tbs","T","teaspoons?","tsps?","t","cups?","c","ounces?","ozs?","oz","fluid ounces?","fl\\.? ?oz\\.?","pints?","pts?","quarts?","qts?","gallons?","gals?","milliliters?","mls?","mL","liters?","litres?","L","l","pounds?","lbs?\\.?","grams?","g","gr","kilograms?","kgs?","kg","pieces?","pcs?","pc","slices?","cloves?","heads?","bunches?","bunch","cans?","packages?","pkgs?","pkg","sticks?","pinch(?:es)?","dash(?:es)?","sprigs?","stalks?","leaves?","leaf","large","lg","medium","med","small","sm"].join("|"),dR=t=>{if(!t||typeof t!="string")return{quantity:"",unit:"",item:t||""};let n=t.trim(),r="",i="",s="";const o=n.match(/^(\d+)\s+([1-9]\/[1-9])\s*/),l=n.match(/^(\d+)([\u00BC-\u00BE\u2150-\u215E])\s*/),u=n.match(/^([1-9]\/[1-9])\s*/),d=n.match(/^([\u00BC-\u00BE\u2150-\u215E])\s*/),f=n.match(/^(\d+(?:\.\d+)?)\s*/);if(o){const R=parseFloat(o[1]),P=ga[o[2]]||0;r=R+P,n=n.slice(o[0].length).trim()}else if(l){const R=parseFloat(l[1]),P=ga[l[2]]||0;r=R+P,n=n.slice(l[0].length).trim()}else u?(r=ga[u[1]]||u[1],n=n.slice(u[0].length).trim()):d?(r=ga[d[1]]||d[1],n=n.slice(d[0].length).trim()):f&&(r=parseFloat(f[1]),n=n.slice(f[0].length).trim());const y=new RegExp(`^(${cR})\\.?\\s*`,"i"),_=n.match(y);return _&&(i=uR(_[1]),n=n.slice(_[0].length).trim()),s=n,{quantity:r.toString(),unit:i,item:s}},hR=[/(?:bake|cook|roast|simmer|boil|fry|saut|grill|broil|steam)\s+(?:for\s+)?(?:about\s+)?(\d+)\s*(?:to|-)\s*(\d+)\s*(minutes?|mins?|hours?|hrs?)/i,/(?:bake|cook|roast|simmer|boil|fry|saut|grill|broil|steam)\s+(?:for\s+)?(?:about\s+)?(\d+)\s*(minutes?|mins?|hours?|hrs?)/i,/(\d+)\s*(?:to|-)\s*(\d+)\s*(minutes?|mins?|hours?|hrs?)\s+(?:or\s+)?(?:until)/i,/(\d+)\s*(minutes?|mins?|hours?|hrs?)\s+(?:or\s+)?(?:until)/i,/(?:for\s+)(\d+)\s*(?:to|-)\s*(\d+)\s*(minutes?|mins?|hours?|hrs?)/i,/(?:for\s+)(\d+)\s*(minutes?|mins?|hours?|hrs?)/i],fR=t=>{if(!t||!Array.isArray(t))return null;const e=t.join(" ");for(const n of hR){const r=e.match(n);if(r){const i=/hours?|hrs?/i.test(r[r.length-1]);if(r[2]&&!isNaN(r[2])&&r[1]&&!isNaN(r[1])){const s=Math.round((parseInt(r[1])+parseInt(r[2]))/2);return i?`${s} hours`:`${s} min`}else if(r[1]&&!isNaN(r[1])){const s=parseInt(r[1]);return i?`${s} hour${s>1?"s":""}`:`${s} min`}}}return null},pR=t=>new Promise((e,n)=>{const r=new Image,i=document.createElement("canvas"),s=i.getContext("2d");r.onload=()=>{const o=r.width,l=r.height,u=o/l,f=Math.min(o,1200),y=f/eg;i.width=f,i.height=y,s.fillStyle="#f5f3ef",s.fillRect(0,0,f,y);let _,R,P,N;u>eg?(_=f,R=f/u,P=0,N=(y-R)/2):(R=y,_=y*u,P=(f-_)/2,N=0),s.drawImage(r,P,N,_,R),i.toBlob(V=>{V?e(new File([V],t.name,{type:"image/jpeg"})):n(new Error("Failed to process image"))},"image/jpeg",.85)},r.onerror=()=>n(new Error("Failed to load image")),r.src=URL.createObjectURL(t)}),u0=(t,e)=>t?e!==!1?`From ${t}'s Kitchen`:`Recipe from ${t}`:"",mR=(t,e)=>{if(!t)return t;const n=t.match(/^([\d.\/]+)/);if(!n)return t;let r=n[1];if(r.includes("/")){const[o,l]=r.split("/").map(Number);r=o/l}else r=parseFloat(r);if(isNaN(r))return t;const i=r*e;let s;return i===Math.floor(i)?s=i.toString():Math.abs(i-.25)<.01?s="1/4":Math.abs(i-.333)<.01?s="1/3":Math.abs(i-.5)<.01?s="1/2":Math.abs(i-.667)<.01?s="2/3":Math.abs(i-.75)<.01?s="3/4":s=i.toFixed(2).replace(/\.?0+$/,""),t.replace(n[1],s)},gR=t=>{if(!t&&t!==0)return"";const e=parseFloat(t);if(isNaN(e))return t.toString();if(e===Math.floor(e))return e.toString();const n=Math.floor(e),r=e-n,i=[{val:.125,str:""},{val:.167,str:""},{val:.2,str:""},{val:.25,str:""},{val:.333,str:""},{val:.375,str:""},{val:.4,str:""},{val:.5,str:""},{val:.6,str:""},{val:.625,str:""},{val:.667,str:""},{val:.75,str:""},{val:.8,str:""},{val:.833,str:""},{val:.875,str:""}];for(const s of i)if(Math.abs(r-s.val)<.02)return n>0?`${n} ${s.str}`:s.str;return e.toFixed(2).replace(/\.?0+$/,"")},yR=t=>t?gR(t):"",Wu=async(t,e)=>{const n=await fetch("/.netlify/functions/recipe-ai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:t,...e})});if(!n.ok){const r=await n.json();throw new Error(r.error||"AI request failed")}return n.json()};function vR(){const[t,e]=te.useState([]),[n]=te.useState(sR),[r,i]=te.useState("home"),[s,o]=te.useState(null),[l,u]=te.useState("all"),[d,f]=te.useState("all"),[y,_]=te.useState(""),[R,P]=te.useState("newest"),[N,V]=te.useState(!1),[x,w]=te.useState(null),[C,b]=te.useState(!0),[F,$]=te.useState(()=>Zm("bfr-favorites",[])),[T,v]=te.useState(!1),[E,I]=te.useState(!1),[S,k]=te.useState(()=>Zm("bfr-family-auth",!1)),[A,ke]=te.useState(!1),[it,Pt]=te.useState(""),He=["all",...new Set(t.filter(O=>O.authorIsFamily!==!1&&O.author&&!O.trashedAt).map(O=>O.author))],G=t.filter(O=>!O.trashedAt),K=t.filter(O=>O.trashedAt),q=()=>{it.toLowerCase()===iR.toLowerCase()?(k(!0),$u("bfr-family-auth",!0),ke(!1),Pt(""),ae("Welcome to the family kitchen!")):ae("Incorrect family code","error")},se=()=>{k(!1),$u("bfr-family-auth",!1),ae("Logged out")};te.useEffect(()=>{const O=bx(zm(Xt,"recipes"),Vx("dateAdded","desc")),B=Ux(O,W=>{const Z=W.docs.map(pe=>({id:pe.id,...pe.data()}));e(Z),b(!1)},W=>{console.error("Firestore error:",W),b(!1)});return()=>B()},[]),te.useEffect(()=>{const O=window.location.hash;if(O&&O.startsWith("#recipe-")){const B=O.replace("#recipe-",""),W=t.find(Z=>Z.id===B);W&&(o(W),i("view"))}},[t]),te.useEffect(()=>{$u("bfr-favorites",F)},[F]);const le=O=>{$(B=>B.includes(O)?B.filter(W=>W!==O):[...B,O])},oe=(O,B=null)=>{O!=="home"&&(_(""),f("all")),o(B),i(O),I(!1),O==="view"&&B?window.history.pushState(null,"",`#recipe-${B.id}`):window.history.pushState(null,"",window.location.pathname)},ae=(O,B="success")=>{w({message:O,type:B}),setTimeout(()=>w(null),3e3)},Dt=O=>{const B=`${window.location.origin}${window.location.pathname}#recipe-${O}`;navigator.clipboard.writeText(B).then(()=>{ae("Link copied to clipboard!")}).catch(()=>{ae("Could not copy link","error")})},Et=O=>{const B={...O};if(Array.isArray(B.ingredients)&&(B.ingredients=B.ingredients.map(W=>{if(typeof W=="string"){const Z=dR(W);return{amount:`${Z.quantity} ${Z.unit}`.trim(),ingredient:Z.item}}else if(W.amount!==void 0&&W.ingredient!==void 0){let Z=W.amount||"";return Z=Z.replace(/(\d)\s*\/\s*(\d)/g,"$1/$2"),Object.entries(ad).forEach(([pe,ve])=>{const me=new RegExp(`\\b${pe}\\b\\.?`,"gi");Z=Z.replace(me,ve)}),Z=Z.replace(/\bc\.(?!\w)/gi,"cup"),Z=Z.replace(/\bt\.(?!\w)/gi,"tsp"),Z=Z.replace(/\s+/g," ").trim(),{amount:Z,ingredient:W.ingredient}}return W})),!B.cookTime&&Array.isArray(B.instructions)){const W=fR(B.instructions);W&&(B.cookTime=W)}return B},Nt=async O=>{try{const{id:B,...W}=Et(O);if(B)await qn(un(Xt,"recipes",B),W),ae("Recipe updated");else{const Z={...W,dateAdded:new Date().toISOString()};await Bx(zm(Xt,"recipes"),Z),ae("Recipe saved")}oe("home")}catch(B){console.error("Save error:",B),ae("Error saving recipe: "+B.message,"error")}},Zi=async()=>{if(!confirm("This will normalize all existing recipe data (units, ingredients). Continue?"))return;V(!0);let O=0;try{for(const B of t){const W=Et(B),{id:Z,...pe}=W;JSON.stringify(B)!==JSON.stringify(W)&&Z&&(await qn(un(Xt,"recipes",Z),pe),O++)}ae(`Normalized ${O} recipes`)}catch(B){console.error("Normalize error:",B),ae("Error normalizing recipes","error")}finally{V(!1)}},es=async()=>{if(!confirm("This will convert all ingredients to the new format (qty, unit, ingredient). Continue?"))return;V(!0);let O=0;const B=W=>{if(!W)return{qty:"",unit:""};const Z=W.trim(),pe=Z.match(/^(\d+)?\s*([\d\/]+)?\s*(.*)$/);if(!pe)return{qty:Z,unit:""};const[,ve,me,Re]=pe;let Tt="";return ve&&me?Tt=`${ve} ${me}`:ve?Tt=ve:me&&(Tt=me),{qty:Tt.trim(),unit:(Re||"").trim()}};try{for(const W of t){if(!W.ingredients||W.ingredients.length===0||!W.ingredients.some(ve=>ve.amount!==void 0||ve.qty===void 0&&ve.unit===void 0))continue;const pe=W.ingredients.map(ve=>{if(ve.qty!==void 0&&ve.unit!==void 0)return ve;const me=ve.amount||"",{qty:Re,unit:Tt}=B(me);let vn=ve.ingredient||"";if(vn.startsWith("/")){const Fn=vn.match(/^\/(\d+)\s+(\w+)\s+(.*)$/);if(Fn){const[,xr,an,Kt]=Fn;return{qty:Re?`${Re}/${xr}`:`1/${xr}`,unit:an,ingredient:Kt.trim()}}}return{qty:Re,unit:Tt,ingredient:vn}});await qn(un(Xt,"recipes",W.id),{ingredients:pe}),O++}ae(`Migrated ${O} recipes to new format`)}catch(W){console.error("Migration error:",W),ae("Error migrating recipes","error")}finally{V(!1)}},Ln=async(O,B)=>{try{const W=t.find(ve=>ve.id===O);if(!W)return;const Z={id:Date.now().toString(),text:B.text,author:B.author,date:new Date().toISOString()},pe=[...W.comments||[],Z];await qn(un(Xt,"recipes",O),{comments:pe}),ae("Comment added")}catch(W){console.error("Comment error:",W),ae("Error adding comment","error")}},On=async(O,B)=>{try{const W=t.find(pe=>pe.id===O);if(!W)return;const Z=(W.comments||[]).filter(pe=>pe.id!==B);await qn(un(Xt,"recipes",O),{comments:Z}),ae("Comment removed")}catch(W){console.error("Delete comment error:",W),ae("Error removing comment","error")}},Tr=async(O,B)=>{try{const W=t.find(ve=>ve.id===O);if(!W)return;const Z={id:Date.now().toString(),name:B||"Someone",date:new Date().toISOString()},pe=[...W.madeIt||[],Z];await qn(un(Xt,"recipes",O),{madeIt:pe}),ae(`${B||"You"} made it! `)}catch(W){console.error("Made it error:",W),ae("Error recording","error")}},jn=async O=>{try{await qn(un(Xt,"recipes",O),{trashedAt:new Date().toISOString()}),ae("Recipe moved to trash"),oe("home")}catch(B){console.error("Trash error:",B),ae("Error moving to trash","error")}},Ir=async O=>{try{await qn(un(Xt,"recipes",O),{trashedAt:null}),ae("Recipe restored")}catch(B){console.error("Restore error:",B),ae("Error restoring recipe","error")}},Mn=async(O,B,W)=>{try{if(B&&B.includes("firebasestorage"))try{const Z=Uu(zu,B);await Jm(Z)}catch{console.log("Image deletion skipped")}if(W&&W.includes("firebasestorage"))try{const Z=Uu(zu,W);await Jm(Z)}catch{console.log("Handwritten image deletion skipped")}await Fx(un(Xt,"recipes",O)),ae("Recipe permanently deleted")}catch(Z){console.error("Delete error:",Z),ae("Error deleting recipe","error")}},Sr=async()=>{if(confirm(`Permanently delete ${K.length} recipe(s) from trash? This cannot be undone.`)){V(!0);try{for(const O of K)await Mn(O.id,O.imageUrl,O.handwrittenImageUrl);ae("Trash emptied")}catch(O){console.error("Empty trash error:",O),ae("Error emptying trash","error")}finally{V(!1)}}},ts=async(O,B="recipes")=>{if(!O)return null;try{const W=await pR(O),Z=`${B}/${Date.now()}_${O.name.replace(/\.[^.]+$/,".jpg")}`,pe=Uu(zu,Z);return await XA(pe,W),await JA(pe)}catch(W){throw console.error("Upload error:",W),W}},U=()=>{const O=JSON.stringify(t,null,2),B=new Blob([O],{type:"application/json"}),W=URL.createObjectURL(B),Z=document.createElement("a");Z.href=W,Z.download="bever-family-recipes.json",Z.click(),URL.revokeObjectURL(W),ae("Recipes exported!")},J=G.filter(O=>{var Re,Tt,vn,Fn,xr,an;const B=y.toLowerCase(),W=(Re=O.ingredients)==null?void 0:Re.some(Kt=>{var Bn,_n,Do;return((Bn=Kt.ingredient)==null?void 0:Bn.toLowerCase().includes(B))||((_n=Kt.amount)==null?void 0:_n.toLowerCase().includes(B))||((Do=Kt.unit)==null?void 0:Do.toLowerCase().includes(B))}),Z=!y||((Tt=O.title)==null?void 0:Tt.toLowerCase().includes(B))||W||((vn=O.author)==null?void 0:vn.toLowerCase().includes(B))||((Fn=O.notes)==null?void 0:Fn.toLowerCase().includes(B))||((xr=O.story)==null?void 0:xr.toLowerCase().includes(B))||((an=O.comments)==null?void 0:an.some(Kt=>{var Bn,_n;return((Bn=Kt.text)==null?void 0:Bn.toLowerCase().includes(B))||((_n=Kt.author)==null?void 0:_n.toLowerCase().includes(B))})),pe=l==="all"||O.category===l,ve=d==="all"||O.author===d,me=!T||F.includes(O.id);return Z&&pe&&ve&&me}).sort((O,B)=>{switch(R){case"oldest":return new Date(O.dateAdded)-new Date(B.dateAdded);case"newest":return new Date(B.dateAdded)-new Date(O.dateAdded);case"a-z":return(O.title||"").localeCompare(B.title||"");case"z-a":return(B.title||"").localeCompare(O.title||"");case"category":return(O.category||"").localeCompare(B.category||"")||(O.title||"").localeCompare(B.title||"");default:return 0}});return C?p.jsx("div",{style:m.loadingScreen,children:p.jsxs("div",{style:m.loadingContent,children:[p.jsx("div",{style:m.loadingLogo,children:"BF"}),p.jsx("p",{style:m.loadingText,children:"Loading recipes..."})]})}):p.jsxs("div",{style:m.app,children:[x&&p.jsx("div",{style:{...m.notification,backgroundColor:x.type==="success"?"#5c6d5e":"#9b6b5b"},children:x.message}),A&&p.jsx("div",{style:m.modal,onClick:()=>ke(!1),children:p.jsxs("div",{style:m.familyLoginModal,onClick:O=>O.stopPropagation(),children:[p.jsx("button",{style:m.modalClose,onClick:()=>ke(!1),children:""}),p.jsx("h2",{style:m.familyLoginTitle,children:"Family Access"}),p.jsx("p",{style:m.familyLoginText,children:"Enter the family code to add and edit recipes."}),p.jsx("input",{type:"password",value:it,onChange:O=>Pt(O.target.value),onKeyDown:O=>O.key==="Enter"&&q(),placeholder:"Family code",style:m.familyCodeInput,autoFocus:!0}),p.jsx("button",{onClick:q,style:m.familyLoginBtn,children:"Enter Kitchen"})]})}),p.jsxs("header",{style:m.header,className:"no-print",children:[p.jsxs("div",{style:m.headerInner,children:[p.jsxs("div",{style:m.logo,onClick:()=>{oe("home"),u("all")},children:[p.jsx("span",{style:m.logoMark,children:"BF"}),p.jsxs("div",{style:m.logoText,children:[p.jsx("span",{style:m.logoTitle,children:"Bever Family"}),p.jsx("span",{style:m.logoSubtitle,children:"R E C I P E S"})]})]}),p.jsxs("nav",{style:m.nav,className:"desktop-nav",children:[p.jsx("button",{style:r==="home"?m.navLinkActive:m.navLink,onClick:()=>oe("home"),children:"Recipes"}),S&&p.jsxs(p.Fragment,{children:[p.jsx("button",{style:r==="add"?m.navLinkActive:m.navLink,onClick:()=>oe("add"),children:"Add New"}),p.jsxs("button",{style:r==="trash"?m.navLinkActive:m.navLink,onClick:()=>oe("trash"),children:["Trash ",K.length>0&&`(${K.length})`]})]}),p.jsx("button",{style:m.navLink,onClick:U,title:"Export all recipes as JSON",children:"Export"}),S?p.jsx("button",{style:m.navLink,onClick:se,title:"Log out of family access",children:"Log Out"}):p.jsx("button",{style:m.familyBtn,onClick:()=>ke(!0),children:"Family Login"})]}),p.jsx("button",{style:m.mobileMenuBtn,className:"mobile-menu-btn",onClick:()=>I(!E),children:E?"":""})]}),E&&p.jsxs("nav",{style:m.mobileNav,className:"mobile-nav",children:[p.jsx("button",{style:m.mobileNavLink,onClick:()=>oe("home"),children:"All Recipes"}),S&&p.jsxs(p.Fragment,{children:[p.jsx("button",{style:m.mobileNavLink,onClick:()=>oe("add"),children:"Add New Recipe"}),p.jsxs("button",{style:m.mobileNavLink,onClick:()=>oe("trash"),children:["Trash ",K.length>0&&`(${K.length})`]})]}),p.jsx("button",{style:m.mobileNavLink,onClick:()=>{U(),I(!1)},children:"Export Recipes"}),S?p.jsx("button",{style:m.mobileNavLink,onClick:()=>{se(),I(!1)},children:"Log Out"}):p.jsx("button",{style:m.mobileNavLink,onClick:()=>{ke(!0),I(!1)},children:"Family Login"})]})]}),p.jsxs("main",{style:m.main,children:[r==="home"&&p.jsx(_R,{recipes:G,filteredRecipes:J,categories:n,selectedCategory:l,setSelectedCategory:u,familyAuthors:He,selectedAuthor:d,setSelectedAuthor:f,searchQuery:y,setSearchQuery:_,sortBy:R,setSortBy:P,setSelectedRecipe:O=>oe("view",O),setView:oe,onNormalizeAll:Zi,onMigrateIngredients:es,onEmptyTrash:Sr,trashedCount:K.length,isProcessing:N,favorites:F,toggleFavorite:le,showFavoritesOnly:T,setShowFavoritesOnly:v,isFamily:S}),r==="trash"&&S&&p.jsx(ER,{trashedRecipes:K,categories:n,onRestore:Ir,onPermanentDelete:Mn,onEmptyTrash:Sr,onBack:()=>oe("home"),isProcessing:N}),(r==="add"||r==="edit")&&S&&p.jsx(IR,{recipe:s,categories:n.filter(O=>O.id!=="all"),onSave:Nt,onCancel:()=>oe(s?"view":"home",s),isProcessing:N,setIsProcessing:V,showNotification:ae,uploadImage:ts}),r==="view"&&s&&p.jsx(SR,{recipe:t.find(O=>O.id===s.id)||s,categories:n,onEdit:()=>oe("edit",s),onDelete:()=>{confirm("Move this recipe to trash?")&&jn(s.id)},onBack:()=>oe("home"),onAddComment:O=>Ln(s.id,O),onDeleteComment:O=>On(s.id,O),onShare:()=>Dt(s.id),onMadeIt:O=>Tr(s.id,O),isFavorite:F.includes(s.id),onToggleFavorite:()=>le(s.id),isFamily:S})]}),p.jsx("footer",{style:m.footer,className:"no-print",children:p.jsxs("div",{style:m.footerContent,children:[p.jsx("span",{style:m.footerLogo,children:"BF"}),p.jsx("p",{style:m.footerText,children:"Bever Family Recipes"}),p.jsx("p",{style:m.footerTagline,children:"Gathering around the table, one recipe at a time"})]})})]})}function _R({recipes:t,filteredRecipes:e,categories:n,selectedCategory:r,setSelectedCategory:i,familyAuthors:s,selectedAuthor:o,setSelectedAuthor:l,searchQuery:u,setSearchQuery:d,sortBy:f,setSortBy:y,setSelectedRecipe:_,setView:R,onNormalizeAll:P,onMigrateIngredients:N,onEmptyTrash:V,trashedCount:x,isProcessing:w,favorites:C,toggleFavorite:b,showFavoritesOnly:F,setShowFavoritesOnly:$,isFamily:T}){var I;const[v,E]=te.useState(!1);return p.jsxs("div",{children:[p.jsx("section",{style:m.hero,className:"no-print",children:p.jsxs("div",{style:m.heroContent,children:[p.jsx("p",{style:m.heroWelcome,children:"Welcome to the"}),p.jsx("h1",{style:m.heroTitle,children:"Bever Family Recipes"}),p.jsxs("div",{style:m.heroDivider,children:[p.jsx("span",{style:m.heroDividerLine}),p.jsx("span",{style:m.heroDividerIcon,children:""}),p.jsx("span",{style:m.heroDividerLine})]}),p.jsxs("p",{style:m.heroSubtitle,children:["A collection of treasured recipes passed down through generations.",p.jsx("br",{}),"From our kitchen to yours."]}),p.jsxs("div",{style:m.searchContainer,children:[p.jsx("input",{type:"text",placeholder:"Search recipes, ingredients, stories...",value:u,onChange:S=>d(S.target.value),style:m.searchInput}),u&&p.jsx("button",{style:m.clearSearch,onClick:()=>d(""),children:""})]}),p.jsxs("div",{style:m.filterRow,children:[s.length>2&&p.jsxs("div",{style:m.filterGroup,children:[p.jsx("label",{style:m.filterLabel,children:"From:"}),p.jsxs("select",{value:o,onChange:S=>l(S.target.value),style:m.filterSelect,children:[p.jsx("option",{value:"all",children:"All Family"}),s.filter(S=>S!=="all").map(S=>p.jsx("option",{value:S,children:S},S))]})]}),p.jsxs("div",{style:m.filterGroup,children:[p.jsx("label",{style:m.filterLabel,children:"Sort:"}),p.jsx("select",{value:f,onChange:S=>y(S.target.value),style:m.filterSelect,children:oR.map(S=>p.jsx("option",{value:S.id,children:S.name},S.id))})]}),p.jsxs("button",{style:{...m.favoritesToggle,backgroundColor:F?"#5c6d5e":"transparent",color:F?"white":"#5a5a5a"},onClick:()=>$(!F),children:[" Favorites ",F&&`(${C.length})`]})]})]})}),p.jsx("section",{style:m.categorySection,className:"no-print",children:p.jsx("div",{style:m.categoryPills,children:n.map(S=>p.jsx("button",{style:r===S.id?m.categoryPillActive:m.categoryPill,onClick:()=>i(S.id),children:S.name},S.id))})}),p.jsxs("section",{style:m.recipeSection,children:[p.jsxs("div",{style:m.sectionHeader,children:[p.jsxs("h2",{style:m.sectionTitle,children:[F?"Favorites":r==="all"?"All Recipes":(I=n.find(S=>S.id===r))==null?void 0:I.name,o!=="all"&&` from ${o}`]}),p.jsxs("span",{style:m.recipeCount,children:[e.length," ",e.length===1?"recipe":"recipes"]})]}),e.length>0?p.jsx("div",{style:m.recipeGrid,children:e.map(S=>p.jsx(wR,{recipe:S,categories:n,onClick:()=>_(S),isFavorite:C.includes(S.id),onToggleFavorite:k=>{k.stopPropagation(),b(S.id)}},S.id))}):p.jsxs("div",{style:m.emptyState,children:[p.jsx("div",{style:m.emptyIcon,children:""}),p.jsx("h3",{style:m.emptyTitle,children:"No recipes found"}),p.jsx("p",{style:m.emptyText,children:u||o!=="all"||F?"Try adjusting your search or filters.":"Start your family's collection by adding the first recipe."}),!u&&o==="all"&&!F&&T&&p.jsx("button",{style:m.emptyButton,onClick:()=>R("add"),children:"Add a Recipe"})]}),T&&p.jsxs("div",{style:{textAlign:"center",marginTop:32},children:[p.jsx("button",{onClick:()=>E(!v),style:{background:"none",border:"none",color:"#c9c4bc",fontSize:11,cursor:"pointer",letterSpacing:1},children:v?" Hide Tools":" Admin Tools"}),v&&p.jsxs("div",{style:{marginTop:16,padding:20,background:"#f5f3ef",borderRadius:4},children:[p.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:12,justifyContent:"center",marginBottom:12},children:[p.jsx("button",{onClick:P,disabled:w,style:m.adminToolBtn,children:w?"Processing...":"Normalize Units"}),p.jsx("button",{onClick:N,disabled:w,style:m.adminToolBtn,children:"Migrate Ingredients"}),x>0&&p.jsxs("button",{onClick:V,disabled:w,style:{...m.adminToolBtn,backgroundColor:"#9b6b5b"},children:["Empty Trash (",x,")"]})]}),p.jsx("p",{style:{fontSize:11,color:"#7a7a7a",margin:0},children:"Normalize: fix units & fractions  Migrate: convert to qty/unit/ingredient format"})]})]})]})]})}function wR({recipe:t,categories:e,onClick:n,isFavorite:r,onToggleFavorite:i}){var d,f;const s=e.find(y=>y.id===t.category),[o,l]=te.useState(!1);(d=t.comments)!=null&&d.length;const u=((f=t.madeIt)==null?void 0:f.length)||0;return p.jsxs("div",{style:m.recipeCard,onClick:n,children:[p.jsxs("div",{style:m.cardImageContainer,children:[t.imageUrl&&!o?p.jsx("img",{src:t.imageUrl,alt:t.title,style:m.cardImage,onError:()=>l(!0)}):p.jsx("div",{style:m.cardImagePlaceholder,children:p.jsx("span",{style:m.placeholderIcon,children:""})}),p.jsx("button",{style:{...m.favoriteBtn,color:r?"#c75050":"white"},onClick:i,title:r?"Remove from favorites":"Add to favorites",children:r?"":""})]}),p.jsxs("div",{style:m.cardContent,children:[s&&p.jsx("span",{style:m.cardCategory,children:s.name}),p.jsx("h3",{style:m.cardTitle,children:t.title}),t.author&&p.jsx("p",{style:m.cardAuthor,children:u0(t.author,t.authorIsFamily)}),p.jsxs("div",{style:m.cardMeta,children:[t.prepTime&&p.jsx("span",{children:t.prepTime}),t.prepTime&&t.servings&&p.jsx("span",{style:m.cardMetaDot,children:""}),t.servings&&p.jsxs("span",{children:["Serves ",t.servings]}),u>0&&p.jsxs(p.Fragment,{children:[p.jsx("span",{style:m.cardMetaDot,children:""}),p.jsxs("span",{children:[" ",u," made"]})]})]})]})]})}function ER({trashedRecipes:t,categories:e,onRestore:n,onPermanentDelete:r,onEmptyTrash:i,onBack:s,isProcessing:o}){const l=u=>u?new Date(u).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"";return p.jsxs("div",{style:m.trashPage,children:[p.jsxs("div",{style:m.trashHeader,children:[p.jsx("button",{onClick:s,style:m.backBtn,children:" Back to Recipes"}),p.jsx("h1",{style:m.trashTitle,children:"Trash"}),p.jsxs("p",{style:m.trashSubtitle,children:[t.length," ",t.length===1?"recipe":"recipes"," in trash"]})]}),t.length>0?p.jsxs(p.Fragment,{children:[p.jsxs("div",{style:m.trashActions,children:[p.jsx("button",{onClick:i,disabled:o,style:m.emptyTrashBtn,children:o?"Deleting...":"Empty Trash"}),p.jsx("p",{style:m.trashWarning,children:" Emptying trash permanently deletes all recipes and cannot be undone."})]}),p.jsx("div",{style:m.trashList,children:t.map(u=>{const d=e.find(f=>f.id===u.category);return p.jsxs("div",{style:m.trashItem,children:[p.jsxs("div",{style:m.trashItemInfo,children:[p.jsx("h3",{style:m.trashItemTitle,children:u.title}),p.jsxs("p",{style:m.trashItemMeta,children:[d&&`${d.name}  `,u.author&&`${u.author}  `,"Deleted ",l(u.trashedAt)]})]}),p.jsxs("div",{style:m.trashItemActions,children:[p.jsx("button",{onClick:()=>n(u.id),style:m.restoreBtn,children:"Restore"}),p.jsx("button",{onClick:()=>{confirm(`Permanently delete "${u.title}"? This cannot be undone.`)&&r(u.id,u.imageUrl,u.handwrittenImageUrl)},style:m.permanentDeleteBtn,children:"Delete Forever"})]})]},u.id)})})]}):p.jsxs("div",{style:m.emptyTrash,children:[p.jsx("div",{style:m.emptyIcon,children:""}),p.jsx("h3",{style:m.emptyTitle,children:"Trash is empty"}),p.jsx("p",{style:m.emptyText,children:"Deleted recipes will appear here."})]})]})}function TR({ingredient:t,index:e,onUpdate:n,onRemove:r,canRemove:i}){const[s,o]=te.useState(!1),[l,u]=te.useState([]),d=t.qty!==void 0?t.qty:"",f=t.unit!==void 0?t.unit:"",y=t.ingredient||"",_=t.amount!==void 0&&t.qty===void 0,R=N=>{if(n(e,"unit",N),N){const V=aR.filter(x=>x.toLowerCase().startsWith(N.toLowerCase())).slice(0,5);u(V),o(V.length>0)}else o(!1)},P=N=>{n(e,"unit",N),o(!1)};return p.jsxs("div",{style:m.ingredientRow,className:"ingredient-row",children:[p.jsx("input",{type:"text",value:_?t.amount:d,onChange:N=>n(e,_?"amount":"qty",N.target.value),placeholder:"1",style:m.qtyInput,className:"qty-input"}),p.jsxs("div",{style:m.unitInputWrapper,className:"unit-wrapper",children:[p.jsx("input",{type:"text",value:_?"":f,onChange:N=>R(N.target.value),onFocus:()=>{f&&R(f)},onBlur:()=>setTimeout(()=>o(!1),150),placeholder:"cup",style:m.unitInput,disabled:_,className:"unit-input"}),s&&l.length>0&&p.jsx("div",{style:m.unitSuggestions,children:l.map((N,V)=>p.jsx("button",{type:"button",style:m.unitSuggestion,onMouseDown:()=>P(N),children:N},V))})]}),p.jsx("input",{type:"text",value:y,onChange:N=>n(e,"ingredient",N.target.value),placeholder:"all-purpose flour",style:m.ingredientInput,className:"ingredient-input"}),p.jsx("button",{type:"button",onClick:r,style:m.removeBtn,disabled:!i,className:"remove-btn",children:""})]})}function IR({recipe:t,categories:e,onSave:n,onCancel:r,isProcessing:i,setIsProcessing:s,showNotification:o,uploadImage:l}){const[u,d]=te.useState("manual"),[f,y]=te.useState(t||lR),[_,R]=te.useState(null),[P,N]=te.useState(null),[V,x]=te.useState((t==null?void 0:t.imageUrl)||null),[w,C]=te.useState((t==null?void 0:t.handwrittenImageUrl)||null),[b,F]=te.useState(null),[$,T]=te.useState(null),[v,E]=te.useState(!1),[I,S]=te.useState(""),[k,A]=te.useState(""),[ke,it]=te.useState(!1),Pt=te.useRef(null),He=te.useRef(null),G=te.useRef(null),K=(U,J)=>{y(O=>({...O,[U]:J}))},q=(U,J,O)=>{y(B=>({...B,ingredients:B.ingredients.map((W,Z)=>Z===U?{...W,[J]:O}:W)}))},se=()=>{y(U=>({...U,ingredients:[...U.ingredients,{qty:"",unit:"",ingredient:""}]}))},le=U=>{f.ingredients.length>1&&y(J=>({...J,ingredients:J.ingredients.filter((O,B)=>B!==U)}))},oe=(U,J)=>{y(O=>({...O,instructions:O.instructions.map((B,W)=>W===U?J:B)}))},ae=()=>{y(U=>({...U,instructions:[...U.instructions,""]}))},Dt=U=>{f.instructions.length>1&&y(J=>({...J,instructions:J.instructions.filter((O,B)=>B!==U)}))},Et=U=>{const J=U.target.files[0];if(J){if(!J.type.startsWith("image/")){o("Please select an image file","error");return}x(URL.createObjectURL(J)),F(J)}},Nt=U=>{const J=U.target.files[0];if(J){if(!J.type.startsWith("image/")){o("Please select an image file","error");return}C(URL.createObjectURL(J)),T(J)}},Zi=()=>{x(null),F(null),K("imageUrl","")},es=()=>{C(null),T(null),K("handwrittenImageUrl","")},Ln=U=>{U.preventDefault(),it(!0)},On=U=>{U.preventDefault(),it(!1)},Tr=U=>{U.preventDefault(),it(!1);const J=U.dataTransfer.files[0];J&&jn(J)},jn=async U=>{const J=U.type==="application/pdf",O=U.type.startsWith("image/");if(!J&&!O){o("Please select an image or PDF file","error");return}s(!0),O?(R(URL.createObjectURL(U)),N(null)):(R(null),N(U.name));try{const B=await new Promise((pe,ve)=>{const me=new FileReader;me.onload=()=>pe(me.result.split(",")[1]),me.onerror=ve,me.readAsDataURL(U)}),Z=(await Wu(J?"scan-pdf":"scan-image",{imageData:B,imageType:U.type})).content[0].text.match(/\{[\s\S]*\}/);if(Z){const pe=JSON.parse(Z[0]);y(ve=>({...ve,...pe})),o("Recipe extracted! Review the details below."),d("manual")}}catch(B){console.error("Error:",B),o("Could not read recipe. Try entering it manually.","error")}finally{s(!1)}},Ir=async U=>{const J=U.target.files[0];J&&jn(J)},Mn=async()=>{const U=k.trim();if(!U){o("Please paste the recipe content from the website","error");return}s(!0);try{const O=(await Wu("extract-website",{content:U})).content[0].text.match(/\{[\s\S]*\}/);if(O){const B=JSON.parse(O[0]);y(W=>({...W,...B,authorIsFamily:!1})),o("Recipe imported! Review the details below."),d("manual")}}catch(J){console.error("Error:",J),o("Could not extract recipe. Try copying just the recipe text.","error")}finally{s(!1)}},Sr=async()=>{const U=I.trim();if(!U){o("Please enter a recipe URL","error");return}if(!U.startsWith("http://")&&!U.startsWith("https://")){o("Please enter a valid URL starting with http:// or https://","error");return}s(!0);try{const J=await Wu("fetch-url",{url:U});if(J.error){o(J.error,"error");return}const O=J.content[0].text.match(/\{[\s\S]*\}/);if(O){const B=JSON.parse(O[0]);y(W=>({...W,...B,authorIsFamily:!1})),o("Recipe imported! Review the details below."),d("manual")}}catch(J){console.error("Error:",J),o("Could not fetch recipe. Some sites block this - try pasting the content instead.","error")}finally{s(!1)}},ts=async U=>{if(U.preventDefault(),!f.title.trim()){o("Please enter a recipe title","error");return}E(!0);try{let J=f.imageUrl||"",O=f.handwrittenImageUrl||"";b&&(o("Uploading photo..."),J=await l(b,"recipes")),$&&(o("Uploading handwritten recipe..."),O=await l($,"handwritten"));const B={...f,imageUrl:J,handwrittenImageUrl:O,ingredients:Array.isArray(f.ingredients)?f.ingredients.filter(W=>W.amount||W.ingredient):[],instructions:Array.isArray(f.instructions)?f.instructions.filter(W=>W&&W.trim()):[],comments:f.comments||[],madeIt:f.madeIt||[]};await n(B)}catch(J){console.error("Submit error:",J),o("Error saving recipe: "+J.message,"error"),E(!1)}};return p.jsxs("div",{style:m.addPage,children:[p.jsxs("div",{style:m.addPageHeader,children:[p.jsx("h1",{style:m.addPageTitle,children:t?"Edit Recipe":"Add New Recipe"}),p.jsx("p",{style:m.addPageSubtitle,children:"Share a treasured family recipe"})]}),!t&&p.jsxs("div",{style:m.tabs,children:[p.jsx("button",{style:u==="manual"?m.tabActive:m.tab,onClick:()=>d("manual"),children:"Write it out"}),p.jsx("button",{style:u==="scan"?m.tabActive:m.tab,onClick:()=>d("scan"),children:"Scan file"}),p.jsx("button",{style:u==="website"?m.tabActive:m.tab,onClick:()=>d("website"),children:"From website or document"})]}),u==="scan"&&!t&&p.jsxs("div",{style:m.scanSection,children:[p.jsxs("div",{style:{...m.uploadZone,borderColor:ke?"#8a9a8e":"#d9d6d0",backgroundColor:ke?"#f0f5f1":"#faf9f7"},onClick:()=>{var U;return(U=Pt.current)==null?void 0:U.click()},onDragOver:Ln,onDragLeave:On,onDrop:Tr,children:[_?p.jsx("img",{src:_,alt:"Uploaded",style:m.uploadedImage}):P?p.jsxs("div",{style:m.pdfPreview,children:[p.jsx("div",{style:m.pdfIcon,children:"PDF"}),p.jsx("p",{style:m.pdfFileName,children:P})]}):p.jsxs(p.Fragment,{children:[p.jsx("div",{style:m.scanIcon,children:""}),p.jsx("h3",{style:m.scanTitle,children:"Scan a Recipe"}),p.jsxs("p",{style:m.scanText,children:["Drag & drop a photo or PDF here, or click to browse.",p.jsx("br",{}),"We'll convert it to text for you."]}),p.jsx("button",{type:"button",style:m.uploadButton,children:"Choose File"}),p.jsx("p",{style:m.fileTypes,children:"Supports: JPG, PNG, PDF"})]}),i&&p.jsxs("div",{style:m.processingOverlay,children:[p.jsx("div",{style:m.spinner}),p.jsx("p",{children:"Reading recipe..."})]})]}),p.jsx("input",{ref:Pt,type:"file",accept:"image/*,.pdf,application/pdf",onChange:Ir,style:{display:"none"}})]}),u==="website"&&!t&&p.jsx("div",{style:m.websiteSection,children:p.jsxs("div",{style:m.websiteBox,children:[p.jsx("div",{style:m.scanIcon,children:""}),p.jsx("h3",{style:m.scanTitle,children:"Import from Website"}),p.jsxs("p",{style:m.scanText,children:["Found a recipe online? Enter the URL and we'll grab it for you,",p.jsx("br",{}),"or paste the recipe content directly."]}),p.jsxs("div",{style:m.websiteInputGroup,children:[p.jsx("label",{style:m.label,children:"Option 1: Fetch from URL"}),p.jsxs("div",{style:m.urlFetchRow,children:[p.jsx("input",{type:"text",value:I,onChange:U=>S(U.target.value),placeholder:"https://www.allrecipes.com/recipe/...",style:m.urlInput}),p.jsx("button",{type:"button",onClick:Sr,style:m.fetchButton,disabled:i,children:i?"Fetching...":"Fetch"})]}),p.jsx("p",{style:m.websiteHint,children:"Works with most recipe sites. Some sites may block this."})]}),p.jsxs("div",{style:m.orDivider,children:[p.jsx("span",{style:m.orLine}),p.jsx("span",{style:m.orText,children:"or"}),p.jsx("span",{style:m.orLine})]}),p.jsxs("div",{style:m.websiteInputGroup,children:[p.jsx("label",{style:m.label,children:"Option 2: Paste Recipe Content"}),p.jsx("p",{style:m.websiteHint,children:"Copy the recipe from the website and paste it here"}),p.jsx("textarea",{value:k,onChange:U=>A(U.target.value),placeholder:"Paste the recipe content here...",style:m.websiteTextarea,rows:10}),p.jsx("button",{type:"button",onClick:Mn,style:m.uploadButton,disabled:i||!k.trim(),children:i?"Extracting...":"Extract Recipe"})]}),i&&p.jsxs("div",{style:m.processingOverlay,children:[p.jsx("div",{style:m.spinner}),p.jsx("p",{children:"Reading recipe..."})]})]})}),(u==="manual"||t)&&p.jsxs("form",{onSubmit:ts,style:m.form,children:[p.jsxs("div",{style:m.formSection,children:[p.jsx("h3",{style:m.formSectionTitle,children:"Basic Information"}),p.jsxs("div",{style:m.formRow,children:[p.jsxs("div",{style:m.formGroup,children:[p.jsx("label",{style:m.label,children:"Recipe Title"}),p.jsx("input",{type:"text",value:f.title,onChange:U=>K("title",U.target.value),placeholder:"Grandma's Apple Pie",style:m.input})]}),p.jsxs("div",{style:m.formGroup,children:[p.jsx("label",{style:m.label,children:"Category"}),p.jsxs("select",{value:f.category,onChange:U=>K("category",U.target.value),style:m.select,children:[p.jsx("option",{value:"",children:"Select one..."}),e.map(U=>p.jsx("option",{value:U.id,children:U.name},U.id))]})]})]}),p.jsxs("div",{style:m.formRow3,children:[p.jsxs("div",{style:m.formGroup,children:[p.jsx("label",{style:m.label,children:"Prep Time"}),p.jsx("input",{type:"text",value:f.prepTime,onChange:U=>K("prepTime",U.target.value),placeholder:"20 min",style:m.input})]}),p.jsxs("div",{style:m.formGroup,children:[p.jsx("label",{style:m.label,children:"Cook Time"}),p.jsx("input",{type:"text",value:f.cookTime,onChange:U=>K("cookTime",U.target.value),placeholder:"1 hour",style:m.input})]}),p.jsxs("div",{style:m.formGroup,children:[p.jsx("label",{style:m.label,children:"Servings"}),p.jsx("input",{type:"text",value:f.servings,onChange:U=>K("servings",U.target.value),placeholder:"6-8",style:m.input})]})]}),p.jsxs("div",{style:m.formRow,children:[p.jsxs("div",{style:m.formGroup,children:[p.jsx("label",{style:m.label,children:"Recipe from"}),p.jsx("input",{type:"text",value:f.author,onChange:U=>K("author",U.target.value),placeholder:"Grandma Bever, Mom, etc.",style:m.input})]}),p.jsxs("div",{style:m.formGroup,children:[p.jsx("label",{style:m.label,children:"Source Type"}),p.jsxs("div",{style:m.radioGroup,children:[p.jsxs("label",{style:m.radioLabel,children:[p.jsx("input",{type:"radio",name:"authorIsFamily",checked:f.authorIsFamily!==!1,onChange:()=>K("authorIsFamily",!0),style:m.radio}),p.jsx("span",{children:"Family Member"}),p.jsx("span",{style:m.radioHint,children:"(shows in filter)"})]}),p.jsxs("label",{style:m.radioLabel,children:[p.jsx("input",{type:"radio",name:"authorIsFamily",checked:f.authorIsFamily===!1,onChange:()=>K("authorIsFamily",!1),style:m.radio}),p.jsx("span",{children:"Website / Cookbook / Friend"}),p.jsx("span",{style:m.radioHint,children:"(not in filter)"})]})]})]})]})]}),p.jsxs("div",{style:m.formSection,children:[p.jsx("h3",{style:m.formSectionTitle,children:"Photos"}),p.jsxs("div",{style:m.photoGrid,children:[p.jsxs("div",{style:m.photoUploadArea,children:[p.jsx("label",{style:m.photoLabel,children:"Finished Dish"}),V?p.jsxs("div",{style:m.photoPreviewContainer,children:[p.jsx("img",{src:V,alt:"Recipe",style:m.photoPreview}),p.jsxs("div",{style:m.photoActions,children:[p.jsx("button",{type:"button",onClick:()=>{var U;return(U=He.current)==null?void 0:U.click()},style:m.photoChangeBtn,children:"Change"}),p.jsx("button",{type:"button",onClick:Zi,style:m.photoRemoveBtn,children:"Remove"})]})]}):p.jsxs("div",{style:m.photoDropzone,onClick:()=>{var U;return(U=He.current)==null?void 0:U.click()},children:[p.jsx("span",{style:m.photoIcon,children:""}),p.jsx("p",{style:m.photoText,children:"Add photo of the dish"})]}),p.jsx("input",{ref:He,type:"file",accept:"image/*",onChange:Et,style:{display:"none"}})]}),p.jsxs("div",{style:m.photoUploadArea,children:[p.jsx("label",{style:m.photoLabel,children:"Original Recipe Card"}),w?p.jsxs("div",{style:m.photoPreviewContainer,children:[p.jsx("img",{src:w,alt:"Handwritten",style:m.photoPreview}),p.jsxs("div",{style:m.photoActions,children:[p.jsx("button",{type:"button",onClick:()=>{var U;return(U=G.current)==null?void 0:U.click()},style:m.photoChangeBtn,children:"Change"}),p.jsx("button",{type:"button",onClick:es,style:m.photoRemoveBtn,children:"Remove"})]})]}):p.jsxs("div",{style:m.photoDropzone,onClick:()=>{var U;return(U=G.current)==null?void 0:U.click()},children:[p.jsx("span",{style:m.photoIcon,children:""}),p.jsx("p",{style:m.photoText,children:"Add handwritten recipe"})]}),p.jsx("input",{ref:G,type:"file",accept:"image/*",onChange:Nt,style:{display:"none"}})]})]})]}),p.jsxs("div",{style:m.formSection,children:[p.jsx("h3",{style:m.formSectionTitle,children:"The Story"}),p.jsx("p",{style:m.fieldHint,children:"Share the history or special memories behind this recipe"}),p.jsx("textarea",{value:f.story,onChange:U=>K("story",U.target.value),placeholder:"This recipe has been in our family since... Grandma used to make this every Christmas... The secret ingredient is...",style:m.storyInput,rows:4})]}),p.jsxs("div",{style:m.formSection,children:[p.jsx("h3",{style:m.formSectionTitle,children:"Ingredients"}),f.ingredients.map((U,J)=>p.jsx(TR,{ingredient:U,index:J,onUpdate:q,onRemove:()=>le(J),canRemove:f.ingredients.length>1},J)),p.jsx("button",{type:"button",onClick:se,style:m.addItemBtn,children:"+ Add ingredient"})]}),p.jsxs("div",{style:m.formSection,children:[p.jsx("h3",{style:m.formSectionTitle,children:"Instructions"}),f.instructions.map((U,J)=>p.jsxs("div",{style:m.instructionRow,children:[p.jsx("span",{style:m.stepNum,children:J+1}),p.jsx("textarea",{value:U,onChange:O=>oe(J,O.target.value),placeholder:"Describe this step...",style:m.instructionInput,rows:2}),p.jsx("button",{type:"button",onClick:()=>Dt(J),style:m.removeBtn,children:""})]},J)),p.jsx("button",{type:"button",onClick:ae,style:m.addItemBtn,children:"+ Add step"})]}),p.jsxs("div",{style:m.formSection,children:[p.jsx("h3",{style:m.formSectionTitle,children:"Tips & Notes"}),p.jsx("textarea",{value:f.notes,onChange:U=>K("notes",U.target.value),placeholder:"Any tips, variations, or substitutions...",style:m.notesInput,rows:3})]}),p.jsxs("div",{style:m.formActions,children:[p.jsx("button",{type:"button",onClick:r,style:m.cancelBtn,children:"Cancel"}),p.jsx("button",{type:"submit",style:m.saveBtn,disabled:v,children:v?"Saving...":"Save Recipe"})]})]})]})}function SR({recipe:t,categories:e,onEdit:n,onDelete:r,onBack:i,onAddComment:s,onDeleteComment:o,onShare:l,onMadeIt:u,isFavorite:d,onToggleFavorite:f,isFamily:y}){var He,G,K;const _=e.find(q=>q.id===t.category),[R,P]=te.useState(!1),[N,V]=te.useState(!1),[x,w]=te.useState({author:"",text:""}),[C,b]=te.useState(!1),[F,$]=te.useState(!1),[T,v]=te.useState(""),[E,I]=te.useState(1),[S,k]=te.useState(!1),A=()=>{x.text.trim()&&(x.author.trim()||(x.author="Anonymous"),s(x),w({author:"",text:""}),b(!1))},ke=()=>{u(T.trim()||"Someone"),v(""),$(!1)},it=q=>q?new Date(q).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"",Pt=(q,se=1)=>{if(q.qty!==void 0){const le=q.qty?parseFloat(q.qty)*se:"";return{amount:`${le?yR(le):""} ${q.unit||""}`.trim(),ingredient:q.ingredient||""}}return{amount:mR(q.amount,se),ingredient:q.ingredient||""}};return p.jsxs("div",{style:m.detailPage,children:[p.jsxs("div",{style:m.detailNav,className:"no-print",children:[p.jsx("button",{onClick:i,style:m.backBtn,children:" Back"}),p.jsxs("div",{style:m.detailActions,children:[p.jsx("button",{onClick:f,style:{...m.actionBtn,color:d?"#c75050":"#5a5a5a"},children:d?"":""}),p.jsx("button",{onClick:l,style:m.actionBtn,children:"Share"}),p.jsx("button",{onClick:()=>window.print(),style:m.actionBtn,children:"Print"}),y&&p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:n,style:m.actionBtn,children:"Edit"}),p.jsx("button",{onClick:r,style:m.deleteBtn,children:"Delete"})]})]})]}),p.jsxs("article",{style:m.recipeDetail,className:"print-recipe",children:[t.imageUrl&&!R&&p.jsx("div",{style:m.detailImageWrap,className:"print-image",children:p.jsx("img",{src:t.imageUrl,alt:t.title,style:m.detailImage,onError:()=>P(!0)})}),p.jsxs("div",{style:m.detailContent,children:[p.jsxs("header",{style:m.detailHeader,children:[_&&p.jsx("span",{style:m.detailCategory,children:_.name}),p.jsx("h1",{style:m.detailTitle,children:t.title}),t.author&&p.jsx("p",{style:m.detailAuthor,children:u0(t.author,t.authorIsFamily)}),p.jsxs("div",{style:m.detailMeta,children:[t.prepTime&&p.jsxs("span",{children:["Prep: ",t.prepTime]}),t.cookTime&&p.jsxs("span",{children:["Cook: ",t.cookTime]}),t.servings&&p.jsxs("span",{children:["Serves ",t.servings]})]}),y&&p.jsxs("div",{style:m.madeItSection,className:"no-print",children:[t.madeIt&&t.madeIt.length>0&&p.jsxs("p",{style:m.madeItList,children:[" Made by: ",t.madeIt.map(q=>q.name).join(", ")]}),F?p.jsxs("div",{style:m.madeItForm,children:[p.jsx("input",{type:"text",value:T,onChange:q=>v(q.target.value),placeholder:"Your name",style:m.madeItInput,autoFocus:!0}),p.jsx("button",{onClick:ke,style:m.madeItSubmit,children:"Add"}),p.jsx("button",{onClick:()=>$(!1),style:m.madeItCancel,children:""})]}):p.jsx("button",{onClick:()=>$(!0),style:m.madeItBtn,children:" I Made This!"})]}),!y&&t.madeIt&&t.madeIt.length>0&&p.jsx("div",{style:m.madeItSection,className:"no-print",children:p.jsxs("p",{style:m.madeItList,children:[" Made by: ",t.madeIt.map(q=>q.name).join(", ")]})})]}),t.story&&p.jsxs("section",{style:m.storyBox,children:[p.jsx("h3",{style:m.storyTitle,children:"The Story"}),p.jsx("p",{style:m.storyContent,children:t.story})]}),p.jsxs("div",{style:m.detailDivider,children:[p.jsx("span",{style:m.dividerLine}),p.jsx("span",{style:m.dividerIcon,children:""}),p.jsx("span",{style:m.dividerLine})]}),p.jsxs("div",{style:m.scalerRow,className:"no-print",children:[p.jsx("span",{style:m.scalerLabel,children:"Adjust servings:"}),p.jsxs("div",{style:m.scalerButtons,children:[p.jsx("button",{style:{...m.scalerBtn,...E===.5?m.scalerBtnActive:{}},onClick:()=>I(.5),children:""}),p.jsx("button",{style:{...m.scalerBtn,...E===1?m.scalerBtnActive:{}},onClick:()=>I(1),children:"1"}),p.jsx("button",{style:{...m.scalerBtn,...E===2?m.scalerBtnActive:{}},onClick:()=>I(2),children:"2"}),p.jsx("button",{style:{...m.scalerBtn,...E===3?m.scalerBtnActive:{}},onClick:()=>I(3),children:"3"})]})]}),p.jsxs("div",{style:m.detailBody,children:[p.jsxs("section",{style:m.ingredientsCol,children:[p.jsx("h2",{style:m.colTitle,children:"Ingredients"}),p.jsx("ul",{style:m.ingredientsList,children:(He=t.ingredients)==null?void 0:He.map((q,se)=>{const le=Pt(q,E);return p.jsxs("li",{style:m.ingredientItem,children:[p.jsx("strong",{children:le.amount})," ",le.ingredient]},se)})})]}),p.jsxs("section",{style:m.instructionsCol,children:[p.jsx("h2",{style:m.colTitle,children:"Instructions"}),p.jsx("ol",{style:m.instructionsList,children:(G=t.instructions)==null?void 0:G.map((q,se)=>p.jsx("li",{style:m.instructionItem,children:q},se))})]})]}),t.notes&&p.jsxs("section",{style:m.notesBox,children:[p.jsx("h3",{style:m.notesTitle,children:"Tips & Notes"}),p.jsx("p",{style:m.notesContent,children:t.notes})]}),t.handwrittenImageUrl&&!N&&p.jsxs("section",{style:m.handwrittenSection,className:"no-print",children:[p.jsx("h3",{style:m.handwrittenTitle,children:"Original Recipe Card"}),p.jsx("img",{src:t.handwrittenImageUrl,alt:"Original handwritten recipe",style:m.handwrittenThumb,onClick:()=>k(!0),onError:()=>V(!0)}),p.jsx("p",{style:m.handwrittenHint,children:"Click to enlarge"})]}),S&&p.jsx("div",{style:m.modal,onClick:()=>k(!1),children:p.jsxs("div",{style:m.modalContent,onClick:q=>q.stopPropagation(),children:[p.jsx("button",{style:m.modalClose,onClick:()=>k(!1),children:""}),p.jsx("img",{src:t.handwrittenImageUrl,alt:"Original handwritten recipe",style:m.modalImage})]})}),p.jsxs("section",{style:m.commentsSection,className:"no-print",children:[p.jsxs("div",{style:m.commentsSectionHeader,children:[p.jsxs("h3",{style:m.commentsTitle,children:["Family Notes & Reviews (",((K=t.comments)==null?void 0:K.length)||0,")"]}),!C&&p.jsx("button",{onClick:()=>b(!0),style:m.addCommentBtn,children:"+ Add Note"})]}),C&&p.jsxs("div",{style:m.commentForm,children:[p.jsx("input",{type:"text",value:x.author,onChange:q=>w(se=>({...se,author:q.target.value})),placeholder:"Your name",style:m.commentAuthorInput}),p.jsx("textarea",{value:x.text,onChange:q=>w(se=>({...se,text:q.target.value})),placeholder:"Share your experience with this recipe, any changes you made, or tips for others...",style:m.commentTextInput,rows:3}),p.jsxs("div",{style:m.commentFormActions,children:[p.jsx("button",{type:"button",onClick:()=>b(!1),style:m.cancelBtn,children:"Cancel"}),p.jsx("button",{type:"button",onClick:A,style:m.saveBtn,disabled:!x.text.trim(),children:"Add Note"})]})]}),t.comments&&t.comments.length>0?p.jsx("div",{style:m.commentsList,children:t.comments.map(q=>p.jsxs("div",{style:m.commentItem,children:[p.jsxs("div",{style:m.commentHeader,children:[p.jsx("span",{style:m.commentAuthor,children:q.author}),p.jsx("span",{style:m.commentDate,children:it(q.date)})]}),p.jsx("p",{style:m.commentText,children:q.text}),p.jsx("button",{onClick:()=>{confirm("Remove this note?")&&o(q.id)},style:m.deleteCommentBtn,children:"Remove"})]},q.id))}):!C&&p.jsx("p",{style:m.noComments,children:"No notes yet. Be the first to share your experience with this recipe!"})]})]})]})]})}const m={app:{minHeight:"100vh",backgroundColor:"#fdfcfa",fontFamily:"'Montserrat', -apple-system, BlinkMacSystemFont, sans-serif",color:"#2d2d2d"},loadingScreen:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f5f3ef"},loadingContent:{textAlign:"center"},loadingLogo:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:48,color:"#8a9a8e",letterSpacing:4,marginBottom:16},loadingText:{color:"#5a5a5a",fontSize:14,letterSpacing:2},notification:{position:"fixed",top:20,right:20,padding:"14px 28px",borderRadius:2,color:"white",fontSize:13,fontWeight:500,letterSpacing:.5,zIndex:1e3,boxShadow:"0 4px 20px rgba(0,0,0,0.15)"},header:{backgroundColor:"#fdfcfa",borderBottom:"1px solid #e8e6e2",padding:"20px 40px"},headerInner:{maxWidth:1200,margin:"0 auto",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:16},logo:{display:"flex",alignItems:"center",gap:16,cursor:"pointer"},logoMark:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:28,color:"#8a9a8e",letterSpacing:3},logoText:{display:"flex",flexDirection:"column"},logoTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:20,fontWeight:600,color:"#2d2d2d",lineHeight:1.1},logoSubtitle:{fontSize:10,letterSpacing:3,color:"#8a9a8e"},nav:{display:"flex",gap:24},navLink:{background:"none",border:"none",fontSize:13,fontWeight:500,color:"#5a5a5a",cursor:"pointer",letterSpacing:1,textTransform:"uppercase",padding:"8px 0",borderBottom:"2px solid transparent"},navLinkActive:{background:"none",border:"none",fontSize:13,fontWeight:500,color:"#2d2d2d",cursor:"pointer",letterSpacing:1,textTransform:"uppercase",padding:"8px 0",borderBottom:"2px solid #8a9a8e"},mobileMenuBtn:{display:"none",background:"none",border:"1px solid #d9d6d0",borderRadius:4,padding:"8px 12px",fontSize:18,cursor:"pointer",color:"#5a5a5a"},mobileNav:{display:"none",flexDirection:"column",gap:0,padding:"16px 0",borderTop:"1px solid #e8e6e2",marginTop:16},mobileNavLink:{background:"none",border:"none",padding:"12px 16px",fontSize:14,color:"#2d2d2d",cursor:"pointer",textAlign:"left",borderBottom:"1px solid #f0ede8"},hero:{backgroundColor:"#f5f3ef",padding:"60px 40px",textAlign:"center"},heroContent:{maxWidth:700,margin:"0 auto"},heroWelcome:{fontSize:13,letterSpacing:3,textTransform:"uppercase",color:"#8a9a8e",marginBottom:12},heroTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:48,fontWeight:400,color:"#2d2d2d",marginBottom:24,lineHeight:1.1},heroDivider:{display:"flex",alignItems:"center",justifyContent:"center",gap:16,marginBottom:24},heroDividerLine:{width:60,height:1,backgroundColor:"#c9c4bc"},heroDividerIcon:{color:"#8a9a8e",fontSize:12},heroSubtitle:{fontSize:15,color:"#5a5a5a",lineHeight:1.8,marginBottom:32},searchContainer:{maxWidth:400,margin:"0 auto",position:"relative"},searchInput:{width:"100%",padding:"16px 48px 16px 24px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,backgroundColor:"white",outline:"none",textAlign:"center",letterSpacing:.5,color:"#2d2d2d"},clearSearch:{position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",background:"none",border:"none",fontSize:20,color:"#7a7a7a",cursor:"pointer",padding:4},filterRow:{marginTop:24,display:"flex",alignItems:"center",justifyContent:"center",gap:16,flexWrap:"wrap"},filterGroup:{display:"flex",alignItems:"center",gap:8},filterLabel:{fontSize:13,color:"#5a5a5a"},filterSelect:{padding:"10px 16px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,backgroundColor:"white",outline:"none",cursor:"pointer",minWidth:130,color:"#2d2d2d"},favoritesToggle:{padding:"10px 16px",fontSize:13,border:"1px solid #d9d6d0",borderRadius:2,cursor:"pointer",fontWeight:500},categorySection:{padding:"24px 40px",borderBottom:"1px solid #e8e6e2",backgroundColor:"#fdfcfa",overflowX:"auto"},categoryPills:{display:"flex",justifyContent:"center",flexWrap:"wrap",gap:10,maxWidth:1e3,margin:"0 auto"},categoryPill:{padding:"8px 16px",background:"transparent",border:"1px solid #d9d6d0",borderRadius:2,fontSize:11,fontWeight:500,color:"#5a5a5a",cursor:"pointer",letterSpacing:1,textTransform:"uppercase",whiteSpace:"nowrap"},categoryPillActive:{padding:"8px 16px",background:"#5c6d5e",border:"1px solid #5c6d5e",borderRadius:2,fontSize:11,fontWeight:500,color:"white",cursor:"pointer",letterSpacing:1,textTransform:"uppercase",whiteSpace:"nowrap"},recipeSection:{padding:"48px 40px",maxWidth:1200,margin:"0 auto"},sectionHeader:{display:"flex",justifyContent:"space-between",alignItems:"baseline",marginBottom:32,paddingBottom:16,borderBottom:"1px solid #e8e6e2",flexWrap:"wrap",gap:8},sectionTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:28,fontWeight:400,color:"#2d2d2d"},recipeCount:{fontSize:13,color:"#7a7a7a",letterSpacing:.5},recipeGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:32},recipeCard:{background:"white",border:"1px solid #e8e6e2",borderRadius:2,overflow:"hidden",cursor:"pointer",textAlign:"left",transition:"box-shadow 0.2s"},cardImageContainer:{height:200,overflow:"hidden",backgroundColor:"#f5f3ef",position:"relative"},cardImage:{width:"100%",height:"100%",objectFit:"cover"},cardImagePlaceholder:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f5f3ef"},placeholderIcon:{fontSize:32,color:"#c9c4bc"},favoriteBtn:{position:"absolute",top:12,right:12,background:"rgba(0,0,0,0.3)",border:"none",borderRadius:"50%",width:36,height:36,fontSize:18,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},cardContent:{padding:20},cardCategory:{fontSize:10,letterSpacing:2,textTransform:"uppercase",color:"#8a9a8e",marginBottom:6,display:"block"},cardTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:20,fontWeight:400,color:"#2d2d2d",marginBottom:6,lineHeight:1.3},cardAuthor:{fontSize:12,color:"#6a6a6a",fontStyle:"italic",marginBottom:10},cardMeta:{fontSize:11,color:"#6a6a6a",display:"flex",alignItems:"center",flexWrap:"wrap"},cardMetaDot:{margin:"0 6px"},emptyState:{textAlign:"center",padding:"60px 20px"},emptyIcon:{fontSize:32,color:"#c9c4bc",marginBottom:24},emptyTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:28,color:"#2d2d2d",marginBottom:12},emptyText:{color:"#5a5a5a",marginBottom:32,fontSize:15},emptyButton:{padding:"14px 32px",background:"#5c6d5e",color:"white",border:"none",borderRadius:2,fontSize:12,fontWeight:500,letterSpacing:1,textTransform:"uppercase",cursor:"pointer"},footer:{backgroundColor:"#f5f3ef",padding:"48px 40px",textAlign:"center",borderTop:"1px solid #e8e6e2"},footerContent:{maxWidth:400,margin:"0 auto"},footerLogo:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:32,color:"#8a9a8e",letterSpacing:4,marginBottom:16,display:"block"},footerText:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:20,color:"#2d2d2d",marginBottom:8},footerTagline:{fontSize:13,color:"#6a6a6a",fontStyle:"italic"},addPage:{maxWidth:700,margin:"0 auto",padding:"48px 24px"},addPageHeader:{textAlign:"center",marginBottom:40},addPageTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:36,color:"#2d2d2d",marginBottom:8},addPageSubtitle:{color:"#6a6a6a",fontSize:14},tabs:{display:"flex",marginBottom:32,border:"1px solid #d9d6d0",borderRadius:2,overflow:"hidden"},tab:{flex:1,padding:"14px 16px",background:"white",border:"none",fontSize:12,fontWeight:500,color:"#5a5a5a",cursor:"pointer",letterSpacing:.5},tabActive:{flex:1,padding:"14px 16px",background:"#5c6d5e",border:"none",fontSize:12,fontWeight:500,color:"white",cursor:"pointer",letterSpacing:.5},scanSection:{marginBottom:32},uploadZone:{border:"2px dashed #d9d6d0",borderRadius:2,padding:"60px 40px",textAlign:"center",cursor:"pointer",backgroundColor:"#faf9f7",position:"relative",transition:"all 0.2s"},scanIcon:{fontSize:32,color:"#8a9a8e",marginBottom:16},scanTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:24,color:"#2d2d2d",marginBottom:12},scanText:{color:"#5a5a5a",fontSize:14,marginBottom:24,lineHeight:1.7},uploadButton:{padding:"14px 28px",background:"#5c6d5e",color:"white",border:"none",borderRadius:2,fontSize:12,fontWeight:500,letterSpacing:1,textTransform:"uppercase",cursor:"pointer"},uploadedImage:{maxWidth:"100%",maxHeight:300,borderRadius:2},pdfPreview:{display:"flex",flexDirection:"column",alignItems:"center",gap:12},pdfIcon:{width:80,height:100,background:"#e8e6e2",borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",fontSize:18,fontWeight:600,color:"#5a5a5a",letterSpacing:1},pdfFileName:{fontSize:14,color:"#4a4a4a",fontWeight:500},fileTypes:{fontSize:12,color:"#7a7a7a",marginTop:16},processingOverlay:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(253,252,250,0.95)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",borderRadius:2},spinner:{width:40,height:40,border:"3px solid #e8e6e2",borderTopColor:"#8a9a8e",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:16},websiteSection:{marginBottom:32},websiteBox:{border:"1px solid #d9d6d0",borderRadius:2,padding:40,backgroundColor:"#faf9f7",position:"relative",textAlign:"center"},websiteInputGroup:{marginTop:24,textAlign:"left"},websiteHint:{fontSize:12,color:"#6a6a6a",marginBottom:8,fontStyle:"italic"},websiteTextarea:{width:"100%",padding:"14px 16px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",fontFamily:"inherit",resize:"vertical",backgroundColor:"white",marginBottom:16,color:"#2d2d2d"},urlFetchRow:{display:"flex",gap:12,marginBottom:8},urlInput:{flex:1,padding:"14px 16px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",fontFamily:"inherit",color:"#2d2d2d"},fetchButton:{padding:"14px 24px",background:"#5c6d5e",color:"white",border:"none",borderRadius:2,fontSize:12,fontWeight:500,letterSpacing:1,textTransform:"uppercase",cursor:"pointer",whiteSpace:"nowrap"},orDivider:{display:"flex",alignItems:"center",justifyContent:"center",gap:16,margin:"32px 0"},orLine:{flex:1,height:1,backgroundColor:"#d9d6d0"},orText:{fontSize:12,color:"#7a7a7a",textTransform:"uppercase",letterSpacing:2},form:{background:"white",border:"1px solid #e8e6e2",padding:40},formSection:{marginBottom:40},formSectionTitle:{fontSize:11,fontWeight:600,letterSpacing:2,textTransform:"uppercase",color:"#8a9a8e",marginBottom:20,paddingBottom:12,borderBottom:"1px solid #e8e6e2"},fieldHint:{fontSize:13,color:"#6a6a6a",marginBottom:12,fontStyle:"italic"},formRow:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:20,marginBottom:20},formRow3:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:20,marginBottom:20},formGroup:{marginBottom:20},label:{display:"block",fontSize:12,fontWeight:500,color:"#4a4a4a",marginBottom:8,letterSpacing:.5},input:{width:"100%",padding:"14px 16px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",fontFamily:"inherit",color:"#2d2d2d"},select:{width:"100%",padding:"14px 16px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",background:"white",cursor:"pointer",fontFamily:"inherit",color:"#2d2d2d"},radioGroup:{display:"flex",flexDirection:"column",gap:10,marginTop:8},radioLabel:{display:"flex",alignItems:"center",gap:8,fontSize:14,color:"#3d3d3d",cursor:"pointer"},radio:{accentColor:"#5c6d5e"},radioHint:{fontSize:11,color:"#8a8a8a",marginLeft:4},photoGrid:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:20},photoUploadArea:{},photoLabel:{display:"block",fontSize:12,fontWeight:500,color:"#4a4a4a",marginBottom:10},photoPreviewContainer:{position:"relative"},photoPreview:{width:"100%",height:180,objectFit:"cover",borderRadius:2},photoActions:{position:"absolute",bottom:12,left:12,display:"flex",gap:8},photoChangeBtn:{padding:"8px 16px",background:"white",border:"none",borderRadius:2,fontSize:12,fontWeight:500,cursor:"pointer"},photoRemoveBtn:{padding:"8px 16px",background:"white",border:"none",borderRadius:2,fontSize:12,fontWeight:500,cursor:"pointer",color:"#9b6b5b"},photoDropzone:{border:"2px dashed #d9d6d0",borderRadius:2,padding:"30px 20px",textAlign:"center",cursor:"pointer",height:180,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},photoIcon:{fontSize:28,display:"block",marginBottom:8},photoText:{fontSize:12,color:"#6a6a6a"},storyInput:{width:"100%",padding:"14px 16px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",fontFamily:"inherit",resize:"vertical",lineHeight:1.7,color:"#2d2d2d"},ingredientRow:{display:"flex",gap:12,marginBottom:12},ingredientInput:{flex:1,padding:"12px 14px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",fontFamily:"inherit",color:"#2d2d2d"},removeBtn:{width:40,height:40,background:"transparent",border:"1px solid #d9d6d0",borderRadius:2,cursor:"pointer",fontSize:18,color:"#7a7a7a",display:"flex",alignItems:"center",justifyContent:"center"},addItemBtn:{padding:"12px 20px",background:"transparent",border:"1px solid #d9d6d0",borderRadius:2,fontSize:13,color:"#5a5a5a",cursor:"pointer",fontFamily:"inherit"},instructionRow:{display:"flex",gap:12,marginBottom:12,alignItems:"flex-start"},stepNum:{width:32,height:32,background:"#f5f3ef",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:13,fontWeight:500,color:"#5a5a5a",flexShrink:0,marginTop:4},instructionInput:{flex:1,padding:"12px 14px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",fontFamily:"inherit",resize:"vertical",color:"#2d2d2d"},notesInput:{width:"100%",padding:"14px 16px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",fontFamily:"inherit",resize:"vertical",color:"#2d2d2d"},formActions:{display:"flex",justifyContent:"flex-end",gap:12,paddingTop:24,borderTop:"1px solid #e8e6e2",marginTop:20},cancelBtn:{padding:"14px 28px",background:"transparent",border:"1px solid #d9d6d0",borderRadius:2,fontSize:12,fontWeight:500,letterSpacing:1,textTransform:"uppercase",cursor:"pointer",color:"#5a5a5a"},saveBtn:{padding:"14px 32px",background:"#5c6d5e",border:"none",borderRadius:2,fontSize:12,fontWeight:500,letterSpacing:1,textTransform:"uppercase",cursor:"pointer",color:"white"},detailPage:{maxWidth:900,margin:"0 auto",padding:"40px 24px"},detailNav:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:32,flexWrap:"wrap",gap:12},backBtn:{padding:"10px 20px",background:"transparent",border:"1px solid #d9d6d0",borderRadius:2,fontSize:13,color:"#5a5a5a",cursor:"pointer"},detailActions:{display:"flex",gap:8,flexWrap:"wrap"},actionBtn:{padding:"10px 16px",background:"white",border:"1px solid #d9d6d0",borderRadius:2,fontSize:12,color:"#5a5a5a",cursor:"pointer",letterSpacing:.5},deleteBtn:{padding:"10px 16px",background:"white",border:"1px solid #c9a89a",borderRadius:2,fontSize:12,color:"#9b6b5b",cursor:"pointer",letterSpacing:.5},recipeDetail:{background:"white",border:"1px solid #e8e6e2",overflow:"hidden"},detailImageWrap:{height:400,overflow:"hidden"},detailImage:{width:"100%",height:"100%",objectFit:"cover"},detailContent:{padding:48},detailHeader:{textAlign:"center",marginBottom:32},detailCategory:{fontSize:11,letterSpacing:2,textTransform:"uppercase",color:"#8a9a8e",marginBottom:12,display:"block"},detailTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:42,fontWeight:400,color:"#2d2d2d",marginBottom:12,lineHeight:1.2},detailAuthor:{fontSize:15,color:"#6a6a6a",fontStyle:"italic",marginBottom:24},detailMeta:{display:"flex",justifyContent:"center",gap:32,fontSize:13,color:"#5a5a5a",flexWrap:"wrap"},madeItSection:{marginTop:24,paddingTop:20,borderTop:"1px solid #f0ede8"},madeItList:{fontSize:13,color:"#5c6d5e",marginBottom:12,fontWeight:500},madeItBtn:{padding:"10px 20px",background:"#f5f3ef",border:"1px solid #d9d6d0",borderRadius:2,fontSize:13,color:"#5c6d5e",cursor:"pointer",fontWeight:500},madeItForm:{display:"flex",gap:8,alignItems:"center",justifyContent:"center"},madeItInput:{padding:"10px 14px",border:"1px solid #d9d6d0",borderRadius:2,fontSize:14,width:150,outline:"none"},madeItSubmit:{padding:"10px 16px",background:"#5c6d5e",color:"white",border:"none",borderRadius:2,fontSize:12,cursor:"pointer"},madeItCancel:{padding:"10px 12px",background:"transparent",border:"1px solid #d9d6d0",borderRadius:2,fontSize:14,cursor:"pointer",color:"#7a7a7a"},storyBox:{padding:28,background:"#faf9f7",borderLeft:"3px solid #c9b896",marginBottom:24},storyTitle:{fontSize:11,fontWeight:600,letterSpacing:2,textTransform:"uppercase",color:"#a89968",marginBottom:12},storyContent:{fontSize:15,color:"#4a4a4a",lineHeight:1.8,fontStyle:"italic"},detailDivider:{display:"flex",alignItems:"center",justifyContent:"center",gap:16,margin:"32px 0"},dividerLine:{width:60,height:1,backgroundColor:"#e8e6e2"},dividerIcon:{color:"#c9c4bc",fontSize:12},scalerRow:{display:"flex",alignItems:"center",justifyContent:"center",gap:12,marginBottom:24,flexWrap:"wrap"},scalerLabel:{fontSize:13,color:"#5a5a5a"},scalerButtons:{display:"flex",gap:6},scalerBtn:{padding:"8px 14px",background:"white",border:"1px solid #d9d6d0",borderRadius:2,fontSize:13,color:"#5a5a5a",cursor:"pointer"},scalerBtnActive:{background:"#5c6d5e",borderColor:"#5c6d5e",color:"white"},detailBody:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:48},ingredientsCol:{},instructionsCol:{},colTitle:{fontSize:11,fontWeight:600,letterSpacing:2,textTransform:"uppercase",color:"#8a9a8e",marginBottom:20,paddingBottom:12,borderBottom:"1px solid #e8e6e2"},ingredientsList:{listStyle:"none"},ingredientItem:{padding:"10px 0",borderBottom:"1px dotted #e8e6e2",fontSize:14,color:"#3d3d3d"},instructionsList:{paddingLeft:20},instructionItem:{padding:"12px 0",fontSize:14,color:"#3d3d3d",lineHeight:1.8},notesBox:{marginTop:40,padding:28,background:"#f9f8f6",borderLeft:"3px solid #8a9a8e"},notesTitle:{fontSize:11,fontWeight:600,letterSpacing:2,textTransform:"uppercase",color:"#8a9a8e",marginBottom:12},notesContent:{fontSize:14,color:"#4a4a4a",lineHeight:1.8,fontStyle:"italic"},handwrittenSection:{marginTop:40,textAlign:"center"},handwrittenTitle:{fontSize:11,fontWeight:600,letterSpacing:2,textTransform:"uppercase",color:"#a89968",marginBottom:16},handwrittenThumb:{maxWidth:300,maxHeight:200,objectFit:"cover",borderRadius:4,border:"1px solid #e8e6e2",cursor:"pointer",transition:"transform 0.2s"},handwrittenHint:{fontSize:11,color:"#8a8a8a",marginTop:8},modal:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:20},modalContent:{position:"relative",maxWidth:"90vw",maxHeight:"90vh"},modalClose:{position:"absolute",top:-40,right:0,background:"none",border:"none",color:"white",fontSize:24,cursor:"pointer"},modalImage:{maxWidth:"100%",maxHeight:"85vh",objectFit:"contain",borderRadius:4},commentsSection:{marginTop:48,paddingTop:32,borderTop:"1px solid #e8e6e2"},commentsSectionHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24,flexWrap:"wrap",gap:12},commentsTitle:{fontSize:11,fontWeight:600,letterSpacing:2,textTransform:"uppercase",color:"#8a9a8e"},addCommentBtn:{padding:"10px 20px",background:"transparent",border:"1px solid #8a9a8e",borderRadius:2,fontSize:12,fontWeight:500,color:"#5c6d5e",cursor:"pointer",letterSpacing:.5},commentForm:{background:"#f9f8f6",padding:24,marginBottom:24,borderRadius:2},commentAuthorInput:{width:"100%",maxWidth:300,padding:"12px 16px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",fontFamily:"inherit",marginBottom:12,color:"#2d2d2d"},commentTextInput:{width:"100%",padding:"12px 16px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",fontFamily:"inherit",resize:"vertical",marginBottom:16,color:"#2d2d2d"},commentFormActions:{display:"flex",justifyContent:"flex-end",gap:12},commentsList:{},commentItem:{padding:"20px 0",borderBottom:"1px solid #e8e6e2",position:"relative"},commentHeader:{display:"flex",alignItems:"baseline",gap:12,marginBottom:8},commentAuthor:{fontWeight:600,fontSize:14,color:"#2d2d2d"},commentDate:{fontSize:12,color:"#7a7a7a"},commentText:{fontSize:14,color:"#4a4a4a",lineHeight:1.7},deleteCommentBtn:{position:"absolute",top:20,right:0,background:"none",border:"none",fontSize:12,color:"#c9a89a",cursor:"pointer"},noComments:{fontSize:14,color:"#7a7a7a",fontStyle:"italic",textAlign:"center",padding:"24px 0"},familyLoginModal:{background:"white",padding:40,borderRadius:4,maxWidth:400,width:"90%",textAlign:"center",position:"relative"},familyLoginTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:28,color:"#2d2d2d",marginBottom:12},familyLoginText:{fontSize:14,color:"#6a6a6a",marginBottom:24},familyCodeInput:{width:"100%",padding:"14px 16px",fontSize:16,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",textAlign:"center",marginBottom:16},familyLoginBtn:{width:"100%",padding:"14px 32px",background:"#5c6d5e",color:"white",border:"none",borderRadius:2,fontSize:14,fontWeight:500,cursor:"pointer"},familyBtn:{background:"none",border:"1px solid #8a9a8e",padding:"8px 16px",fontSize:12,color:"#5c6d5e",cursor:"pointer",borderRadius:2,fontWeight:500,letterSpacing:.5},adminToolBtn:{padding:"12px 24px",background:"#5c6d5e",color:"white",border:"none",borderRadius:2,fontSize:12,cursor:"pointer"},trashPage:{maxWidth:800,margin:"0 auto",padding:"40px 24px"},trashHeader:{marginBottom:32},trashTitle:{fontFamily:"'Cormorant Garamond', Georgia, serif",fontSize:36,color:"#2d2d2d",marginBottom:8,marginTop:24},trashSubtitle:{fontSize:14,color:"#7a7a7a"},trashActions:{marginBottom:32,padding:20,background:"#faf5f3",borderRadius:4,border:"1px solid #e8d8d0"},emptyTrashBtn:{padding:"12px 24px",background:"#9b6b5b",color:"white",border:"none",borderRadius:2,fontSize:12,fontWeight:500,cursor:"pointer",marginBottom:12},trashWarning:{fontSize:12,color:"#9b6b5b",margin:0},trashList:{},trashItem:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px 0",borderBottom:"1px solid #e8e6e2",flexWrap:"wrap",gap:16},trashItemInfo:{flex:1,minWidth:200},trashItemTitle:{fontSize:16,fontWeight:500,color:"#2d2d2d",marginBottom:4},trashItemMeta:{fontSize:12,color:"#7a7a7a",margin:0},trashItemActions:{display:"flex",gap:8},restoreBtn:{padding:"8px 16px",background:"#5c6d5e",color:"white",border:"none",borderRadius:2,fontSize:12,cursor:"pointer"},permanentDeleteBtn:{padding:"8px 16px",background:"transparent",color:"#9b6b5b",border:"1px solid #c9a89a",borderRadius:2,fontSize:12,cursor:"pointer"},emptyTrash:{textAlign:"center",padding:"60px 20px"},qtyInput:{width:60,padding:"12px 10px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none",textAlign:"center"},unitInputWrapper:{position:"relative",width:80},unitInput:{width:"100%",padding:"12px 10px",fontSize:14,border:"1px solid #d9d6d0",borderRadius:2,outline:"none"},unitSuggestions:{position:"absolute",top:"100%",left:0,right:0,background:"white",border:"1px solid #d9d6d0",borderTop:"none",borderRadius:"0 0 2px 2px",zIndex:10,boxShadow:"0 4px 8px rgba(0,0,0,0.1)"},unitSuggestion:{display:"block",width:"100%",padding:"8px 10px",background:"white",border:"none",textAlign:"left",fontSize:13,cursor:"pointer",color:"#4a4a4a"}};if(typeof window<"u"){const t=document.createElement("style");t.textContent=`
    /* Animations */
    @keyframes spin { to { transform: rotate(360deg); } }
    
    /* Mobile menu visibility */
    @media (min-width: 769px) {
      .mobile-menu-btn { display: none !important; }
      .mobile-nav { display: none !important; }
      .desktop-nav { display: flex !important; }
    }
    
    @media (max-width: 768px) {
      .mobile-menu-btn { display: block !important; }
      .mobile-nav { display: flex !important; }
      .desktop-nav { display: none !important; }
    }
    
    /* Mobile Styles */
    @media (max-width: 768px) {
      header > div {
        padding: 16px 20px !important;
      }
      
      section[style*="hero"] {
        padding: 40px 20px !important;
      }
      
      section[style*="hero"] h1 {
        font-size: 32px !important;
      }
      
      section[style*="categorySection"] {
        padding: 16px 12px !important;
      }
      
      section[style*="categorySection"] > div {
        justify-content: flex-start !important;
        flex-wrap: nowrap !important;
        overflow-x: auto !important;
        -webkit-overflow-scrolling: touch;
        padding-bottom: 8px;
      }
      
      section[style*="recipeSection"] {
        padding: 24px 16px !important;
      }
      
      /* Single column on mobile */
      div[style*="recipeGrid"] {
        grid-template-columns: 1fr !important;
        gap: 20px !important;
      }
      
      div[style*="formRow"], div[style*="formRow3"] {
        grid-template-columns: 1fr !important;
      }
      
      div[style*="photoGrid"] {
        grid-template-columns: 1fr !important;
      }
      
      div[style*="detailBody"] {
        grid-template-columns: 1fr !important;
        gap: 32px !important;
      }
      
      div[style*="detailContent"] {
        padding: 24px 16px !important;
      }
      
      h1[style*="detailTitle"] {
        font-size: 28px !important;
      }
      
      div[style*="detailImageWrap"] {
        height: 250px !important;
      }
      
      form[style*="form"] {
        padding: 24px 16px !important;
      }
      
      div[style*="addPage"] {
        padding: 24px 16px !important;
      }
      
      footer {
        padding: 32px 20px !important;
      }
      
      /* Ingredient row - stack on mobile */
      .ingredient-row {
        flex-wrap: wrap !important;
        gap: 8px !important;
      }
      
      .qty-input {
        width: 55px !important;
        min-width: 55px !important;
        flex: 0 0 55px !important;
      }
      
      .unit-wrapper {
        width: 70px !important;
        flex: 0 0 70px !important;
      }
      
      .ingredient-input {
        flex: 1 1 calc(100% - 160px) !important;
        min-width: 120px !important;
      }
      
      .remove-btn {
        flex: 0 0 30px !important;
      }
      
      /* Legacy amount input */
      input[style*="amountInput"] {
        width: 80px !important;
        flex-shrink: 0;
      }
      
      div[style*="filterRow"] {
        flex-direction: column;
        gap: 12px !important;
      }
      
      div[style*="detailActions"] {
        width: 100%;
        justify-content: center;
      }
    }
    
    /* Print Styles */
    @media print {
      body {
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
      }
      
      .no-print {
        display: none !important;
      }
      
      .print-recipe {
        border: none !important;
        box-shadow: none !important;
        max-width: 100% !important;
      }
      
      .print-image {
        height: 200px !important;
        page-break-inside: avoid;
      }
      
      div[style*="detailPage"] {
        padding: 0 !important;
        max-width: 100% !important;
      }
      
      div[style*="detailContent"] {
        padding: 20px !important;
      }
      
      div[style*="detailBody"] {
        display: block !important;
      }
      
      section[style*="ingredientsCol"] {
        margin-bottom: 24px;
        page-break-inside: avoid;
      }
      
      section[style*="instructionsCol"] {
        page-break-inside: avoid;
      }
      
      h1[style*="detailTitle"] {
        font-size: 24px !important;
        margin-bottom: 8px !important;
      }
      
      div[style*="detailMeta"] {
        margin-bottom: 16px;
      }
      
      section[style*="notesBox"], section[style*="storyBox"] {
        margin-top: 24px !important;
        padding: 16px !important;
        page-break-inside: avoid;
      }
      
      li[style*="ingredientItem"] {
        padding: 4px 0 !important;
        font-size: 12px !important;
      }
      
      li[style*="instructionItem"] {
        padding: 6px 0 !important;
        font-size: 12px !important;
        line-height: 1.5 !important;
      }
      
      h2[style*="colTitle"] {
        font-size: 10px !important;
        margin-bottom: 12px !important;
        padding-bottom: 8px !important;
      }
      
      /* Hide divider on print */
      div[style*="detailDivider"] {
        margin: 16px 0 !important;
      }
      
      /* Ensure single page fit */
      @page {
        margin: 0.5in;
        size: letter;
      }
    }
  `,document.head.appendChild(t)}qu.createRoot(document.getElementById("root")).render(p.jsx(Y0.StrictMode,{children:p.jsx(vR,{})}));
